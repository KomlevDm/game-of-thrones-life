(self.webpackChunkgame_of_thrones=self.webpackChunkgame_of_thrones||[]).push([[179],{4132:(Mt,ke,F)=>{"use strict";F.d(ke,{O:()=>D});var w=F(4650);let D=(()=>{class ue{static \u0275fac=function(ee){return new(ee||ue)};static \u0275cmp=w.Xpm({type:ue,selectors:[["spinner"]],standalone:!0,features:[w.jDz],decls:3,vars:0,consts:[[1,"inner","one"],[1,"inner","two"],[1,"inner","three"]],template:function(ee,ve){1&ee&&w._UZ(0,"div",0)(1,"div",1)(2,"div",2)},encapsulation:2,changeDetection:0})}return ue})()},5548:(Mt,ke,F)=>{"use strict";F.d(ke,{U:()=>ve});var w=F(7340),D=F(6895),ue=F(4843),he=F(4132),ae=F(4650);function ee(ce,Ce){1&ce&&ae._UZ(0,"spinner")}let ve=(()=>{class ce{isUseSpinner=!0;isShowSpinner=!1;routerOutlet;get routerOutletActivated(){return this.routerOutlet.isActivated&&this.routerOutlet.activatedRoute}routeAnimationStart(){this.isShowSpinner=!0}routeAnimationEnd(){this.isShowSpinner=!1}static \u0275fac=function(Pe){return new(Pe||ce)};static \u0275cmp=ae.Xpm({type:ce,selectors:[["wrap-router-outlet"]],viewQuery:function(Pe,Ae){if(1&Pe&&ae.Gf(ue.lC,7),2&Pe){let it;ae.iGM(it=ae.CRH())&&(Ae.routerOutlet=it.first)}},hostVars:1,hostBindings:function(Pe,Ae){1&Pe&&ae.WFA("@routeAnimation.start",function(){return Ae.routeAnimationStart()})("@routeAnimation.done",function(){return Ae.routeAnimationEnd()}),2&Pe&&ae.d8E("@routeAnimation",Ae.routerOutletActivated)},inputs:{isUseSpinner:"isUseSpinner"},standalone:!0,features:[ae.jDz],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(Pe,Ae){1&Pe&&(ae.YNc(0,ee,1,0,"spinner",0),ae._UZ(1,"router-outlet")),2&Pe&&ae.Q6J("ngIf",Ae.isUseSpinner&&Ae.isShowSpinner)},dependencies:[D.O5,ue.Bz,ue.lC,he.O],styles:["[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}"],data:{animation:[(0,w.X$)("routeAnimation",[(0,w.eR)("* <=> *",[(0,w.IO)(":leave",[(0,w.oB)({opacity:1}),(0,w.jt)("0.2s",(0,w.oB)({opacity:0}))],{optional:!0}),(0,w.IO)(":enter",[(0,w.oB)({opacity:0}),(0,w.jt)("0.2s",(0,w.oB)({opacity:1}))],{optional:!0})])])]},changeDetection:0})}return ce})()},8465:(Mt,ke,F)=>{"use strict";F.d(ke,{D:()=>w});var w=(()=>{return(D=w||(w={})).Ru="ru",D.En="en",w;var D})()},6033:(Mt,ke,F)=>{"use strict";F.d(ke,{y:()=>w});var w=(()=>{return(D=w||(w={})).CurrentLanguage="currentLanguage",D.IsMutedBgAudio="isMutedBgAudio",D.Top="top",w;var D})()},6284:(Mt,ke,F)=>{"use strict";F.d(ke,{z:()=>he});var w=F(5861),D=F(3184),ue=F(4650);let he=(()=>{class ae{bg;artifacts;hero;shield;monsters;boss;attacks;bang;smallBang;init(){var ve=this;return(0,w.Z)(function*(){ve.bg=D.xEZ.from("assets/img/game/bg/snow-forest.png"),ve.artifacts={life:D.xEZ.from("assets/img/game/artifacts/life.png"),shield:D.xEZ.from("assets/img/game/artifacts/shield.png"),punch:D.xEZ.from("assets/img/game/artifacts/punch.png"),lightning:D.xEZ.from("assets/img/game/artifacts/lightning.png")},ve.hero=yield D.deM.load("assets/img/game/hero/hero-sprite.json"),ve.shield=yield D.deM.load("assets/img/game/shield/shield-sprite.json"),D.deM.addBundle("monsters",{deathAngel:"assets/img/game/monsters/death-angel/death-angel-sprite.json",icePhoenix:"assets/img/game/monsters/ice-phoenix/ice-phoenix-sprite.json",blackDragon:"assets/img/game/monsters/black-dragon/black-dragon-sprite.json",satan:"assets/img/game/monsters/satan/satan-sprite.json",death:"assets/img/game/monsters/death/death-sprite.json",undeadDragon:"assets/img/game/monsters/undead-dragon/undead-dragon-sprite.json"}),ve.monsters=yield D.deM.loadBundle("monsters"),ve.boss=yield D.deM.load("assets/img/game/boss/boss-sprite.json"),ve.attacks={"hero-attack":D.xEZ.from("assets/img/game/attacks/hero-attack.png"),"attack-1":D.xEZ.from("assets/img/game/attacks/attack-1.png"),"attack-2":D.xEZ.from("assets/img/game/attacks/attack-2.png"),"attack-3":D.xEZ.from("assets/img/game/attacks/attack-3.png"),"attack-4":D.xEZ.from("assets/img/game/attacks/attack-4.png"),"attack-5":D.xEZ.from("assets/img/game/attacks/attack-5.png"),"attack-6":D.xEZ.from("assets/img/game/attacks/attack-6.png")},ve.bang=yield D.deM.load("assets/img/game/bang/bang-sprite.json"),ve.smallBang=yield D.deM.load("assets/img/game/small-bang/small-bang-sprite.json")})()}static \u0275fac=function(ce){return new(ce||ae)};static \u0275prov=ue.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"})}return ae})()},5785:(Mt,ke,F)=>{"use strict";F.d(ke,{Q:()=>ae});const w_bg={mainTitles:"main-titles.mp3",lightOfTheSeven:"light-of-the-seven.mp3",danceOfDragons:"dance-of-dragons.mp3",theNightKing:"the-night-king.mp3",dracarys:"dracarys.mp3"},w_action_activeButton="active-button.mp3",w_action_blockShield="block-shield.mp3",w_action_closeDialog="close-dialog.mp3",w_action_gameOver="game-over.mp3",w_action_getLifeArtifact="get-life-artifact.mp3",w_action_getLightningArtifact="get-lightning-artifact.mp3",w_action_getPunchArtifact="get-punch-artifact.mp3",w_action_getShieldArtifact="get-shield-artifact.mp3",w_action_heroAttack="hero-attack.mp3",w_action_heroDeath="hero-death.mp3",w_action_monsterDeath="monster-death.mp3",w_action_monsterShield="monster-shield.mp3",w_action_openDialog="open-dialog.mp3",w_action_playGame="play-game.mp3",w_action_routing="routing.mp3",w_action_victory="victory.mp3";var D=F(6033);class ue{get isMuted(){const ve=localStorage.getItem(D.y.IsMutedBgAudio);return null!==ve&&JSON.parse(ve)}sounds=Object.values(w_bg);currentSound={element:null,index:0};volume=1;play(){this.currentSound.element=new Audio(`assets/audio/bg/${this.sounds[this.currentSound.index]}`),this.currentSound.element.volume=this.volume,this.currentSound.element.muted=this.isMuted,this.currentSound.element.autoplay=!0,this.currentSound.element.onended=()=>{this.currentSound.index=this.currentSound.index===this.sounds.length-1?0:this.currentSound.index+1,this.play()}}toggleMute(){if(!this.currentSound.element)return;const ve=!this.isMuted;this.currentSound.element.muted=ve,localStorage.setItem(D.y.IsMutedBgAudio,ve.toString())}setVolume(ve){this.currentSound.element&&(this.volume=ve,this.currentSound.element.volume=ve)}}var he=F(4650);let ae=(()=>{class ee{bgAudio=new ue;activeButton;blockShield;closeDialog;gameOver;getLifeArtifact;getLightningArtifact;getPunchArtifact;getShieldArtifact;heroAttack;heroDeath;monsterDeath;monsterShield;openDialog;playGame;routing;victory;constructor(){Audio.prototype.replay=function(){this.currentTime=0,this.play()}}init(){this.activeButton=new Audio(`assets/audio/${w_action_activeButton}`),this.blockShield=new Audio(`assets/audio/${w_action_blockShield}`),this.blockShield.volume=.5,this.closeDialog=new Audio(`assets/audio/${w_action_closeDialog}`),this.closeDialog.volume=.5,this.gameOver=new Audio(`assets/audio/${w_action_gameOver}`),this.getLifeArtifact=new Audio(`assets/audio/${w_action_getLifeArtifact}`),this.getLifeArtifact.volume=.5,this.getLightningArtifact=new Audio(`assets/audio/${w_action_getLightningArtifact}`),this.getLightningArtifact.volume=.5,this.getPunchArtifact=new Audio(`assets/audio/${w_action_getPunchArtifact}`),this.getShieldArtifact=new Audio(`assets/audio/${w_action_getShieldArtifact}`),this.getShieldArtifact.volume=.5,this.heroAttack=new Audio(`assets/audio/${w_action_heroAttack}`),this.heroAttack.volume=.25,this.heroDeath=new Audio(`assets/audio/${w_action_heroDeath}`),this.heroDeath.volume=.5,this.monsterDeath=new Audio(`assets/audio/${w_action_monsterDeath}`),this.monsterShield=new Audio(`assets/audio/${w_action_monsterShield}`),this.monsterShield.volume=.5,this.openDialog=new Audio(`assets/audio/${w_action_openDialog}`),this.openDialog.volume=.5,this.playGame=new Audio(`assets/audio/${w_action_playGame}`),this.routing=new Audio(`assets/audio/${w_action_routing}`),this.victory=new Audio(`assets/audio/${w_action_victory}`),this.bgAudio.play()}static \u0275fac=function(Ce){return new(Ce||ee)};static \u0275prov=he.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"})}return ee})()},9167:(Mt,ke,F)=>{"use strict";F.d(ke,{Q:()=>ae});var w=F(5861),D=F(6284),ue=F(5785),he=F(4650);let ae=(()=>{class ee{audioService;assetsService;isGameActivated=!1;constructor(ce,Ce){this.audioService=ce,this.assetsService=Ce}bootstrap(){var ce=this;return(0,w.Z)(function*(){yield ce.assetsService.init(),ce.audioService.init(),ce.isGameActivated=!0})()}static \u0275fac=function(Ce){return new(Ce||ee)(he.LFG(ue.Q),he.LFG(D.z))};static \u0275prov=he.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"})}return ee})()},2676:(Mt,ke,F)=>{"use strict";var w=F(1481),D=F(4650),ue=F(529),he=F(3903),ae=F(7340);function ve(U){return new D.vHH(3e3,!1)}function Ye(){return typeof window<"u"&&typeof window.document<"u"}function pt(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function zt(U){switch(U.length){case 0:return new ae.ZN;case 1:return U[0];default:return new ae.ZE(U)}}function Kt(U,g,v,R,H=new Map,J=new Map){const _e=[],oe=[];let tt=-1,ft=null;if(R.forEach(ut=>{const nn=ut.get("offset"),Xn=nn==tt,On=Xn&&ft||new Map;ut.forEach((wn,Tn)=>{let Qn=Tn,hi=wn;if("offset"!==Tn)switch(Qn=g.normalizePropertyName(Qn,_e),hi){case ae.k1:hi=H.get(Tn);break;case ae.l3:hi=J.get(Tn);break;default:hi=g.normalizeStyleValue(Tn,Qn,hi,_e)}On.set(Qn,hi)}),Xn||oe.push(On),ft=On,tt=nn}),_e.length)throw function W(U){return new D.vHH(3502,!1)}();return oe}function dn(U,g,v,R){switch(g){case"start":U.onStart(()=>R(v&&vn(v,"start",U)));break;case"done":U.onDone(()=>R(v&&vn(v,"done",U)));break;case"destroy":U.onDestroy(()=>R(v&&vn(v,"destroy",U)))}}function vn(U,g,v){const J=$t(U.element,U.triggerName,U.fromState,U.toState,g||U.phaseName,v.totalTime??U.totalTime,!!v.disabled),_e=U._data;return null!=_e&&(J._data=_e),J}function $t(U,g,v,R,H="",J=0,_e){return{element:U,triggerName:g,fromState:v,toState:R,phaseName:H,totalTime:J,disabled:!!_e}}function St(U,g,v){let R=U.get(g);return R||U.set(g,R=v),R}function Un(U){const g=U.indexOf(":");return[U.substring(1,g),U.slice(g+1)]}let ln=(U,g)=>!1,ii=(U,g,v)=>[],Bn=null;function Wt(U){const g=U.parentNode||U.host;return g===Bn?null:g}(pt()||typeof Element<"u")&&(Ye()?(Bn=(()=>document.documentElement)(),ln=(U,g)=>{for(;g;){if(g===U)return!0;g=Wt(g)}return!1}):ln=(U,g)=>U.contains(g),ii=(U,g,v)=>{if(v)return Array.from(U.querySelectorAll(g));const R=U.querySelector(g);return R?[R]:[]});let ai=null,Wi=!1;const Gt=ln,Gi=ii;let ri=(()=>{class U{validateStyleProperty(v){return function fr(U){ai||(ai=function pn(){return typeof document<"u"?document.body:null}()||{},Wi=!!ai.style&&"WebkitAppearance"in ai.style);let g=!0;return ai.style&&!function Kr(U){return"ebkit"==U.substring(1,6)}(U)&&(g=U in ai.style,!g&&Wi&&(g="Webkit"+U.charAt(0).toUpperCase()+U.slice(1)in ai.style)),g}(v)}matchesElement(v,R){return!1}containsElement(v,R){return Gt(v,R)}getParentElement(v){return Wt(v)}query(v,R,H){return Gi(v,R,H)}computeStyle(v,R,H){return H||""}animate(v,R,H,J,_e,oe=[],tt){return new ae.ZN(H,J)}}return U.\u0275fac=function(v){return new(v||U)},U.\u0275prov=D.Yz7({token:U,factory:U.\u0275fac}),U})(),gn=(()=>{class U{}return U.NOOP=new ri,U})();const Ci=1e3,Fr="ng-enter",In="ng-leave",Ii="ng-trigger",Ft=".ng-trigger",Re="ng-animating",Be=".ng-animating";function Te(U){if("number"==typeof U)return U;const g=U.match(/^(-?[\.\d]+)(m?s)/);return!g||g.length<2?0:re(parseFloat(g[1]),g[2])}function re(U,g){return"s"===g?U*Ci:U}function Me(U,g,v){return U.hasOwnProperty("duration")?U:function Et(U,g,v){let H,J=0,_e="";if("string"==typeof U){const oe=U.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===oe)return g.push(ve()),{duration:0,delay:0,easing:""};H=re(parseFloat(oe[1]),oe[2]);const tt=oe[3];null!=tt&&(J=re(parseFloat(tt),oe[4]));const ft=oe[5];ft&&(_e=ft)}else H=U;if(!v){let oe=!1,tt=g.length;H<0&&(g.push(function ce(){return new D.vHH(3100,!1)}()),oe=!0),J<0&&(g.push(function Ce(){return new D.vHH(3101,!1)}()),oe=!0),oe&&g.splice(tt,0,ve())}return{duration:H,delay:J,easing:_e}}(U,g,v)}function mt(U,g={}){return Object.keys(U).forEach(v=>{g[v]=U[v]}),g}function _n(U){const g=new Map;return Object.keys(U).forEach(v=>{g.set(v,U[v])}),g}function un(U,g=new Map,v){if(v)for(let[R,H]of v)g.set(R,H);for(let[R,H]of U)g.set(R,H);return g}function Zn(U,g,v){return v?g+":"+v+";":""}function ei(U){let g="";for(let v=0;v<U.style.length;v++){const R=U.style.item(v);g+=Zn(0,R,U.style.getPropertyValue(R))}for(const v in U.style)U.style.hasOwnProperty(v)&&!v.startsWith("_")&&(g+=Zn(0,We(v),U.style[v]));U.setAttribute("style",g)}function Oe(U,g,v){U.style&&(g.forEach((R,H)=>{const J=se(H);v&&!v.has(H)&&v.set(H,U.style[J]),U.style[J]=R}),pt()&&ei(U))}function Ie(U,g){U.style&&(g.forEach((v,R)=>{const H=se(R);U.style[H]=""}),pt()&&ei(U))}function ie(U){return Array.isArray(U)?1==U.length?U[0]:(0,ae.vP)(U):U}const ht=new RegExp("{{\\s*(.+?)\\s*}}","g");function Lt(U){let g=[];if("string"==typeof U){let v;for(;v=ht.exec(U);)g.push(v[1]);ht.lastIndex=0}return g}function tn(U,g,v){const R=U.toString(),H=R.replace(ht,(J,_e)=>{let oe=g[_e];return null==oe&&(v.push(function Pe(U){return new D.vHH(3003,!1)}()),oe=""),oe.toString()});return H==R?U:H}function Fe(U){const g=[];let v=U.next();for(;!v.done;)g.push(v.value),v=U.next();return g}const be=/-+([a-z0-9])/g;function se(U){return U.replace(be,(...g)=>g[1].toUpperCase())}function We(U){return U.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function an(U,g,v){switch(g.type){case 7:return U.visitTrigger(g,v);case 0:return U.visitState(g,v);case 1:return U.visitTransition(g,v);case 2:return U.visitSequence(g,v);case 3:return U.visitGroup(g,v);case 4:return U.visitAnimate(g,v);case 5:return U.visitKeyframes(g,v);case 6:return U.visitStyle(g,v);case 8:return U.visitReference(g,v);case 9:return U.visitAnimateChild(g,v);case 10:return U.visitAnimateRef(g,v);case 11:return U.visitQuery(g,v);case 12:return U.visitStagger(g,v);default:throw function Ae(U){return new D.vHH(3004,!1)}()}}function An(U,g){return window.getComputedStyle(U)[g]}const br="*";function Qt(U,g){const v=[];return"string"==typeof U?U.split(/\s*,\s*/).forEach(R=>function Sn(U,g,v){if(":"==U[0]){const tt=function ui(U,g){switch(U){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(v,R)=>parseFloat(R)>parseFloat(v);case":decrement":return(v,R)=>parseFloat(R)<parseFloat(v);default:return g.push(function wt(U){return new D.vHH(3016,!1)}()),"* => *"}}(U,v);if("function"==typeof tt)return void g.push(tt);U=tt}const R=U.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==R||R.length<4)return v.push(function xe(U){return new D.vHH(3015,!1)}()),g;const H=R[1],J=R[2],_e=R[3];g.push(pi(H,_e));"<"==J[0]&&!(H==br&&_e==br)&&g.push(pi(_e,H))}(R,v,g)):v.push(U),v}const Ti=new Set(["true","1"]),nr=new Set(["false","0"]);function pi(U,g){const v=Ti.has(U)||nr.has(U),R=Ti.has(g)||nr.has(g);return(H,J)=>{let _e=U==br||U==H,oe=g==br||g==J;return!_e&&v&&"boolean"==typeof H&&(_e=H?Ti.has(U):nr.has(U)),!oe&&R&&"boolean"==typeof J&&(oe=J?Ti.has(g):nr.has(g)),_e&&oe}}const mi=new RegExp("s*:selfs*,?","g");function Ar(U,g,v,R){return new yn(U).build(g,v,R)}class yn{constructor(g){this._driver=g}build(g,v,R){const H=new ys(v);return this._resetContextStyleTimingState(H),an(this,ie(g),H)}_resetContextStyleTimingState(g){g.currentQuerySelector="",g.collectedStyles=new Map,g.collectedStyles.set("",new Map),g.currentTime=0}visitTrigger(g,v){let R=v.queryCount=0,H=v.depCount=0;const J=[],_e=[];return"@"==g.name.charAt(0)&&v.errors.push(function $e(){return new D.vHH(3006,!1)}()),g.definitions.forEach(oe=>{if(this._resetContextStyleTimingState(v),0==oe.type){const tt=oe,ft=tt.name;ft.toString().split(/\s*,\s*/).forEach(ut=>{tt.name=ut,J.push(this.visitState(tt,v))}),tt.name=ft}else if(1==oe.type){const tt=this.visitTransition(oe,v);R+=tt.queryCount,H+=tt.depCount,_e.push(tt)}else v.errors.push(function gt(){return new D.vHH(3007,!1)}())}),{type:7,name:g.name,states:J,transitions:_e,queryCount:R,depCount:H,options:null}}visitState(g,v){const R=this.visitStyle(g.styles,v),H=g.options&&g.options.params||null;if(R.containsDynamicStyles){const J=new Set,_e=H||{};R.styles.forEach(oe=>{oe instanceof Map&&oe.forEach(tt=>{Lt(tt).forEach(ft=>{_e.hasOwnProperty(ft)||J.add(ft)})})}),J.size&&(Fe(J.values()),v.errors.push(function Tt(U,g){return new D.vHH(3008,!1)}()))}return{type:0,name:g.name,style:R,options:H?{params:H}:null}}visitTransition(g,v){v.queryCount=0,v.depCount=0;const R=an(this,ie(g.animation),v);return{type:1,matchers:Qt(g.expr,v.errors),animation:R,queryCount:v.queryCount,depCount:v.depCount,options:wr(g.options)}}visitSequence(g,v){return{type:2,steps:g.steps.map(R=>an(this,R,v)),options:wr(g.options)}}visitGroup(g,v){const R=v.currentTime;let H=0;const J=g.steps.map(_e=>{v.currentTime=R;const oe=an(this,_e,v);return H=Math.max(H,v.currentTime),oe});return v.currentTime=H,{type:3,steps:J,options:wr(g.options)}}visitAnimate(g,v){const R=function Si(U,g){if(U.hasOwnProperty("duration"))return U;if("number"==typeof U)return zr(Me(U,g).duration,0,"");const v=U;if(v.split(/\s+/).some(J=>"{"==J.charAt(0)&&"{"==J.charAt(1))){const J=zr(0,0,"");return J.dynamic=!0,J.strValue=v,J}const H=Me(v,g);return zr(H.duration,H.delay,H.easing)}(g.timings,v.errors);v.currentAnimateTimings=R;let H,J=g.styles?g.styles:(0,ae.oB)({});if(5==J.type)H=this.visitKeyframes(J,v);else{let _e=g.styles,oe=!1;if(!_e){oe=!0;const ft={};R.easing&&(ft.easing=R.easing),_e=(0,ae.oB)(ft)}v.currentTime+=R.duration+R.delay;const tt=this.visitStyle(_e,v);tt.isEmptyStep=oe,H=tt}return v.currentAnimateTimings=null,{type:4,timings:R,style:H,options:null}}visitStyle(g,v){const R=this._makeStyleAst(g,v);return this._validateStyleAst(R,v),R}_makeStyleAst(g,v){const R=[],H=Array.isArray(g.styles)?g.styles:[g.styles];for(let oe of H)"string"==typeof oe?oe===ae.l3?R.push(oe):v.errors.push(new D.vHH(3002,!1)):R.push(_n(oe));let J=!1,_e=null;return R.forEach(oe=>{if(oe instanceof Map&&(oe.has("easing")&&(_e=oe.get("easing"),oe.delete("easing")),!J))for(let tt of oe.values())if(tt.toString().indexOf("{{")>=0){J=!0;break}}),{type:6,styles:R,easing:_e,offset:g.offset,containsDynamicStyles:J,options:null}}_validateStyleAst(g,v){const R=v.currentAnimateTimings;let H=v.currentTime,J=v.currentTime;R&&J>0&&(J-=R.duration+R.delay),g.styles.forEach(_e=>{"string"!=typeof _e&&_e.forEach((oe,tt)=>{const ft=v.collectedStyles.get(v.currentQuerySelector),ut=ft.get(tt);let nn=!0;ut&&(J!=H&&J>=ut.startTime&&H<=ut.endTime&&(v.errors.push(function st(U,g,v,R,H){return new D.vHH(3010,!1)}()),nn=!1),J=ut.startTime),nn&&ft.set(tt,{startTime:J,endTime:H}),v.options&&function Ne(U,g,v){const R=g.params||{},H=Lt(U);H.length&&H.forEach(J=>{R.hasOwnProperty(J)||v.push(function Le(U){return new D.vHH(3001,!1)}())})}(oe,v.options,v.errors)})})}visitKeyframes(g,v){const R={type:5,styles:[],options:null};if(!v.currentAnimateTimings)return v.errors.push(function Ct(){return new D.vHH(3011,!1)}()),R;let J=0;const _e=[];let oe=!1,tt=!1,ft=0;const ut=g.steps.map(hi=>{const C=this._makeStyleAst(hi,v);let L=null!=C.offset?C.offset:function pr(U){if("string"==typeof U)return null;let g=null;if(Array.isArray(U))U.forEach(v=>{if(v instanceof Map&&v.has("offset")){const R=v;g=parseFloat(R.get("offset")),R.delete("offset")}});else if(U instanceof Map&&U.has("offset")){const v=U;g=parseFloat(v.get("offset")),v.delete("offset")}return g}(C.styles),S=0;return null!=L&&(J++,S=C.offset=L),tt=tt||S<0||S>1,oe=oe||S<ft,ft=S,_e.push(S),C});tt&&v.errors.push(function Xe(){return new D.vHH(3012,!1)}()),oe&&v.errors.push(function ne(){return new D.vHH(3200,!1)}());const nn=g.steps.length;let Xn=0;J>0&&J<nn?v.errors.push(function dt(){return new D.vHH(3202,!1)}()):0==J&&(Xn=1/(nn-1));const On=nn-1,wn=v.currentTime,Tn=v.currentAnimateTimings,Qn=Tn.duration;return ut.forEach((hi,C)=>{const L=Xn>0?C==On?1:Xn*C:_e[C],S=L*Qn;v.currentTime=wn+Tn.delay+S,Tn.duration=S,this._validateStyleAst(hi,v),hi.offset=L,R.styles.push(hi)}),R}visitReference(g,v){return{type:8,animation:an(this,ie(g.animation),v),options:wr(g.options)}}visitAnimateChild(g,v){return v.depCount++,{type:9,options:wr(g.options)}}visitAnimateRef(g,v){return{type:10,animation:this.visitReference(g.animation,v),options:wr(g.options)}}visitQuery(g,v){const R=v.currentQuerySelector,H=g.options||{};v.queryCount++,v.currentQuery=g;const[J,_e]=function Lr(U){const g=!!U.split(/\s*,\s*/).find(v=>":self"==v);return g&&(U=U.replace(mi,"")),U=U.replace(/@\*/g,Ft).replace(/@\w+/g,v=>Ft+"-"+v.slice(1)).replace(/:animating/g,Be),[U,g]}(g.selector);v.currentQuerySelector=R.length?R+" "+J:J,St(v.collectedStyles,v.currentQuerySelector,new Map);const oe=an(this,ie(g.animation),v);return v.currentQuery=null,v.currentQuerySelector=R,{type:11,selector:J,limit:H.limit||0,optional:!!H.optional,includeSelf:_e,animation:oe,originalSelector:g.selector,options:wr(g.options)}}visitStagger(g,v){v.currentQuery||v.errors.push(function He(){return new D.vHH(3013,!1)}());const R="full"===g.timings?{duration:0,delay:0,easing:"full"}:Me(g.timings,v.errors,!0);return{type:12,animation:an(this,ie(g.animation),v),timings:R,options:null}}}class ys{constructor(g){this.errors=g,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function wr(U){return U?(U=mt(U)).params&&(U.params=function Mr(U){return U?mt(U):null}(U.params)):U={},U}function zr(U,g,v){return{duration:U,delay:g,easing:v}}function Yi(U,g,v,R,H,J,_e=null,oe=!1){return{type:1,element:U,keyframes:g,preStyleProps:v,postStyleProps:R,duration:H,delay:J,totalTime:H+J,easing:_e,subTimeline:oe}}class $r{constructor(){this._map=new Map}get(g){return this._map.get(g)||[]}append(g,v){let R=this._map.get(g);R||this._map.set(g,R=[]),R.push(...v)}has(g){return this._map.has(g)}clear(){this._map.clear()}}const Sa=new RegExp(":enter","g"),gr=new RegExp(":leave","g");function Zr(U,g,v,R,H,J=new Map,_e=new Map,oe,tt,ft=[]){return(new js).buildKeyframes(U,g,v,R,H,J,_e,oe,tt,ft)}class js{buildKeyframes(g,v,R,H,J,_e,oe,tt,ft,ut=[]){ft=ft||new $r;const nn=new Ai(g,v,ft,H,J,ut,[]);nn.options=tt;const Xn=tt.delay?Te(tt.delay):0;nn.currentTimeline.delayNextStep(Xn),nn.currentTimeline.setStyles([_e],null,nn.errors,tt),an(this,R,nn);const On=nn.timelines.filter(wn=>wn.containsAnimation());if(On.length&&oe.size){let wn;for(let Tn=On.length-1;Tn>=0;Tn--){const Qn=On[Tn];if(Qn.element===v){wn=Qn;break}}wn&&!wn.allowOnlyTimelineStyles()&&wn.setStyles([oe],null,nn.errors,tt)}return On.length?On.map(wn=>wn.buildKeyframes()):[Yi(v,[],[],[],0,Xn,"",!1)]}visitTrigger(g,v){}visitState(g,v){}visitTransition(g,v){}visitAnimateChild(g,v){const R=v.subInstructions.get(v.element);if(R){const H=v.createSubContext(g.options),J=v.currentTimeline.currentTime,_e=this._visitSubInstructions(R,H,H.options);J!=_e&&v.transformIntoNewTimeline(_e)}v.previousNode=g}visitAnimateRef(g,v){const R=v.createSubContext(g.options);R.transformIntoNewTimeline(),this._applyAnimationRefDelays([g.options,g.animation.options],v,R),this.visitReference(g.animation,R),v.transformIntoNewTimeline(R.currentTimeline.currentTime),v.previousNode=g}_applyAnimationRefDelays(g,v,R){for(const H of g){const J=H?.delay;if(J){const _e="number"==typeof J?J:Te(tn(J,H?.params??{},v.errors));R.delayNextStep(_e)}}}_visitSubInstructions(g,v,R){let J=v.currentTimeline.currentTime;const _e=null!=R.duration?Te(R.duration):null,oe=null!=R.delay?Te(R.delay):null;return 0!==_e&&g.forEach(tt=>{const ft=v.appendInstructionToTimeline(tt,_e,oe);J=Math.max(J,ft.duration+ft.delay)}),J}visitReference(g,v){v.updateOptions(g.options,!0),an(this,g.animation,v),v.previousNode=g}visitSequence(g,v){const R=v.subContextCount;let H=v;const J=g.options;if(J&&(J.params||J.delay)&&(H=v.createSubContext(J),H.transformIntoNewTimeline(),null!=J.delay)){6==H.previousNode.type&&(H.currentTimeline.snapshotCurrentStyles(),H.previousNode=Ri);const _e=Te(J.delay);H.delayNextStep(_e)}g.steps.length&&(g.steps.forEach(_e=>an(this,_e,H)),H.currentTimeline.applyStylesToKeyframe(),H.subContextCount>R&&H.transformIntoNewTimeline()),v.previousNode=g}visitGroup(g,v){const R=[];let H=v.currentTimeline.currentTime;const J=g.options&&g.options.delay?Te(g.options.delay):0;g.steps.forEach(_e=>{const oe=v.createSubContext(g.options);J&&oe.delayNextStep(J),an(this,_e,oe),H=Math.max(H,oe.currentTimeline.currentTime),R.push(oe.currentTimeline)}),R.forEach(_e=>v.currentTimeline.mergeTimelineCollectedStyles(_e)),v.transformIntoNewTimeline(H),v.previousNode=g}_visitTiming(g,v){if(g.dynamic){const R=g.strValue;return Me(v.params?tn(R,v.params,v.errors):R,v.errors)}return{duration:g.duration,delay:g.delay,easing:g.easing}}visitAnimate(g,v){const R=v.currentAnimateTimings=this._visitTiming(g.timings,v),H=v.currentTimeline;R.delay&&(v.incrementTime(R.delay),H.snapshotCurrentStyles());const J=g.style;5==J.type?this.visitKeyframes(J,v):(v.incrementTime(R.duration),this.visitStyle(J,v),H.applyStylesToKeyframe()),v.currentAnimateTimings=null,v.previousNode=g}visitStyle(g,v){const R=v.currentTimeline,H=v.currentAnimateTimings;!H&&R.hasCurrentStyleProperties()&&R.forwardFrame();const J=H&&H.easing||g.easing;g.isEmptyStep?R.applyEmptyStep(J):R.setStyles(g.styles,J,v.errors,v.options),v.previousNode=g}visitKeyframes(g,v){const R=v.currentAnimateTimings,H=v.currentTimeline.duration,J=R.duration,oe=v.createSubContext().currentTimeline;oe.easing=R.easing,g.styles.forEach(tt=>{oe.forwardTime((tt.offset||0)*J),oe.setStyles(tt.styles,tt.easing,v.errors,v.options),oe.applyStylesToKeyframe()}),v.currentTimeline.mergeTimelineCollectedStyles(oe),v.transformIntoNewTimeline(H+J),v.previousNode=g}visitQuery(g,v){const R=v.currentTimeline.currentTime,H=g.options||{},J=H.delay?Te(H.delay):0;J&&(6===v.previousNode.type||0==R&&v.currentTimeline.hasCurrentStyleProperties())&&(v.currentTimeline.snapshotCurrentStyles(),v.previousNode=Ri);let _e=R;const oe=v.invokeQuery(g.selector,g.originalSelector,g.limit,g.includeSelf,!!H.optional,v.errors);v.currentQueryTotal=oe.length;let tt=null;oe.forEach((ft,ut)=>{v.currentQueryIndex=ut;const nn=v.createSubContext(g.options,ft);J&&nn.delayNextStep(J),ft===v.element&&(tt=nn.currentTimeline),an(this,g.animation,nn),nn.currentTimeline.applyStylesToKeyframe(),_e=Math.max(_e,nn.currentTimeline.currentTime)}),v.currentQueryIndex=0,v.currentQueryTotal=0,v.transformIntoNewTimeline(_e),tt&&(v.currentTimeline.mergeTimelineCollectedStyles(tt),v.currentTimeline.snapshotCurrentStyles()),v.previousNode=g}visitStagger(g,v){const R=v.parentContext,H=v.currentTimeline,J=g.timings,_e=Math.abs(J.duration),oe=_e*(v.currentQueryTotal-1);let tt=_e*v.currentQueryIndex;switch(J.duration<0?"reverse":J.easing){case"reverse":tt=oe-tt;break;case"full":tt=R.currentStaggerTime}const ut=v.currentTimeline;tt&&ut.delayNextStep(tt);const nn=ut.currentTime;an(this,g.animation,v),v.previousNode=g,R.currentStaggerTime=H.currentTime-nn+(H.startTime-R.currentTimeline.startTime)}}const Ri={};class Ai{constructor(g,v,R,H,J,_e,oe,tt){this._driver=g,this.element=v,this.subInstructions=R,this._enterClassName=H,this._leaveClassName=J,this.errors=_e,this.timelines=oe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ri,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=tt||new Fs(this._driver,v,0),oe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(g,v){if(!g)return;const R=g;let H=this.options;null!=R.duration&&(H.duration=Te(R.duration)),null!=R.delay&&(H.delay=Te(R.delay));const J=R.params;if(J){let _e=H.params;_e||(_e=this.options.params={}),Object.keys(J).forEach(oe=>{(!v||!_e.hasOwnProperty(oe))&&(_e[oe]=tn(J[oe],_e,this.errors))})}}_copyOptions(){const g={};if(this.options){const v=this.options.params;if(v){const R=g.params={};Object.keys(v).forEach(H=>{R[H]=v[H]})}}return g}createSubContext(g=null,v,R){const H=v||this.element,J=new Ai(this._driver,H,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(H,R||0));return J.previousNode=this.previousNode,J.currentAnimateTimings=this.currentAnimateTimings,J.options=this._copyOptions(),J.updateOptions(g),J.currentQueryIndex=this.currentQueryIndex,J.currentQueryTotal=this.currentQueryTotal,J.parentContext=this,this.subContextCount++,J}transformIntoNewTimeline(g){return this.previousNode=Ri,this.currentTimeline=this.currentTimeline.fork(this.element,g),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(g,v,R){const H={duration:v??g.duration,delay:this.currentTimeline.currentTime+(R??0)+g.delay,easing:""},J=new ar(this._driver,g.element,g.keyframes,g.preStyleProps,g.postStyleProps,H,g.stretchStartingKeyframe);return this.timelines.push(J),H}incrementTime(g){this.currentTimeline.forwardTime(this.currentTimeline.duration+g)}delayNextStep(g){g>0&&this.currentTimeline.delayNextStep(g)}invokeQuery(g,v,R,H,J,_e){let oe=[];if(H&&oe.push(this.element),g.length>0){g=(g=g.replace(Sa,"."+this._enterClassName)).replace(gr,"."+this._leaveClassName);let ft=this._driver.query(this.element,g,1!=R);0!==R&&(ft=R<0?ft.slice(ft.length+R,ft.length):ft.slice(0,R)),oe.push(...ft)}return!J&&0==oe.length&&_e.push(function at(U){return new D.vHH(3014,!1)}()),oe}}class Fs{constructor(g,v,R,H){this._driver=g,this.element=v,this.startTime=R,this._elementTimelineStylesLookup=H,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(v),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(v,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(g){const v=1===this._keyframes.size&&this._pendingStyles.size;this.duration||v?(this.forwardTime(this.currentTime+g),v&&this.snapshotCurrentStyles()):this.startTime+=g}fork(g,v){return this.applyStylesToKeyframe(),new Fs(this._driver,g,v||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(g){this.applyStylesToKeyframe(),this.duration=g,this._loadKeyframe()}_updateStyle(g,v){this._localTimelineStyles.set(g,v),this._globalTimelineStyles.set(g,v),this._styleSummary.set(g,{time:this.currentTime,value:v})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(g){g&&this._previousKeyframe.set("easing",g);for(let[v,R]of this._globalTimelineStyles)this._backFill.set(v,R||ae.l3),this._currentKeyframe.set(v,ae.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(g,v,R,H){v&&this._previousKeyframe.set("easing",v);const J=H&&H.params||{},_e=function io(U,g){const v=new Map;let R;return U.forEach(H=>{if("*"===H){R=R||g.keys();for(let J of R)v.set(J,ae.l3)}else un(H,v)}),v}(g,this._globalTimelineStyles);for(let[oe,tt]of _e){const ft=tn(tt,J,R);this._pendingStyles.set(oe,ft),this._localTimelineStyles.has(oe)||this._backFill.set(oe,this._globalTimelineStyles.get(oe)??ae.l3),this._updateStyle(oe,ft)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((g,v)=>{this._currentKeyframe.set(v,g)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((g,v)=>{this._currentKeyframe.has(v)||this._currentKeyframe.set(v,g)}))}snapshotCurrentStyles(){for(let[g,v]of this._localTimelineStyles)this._pendingStyles.set(g,v),this._updateStyle(g,v)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const g=[];for(let v in this._currentKeyframe)g.push(v);return g}mergeTimelineCollectedStyles(g){g._styleSummary.forEach((v,R)=>{const H=this._styleSummary.get(R);(!H||v.time>H.time)&&this._updateStyle(R,v.value)})}buildKeyframes(){this.applyStylesToKeyframe();const g=new Set,v=new Set,R=1===this._keyframes.size&&0===this.duration;let H=[];this._keyframes.forEach((oe,tt)=>{const ft=un(oe,new Map,this._backFill);ft.forEach((ut,nn)=>{ut===ae.k1?g.add(nn):ut===ae.l3&&v.add(nn)}),R||ft.set("offset",tt/this.duration),H.push(ft)});const J=g.size?Fe(g.values()):[],_e=v.size?Fe(v.values()):[];if(R){const oe=H[0],tt=new Map(oe);oe.set("offset",0),tt.set("offset",1),H=[oe,tt]}return Yi(this.element,H,J,_e,this.duration,this.startTime,this.easing,!1)}}class ar extends Fs{constructor(g,v,R,H,J,_e,oe=!1){super(g,v,_e.delay),this.keyframes=R,this.preStyleProps=H,this.postStyleProps=J,this._stretchStartingKeyframe=oe,this.timings={duration:_e.duration,delay:_e.delay,easing:_e.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let g=this.keyframes,{delay:v,duration:R,easing:H}=this.timings;if(this._stretchStartingKeyframe&&v){const J=[],_e=R+v,oe=v/_e,tt=un(g[0]);tt.set("offset",0),J.push(tt);const ft=un(g[0]);ft.set("offset",Ki(oe)),J.push(ft);const ut=g.length-1;for(let nn=1;nn<=ut;nn++){let Xn=un(g[nn]);const On=Xn.get("offset");Xn.set("offset",Ki((v+On*R)/_e)),J.push(Xn)}R=_e,v=0,H="",g=J}return Yi(this.element,g,this.preStyleProps,this.postStyleProps,R,v,H,!0)}}function Ki(U,g=3){const v=Math.pow(10,g-1);return Math.round(U*v)/v}class Ir{}const Nr=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class vs extends Ir{normalizePropertyName(g,v){return se(g)}normalizeStyleValue(g,v,R,H){let J="";const _e=R.toString().trim();if(Nr.has(v)&&0!==R&&"0"!==R)if("number"==typeof R)J="px";else{const oe=R.match(/^[+-]?[\d\.]+([a-z]*)$/);oe&&0==oe[1].length&&H.push(function it(U,g){return new D.vHH(3005,!1)}())}return _e+J}}function zs(U,g,v,R,H,J,_e,oe,tt,ft,ut,nn,Xn){return{type:0,element:U,triggerName:g,isRemovalTransition:H,fromState:v,fromStyles:J,toState:R,toStyles:_e,timelines:oe,queriedElements:tt,preStyleProps:ft,postStyleProps:ut,totalTime:nn,errors:Xn}}const Ls={};class xo{constructor(g,v,R){this._triggerName=g,this.ast=v,this._stateStyles=R}match(g,v,R,H){return function $s(U,g,v,R,H){return U.some(J=>J(g,v,R,H))}(this.ast.matchers,g,v,R,H)}buildStyles(g,v,R){let H=this._stateStyles.get("*");return void 0!==g&&(H=this._stateStyles.get(g?.toString())||H),H?H.buildStyles(v,R):new Map}build(g,v,R,H,J,_e,oe,tt,ft,ut){const nn=[],Xn=this.ast.options&&this.ast.options.params||Ls,wn=this.buildStyles(R,oe&&oe.params||Ls,nn),Tn=tt&&tt.params||Ls,Qn=this.buildStyles(H,Tn,nn),hi=new Set,C=new Map,L=new Map,S="void"===H,j={params:jo(Tn,Xn),delay:this.ast.options?.delay},ge=ut?[]:Zr(g,v,this.ast.animation,J,_e,wn,Qn,j,ft,nn);let Je=0;if(ge.forEach(Yt=>{Je=Math.max(Yt.duration+Yt.delay,Je)}),nn.length)return zs(v,this._triggerName,R,H,S,wn,Qn,[],[],C,L,Je,nn);ge.forEach(Yt=>{const Fn=Yt.element,si=St(C,Fn,new Set);Yt.preStyleProps.forEach(kt=>si.add(kt));const Wn=St(L,Fn,new Set);Yt.postStyleProps.forEach(kt=>Wn.add(kt)),Fn!==v&&hi.add(Fn)});const lt=Fe(hi.values());return zs(v,this._triggerName,R,H,S,wn,Qn,ge,lt,C,L,Je)}}function jo(U,g){const v=mt(g);for(const R in U)U.hasOwnProperty(R)&&null!=U[R]&&(v[R]=U[R]);return v}class bs{constructor(g,v,R){this.styles=g,this.defaultParams=v,this.normalizer=R}buildStyles(g,v){const R=new Map,H=mt(this.defaultParams);return Object.keys(g).forEach(J=>{const _e=g[J];null!==_e&&(H[J]=_e)}),this.styles.styles.forEach(J=>{"string"!=typeof J&&J.forEach((_e,oe)=>{_e&&(_e=tn(_e,H,v));const tt=this.normalizer.normalizePropertyName(oe,v);_e=this.normalizer.normalizeStyleValue(oe,tt,_e,v),R.set(oe,_e)})}),R}}class ro{constructor(g,v,R){this.name=g,this.ast=v,this._normalizer=R,this.transitionFactories=[],this.states=new Map,v.states.forEach(H=>{this.states.set(H.name,new bs(H.style,H.options&&H.options.params||{},R))}),qr(this.states,"true","1"),qr(this.states,"false","0"),v.transitions.forEach(H=>{this.transitionFactories.push(new xo(g,H,this.states))}),this.fallbackTransition=function Ns(U,g,v){return new xo(U,{type:1,animation:{type:2,steps:[],options:null},matchers:[(_e,oe)=>!0],options:null,queryCount:0,depCount:0},g)}(g,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(g,v,R,H){return this.transitionFactories.find(_e=>_e.match(g,v,R,H))||null}matchStyles(g,v,R){return this.fallbackTransition.buildStyles(g,v,R)}}function qr(U,g,v){U.has(g)?U.has(v)||U.set(v,U.get(g)):U.has(v)&&U.set(g,U.get(v))}const ws=new $r;class zo{constructor(g,v,R){this.bodyNode=g,this._driver=v,this._normalizer=R,this._animations=new Map,this._playersById=new Map,this.players=[]}register(g,v){const R=[],H=[],J=Ar(this._driver,v,R,H);if(R.length)throw function te(U){return new D.vHH(3503,!1)}();this._animations.set(g,J)}_buildPlayer(g,v,R){const H=g.element,J=Kt(0,this._normalizer,0,g.keyframes,v,R);return this._driver.animate(H,J,g.duration,g.delay,g.easing,[],!0)}create(g,v,R={}){const H=[],J=this._animations.get(g);let _e;const oe=new Map;if(J?(_e=Zr(this._driver,v,J,Fr,In,new Map,new Map,R,ws,H),_e.forEach(ut=>{const nn=St(oe,ut.element,new Map);ut.postStyleProps.forEach(Xn=>nn.set(Xn,null))})):(H.push(function Y(){return new D.vHH(3300,!1)}()),_e=[]),H.length)throw function we(U){return new D.vHH(3504,!1)}();oe.forEach((ut,nn)=>{ut.forEach((Xn,On)=>{ut.set(On,this._driver.computeStyle(nn,On,ae.l3))})});const ft=zt(_e.map(ut=>{const nn=oe.get(ut.element);return this._buildPlayer(ut,new Map,nn)}));return this._playersById.set(g,ft),ft.onDestroy(()=>this.destroy(g)),this.players.push(ft),ft}destroy(g){const v=this._getPlayer(g);v.destroy(),this._playersById.delete(g);const R=this.players.indexOf(v);R>=0&&this.players.splice(R,1)}_getPlayer(g){const v=this._playersById.get(g);if(!v)throw function Se(U){return new D.vHH(3301,!1)}();return v}listen(g,v,R,H){const J=$t(v,"","","");return dn(this._getPlayer(g),R,J,H),()=>{}}command(g,v,R,H){if("register"==R)return void this.register(g,H[0]);if("create"==R)return void this.create(g,v,H[0]||{});const J=this._getPlayer(g);switch(R){case"play":J.play();break;case"pause":J.pause();break;case"reset":J.reset();break;case"restart":J.restart();break;case"finish":J.finish();break;case"init":J.init();break;case"setPosition":J.setPosition(parseFloat(H[0]));break;case"destroy":this.destroy(g)}}}const ks="ng-animate-queued",Ds="ng-animate-disabled",Rr=[],Ys={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ao={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ji="__ng_removed";class ss{get params(){return this.options.params}constructor(g,v=""){this.namespaceId=v;const R=g&&g.hasOwnProperty("value");if(this.value=function kr(U){return U??null}(R?g.value:g),R){const J=mt(g);delete J.value,this.options=J}else this.options={};this.options.params||(this.options.params={})}absorbOptions(g){const v=g.params;if(v){const R=this.options.params;Object.keys(v).forEach(H=>{null==R[H]&&(R[H]=v[H])})}}}const Qr="void",Bs=new ss(Qr);class lo{constructor(g,v,R){this.id=g,this.hostElement=v,this._engine=R,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+g,li(v,this._hostClassName)}listen(g,v,R,H){if(!this._triggers.has(v))throw function fe(U,g){return new D.vHH(3302,!1)}();if(null==R||0==R.length)throw function me(U){return new D.vHH(3303,!1)}();if(!function sa(U){return"start"==U||"done"==U}(R))throw function Ve(U,g){return new D.vHH(3400,!1)}();const J=St(this._elementListeners,g,[]),_e={name:v,phase:R,callback:H};J.push(_e);const oe=St(this._engine.statesByElement,g,new Map);return oe.has(v)||(li(g,Ii),li(g,Ii+"-"+v),oe.set(v,Bs)),()=>{this._engine.afterFlush(()=>{const tt=J.indexOf(_e);tt>=0&&J.splice(tt,1),this._triggers.has(v)||oe.delete(v)})}}register(g,v){return!this._triggers.has(g)&&(this._triggers.set(g,v),!0)}_getTrigger(g){const v=this._triggers.get(g);if(!v)throw function De(U){return new D.vHH(3401,!1)}();return v}trigger(g,v,R,H=!0){const J=this._getTrigger(v),_e=new Cs(this.id,v,g);let oe=this._engine.statesByElement.get(g);oe||(li(g,Ii),li(g,Ii+"-"+v),this._engine.statesByElement.set(g,oe=new Map));let tt=oe.get(v);const ft=new ss(R,this.id);if(!(R&&R.hasOwnProperty("value"))&&tt&&ft.absorbOptions(tt.options),oe.set(v,ft),tt||(tt=Bs),ft.value!==Qr&&tt.value===ft.value){if(!function E(U,g){const v=Object.keys(U),R=Object.keys(g);if(v.length!=R.length)return!1;for(let H=0;H<v.length;H++){const J=v[H];if(!g.hasOwnProperty(J)||U[J]!==g[J])return!1}return!0}(tt.params,ft.params)){const Tn=[],Qn=J.matchStyles(tt.value,tt.params,Tn),hi=J.matchStyles(ft.value,ft.params,Tn);Tn.length?this._engine.reportError(Tn):this._engine.afterFlush(()=>{Ie(g,Qn),Oe(g,hi)})}return}const Xn=St(this._engine.playersByElement,g,[]);Xn.forEach(Tn=>{Tn.namespaceId==this.id&&Tn.triggerName==v&&Tn.queued&&Tn.destroy()});let On=J.matchTransition(tt.value,ft.value,g,ft.params),wn=!1;if(!On){if(!H)return;On=J.fallbackTransition,wn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:v,transition:On,fromState:tt,toState:ft,player:_e,isFallbackTransition:wn}),wn||(li(g,ks),_e.onStart(()=>{Br(g,ks)})),_e.onDone(()=>{let Tn=this.players.indexOf(_e);Tn>=0&&this.players.splice(Tn,1);const Qn=this._engine.playersByElement.get(g);if(Qn){let hi=Qn.indexOf(_e);hi>=0&&Qn.splice(hi,1)}}),this.players.push(_e),Xn.push(_e),_e}deregister(g){this._triggers.delete(g),this._engine.statesByElement.forEach(v=>v.delete(g)),this._elementListeners.forEach((v,R)=>{this._elementListeners.set(R,v.filter(H=>H.name!=g))})}clearElementCache(g){this._engine.statesByElement.delete(g),this._elementListeners.delete(g);const v=this._engine.playersByElement.get(g);v&&(v.forEach(R=>R.destroy()),this._engine.playersByElement.delete(g))}_signalRemovalForInnerTriggers(g,v){const R=this._engine.driver.query(g,Ft,!0);R.forEach(H=>{if(H[ji])return;const J=this._engine.fetchNamespacesByElement(H);J.size?J.forEach(_e=>_e.triggerLeaveAnimation(H,v,!1,!0)):this.clearElementCache(H)}),this._engine.afterFlushAnimationsDone(()=>R.forEach(H=>this.clearElementCache(H)))}triggerLeaveAnimation(g,v,R,H){const J=this._engine.statesByElement.get(g),_e=new Map;if(J){const oe=[];if(J.forEach((tt,ft)=>{if(_e.set(ft,tt.value),this._triggers.has(ft)){const ut=this.trigger(g,ft,Qr,H);ut&&oe.push(ut)}}),oe.length)return this._engine.markElementAsRemoved(this.id,g,!0,v,_e),R&&zt(oe).onDone(()=>this._engine.processLeaveNode(g)),!0}return!1}prepareLeaveAnimationListeners(g){const v=this._elementListeners.get(g),R=this._engine.statesByElement.get(g);if(v&&R){const H=new Set;v.forEach(J=>{const _e=J.name;if(H.has(_e))return;H.add(_e);const tt=this._triggers.get(_e).fallbackTransition,ft=R.get(_e)||Bs,ut=new ss(Qr),nn=new Cs(this.id,_e,g);this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:_e,transition:tt,fromState:ft,toState:ut,player:nn,isFallbackTransition:!0})})}}removeNode(g,v){const R=this._engine;if(g.childElementCount&&this._signalRemovalForInnerTriggers(g,v),this.triggerLeaveAnimation(g,v,!0))return;let H=!1;if(R.totalAnimations){const J=R.players.length?R.playersByQueriedElement.get(g):[];if(J&&J.length)H=!0;else{let _e=g;for(;_e=_e.parentNode;)if(R.statesByElement.get(_e)){H=!0;break}}}if(this.prepareLeaveAnimationListeners(g),H)R.markElementAsRemoved(this.id,g,!1,v);else{const J=g[ji];(!J||J===Ys)&&(R.afterFlush(()=>this.clearElementCache(g)),R.destroyInnerAnimations(g),R._onRemovalComplete(g,v))}}insertNode(g,v){li(g,this._hostClassName)}drainQueuedTransitions(g){const v=[];return this._queue.forEach(R=>{const H=R.player;if(H.destroyed)return;const J=R.element,_e=this._elementListeners.get(J);_e&&_e.forEach(oe=>{if(oe.name==R.triggerName){const tt=$t(J,R.triggerName,R.fromState.value,R.toState.value);tt._data=g,dn(R.player,oe.phase,tt,oe.callback)}}),H.markedForDestroy?this._engine.afterFlush(()=>{H.destroy()}):v.push(R)}),this._queue=[],v.sort((R,H)=>{const J=R.transition.ast.depCount,_e=H.transition.ast.depCount;return 0==J||0==_e?J-_e:this._engine.driver.containsElement(R.element,H.element)?1:-1})}destroy(g){this.players.forEach(v=>v.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,g)}elementContainsData(g){let v=!1;return this._elementListeners.has(g)&&(v=!0),v=!!this._queue.find(R=>R.element===g)||v,v}}class Xs{_onRemovalComplete(g,v){this.onRemovalComplete(g,v)}constructor(g,v,R){this.bodyNode=g,this.driver=v,this._normalizer=R,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(H,J)=>{}}get queuedPlayers(){const g=[];return this._namespaceList.forEach(v=>{v.players.forEach(R=>{R.queued&&g.push(R)})}),g}createNamespace(g,v){const R=new lo(g,v,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,v)?this._balanceNamespaceList(R,v):(this.newHostElements.set(v,R),this.collectEnterElement(v)),this._namespaceLookup[g]=R}_balanceNamespaceList(g,v){const R=this._namespaceList,H=this.namespacesByHostElement;if(R.length-1>=0){let _e=!1,oe=this.driver.getParentElement(v);for(;oe;){const tt=H.get(oe);if(tt){const ft=R.indexOf(tt);R.splice(ft+1,0,g),_e=!0;break}oe=this.driver.getParentElement(oe)}_e||R.unshift(g)}else R.push(g);return H.set(v,g),g}register(g,v){let R=this._namespaceLookup[g];return R||(R=this.createNamespace(g,v)),R}registerTrigger(g,v,R){let H=this._namespaceLookup[g];H&&H.register(v,R)&&this.totalAnimations++}destroy(g,v){if(!g)return;const R=this._fetchNamespace(g);this.afterFlush(()=>{this.namespacesByHostElement.delete(R.hostElement),delete this._namespaceLookup[g];const H=this._namespaceList.indexOf(R);H>=0&&this._namespaceList.splice(H,1)}),this.afterFlushAnimationsDone(()=>R.destroy(v))}_fetchNamespace(g){return this._namespaceLookup[g]}fetchNamespacesByElement(g){const v=new Set,R=this.statesByElement.get(g);if(R)for(let H of R.values())if(H.namespaceId){const J=this._fetchNamespace(H.namespaceId);J&&v.add(J)}return v}trigger(g,v,R,H){if(os(v)){const J=this._fetchNamespace(g);if(J)return J.trigger(v,R,H),!0}return!1}insertNode(g,v,R,H){if(!os(v))return;const J=v[ji];if(J&&J.setForRemoval){J.setForRemoval=!1,J.setForMove=!0;const _e=this.collectedLeaveElements.indexOf(v);_e>=0&&this.collectedLeaveElements.splice(_e,1)}if(g){const _e=this._fetchNamespace(g);_e&&_e.insertNode(v,R)}H&&this.collectEnterElement(v)}collectEnterElement(g){this.collectedEnterElements.push(g)}markElementAsDisabled(g,v){v?this.disabledNodes.has(g)||(this.disabledNodes.add(g),li(g,Ds)):this.disabledNodes.has(g)&&(this.disabledNodes.delete(g),Br(g,Ds))}removeNode(g,v,R,H){if(os(v)){const J=g?this._fetchNamespace(g):null;if(J?J.removeNode(v,H):this.markElementAsRemoved(g,v,!1,H),R){const _e=this.namespacesByHostElement.get(v);_e&&_e.id!==g&&_e.removeNode(v,H)}}else this._onRemovalComplete(v,H)}markElementAsRemoved(g,v,R,H,J){this.collectedLeaveElements.push(v),v[ji]={namespaceId:g,setForRemoval:H,hasAnimation:R,removedBeforeQueried:!1,previousTriggersValues:J}}listen(g,v,R,H,J){return os(v)?this._fetchNamespace(g).listen(v,R,H,J):()=>{}}_buildInstruction(g,v,R,H,J){return g.transition.build(this.driver,g.element,g.fromState.value,g.toState.value,R,H,g.fromState.options,g.toState.options,v,J)}destroyInnerAnimations(g){let v=this.driver.query(g,Ft,!0);v.forEach(R=>this.destroyActiveAnimationsForElement(R)),0!=this.playersByQueriedElement.size&&(v=this.driver.query(g,Be,!0),v.forEach(R=>this.finishActiveQueriedAnimationOnElement(R)))}destroyActiveAnimationsForElement(g){const v=this.playersByElement.get(g);v&&v.forEach(R=>{R.queued?R.markedForDestroy=!0:R.destroy()})}finishActiveQueriedAnimationOnElement(g){const v=this.playersByQueriedElement.get(g);v&&v.forEach(R=>R.finish())}whenRenderingDone(){return new Promise(g=>{if(this.players.length)return zt(this.players).onDone(()=>g());g()})}processLeaveNode(g){const v=g[ji];if(v&&v.setForRemoval){if(g[ji]=Ys,v.namespaceId){this.destroyInnerAnimations(g);const R=this._fetchNamespace(v.namespaceId);R&&R.clearElementCache(g)}this._onRemovalComplete(g,v.setForRemoval)}g.classList?.contains(Ds)&&this.markElementAsDisabled(g,!1),this.driver.query(g,".ng-animate-disabled",!0).forEach(R=>{this.markElementAsDisabled(R,!1)})}flush(g=-1){let v=[];if(this.newHostElements.size&&(this.newHostElements.forEach((R,H)=>this._balanceNamespaceList(R,H)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let R=0;R<this.collectedEnterElements.length;R++)li(this.collectedEnterElements[R],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const R=[];try{v=this._flushAnimations(R,g)}finally{for(let H=0;H<R.length;H++)R[H]()}}else for(let R=0;R<this.collectedLeaveElements.length;R++)this.processLeaveNode(this.collectedLeaveElements[R]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(R=>R()),this._flushFns=[],this._whenQuietFns.length){const R=this._whenQuietFns;this._whenQuietFns=[],v.length?zt(v).onDone(()=>{R.forEach(H=>H())}):R.forEach(H=>H())}}reportError(g){throw function Ze(U){return new D.vHH(3402,!1)}()}_flushAnimations(g,v){const R=new $r,H=[],J=new Map,_e=[],oe=new Map,tt=new Map,ft=new Map,ut=new Set;this.disabledNodes.forEach(At=>{ut.add(At);const sn=this.driver.query(At,".ng-animate-queued",!0);for(let hn=0;hn<sn.length;hn++)ut.add(sn[hn])});const nn=this.bodyNode,Xn=Array.from(this.statesByElement.keys()),On=xs(Xn,this.collectedEnterElements),wn=new Map;let Tn=0;On.forEach((At,sn)=>{const hn=Fr+Tn++;wn.set(sn,hn),At.forEach(Ln=>li(Ln,hn))});const Qn=[],hi=new Set,C=new Set;for(let At=0;At<this.collectedLeaveElements.length;At++){const sn=this.collectedLeaveElements[At],hn=sn[ji];hn&&hn.setForRemoval&&(Qn.push(sn),hi.add(sn),hn.hasAnimation?this.driver.query(sn,".ng-star-inserted",!0).forEach(Ln=>hi.add(Ln)):C.add(sn))}const L=new Map,S=xs(Xn,Array.from(hi));S.forEach((At,sn)=>{const hn=In+Tn++;L.set(sn,hn),At.forEach(Ln=>li(Ln,hn))}),g.push(()=>{On.forEach((At,sn)=>{const hn=wn.get(sn);At.forEach(Ln=>Br(Ln,hn))}),S.forEach((At,sn)=>{const hn=L.get(sn);At.forEach(Ln=>Br(Ln,hn))}),Qn.forEach(At=>{this.processLeaveNode(At)})});const j=[],ge=[];for(let At=this._namespaceList.length-1;At>=0;At--)this._namespaceList[At].drainQueuedTransitions(v).forEach(hn=>{const Ln=hn.player,gi=hn.element;if(j.push(Ln),this.collectedEnterElements.length){const _r=gi[ji];if(_r&&_r.setForMove){if(_r.previousTriggersValues&&_r.previousTriggersValues.has(hn.triggerName)){const oi=_r.previousTriggersValues.get(hn.triggerName),Rn=this.statesByElement.get(hn.element);if(Rn&&Rn.has(hn.triggerName)){const Ur=Rn.get(hn.triggerName);Ur.value=oi,Rn.set(hn.triggerName,Ur)}}return void Ln.destroy()}}const zi=!nn||!this.driver.containsElement(nn,gi),Bi=L.get(gi),Ui=wn.get(gi),Mi=this._buildInstruction(hn,R,Ui,Bi,zi);if(Mi.errors&&Mi.errors.length)return void ge.push(Mi);if(zi)return Ln.onStart(()=>Ie(gi,Mi.fromStyles)),Ln.onDestroy(()=>Oe(gi,Mi.toStyles)),void H.push(Ln);if(hn.isFallbackTransition)return Ln.onStart(()=>Ie(gi,Mi.fromStyles)),Ln.onDestroy(()=>Oe(gi,Mi.toStyles)),void H.push(Ln);const fo=[];Mi.timelines.forEach(_r=>{_r.stretchStartingKeyframe=!0,this.disabledNodes.has(_r.element)||fo.push(_r)}),Mi.timelines=fo,R.append(gi,Mi.timelines),_e.push({instruction:Mi,player:Ln,element:gi}),Mi.queriedElements.forEach(_r=>St(oe,_r,[]).push(Ln)),Mi.preStyleProps.forEach((_r,oi)=>{if(_r.size){let Rn=tt.get(oi);Rn||tt.set(oi,Rn=new Set),_r.forEach((Ur,Gn)=>Rn.add(Gn))}}),Mi.postStyleProps.forEach((_r,oi)=>{let Rn=ft.get(oi);Rn||ft.set(oi,Rn=new Set),_r.forEach((Ur,Gn)=>Rn.add(Gn))})});if(ge.length){const At=[];ge.forEach(sn=>{At.push(function Ee(U,g){return new D.vHH(3505,!1)}())}),j.forEach(sn=>sn.destroy()),this.reportError(At)}const Je=new Map,lt=new Map;_e.forEach(At=>{const sn=At.element;R.has(sn)&&(lt.set(sn,sn),this._beforeAnimationBuild(At.player.namespaceId,At.instruction,Je))}),H.forEach(At=>{const sn=At.element;this._getPreviousPlayers(sn,!1,At.namespaceId,At.triggerName,null).forEach(Ln=>{St(Je,sn,[]).push(Ln),Ln.destroy()})});const Yt=Qn.filter(At=>N(At,tt,ft)),Fn=new Map;So(Fn,this.driver,C,ft,ae.l3).forEach(At=>{N(At,tt,ft)&&Yt.push(At)});const Wn=new Map;On.forEach((At,sn)=>{So(Wn,this.driver,new Set(At),tt,ae.k1)}),Yt.forEach(At=>{const sn=Fn.get(At),hn=Wn.get(At);Fn.set(At,new Map([...Array.from(sn?.entries()??[]),...Array.from(hn?.entries()??[])]))});const kt=[],yi=[],di={};_e.forEach(At=>{const{element:sn,player:hn,instruction:Ln}=At;if(R.has(sn)){if(ut.has(sn))return hn.onDestroy(()=>Oe(sn,Ln.toStyles)),hn.disabled=!0,hn.overrideTotalTime(Ln.totalTime),void H.push(hn);let gi=di;if(lt.size>1){let Bi=sn;const Ui=[];for(;Bi=Bi.parentNode;){const Mi=lt.get(Bi);if(Mi){gi=Mi;break}Ui.push(Bi)}Ui.forEach(Mi=>lt.set(Mi,gi))}const zi=this._buildAnimation(hn.namespaceId,Ln,Je,J,Wn,Fn);if(hn.setRealPlayer(zi),gi===di)kt.push(hn);else{const Bi=this.playersByElement.get(gi);Bi&&Bi.length&&(hn.parentPlayer=zt(Bi)),H.push(hn)}}else Ie(sn,Ln.fromStyles),hn.onDestroy(()=>Oe(sn,Ln.toStyles)),yi.push(hn),ut.has(sn)&&H.push(hn)}),yi.forEach(At=>{const sn=J.get(At.element);if(sn&&sn.length){const hn=zt(sn);At.setRealPlayer(hn)}}),H.forEach(At=>{At.parentPlayer?At.syncPlayerEvents(At.parentPlayer):At.destroy()});for(let At=0;At<Qn.length;At++){const sn=Qn[At],hn=sn[ji];if(Br(sn,In),hn&&hn.hasAnimation)continue;let Ln=[];if(oe.size){let zi=oe.get(sn);zi&&zi.length&&Ln.push(...zi);let Bi=this.driver.query(sn,Be,!0);for(let Ui=0;Ui<Bi.length;Ui++){let Mi=oe.get(Bi[Ui]);Mi&&Mi.length&&Ln.push(...Mi)}}const gi=Ln.filter(zi=>!zi.destroyed);gi.length?Zi(this,sn,gi):this.processLeaveNode(sn)}return Qn.length=0,kt.forEach(At=>{this.players.push(At),At.onDone(()=>{At.destroy();const sn=this.players.indexOf(At);this.players.splice(sn,1)}),At.play()}),kt}elementContainsData(g,v){let R=!1;const H=v[ji];return H&&H.setForRemoval&&(R=!0),this.playersByElement.has(v)&&(R=!0),this.playersByQueriedElement.has(v)&&(R=!0),this.statesByElement.has(v)&&(R=!0),this._fetchNamespace(g).elementContainsData(v)||R}afterFlush(g){this._flushFns.push(g)}afterFlushAnimationsDone(g){this._whenQuietFns.push(g)}_getPreviousPlayers(g,v,R,H,J){let _e=[];if(v){const oe=this.playersByQueriedElement.get(g);oe&&(_e=oe)}else{const oe=this.playersByElement.get(g);if(oe){const tt=!J||J==Qr;oe.forEach(ft=>{ft.queued||!tt&&ft.triggerName!=H||_e.push(ft)})}}return(R||H)&&(_e=_e.filter(oe=>!(R&&R!=oe.namespaceId||H&&H!=oe.triggerName))),_e}_beforeAnimationBuild(g,v,R){const J=v.element,_e=v.isRemovalTransition?void 0:g,oe=v.isRemovalTransition?void 0:v.triggerName;for(const tt of v.timelines){const ft=tt.element,ut=ft!==J,nn=St(R,ft,[]);this._getPreviousPlayers(ft,ut,_e,oe,v.toState).forEach(On=>{const wn=On.getRealPlayer();wn.beforeDestroy&&wn.beforeDestroy(),On.destroy(),nn.push(On)})}Ie(J,v.fromStyles)}_buildAnimation(g,v,R,H,J,_e){const oe=v.triggerName,tt=v.element,ft=[],ut=new Set,nn=new Set,Xn=v.timelines.map(wn=>{const Tn=wn.element;ut.add(Tn);const Qn=Tn[ji];if(Qn&&Qn.removedBeforeQueried)return new ae.ZN(wn.duration,wn.delay);const hi=Tn!==tt,C=function X(U){const g=[];return I(U,g),g}((R.get(Tn)||Rr).map(Je=>Je.getRealPlayer())).filter(Je=>!!Je.element&&Je.element===Tn),L=J.get(Tn),S=_e.get(Tn),j=Kt(0,this._normalizer,0,wn.keyframes,L,S),ge=this._buildPlayer(wn,j,C);if(wn.subTimeline&&H&&nn.add(Tn),hi){const Je=new Cs(g,oe,Tn);Je.setRealPlayer(ge),ft.push(Je)}return ge});ft.forEach(wn=>{St(this.playersByQueriedElement,wn.element,[]).push(wn),wn.onDone(()=>function co(U,g,v){let R=U.get(g);if(R){if(R.length){const H=R.indexOf(v);R.splice(H,1)}0==R.length&&U.delete(g)}return R}(this.playersByQueriedElement,wn.element,wn))}),ut.forEach(wn=>li(wn,Re));const On=zt(Xn);return On.onDestroy(()=>{ut.forEach(wn=>Br(wn,Re)),Oe(tt,v.toStyles)}),nn.forEach(wn=>{St(H,wn,[]).push(On)}),On}_buildPlayer(g,v,R){return v.length>0?this.driver.animate(g.element,v,g.duration,g.delay,g.easing,R):new ae.ZN(g.duration,g.delay)}}class Cs{constructor(g,v,R){this.namespaceId=g,this.triggerName=v,this.element=R,this._player=new ae.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(g){this._containsRealPlayer||(this._player=g,this._queuedCallbacks.forEach((v,R)=>{v.forEach(H=>dn(g,R,void 0,H))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(g.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(g){this.totalTime=g}syncPlayerEvents(g){const v=this._player;v.triggerCallback&&g.onStart(()=>v.triggerCallback("start")),g.onDone(()=>this.finish()),g.onDestroy(()=>this.destroy())}_queueEvent(g,v){St(this._queuedCallbacks,g,[]).push(v)}onDone(g){this.queued&&this._queueEvent("done",g),this._player.onDone(g)}onStart(g){this.queued&&this._queueEvent("start",g),this._player.onStart(g)}onDestroy(g){this.queued&&this._queueEvent("destroy",g),this._player.onDestroy(g)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(g){this.queued||this._player.setPosition(g)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(g){const v=this._player;v.triggerCallback&&v.triggerCallback(g)}}function os(U){return U&&1===U.nodeType}function Pi(U,g){const v=U.style.display;return U.style.display=g??"none",v}function So(U,g,v,R,H){const J=[];v.forEach(tt=>J.push(Pi(tt)));const _e=[];R.forEach((tt,ft)=>{const ut=new Map;tt.forEach(nn=>{const Xn=g.computeStyle(ft,nn,H);ut.set(nn,Xn),(!Xn||0==Xn.length)&&(ft[ji]=ao,_e.push(ft))}),U.set(ft,ut)});let oe=0;return v.forEach(tt=>Pi(tt,J[oe++])),_e}function xs(U,g){const v=new Map;if(U.forEach(oe=>v.set(oe,[])),0==g.length)return v;const R=1,H=new Set(g),J=new Map;function _e(oe){if(!oe)return R;let tt=J.get(oe);if(tt)return tt;const ft=oe.parentNode;return tt=v.has(ft)?ft:H.has(ft)?R:_e(ft),J.set(oe,tt),tt}return g.forEach(oe=>{const tt=_e(oe);tt!==R&&v.get(tt).push(oe)}),v}function li(U,g){U.classList?.add(g)}function Br(U,g){U.classList?.remove(g)}function Zi(U,g,v){zt(v).onDone(()=>U.processLeaveNode(g))}function I(U,g){for(let v=0;v<U.length;v++){const R=U[v];R instanceof ae.ZE?I(R.players,g):g.push(R)}}function N(U,g,v){const R=v.get(U);if(!R)return!1;let H=g.get(U);return H?R.forEach(J=>H.add(J)):g.set(U,R),v.delete(U),!0}class q{constructor(g,v,R){this.bodyNode=g,this._driver=v,this._normalizer=R,this._triggerCache={},this.onRemovalComplete=(H,J)=>{},this._transitionEngine=new Xs(g,v,R),this._timelineEngine=new zo(g,v,R),this._transitionEngine.onRemovalComplete=(H,J)=>this.onRemovalComplete(H,J)}registerTrigger(g,v,R,H,J){const _e=g+"-"+H;let oe=this._triggerCache[_e];if(!oe){const tt=[],ft=[],ut=Ar(this._driver,J,tt,ft);if(tt.length)throw function en(U,g){return new D.vHH(3404,!1)}();oe=function Vi(U,g,v){return new ro(U,g,v)}(H,ut,this._normalizer),this._triggerCache[_e]=oe}this._transitionEngine.registerTrigger(v,H,oe)}register(g,v){this._transitionEngine.register(g,v)}destroy(g,v){this._transitionEngine.destroy(g,v)}onInsert(g,v,R,H){this._transitionEngine.insertNode(g,v,R,H)}onRemove(g,v,R,H){this._transitionEngine.removeNode(g,v,H||!1,R)}disableAnimations(g,v){this._transitionEngine.markElementAsDisabled(g,v)}process(g,v,R,H){if("@"==R.charAt(0)){const[J,_e]=Un(R);this._timelineEngine.command(J,v,_e,H)}else this._transitionEngine.trigger(g,v,R,H)}listen(g,v,R,H,J){if("@"==R.charAt(0)){const[_e,oe]=Un(R);return this._timelineEngine.listen(_e,v,oe,J)}return this._transitionEngine.listen(g,v,R,H,J)}flush(g=-1){this._transitionEngine.flush(g)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Qe=(()=>{class U{constructor(v,R,H){this._element=v,this._startStyles=R,this._endStyles=H,this._state=0;let J=U.initialStylesByElement.get(v);J||U.initialStylesByElement.set(v,J=new Map),this._initialStyles=J}start(){this._state<1&&(this._startStyles&&Oe(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Oe(this._element,this._initialStyles),this._endStyles&&(Oe(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(U.initialStylesByElement.delete(this._element),this._startStyles&&(Ie(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ie(this._element,this._endStyles),this._endStyles=null),Oe(this._element,this._initialStyles),this._state=3)}}return U.initialStylesByElement=new WeakMap,U})();function _t(U){let g=null;return U.forEach((v,R)=>{(function ct(U){return"display"===U||"position"===U})(R)&&(g=g||new Map,g.set(R,v))}),g}class on{constructor(g,v,R,H){this.element=g,this.keyframes=v,this.options=R,this._specialStyles=H,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=R.duration,this._delay=R.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(g=>g()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const g=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,g,this.options),this._finalKeyframe=g.length?g[g.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(g){const v=[];return g.forEach(R=>{v.push(Object.fromEntries(R))}),v}_triggerWebAnimation(g,v,R){return g.animate(this._convertKeyframesToObject(v),R)}onStart(g){this._originalOnStartFns.push(g),this._onStartFns.push(g)}onDone(g){this._originalOnDoneFns.push(g),this._onDoneFns.push(g)}onDestroy(g){this._onDestroyFns.push(g)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(g=>g()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(g=>g()),this._onDestroyFns=[])}setPosition(g){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=g*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const g=new Map;this.hasStarted()&&this._finalKeyframe.forEach((R,H)=>{"offset"!==H&&g.set(H,this._finished?R:An(this.element,H))}),this.currentSnapshot=g}triggerCallback(g){const v="start"===g?this._onStartFns:this._onDoneFns;v.forEach(R=>R()),v.length=0}}class bn{validateStyleProperty(g){return!0}validateAnimatableStyleProperty(g){return!0}matchesElement(g,v){return!1}containsElement(g,v){return Gt(g,v)}getParentElement(g){return Wt(g)}query(g,v,R){return Gi(g,v,R)}computeStyle(g,v,R){return window.getComputedStyle(g)[v]}animate(g,v,R,H,J,_e=[]){const tt={duration:R,delay:H,fill:0==H?"both":"forwards"};J&&(tt.easing=J);const ft=new Map,ut=_e.filter(On=>On instanceof on);(function nt(U,g){return 0===U||0===g})(R,H)&&ut.forEach(On=>{On.currentSnapshot.forEach((wn,Tn)=>ft.set(Tn,wn))});let nn=function Hn(U){return U.length?U[0]instanceof Map?U:U.map(g=>_n(g)):[]}(v).map(On=>un(On));nn=function Nt(U,g,v){if(v.size&&g.length){let R=g[0],H=[];if(v.forEach((J,_e)=>{R.has(_e)||H.push(_e),R.set(_e,J)}),H.length)for(let J=1;J<g.length;J++){let _e=g[J];H.forEach(oe=>_e.set(oe,An(U,oe)))}}return g}(g,nn,ft);const Xn=function ye(U,g){let v=null,R=null;return Array.isArray(g)&&g.length?(v=_t(g[0]),g.length>1&&(R=_t(g[g.length-1]))):g instanceof Map&&(v=_t(g)),v||R?new Qe(U,v,R):null}(g,nn);return new on(g,nn,tt,Xn)}}var qn=F(6895);let mr=(()=>{class U extends ae._j{constructor(v,R){super(),this._nextAnimationId=0,this._renderer=v.createRenderer(R.body,{id:"0",encapsulation:D.ifc.None,styles:[],data:{animation:[]}})}build(v){const R=this._nextAnimationId.toString();this._nextAnimationId++;const H=Array.isArray(v)?(0,ae.vP)(v):v;return Dr(this._renderer,null,R,"register",[H]),new ki(R,this._renderer)}}return U.\u0275fac=function(v){return new(v||U)(D.LFG(D.FYo),D.LFG(qn.K0))},U.\u0275prov=D.Yz7({token:U,factory:U.\u0275fac}),U})();class ki extends ae.LC{constructor(g,v){super(),this._id=g,this._renderer=v}create(g,v){return new ir(this._id,g,v||{},this._renderer)}}class ir{constructor(g,v,R,H){this.id=g,this.element=v,this._renderer=H,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",R)}_listen(g,v){return this._renderer.listen(this.element,`@@${this.id}:${g}`,v)}_command(g,...v){return Dr(this._renderer,this.element,this.id,g,v)}onDone(g){this._listen("done",g)}onStart(g){this._listen("start",g)}onDestroy(g){this._listen("destroy",g)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(g){this._command("setPosition",g)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Dr(U,g,v,R,H){return U.setProperty(g,`@@${v}:${R}`,H)}const xt="@.disabled";let zn=(()=>{class U{constructor(v,R,H){this.delegate=v,this.engine=R,this._zone=H,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),R.onRemovalComplete=(J,_e)=>{const oe=_e?.parentNode(J);oe&&_e.removeChild(oe,J)}}createRenderer(v,R){const J=this.delegate.createRenderer(v,R);if(!(v&&R&&R.data&&R.data.animation)){let ut=this._rendererCache.get(J);return ut||(ut=new Di("",J,this.engine,()=>this._rendererCache.delete(J)),this._rendererCache.set(J,ut)),ut}const _e=R.id,oe=R.id+"-"+this._currentId;this._currentId++,this.engine.register(oe,v);const tt=ut=>{Array.isArray(ut)?ut.forEach(tt):this.engine.registerTrigger(_e,oe,v,ut.name,ut)};return R.data.animation.forEach(tt),new $o(this,oe,J,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(v,R,H){v>=0&&v<this._microtaskId?this._zone.run(()=>R(H)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(J=>{const[_e,oe]=J;_e(oe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([R,H]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return U.\u0275fac=function(v){return new(v||U)(D.LFG(D.FYo),D.LFG(q),D.LFG(D.R0b))},U.\u0275prov=D.Yz7({token:U,factory:U.\u0275fac}),U})();class Di{constructor(g,v,R,H){this.namespaceId=g,this.delegate=v,this.engine=R,this._onDestroy=H,this.destroyNode=this.delegate.destroyNode?J=>v.destroyNode(J):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(g,v){return this.delegate.createElement(g,v)}createComment(g){return this.delegate.createComment(g)}createText(g){return this.delegate.createText(g)}appendChild(g,v){this.delegate.appendChild(g,v),this.engine.onInsert(this.namespaceId,v,g,!1)}insertBefore(g,v,R,H=!0){this.delegate.insertBefore(g,v,R),this.engine.onInsert(this.namespaceId,v,g,H)}removeChild(g,v,R){this.engine.onRemove(this.namespaceId,v,this.delegate,R)}selectRootElement(g,v){return this.delegate.selectRootElement(g,v)}parentNode(g){return this.delegate.parentNode(g)}nextSibling(g){return this.delegate.nextSibling(g)}setAttribute(g,v,R,H){this.delegate.setAttribute(g,v,R,H)}removeAttribute(g,v,R){this.delegate.removeAttribute(g,v,R)}addClass(g,v){this.delegate.addClass(g,v)}removeClass(g,v){this.delegate.removeClass(g,v)}setStyle(g,v,R,H){this.delegate.setStyle(g,v,R,H)}removeStyle(g,v,R){this.delegate.removeStyle(g,v,R)}setProperty(g,v,R){"@"==v.charAt(0)&&v==xt?this.disableAnimations(g,!!R):this.delegate.setProperty(g,v,R)}setValue(g,v){this.delegate.setValue(g,v)}listen(g,v,R){return this.delegate.listen(g,v,R)}disableAnimations(g,v){this.engine.disableAnimations(g,v)}}class $o extends Di{constructor(g,v,R,H,J){super(v,R,H,J),this.factory=g,this.namespaceId=v}setProperty(g,v,R){"@"==v.charAt(0)?"."==v.charAt(1)&&v==xt?this.disableAnimations(g,R=void 0===R||!!R):this.engine.process(this.namespaceId,g,v.slice(1),R):this.delegate.setProperty(g,v,R)}listen(g,v,R){if("@"==v.charAt(0)){const H=function cr(U){switch(U){case"body":return document.body;case"document":return document;case"window":return window;default:return U}}(g);let J=v.slice(1),_e="";return"@"!=J.charAt(0)&&([J,_e]=function Ao(U){const g=U.indexOf(".");return[U.substring(0,g),U.slice(g+1)]}(J)),this.engine.listen(this.namespaceId,H,J,_e,oe=>{this.factory.scheduleListenerCallback(oe._data||-1,R,oe)})}return this.delegate.listen(g,v,R)}}const Us=[{provide:ae._j,useClass:mr},{provide:Ir,useFactory:function ur(){return new vs}},{provide:q,useClass:(()=>{class U extends q{constructor(v,R,H,J){super(v.body,R,H)}ngOnDestroy(){this.flush()}}return U.\u0275fac=function(v){return new(v||U)(D.LFG(qn.K0),D.LFG(gn),D.LFG(Ir),D.LFG(D.z2F))},U.\u0275prov=D.Yz7({token:U,factory:U.\u0275fac}),U})()},{provide:D.FYo,useFactory:function Wo(U,g,v){return new zn(U,g,v)},deps:[w.se,q,D.R0b]}],Mo=[{provide:gn,useFactory:()=>new bn},{provide:D.QbO,useValue:"BrowserAnimations"},...Us],Aa=[{provide:gn,useClass:ri},{provide:D.QbO,useValue:"NoopAnimations"},...Us];let oa=(()=>{class U{static withConfig(v){return{ngModule:U,providers:v.disableAnimations?Aa:Mo}}}return U.\u0275fac=function(v){return new(v||U)},U.\u0275mod=D.oAB({type:U}),U.\u0275inj=D.cJS({providers:Mo,imports:[w.b2]}),U})();var Pr=F(4843),rr=F(9167);const cs=[{path:"",canMatch:[()=>!(0,D.f3M)(rr.Q).isGameActivated],loadComponent:()=>Promise.all([F.e(592),F.e(786)]).then(F.bind(F,1786)).then(U=>U.StartPageComponent)},{path:"",canMatch:[()=>!!(0,D.f3M)(rr.Q).isGameActivated],loadChildren:()=>F.e(306).then(F.bind(F,7306)).then(U=>U.GameModule)},{path:"**",redirectTo:"/"}];let uo=(()=>{class U{static \u0275fac=function(R){return new(R||U)};static \u0275mod=D.oAB({type:U});static \u0275inj=D.cJS({imports:[Pr.Bz.forRoot(cs),Pr.Bz]})}return U})();var Or=F(5548);let Io=(()=>{class U{static \u0275fac=function(R){return new(R||U)};static \u0275cmp=D.Xpm({type:U,selectors:[["root"]],decls:1,vars:1,consts:[[3,"isUseSpinner"]],template:function(R,H){1&R&&D._UZ(0,"wrap-router-outlet",0),2&R&&D.Q6J("isUseSpinner",!1)},dependencies:[Or.U],styles:["[_nghost-%COMP%]{position:relative;display:block;width:100%;height:100%}[_nghost-%COMP%]   wrap-router-outlet[_ngcontent-%COMP%]{width:100%;height:100%}"]})}return U})();var Hs=F(4463);class Ks{constructor(g,v="assets/i18n/",R=".json"){this.http=g,this.prefix=v,this.suffix=R}getTranslation(g){return this.http.get(`${this.prefix}${g}${this.suffix}`)}}var Cr=F(8465),hr=F(6033);let Yo=(()=>{class U{constructor(v){v.use(v.defaultLang)}static \u0275fac=function(R){return new(R||U)(D.LFG(Hs.sK))};static \u0275mod=D.oAB({type:U});static \u0275inj=D.cJS({imports:[Hs.aw.forRoot({loader:{provide:Hs.Zw,useFactory:v=>new Ks(v),deps:[ue.eN]},defaultLanguage:localStorage.getItem(hr.y.CurrentLanguage)||Cr.D.En})]})}return U})();const aa={provide:he.Bq,useFactory:()=>({autoFocus:!1,hasBackdrop:!0,closeOnNavigation:!0,restoreFocus:!0})};let Zs=(()=>{class U{static \u0275fac=function(R){return new(R||U)};static \u0275mod=D.oAB({type:U,bootstrap:[Io]});static \u0275inj=D.cJS({providers:[aa],imports:[oa,w.b2,uo,ue.JF,he.Is,Yo,Or.U]})}return U})();(0,D.G48)(),w.q6().bootstrapModule(Zs).catch(U=>console.error(U))},5469:Mt=>{"use strict";function ke(W,te,Y){Y=Y||2;var Ve,De,Ze,Q,Ee,Ue,Ye,we=te&&te.length,Se=we?te[0]*Y:W.length,fe=F(W,0,Se,Y,!0),me=[];if(!fe||fe.next===fe.prev)return me;if(we&&(fe=function ve(W,te,Y,we){var fe,me,Ze,Se=[];for(fe=0,me=te.length;fe<me;fe++)(Ze=F(W,te[fe]*we,fe<me-1?te[fe+1]*we:W.length,we,!1))===Ze.next&&(Ze.steiner=!0),Se.push(gt(Ze));for(Se.sort(ce),fe=0;fe<Se.length;fe++)Y=Ce(Se[fe],Y);return Y}(W,te,fe,Y)),W.length>80*Y){Ve=Ze=W[0],De=Q=W[1];for(var pt=Y;pt<Se;pt+=Y)(Ee=W[pt])<Ve&&(Ve=Ee),(Ue=W[pt+1])<De&&(De=Ue),Ee>Ze&&(Ze=Ee),Ue>Q&&(Q=Ue);Ye=0!==(Ye=Math.max(Ze-Ve,Q-De))?32767/Ye:0}return D(fe,me,Y,Ve,De,Ye,0),me}function F(W,te,Y,we,Se){var fe,me;if(Se===en(W,te,Y,we)>0)for(fe=te;fe<Y;fe+=we)me=wt(fe,W[fe],W[fe+1],me);else for(fe=Y-we;fe>=te;fe-=we)me=wt(fe,W[fe],W[fe+1],me);return me&&st(me,me.next)&&(Ot(me),me=me.next),me}function w(W,te){if(!W)return W;te||(te=W);var we,Y=W;do{if(we=!1,Y.steiner||!st(Y,Y.next)&&0!==bt(Y.prev,Y,Y.next))Y=Y.next;else{if(Ot(Y),(Y=te=Y.prev)===Y.next)break;we=!0}}while(we||Y!==te);return te}function D(W,te,Y,we,Se,fe,me){if(W){!me&&fe&&function Ae(W,te,Y,we){var Se=W;do{0===Se.z&&(Se.z=$e(Se.x,Se.y,te,Y,we)),Se.prevZ=Se.prev,Se.nextZ=Se.next,Se=Se.next}while(Se!==W);Se.prevZ.nextZ=null,Se.prevZ=null,function it(W){var te,Y,we,Se,fe,me,Ve,De,Ze=1;do{for(Y=W,W=null,fe=null,me=0;Y;){for(me++,we=Y,Ve=0,te=0;te<Ze&&(Ve++,we=we.nextZ);te++);for(De=Ze;Ve>0||De>0&&we;)0!==Ve&&(0===De||!we||Y.z<=we.z)?(Se=Y,Y=Y.nextZ,Ve--):(Se=we,we=we.nextZ,De--),fe?fe.nextZ=Se:W=Se,Se.prevZ=fe,fe=Se;Y=we}fe.nextZ=null,Ze*=2}while(me>1)}(Se)}(W,we,Se,fe);for(var De,Ze,Ve=W;W.prev!==W.next;)if(De=W.prev,Ze=W.next,fe?he(W,we,Se,fe):ue(W))te.push(De.i/Y|0),te.push(W.i/Y|0),te.push(Ze.i/Y|0),Ot(W),W=Ze.next,Ve=Ze.next;else if((W=Ze)===Ve){me?1===me?D(W=ae(w(W),te,Y),te,Y,we,Se,fe,2):2===me&&ee(W,te,Y,we,Se,fe):D(w(W),te,Y,we,Se,fe,1);break}}}function ue(W){var te=W.prev,Y=W,we=W.next;if(bt(te,Y,we)>=0)return!1;for(var Se=te.x,fe=Y.x,me=we.x,Ve=te.y,De=Y.y,Ze=we.y,Q=Se<fe?Se<me?Se:me:fe<me?fe:me,Ee=Ve<De?Ve<Ze?Ve:Ze:De<Ze?De:Ze,Ue=Se>fe?Se>me?Se:me:fe>me?fe:me,Ye=Ve>De?Ve>Ze?Ve:Ze:De>Ze?De:Ze,pt=we.next;pt!==te;){if(pt.x>=Q&&pt.x<=Ue&&pt.y>=Ee&&pt.y<=Ye&&Tt(Se,Ve,fe,De,me,Ze,pt.x,pt.y)&&bt(pt.prev,pt,pt.next)>=0)return!1;pt=pt.next}return!0}function he(W,te,Y,we){var Se=W.prev,fe=W,me=W.next;if(bt(Se,fe,me)>=0)return!1;for(var Ve=Se.x,De=fe.x,Ze=me.x,Q=Se.y,Ee=fe.y,Ue=me.y,Ye=Ve<De?Ve<Ze?Ve:Ze:De<Ze?De:Ze,pt=Q<Ee?Q<Ue?Q:Ue:Ee<Ue?Ee:Ue,zt=Ve>De?Ve>Ze?Ve:Ze:De>Ze?De:Ze,Kt=Q>Ee?Q>Ue?Q:Ue:Ee>Ue?Ee:Ue,dn=$e(Ye,pt,te,Y,we),vn=$e(zt,Kt,te,Y,we),$t=W.prevZ,St=W.nextZ;$t&&$t.z>=dn&&St&&St.z<=vn;){if($t.x>=Ye&&$t.x<=zt&&$t.y>=pt&&$t.y<=Kt&&$t!==Se&&$t!==me&&Tt(Ve,Q,De,Ee,Ze,Ue,$t.x,$t.y)&&bt($t.prev,$t,$t.next)>=0||($t=$t.prevZ,St.x>=Ye&&St.x<=zt&&St.y>=pt&&St.y<=Kt&&St!==Se&&St!==me&&Tt(Ve,Q,De,Ee,Ze,Ue,St.x,St.y)&&bt(St.prev,St,St.next)>=0))return!1;St=St.nextZ}for(;$t&&$t.z>=dn;){if($t.x>=Ye&&$t.x<=zt&&$t.y>=pt&&$t.y<=Kt&&$t!==Se&&$t!==me&&Tt(Ve,Q,De,Ee,Ze,Ue,$t.x,$t.y)&&bt($t.prev,$t,$t.next)>=0)return!1;$t=$t.prevZ}for(;St&&St.z<=vn;){if(St.x>=Ye&&St.x<=zt&&St.y>=pt&&St.y<=Kt&&St!==Se&&St!==me&&Tt(Ve,Q,De,Ee,Ze,Ue,St.x,St.y)&&bt(St.prev,St,St.next)>=0)return!1;St=St.nextZ}return!0}function ae(W,te,Y){var we=W;do{var Se=we.prev,fe=we.next.next;!st(Se,fe)&&Ct(Se,we,we.next,fe)&&He(Se,fe)&&He(fe,Se)&&(te.push(Se.i/Y|0),te.push(we.i/Y|0),te.push(fe.i/Y|0),Ot(we),Ot(we.next),we=W=fe),we=we.next}while(we!==W);return w(we)}function ee(W,te,Y,we,Se,fe){var me=W;do{for(var Ve=me.next.next;Ve!==me.prev;){if(me.i!==Ve.i&&Ke(me,Ve)){var De=xe(me,Ve);return me=w(me,me.next),De=w(De,De.next),D(me,te,Y,we,Se,fe,0),void D(De,te,Y,we,Se,fe,0)}Ve=Ve.next}me=me.next}while(me!==W)}function ce(W,te){return W.x-te.x}function Ce(W,te){var Y=function Le(W,te){var me,Y=te,we=W.x,Se=W.y,fe=-1/0;do{if(Se<=Y.y&&Se>=Y.next.y&&Y.next.y!==Y.y){var Ve=Y.x+(Se-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(Ve<=we&&Ve>fe&&(fe=Ve,me=Y.x<Y.next.x?Y:Y.next,Ve===we))return me}Y=Y.next}while(Y!==te);if(!me)return null;var Ue,De=me,Ze=me.x,Q=me.y,Ee=1/0;Y=me;do{we>=Y.x&&Y.x>=Ze&&we!==Y.x&&Tt(Se<Q?we:fe,Se,Ze,Q,Se<Q?fe:we,Se,Y.x,Y.y)&&(Ue=Math.abs(Se-Y.y)/(we-Y.x),He(Y,W)&&(Ue<Ee||Ue===Ee&&(Y.x>me.x||Y.x===me.x&&Pe(me,Y)))&&(me=Y,Ee=Ue)),Y=Y.next}while(Y!==De);return me}(W,te);if(!Y)return te;var we=xe(Y,W);return w(we,we.next),w(Y,Y.next)}function Pe(W,te){return bt(W.prev,W,te.prev)<0&&bt(te.next,W,W.next)<0}function $e(W,te,Y,we,Se){return(W=1431655765&((W=858993459&((W=252645135&((W=16711935&((W=(W-Y)*Se|0)|W<<8))|W<<4))|W<<2))|W<<1))|(te=1431655765&((te=858993459&((te=252645135&((te=16711935&((te=(te-we)*Se|0)|te<<8))|te<<4))|te<<2))|te<<1))<<1}function gt(W){var te=W,Y=W;do{(te.x<Y.x||te.x===Y.x&&te.y<Y.y)&&(Y=te),te=te.next}while(te!==W);return Y}function Tt(W,te,Y,we,Se,fe,me,Ve){return(Se-me)*(te-Ve)>=(W-me)*(fe-Ve)&&(W-me)*(we-Ve)>=(Y-me)*(te-Ve)&&(Y-me)*(fe-Ve)>=(Se-me)*(we-Ve)}function Ke(W,te){return W.next.i!==te.i&&W.prev.i!==te.i&&!function dt(W,te){var Y=W;do{if(Y.i!==W.i&&Y.next.i!==W.i&&Y.i!==te.i&&Y.next.i!==te.i&&Ct(Y,Y.next,W,te))return!0;Y=Y.next}while(Y!==W);return!1}(W,te)&&(He(W,te)&&He(te,W)&&function at(W,te){var Y=W,we=!1,Se=(W.x+te.x)/2,fe=(W.y+te.y)/2;do{Y.y>fe!=Y.next.y>fe&&Y.next.y!==Y.y&&Se<(Y.next.x-Y.x)*(fe-Y.y)/(Y.next.y-Y.y)+Y.x&&(we=!we),Y=Y.next}while(Y!==W);return we}(W,te)&&(bt(W.prev,W,te.prev)||bt(W,te.prev,te))||st(W,te)&&bt(W.prev,W,W.next)>0&&bt(te.prev,te,te.next)>0)}function bt(W,te,Y){return(te.y-W.y)*(Y.x-te.x)-(te.x-W.x)*(Y.y-te.y)}function st(W,te){return W.x===te.x&&W.y===te.y}function Ct(W,te,Y,we){var Se=ne(bt(W,te,Y)),fe=ne(bt(W,te,we)),me=ne(bt(Y,we,W)),Ve=ne(bt(Y,we,te));return!!(Se!==fe&&me!==Ve||0===Se&&Xe(W,Y,te)||0===fe&&Xe(W,we,te)||0===me&&Xe(Y,W,we)||0===Ve&&Xe(Y,te,we))}function Xe(W,te,Y){return te.x<=Math.max(W.x,Y.x)&&te.x>=Math.min(W.x,Y.x)&&te.y<=Math.max(W.y,Y.y)&&te.y>=Math.min(W.y,Y.y)}function ne(W){return W>0?1:W<0?-1:0}function He(W,te){return bt(W.prev,W,W.next)<0?bt(W,te,W.next)>=0&&bt(W,W.prev,te)>=0:bt(W,te,W.prev)<0||bt(W,W.next,te)<0}function xe(W,te){var Y=new Rt(W.i,W.x,W.y),we=new Rt(te.i,te.x,te.y),Se=W.next,fe=te.prev;return W.next=te,te.prev=W,Y.next=Se,Se.prev=Y,we.next=Y,Y.prev=we,fe.next=we,we.prev=fe,we}function wt(W,te,Y,we){var Se=new Rt(W,te,Y);return we?(Se.next=we.next,Se.prev=we,we.next.prev=Se,we.next=Se):(Se.prev=Se,Se.next=Se),Se}function Ot(W){W.next.prev=W.prev,W.prev.next=W.next,W.prevZ&&(W.prevZ.nextZ=W.nextZ),W.nextZ&&(W.nextZ.prevZ=W.prevZ)}function Rt(W,te,Y){this.i=W,this.x=te,this.y=Y,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function en(W,te,Y,we){for(var Se=0,fe=te,me=Y-we;fe<Y;fe+=we)Se+=(W[me]-W[fe])*(W[fe+1]+W[me+1]),me=fe;return Se}Mt.exports=ke,Mt.exports.default=ke,ke.deviation=function(W,te,Y,we){var Se=te&&te.length,me=Math.abs(en(W,0,Se?te[0]*Y:W.length,Y));if(Se)for(var Ve=0,De=te.length;Ve<De;Ve++)me-=Math.abs(en(W,te[Ve]*Y,Ve<De-1?te[Ve+1]*Y:W.length,Y));var Ee=0;for(Ve=0;Ve<we.length;Ve+=3){var Ue=we[Ve]*Y,Ye=we[Ve+1]*Y,pt=we[Ve+2]*Y;Ee+=Math.abs((W[Ue]-W[pt])*(W[Ye+1]-W[Ue+1])-(W[Ue]-W[Ye])*(W[pt+1]-W[Ue+1]))}return 0===me&&0===Ee?0:Math.abs((Ee-me)/me)},ke.flatten=function(W){for(var te=W[0][0].length,Y={vertices:[],holes:[],dimensions:te},we=0,Se=0;Se<W.length;Se++){for(var fe=0;fe<W[Se].length;fe++)for(var me=0;me<te;me++)Y.vertices.push(W[Se][fe][me]);Se>0&&Y.holes.push(we+=W[Se-1].length)}return Y}},2005:Mt=>{"use strict";var ke=Object.prototype.hasOwnProperty,F="~";function w(){}function D(ee,ve,ce){this.fn=ee,this.context=ve,this.once=ce||!1}function ue(ee,ve,ce,Ce,Le){if("function"!=typeof ce)throw new TypeError("The listener must be a function");var Pe=new D(ce,Ce||ee,Le),Ae=F?F+ve:ve;return ee._events[Ae]?ee._events[Ae].fn?ee._events[Ae]=[ee._events[Ae],Pe]:ee._events[Ae].push(Pe):(ee._events[Ae]=Pe,ee._eventsCount++),ee}function he(ee,ve){0==--ee._eventsCount?ee._events=new w:delete ee._events[ve]}function ae(){this._events=new w,this._eventsCount=0}Object.create&&(w.prototype=Object.create(null),(new w).__proto__||(F=!1)),ae.prototype.eventNames=function(){var ce,Ce,ve=[];if(0===this._eventsCount)return ve;for(Ce in ce=this._events)ke.call(ce,Ce)&&ve.push(F?Ce.slice(1):Ce);return Object.getOwnPropertySymbols?ve.concat(Object.getOwnPropertySymbols(ce)):ve},ae.prototype.listeners=function(ve){var Ce=this._events[F?F+ve:ve];if(!Ce)return[];if(Ce.fn)return[Ce.fn];for(var Le=0,Pe=Ce.length,Ae=new Array(Pe);Le<Pe;Le++)Ae[Le]=Ce[Le].fn;return Ae},ae.prototype.listenerCount=function(ve){var Ce=this._events[F?F+ve:ve];return Ce?Ce.fn?1:Ce.length:0},ae.prototype.emit=function(ve,ce,Ce,Le,Pe,Ae){var it=F?F+ve:ve;if(!this._events[it])return!1;var Tt,Ke,$e=this._events[it],gt=arguments.length;if($e.fn){switch($e.once&&this.removeListener(ve,$e.fn,void 0,!0),gt){case 1:return $e.fn.call($e.context),!0;case 2:return $e.fn.call($e.context,ce),!0;case 3:return $e.fn.call($e.context,ce,Ce),!0;case 4:return $e.fn.call($e.context,ce,Ce,Le),!0;case 5:return $e.fn.call($e.context,ce,Ce,Le,Pe),!0;case 6:return $e.fn.call($e.context,ce,Ce,Le,Pe,Ae),!0}for(Ke=1,Tt=new Array(gt-1);Ke<gt;Ke++)Tt[Ke-1]=arguments[Ke];$e.fn.apply($e.context,Tt)}else{var st,bt=$e.length;for(Ke=0;Ke<bt;Ke++)switch($e[Ke].once&&this.removeListener(ve,$e[Ke].fn,void 0,!0),gt){case 1:$e[Ke].fn.call($e[Ke].context);break;case 2:$e[Ke].fn.call($e[Ke].context,ce);break;case 3:$e[Ke].fn.call($e[Ke].context,ce,Ce);break;case 4:$e[Ke].fn.call($e[Ke].context,ce,Ce,Le);break;default:if(!Tt)for(st=1,Tt=new Array(gt-1);st<gt;st++)Tt[st-1]=arguments[st];$e[Ke].fn.apply($e[Ke].context,Tt)}}return!0},ae.prototype.on=function(ve,ce,Ce){return ue(this,ve,ce,Ce,!1)},ae.prototype.once=function(ve,ce,Ce){return ue(this,ve,ce,Ce,!0)},ae.prototype.removeListener=function(ve,ce,Ce,Le){var Pe=F?F+ve:ve;if(!this._events[Pe])return this;if(!ce)return he(this,Pe),this;var Ae=this._events[Pe];if(Ae.fn)Ae.fn===ce&&(!Le||Ae.once)&&(!Ce||Ae.context===Ce)&&he(this,Pe);else{for(var it=0,$e=[],gt=Ae.length;it<gt;it++)(Ae[it].fn!==ce||Le&&!Ae[it].once||Ce&&Ae[it].context!==Ce)&&$e.push(Ae[it]);$e.length?this._events[Pe]=1===$e.length?$e[0]:$e:he(this,Pe)}return this},ae.prototype.removeAllListeners=function(ve){var ce;return ve?this._events[ce=F?F+ve:ve]&&he(this,ce):(this._events=new w,this._eventsCount=0),this},ae.prototype.off=ae.prototype.removeListener,ae.prototype.addListener=ae.prototype.on,ae.prefixed=F,ae.EventEmitter=ae,Mt.exports=ae},516:Mt=>{"use strict";function ke(F,w){return Object.prototype.hasOwnProperty.call(F,w)}Mt.exports=function(F,w,D,ue){D=D||"=";var he={};if("string"!=typeof F||0===F.length)return he;var ae=/\+/g;F=F.split(w=w||"&");var ee=1e3;ue&&"number"==typeof ue.maxKeys&&(ee=ue.maxKeys);var ve=F.length;ee>0&&ve>ee&&(ve=ee);for(var ce=0;ce<ve;++ce){var Pe,Ae,it,$e,Ce=F[ce].replace(ae,"%20"),Le=Ce.indexOf(D);Le>=0?(Pe=Ce.substr(0,Le),Ae=Ce.substr(Le+1)):(Pe=Ce,Ae=""),it=decodeURIComponent(Pe),$e=decodeURIComponent(Ae),ke(he,it)?Array.isArray(he[it])?he[it].push($e):he[it]=[he[it],$e]:he[it]=$e}return he}},5776:Mt=>{"use strict";var ke=function(F){switch(typeof F){case"string":return F;case"boolean":return F?"true":"false";case"number":return isFinite(F)?F:"";default:return""}};Mt.exports=function(F,w,D,ue){return w=w||"&",D=D||"=",null===F&&(F=void 0),"object"==typeof F?Object.keys(F).map(function(he){var ae=encodeURIComponent(ke(he))+D;return Array.isArray(F[he])?F[he].map(function(ee){return ae+encodeURIComponent(ke(ee))}).join(w):ae+encodeURIComponent(ke(F[he]))}).join(w):ue?encodeURIComponent(ke(ue))+D+encodeURIComponent(ke(F)):""}},7137:(Mt,ke,F)=>{"use strict";ke.decode=ke.parse=F(516),ke.encode=ke.stringify=F(5776)},1135:(Mt,ke,F)=>{"use strict";F.d(ke,{X:()=>D});var w=F(7579);class D extends w.x{constructor(he){super(),this._value=he}get value(){return this.getValue()}_subscribe(he){const ae=super._subscribe(he);return!ae.closed&&he.next(this._value),ae}getValue(){const{hasError:he,thrownError:ae,_value:ee}=this;if(he)throw ae;return this._throwIfClosed(),ee}next(he){super.next(this._value=he)}}},9751:(Mt,ke,F)=>{"use strict";F.d(ke,{y:()=>ce});var w=F(930),D=F(727),ue=F(8822),he=F(9635),ae=F(2416),ee=F(576),ve=F(2806);let ce=(()=>{class Ae{constructor($e){$e&&(this._subscribe=$e)}lift($e){const gt=new Ae;return gt.source=this,gt.operator=$e,gt}subscribe($e,gt,Tt){const Ke=function Pe(Ae){return Ae&&Ae instanceof w.Lv||function Le(Ae){return Ae&&(0,ee.m)(Ae.next)&&(0,ee.m)(Ae.error)&&(0,ee.m)(Ae.complete)}(Ae)&&(0,D.Nn)(Ae)}($e)?$e:new w.Hp($e,gt,Tt);return(0,ve.x)(()=>{const{operator:bt,source:st}=this;Ke.add(bt?bt.call(Ke,st):st?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe($e){try{return this._subscribe($e)}catch(gt){$e.error(gt)}}forEach($e,gt){return new(gt=Ce(gt))((Tt,Ke)=>{const bt=new w.Hp({next:st=>{try{$e(st)}catch(Ct){Ke(Ct),bt.unsubscribe()}},error:Ke,complete:Tt});this.subscribe(bt)})}_subscribe($e){var gt;return null===(gt=this.source)||void 0===gt?void 0:gt.subscribe($e)}[ue.L](){return this}pipe(...$e){return(0,he.U)($e)(this)}toPromise($e){return new($e=Ce($e))((gt,Tt)=>{let Ke;this.subscribe(bt=>Ke=bt,bt=>Tt(bt),()=>gt(Ke))})}}return Ae.create=it=>new Ae(it),Ae})();function Ce(Ae){var it;return null!==(it=Ae??ae.v.Promise)&&void 0!==it?it:Promise}},7579:(Mt,ke,F)=>{"use strict";F.d(ke,{x:()=>ve});var w=F(9751),D=F(727);const he=(0,F(3888).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=F(8737),ee=F(2806);let ve=(()=>{class Ce extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Pe){const Ae=new ce(this,this);return Ae.operator=Pe,Ae}_throwIfClosed(){if(this.closed)throw new he}next(Pe){(0,ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ae of this.currentObservers)Ae.next(Pe)}})}error(Pe){(0,ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Pe;const{observers:Ae}=this;for(;Ae.length;)Ae.shift().error(Pe)}})}complete(){(0,ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Pe;return(null===(Pe=this.observers)||void 0===Pe?void 0:Pe.length)>0}_trySubscribe(Pe){return this._throwIfClosed(),super._trySubscribe(Pe)}_subscribe(Pe){return this._throwIfClosed(),this._checkFinalizedStatuses(Pe),this._innerSubscribe(Pe)}_innerSubscribe(Pe){const{hasError:Ae,isStopped:it,observers:$e}=this;return Ae||it?D.Lc:(this.currentObservers=null,$e.push(Pe),new D.w0(()=>{this.currentObservers=null,(0,ae.P)($e,Pe)}))}_checkFinalizedStatuses(Pe){const{hasError:Ae,thrownError:it,isStopped:$e}=this;Ae?Pe.error(it):$e&&Pe.complete()}asObservable(){const Pe=new w.y;return Pe.source=this,Pe}}return Ce.create=(Le,Pe)=>new ce(Le,Pe),Ce})();class ce extends ve{constructor(Le,Pe){super(),this.destination=Le,this.source=Pe}next(Le){var Pe,Ae;null===(Ae=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.next)||void 0===Ae||Ae.call(Pe,Le)}error(Le){var Pe,Ae;null===(Ae=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.error)||void 0===Ae||Ae.call(Pe,Le)}complete(){var Le,Pe;null===(Pe=null===(Le=this.destination)||void 0===Le?void 0:Le.complete)||void 0===Pe||Pe.call(Le)}_subscribe(Le){var Pe,Ae;return null!==(Ae=null===(Pe=this.source)||void 0===Pe?void 0:Pe.subscribe(Le))&&void 0!==Ae?Ae:D.Lc}}},930:(Mt,ke,F)=>{"use strict";F.d(ke,{Hp:()=>Tt,Lv:()=>Ae});var w=F(576),D=F(727),ue=F(2416),he=F(7849),ae=F(5032);const ee=Ce("C",void 0,void 0);function Ce(Xe,ne,dt){return{kind:Xe,value:ne,error:dt}}var Le=F(3410),Pe=F(2806);class Ae extends D.w0{constructor(ne){super(),this.isStopped=!1,ne?(this.destination=ne,(0,D.Nn)(ne)&&ne.add(this)):this.destination=Ct}static create(ne,dt,He){return new Tt(ne,dt,He)}next(ne){this.isStopped?st(function ce(Xe){return Ce("N",Xe,void 0)}(ne),this):this._next(ne)}error(ne){this.isStopped?st(function ve(Xe){return Ce("E",void 0,Xe)}(ne),this):(this.isStopped=!0,this._error(ne))}complete(){this.isStopped?st(ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ne){this.destination.next(ne)}_error(ne){try{this.destination.error(ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const it=Function.prototype.bind;function $e(Xe,ne){return it.call(Xe,ne)}class gt{constructor(ne){this.partialObserver=ne}next(ne){const{partialObserver:dt}=this;if(dt.next)try{dt.next(ne)}catch(He){Ke(He)}}error(ne){const{partialObserver:dt}=this;if(dt.error)try{dt.error(ne)}catch(He){Ke(He)}else Ke(ne)}complete(){const{partialObserver:ne}=this;if(ne.complete)try{ne.complete()}catch(dt){Ke(dt)}}}class Tt extends Ae{constructor(ne,dt,He){let at;if(super(),(0,w.m)(ne)||!ne)at={next:ne??void 0,error:dt??void 0,complete:He??void 0};else{let xe;this&&ue.v.useDeprecatedNextContext?(xe=Object.create(ne),xe.unsubscribe=()=>this.unsubscribe(),at={next:ne.next&&$e(ne.next,xe),error:ne.error&&$e(ne.error,xe),complete:ne.complete&&$e(ne.complete,xe)}):at=ne}this.destination=new gt(at)}}function Ke(Xe){ue.v.useDeprecatedSynchronousErrorHandling?(0,Pe.O)(Xe):(0,he.h)(Xe)}function st(Xe,ne){const{onStoppedNotification:dt}=ue.v;dt&&Le.z.setTimeout(()=>dt(Xe,ne))}const Ct={closed:!0,next:ae.Z,error:function bt(Xe){throw Xe},complete:ae.Z}},727:(Mt,ke,F)=>{"use strict";F.d(ke,{Lc:()=>ee,w0:()=>ae,Nn:()=>ve});var w=F(576);const ue=(0,F(3888).d)(Ce=>function(Pe){Ce(this),this.message=Pe?`${Pe.length} errors occurred during unsubscription:\n${Pe.map((Ae,it)=>`${it+1}) ${Ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Pe});var he=F(8737);class ae{constructor(Le){this.initialTeardown=Le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Le;if(!this.closed){this.closed=!0;const{_parentage:Pe}=this;if(Pe)if(this._parentage=null,Array.isArray(Pe))for(const $e of Pe)$e.remove(this);else Pe.remove(this);const{initialTeardown:Ae}=this;if((0,w.m)(Ae))try{Ae()}catch($e){Le=$e instanceof ue?$e.errors:[$e]}const{_finalizers:it}=this;if(it){this._finalizers=null;for(const $e of it)try{ce($e)}catch(gt){Le=Le??[],gt instanceof ue?Le=[...Le,...gt.errors]:Le.push(gt)}}if(Le)throw new ue(Le)}}add(Le){var Pe;if(Le&&Le!==this)if(this.closed)ce(Le);else{if(Le instanceof ae){if(Le.closed||Le._hasParent(this))return;Le._addParent(this)}(this._finalizers=null!==(Pe=this._finalizers)&&void 0!==Pe?Pe:[]).push(Le)}}_hasParent(Le){const{_parentage:Pe}=this;return Pe===Le||Array.isArray(Pe)&&Pe.includes(Le)}_addParent(Le){const{_parentage:Pe}=this;this._parentage=Array.isArray(Pe)?(Pe.push(Le),Pe):Pe?[Pe,Le]:Le}_removeParent(Le){const{_parentage:Pe}=this;Pe===Le?this._parentage=null:Array.isArray(Pe)&&(0,he.P)(Pe,Le)}remove(Le){const{_finalizers:Pe}=this;Pe&&(0,he.P)(Pe,Le),Le instanceof ae&&Le._removeParent(this)}}ae.EMPTY=(()=>{const Ce=new ae;return Ce.closed=!0,Ce})();const ee=ae.EMPTY;function ve(Ce){return Ce instanceof ae||Ce&&"closed"in Ce&&(0,w.m)(Ce.remove)&&(0,w.m)(Ce.add)&&(0,w.m)(Ce.unsubscribe)}function ce(Ce){(0,w.m)(Ce)?Ce():Ce.unsubscribe()}},2416:(Mt,ke,F)=>{"use strict";F.d(ke,{v:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Mt,ke,F)=>{"use strict";F.d(ke,{a:()=>Le});var w=F(9751),D=F(4742),ue=F(2076),he=F(4671),ae=F(3268),ee=F(3269),ve=F(1810),ce=F(5403),Ce=F(9672);function Le(...it){const $e=(0,ee.yG)(it),gt=(0,ee.jO)(it),{args:Tt,keys:Ke}=(0,D.D)(it);if(0===Tt.length)return(0,ue.D)([],$e);const bt=new w.y(function Pe(it,$e,gt=he.y){return Tt=>{Ae($e,()=>{const{length:Ke}=it,bt=new Array(Ke);let st=Ke,Ct=Ke;for(let Xe=0;Xe<Ke;Xe++)Ae($e,()=>{const ne=(0,ue.D)(it[Xe],$e);let dt=!1;ne.subscribe((0,ce.x)(Tt,He=>{bt[Xe]=He,dt||(dt=!0,Ct--),Ct||Tt.next(gt(bt.slice()))},()=>{--st||Tt.complete()}))},Tt)},Tt)}}(Tt,$e,Ke?st=>(0,ve.n)(Ke,st):he.y));return gt?bt.pipe((0,ae.Z)(gt)):bt}function Ae(it,$e,gt){it?(0,Ce.f)(gt,it,$e):$e()}},7272:(Mt,ke,F)=>{"use strict";F.d(ke,{z:()=>ae});var w=F(8189),ue=F(3269),he=F(2076);function ae(...ee){return function D(){return(0,w.J)(1)}()((0,he.D)(ee,(0,ue.yG)(ee)))}},9770:(Mt,ke,F)=>{"use strict";F.d(ke,{P:()=>ue});var w=F(9751),D=F(8421);function ue(he){return new w.y(ae=>{(0,D.Xf)(he()).subscribe(ae)})}},515:(Mt,ke,F)=>{"use strict";F.d(ke,{E:()=>D});const D=new(F(9751).y)(ae=>ae.complete())},4128:(Mt,ke,F)=>{"use strict";F.d(ke,{D:()=>ce});var w=F(9751),D=F(4742),ue=F(8421),he=F(3269),ae=F(5403),ee=F(3268),ve=F(1810);function ce(...Ce){const Le=(0,he.jO)(Ce),{args:Pe,keys:Ae}=(0,D.D)(Ce),it=new w.y($e=>{const{length:gt}=Pe;if(!gt)return void $e.complete();const Tt=new Array(gt);let Ke=gt,bt=gt;for(let st=0;st<gt;st++){let Ct=!1;(0,ue.Xf)(Pe[st]).subscribe((0,ae.x)($e,Xe=>{Ct||(Ct=!0,bt--),Tt[st]=Xe},()=>Ke--,void 0,()=>{(!Ke||!Ct)&&(bt||$e.next(Ae?(0,ve.n)(Ae,Tt):Tt),$e.complete())}))}});return Le?it.pipe((0,ee.Z)(Le)):it}},2076:(Mt,ke,F)=>{"use strict";F.d(ke,{D:()=>He});var w=F(8421),D=F(9672),ue=F(4482),he=F(5403);function ae(at,xe=0){return(0,ue.e)((wt,Ot)=>{wt.subscribe((0,he.x)(Ot,Rt=>(0,D.f)(Ot,at,()=>Ot.next(Rt),xe),()=>(0,D.f)(Ot,at,()=>Ot.complete(),xe),Rt=>(0,D.f)(Ot,at,()=>Ot.error(Rt),xe)))})}function ee(at,xe=0){return(0,ue.e)((wt,Ot)=>{Ot.add(at.schedule(()=>wt.subscribe(Ot),xe))})}var Ce=F(9751),Pe=F(2202),Ae=F(576);function $e(at,xe){if(!at)throw new Error("Iterable cannot be null");return new Ce.y(wt=>{(0,D.f)(wt,xe,()=>{const Ot=at[Symbol.asyncIterator]();(0,D.f)(wt,xe,()=>{Ot.next().then(Rt=>{Rt.done?wt.complete():wt.next(Rt.value)})},0,!0)})})}var gt=F(3670),Tt=F(8239),Ke=F(1144),bt=F(6495),st=F(2206),Ct=F(4532),Xe=F(3260);function He(at,xe){return xe?function dt(at,xe){if(null!=at){if((0,gt.c)(at))return function ve(at,xe){return(0,w.Xf)(at).pipe(ee(xe),ae(xe))}(at,xe);if((0,Ke.z)(at))return function Le(at,xe){return new Ce.y(wt=>{let Ot=0;return xe.schedule(function(){Ot===at.length?wt.complete():(wt.next(at[Ot++]),wt.closed||this.schedule())})})}(at,xe);if((0,Tt.t)(at))return function ce(at,xe){return(0,w.Xf)(at).pipe(ee(xe),ae(xe))}(at,xe);if((0,st.D)(at))return $e(at,xe);if((0,bt.T)(at))return function it(at,xe){return new Ce.y(wt=>{let Ot;return(0,D.f)(wt,xe,()=>{Ot=at[Pe.h](),(0,D.f)(wt,xe,()=>{let Rt,en;try{({value:Rt,done:en}=Ot.next())}catch(W){return void wt.error(W)}en?wt.complete():wt.next(Rt)},0,!0)}),()=>(0,Ae.m)(Ot?.return)&&Ot.return()})}(at,xe);if((0,Xe.L)(at))return function ne(at,xe){return $e((0,Xe.Q)(at),xe)}(at,xe)}throw(0,Ct.z)(at)}(at,xe):(0,w.Xf)(at)}},8421:(Mt,ke,F)=>{"use strict";F.d(ke,{Xf:()=>it});var w=F(655),D=F(1144),ue=F(8239),he=F(9751),ae=F(3670),ee=F(2206),ve=F(4532),ce=F(6495),Ce=F(3260),Le=F(576),Pe=F(7849),Ae=F(8822);function it(Xe){if(Xe instanceof he.y)return Xe;if(null!=Xe){if((0,ae.c)(Xe))return function $e(Xe){return new he.y(ne=>{const dt=Xe[Ae.L]();if((0,Le.m)(dt.subscribe))return dt.subscribe(ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Xe);if((0,D.z)(Xe))return function gt(Xe){return new he.y(ne=>{for(let dt=0;dt<Xe.length&&!ne.closed;dt++)ne.next(Xe[dt]);ne.complete()})}(Xe);if((0,ue.t)(Xe))return function Tt(Xe){return new he.y(ne=>{Xe.then(dt=>{ne.closed||(ne.next(dt),ne.complete())},dt=>ne.error(dt)).then(null,Pe.h)})}(Xe);if((0,ee.D)(Xe))return bt(Xe);if((0,ce.T)(Xe))return function Ke(Xe){return new he.y(ne=>{for(const dt of Xe)if(ne.next(dt),ne.closed)return;ne.complete()})}(Xe);if((0,Ce.L)(Xe))return function st(Xe){return bt((0,Ce.Q)(Xe))}(Xe)}throw(0,ve.z)(Xe)}function bt(Xe){return new he.y(ne=>{(function Ct(Xe,ne){var dt,He,at,xe;return(0,w.mG)(this,void 0,void 0,function*(){try{for(dt=(0,w.KL)(Xe);!(He=yield dt.next()).done;)if(ne.next(He.value),ne.closed)return}catch(wt){at={error:wt}}finally{try{He&&!He.done&&(xe=dt.return)&&(yield xe.call(dt))}finally{if(at)throw at.error}}ne.complete()})})(Xe,ne).catch(dt=>ne.error(dt))})}},6451:(Mt,ke,F)=>{"use strict";F.d(ke,{T:()=>ee});var w=F(8189),D=F(8421),ue=F(515),he=F(3269),ae=F(2076);function ee(...ve){const ce=(0,he.yG)(ve),Ce=(0,he._6)(ve,1/0),Le=ve;return Le.length?1===Le.length?(0,D.Xf)(Le[0]):(0,w.J)(Ce)((0,ae.D)(Le,ce)):ue.E}},9646:(Mt,ke,F)=>{"use strict";F.d(ke,{of:()=>ue});var w=F(3269),D=F(2076);function ue(...he){const ae=(0,w.yG)(he);return(0,D.D)(he,ae)}},2843:(Mt,ke,F)=>{"use strict";F.d(ke,{_:()=>ue});var w=F(9751),D=F(576);function ue(he,ae){const ee=(0,D.m)(he)?he:()=>he,ve=ce=>ce.error(ee());return new w.y(ae?ce=>ae.schedule(ve,0,ce):ve)}},5403:(Mt,ke,F)=>{"use strict";F.d(ke,{x:()=>D});var w=F(930);function D(he,ae,ee,ve,ce){return new ue(he,ae,ee,ve,ce)}class ue extends w.Lv{constructor(ae,ee,ve,ce,Ce,Le){super(ae),this.onFinalize=Ce,this.shouldUnsubscribe=Le,this._next=ee?function(Pe){try{ee(Pe)}catch(Ae){ae.error(Ae)}}:super._next,this._error=ce?function(Pe){try{ce(Pe)}catch(Ae){ae.error(Ae)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(Pe){ae.error(Pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ee}=this;super.unsubscribe(),!ee&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},262:(Mt,ke,F)=>{"use strict";F.d(ke,{K:()=>he});var w=F(8421),D=F(5403),ue=F(4482);function he(ae){return(0,ue.e)((ee,ve)=>{let Le,ce=null,Ce=!1;ce=ee.subscribe((0,D.x)(ve,void 0,void 0,Pe=>{Le=(0,w.Xf)(ae(Pe,he(ae)(ee))),ce?(ce.unsubscribe(),ce=null,Le.subscribe(ve)):Ce=!0})),Ce&&(ce.unsubscribe(),ce=null,Le.subscribe(ve))})}},4351:(Mt,ke,F)=>{"use strict";F.d(ke,{b:()=>ue});var w=F(5577),D=F(576);function ue(he,ae){return(0,D.m)(ae)?(0,w.z)(he,ae,1):(0,w.z)(he,1)}},9300:(Mt,ke,F)=>{"use strict";F.d(ke,{h:()=>ue});var w=F(4482),D=F(5403);function ue(he,ae){return(0,w.e)((ee,ve)=>{let ce=0;ee.subscribe((0,D.x)(ve,Ce=>he.call(ae,Ce,ce++)&&ve.next(Ce)))})}},8746:(Mt,ke,F)=>{"use strict";F.d(ke,{x:()=>D});var w=F(4482);function D(ue){return(0,w.e)((he,ae)=>{try{he.subscribe(ae)}finally{ae.add(ue)}})}},4004:(Mt,ke,F)=>{"use strict";F.d(ke,{U:()=>ue});var w=F(4482),D=F(5403);function ue(he,ae){return(0,w.e)((ee,ve)=>{let ce=0;ee.subscribe((0,D.x)(ve,Ce=>{ve.next(he.call(ae,Ce,ce++))}))})}},8189:(Mt,ke,F)=>{"use strict";F.d(ke,{J:()=>ue});var w=F(5577),D=F(4671);function ue(he=1/0){return(0,w.z)(D.y,he)}},5577:(Mt,ke,F)=>{"use strict";F.d(ke,{z:()=>ce});var w=F(4004),D=F(8421),ue=F(4482),he=F(9672),ae=F(5403),ve=F(576);function ce(Ce,Le,Pe=1/0){return(0,ve.m)(Le)?ce((Ae,it)=>(0,w.U)(($e,gt)=>Le(Ae,$e,it,gt))((0,D.Xf)(Ce(Ae,it))),Pe):("number"==typeof Le&&(Pe=Le),(0,ue.e)((Ae,it)=>function ee(Ce,Le,Pe,Ae,it,$e,gt,Tt){const Ke=[];let bt=0,st=0,Ct=!1;const Xe=()=>{Ct&&!Ke.length&&!bt&&Le.complete()},ne=He=>bt<Ae?dt(He):Ke.push(He),dt=He=>{$e&&Le.next(He),bt++;let at=!1;(0,D.Xf)(Pe(He,st++)).subscribe((0,ae.x)(Le,xe=>{it?.(xe),$e?ne(xe):Le.next(xe)},()=>{at=!0},void 0,()=>{if(at)try{for(bt--;Ke.length&&bt<Ae;){const xe=Ke.shift();gt?(0,he.f)(Le,gt,()=>dt(xe)):dt(xe)}Xe()}catch(xe){Le.error(xe)}}))};return Ce.subscribe((0,ae.x)(Le,ne,()=>{Ct=!0,Xe()})),()=>{Tt?.()}}(Ae,it,Ce,Pe)))}},3099:(Mt,ke,F)=>{"use strict";F.d(ke,{B:()=>ae});var w=F(8421),D=F(7579),ue=F(930),he=F(4482);function ae(ve={}){const{connector:ce=(()=>new D.x),resetOnError:Ce=!0,resetOnComplete:Le=!0,resetOnRefCountZero:Pe=!0}=ve;return Ae=>{let it,$e,gt,Tt=0,Ke=!1,bt=!1;const st=()=>{$e?.unsubscribe(),$e=void 0},Ct=()=>{st(),it=gt=void 0,Ke=bt=!1},Xe=()=>{const ne=it;Ct(),ne?.unsubscribe()};return(0,he.e)((ne,dt)=>{Tt++,!bt&&!Ke&&st();const He=gt=gt??ce();dt.add(()=>{Tt--,0===Tt&&!bt&&!Ke&&($e=ee(Xe,Pe))}),He.subscribe(dt),!it&&Tt>0&&(it=new ue.Hp({next:at=>He.next(at),error:at=>{bt=!0,st(),$e=ee(Ct,Ce,at),He.error(at)},complete:()=>{Ke=!0,st(),$e=ee(Ct,Le),He.complete()}}),(0,w.Xf)(ne).subscribe(it))})(Ae)}}function ee(ve,ce,...Ce){if(!0===ce)return void ve();if(!1===ce)return;const Le=new ue.Hp({next:()=>{Le.unsubscribe(),ve()}});return(0,w.Xf)(ce(...Ce)).subscribe(Le)}},8675:(Mt,ke,F)=>{"use strict";F.d(ke,{O:()=>he});var w=F(7272),D=F(3269),ue=F(4482);function he(...ae){const ee=(0,D.yG)(ae);return(0,ue.e)((ve,ce)=>{(ee?(0,w.z)(ae,ve,ee):(0,w.z)(ae,ve)).subscribe(ce)})}},3900:(Mt,ke,F)=>{"use strict";F.d(ke,{w:()=>he});var w=F(8421),D=F(4482),ue=F(5403);function he(ae,ee){return(0,D.e)((ve,ce)=>{let Ce=null,Le=0,Pe=!1;const Ae=()=>Pe&&!Ce&&ce.complete();ve.subscribe((0,ue.x)(ce,it=>{Ce?.unsubscribe();let $e=0;const gt=Le++;(0,w.Xf)(ae(it,gt)).subscribe(Ce=(0,ue.x)(ce,Tt=>ce.next(ee?ee(it,Tt,gt,$e++):Tt),()=>{Ce=null,Ae()}))},()=>{Pe=!0,Ae()}))})}},5698:(Mt,ke,F)=>{"use strict";F.d(ke,{q:()=>he});var w=F(515),D=F(4482),ue=F(5403);function he(ae){return ae<=0?()=>w.E:(0,D.e)((ee,ve)=>{let ce=0;ee.subscribe((0,ue.x)(ve,Ce=>{++ce<=ae&&(ve.next(Ce),ae<=ce&&ve.complete())}))})}},2722:(Mt,ke,F)=>{"use strict";F.d(ke,{R:()=>ae});var w=F(4482),D=F(5403),ue=F(8421),he=F(5032);function ae(ee){return(0,w.e)((ve,ce)=>{(0,ue.Xf)(ee).subscribe((0,D.x)(ce,()=>ce.complete(),he.Z)),!ce.closed&&ve.subscribe(ce)})}},8505:(Mt,ke,F)=>{"use strict";F.d(ke,{b:()=>ae});var w=F(576),D=F(4482),ue=F(5403),he=F(4671);function ae(ee,ve,ce){const Ce=(0,w.m)(ee)||ve||ce?{next:ee,error:ve,complete:ce}:ee;return Ce?(0,D.e)((Le,Pe)=>{var Ae;null===(Ae=Ce.subscribe)||void 0===Ae||Ae.call(Ce);let it=!0;Le.subscribe((0,ue.x)(Pe,$e=>{var gt;null===(gt=Ce.next)||void 0===gt||gt.call(Ce,$e),Pe.next($e)},()=>{var $e;it=!1,null===($e=Ce.complete)||void 0===$e||$e.call(Ce),Pe.complete()},$e=>{var gt;it=!1,null===(gt=Ce.error)||void 0===gt||gt.call(Ce,$e),Pe.error($e)},()=>{var $e,gt;it&&(null===($e=Ce.unsubscribe)||void 0===$e||$e.call(Ce)),null===(gt=Ce.finalize)||void 0===gt||gt.call(Ce)}))}):he.y}},4408:(Mt,ke,F)=>{"use strict";F.d(ke,{o:()=>ae});var w=F(727);class D extends w.w0{constructor(ve,ce){super()}schedule(ve,ce=0){return this}}const ue={setInterval(ee,ve,...ce){const{delegate:Ce}=ue;return Ce?.setInterval?Ce.setInterval(ee,ve,...ce):setInterval(ee,ve,...ce)},clearInterval(ee){const{delegate:ve}=ue;return(ve?.clearInterval||clearInterval)(ee)},delegate:void 0};var he=F(8737);class ae extends D{constructor(ve,ce){super(ve,ce),this.scheduler=ve,this.work=ce,this.pending=!1}schedule(ve,ce=0){var Ce;if(this.closed)return this;this.state=ve;const Le=this.id,Pe=this.scheduler;return null!=Le&&(this.id=this.recycleAsyncId(Pe,Le,ce)),this.pending=!0,this.delay=ce,this.id=null!==(Ce=this.id)&&void 0!==Ce?Ce:this.requestAsyncId(Pe,this.id,ce),this}requestAsyncId(ve,ce,Ce=0){return ue.setInterval(ve.flush.bind(ve,this),Ce)}recycleAsyncId(ve,ce,Ce=0){if(null!=Ce&&this.delay===Ce&&!1===this.pending)return ce;null!=ce&&ue.clearInterval(ce)}execute(ve,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(ve,ce);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,ce){let Le,Ce=!1;try{this.work(ve)}catch(Pe){Ce=!0,Le=Pe||new Error("Scheduled action threw falsy error")}if(Ce)return this.unsubscribe(),Le}unsubscribe(){if(!this.closed){const{id:ve,scheduler:ce}=this,{actions:Ce}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(Ce,this),null!=ve&&(this.id=this.recycleAsyncId(ce,ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(Mt,ke,F)=>{"use strict";F.d(ke,{v:()=>ue});var w=F(6063);class D{constructor(ae,ee=D.now){this.schedulerActionCtor=ae,this.now=ee}schedule(ae,ee=0,ve){return new this.schedulerActionCtor(this,ae).schedule(ve,ee)}}D.now=w.l.now;class ue extends D{constructor(ae,ee=D.now){super(ae,ee),this.actions=[],this._active=!1}flush(ae){const{actions:ee}=this;if(this._active)return void ee.push(ae);let ve;this._active=!0;do{if(ve=ae.execute(ae.state,ae.delay))break}while(ae=ee.shift());if(this._active=!1,ve){for(;ae=ee.shift();)ae.unsubscribe();throw ve}}}},4986:(Mt,ke,F)=>{"use strict";F.d(ke,{P:()=>he,z:()=>ue});var w=F(4408);const ue=new(F(7565).v)(w.o),he=ue},6063:(Mt,ke,F)=>{"use strict";F.d(ke,{l:()=>w});const w={now:()=>(w.delegate||Date).now(),delegate:void 0}},3410:(Mt,ke,F)=>{"use strict";F.d(ke,{z:()=>w});const w={setTimeout(D,ue,...he){const{delegate:ae}=w;return ae?.setTimeout?ae.setTimeout(D,ue,...he):setTimeout(D,ue,...he)},clearTimeout(D){const{delegate:ue}=w;return(ue?.clearTimeout||clearTimeout)(D)},delegate:void 0}},2202:(Mt,ke,F)=>{"use strict";F.d(ke,{h:()=>D});const D=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Mt,ke,F)=>{"use strict";F.d(ke,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Mt,ke,F)=>{"use strict";F.d(ke,{_6:()=>ee,jO:()=>he,yG:()=>ae});var w=F(576),D=F(3532);function ue(ve){return ve[ve.length-1]}function he(ve){return(0,w.m)(ue(ve))?ve.pop():void 0}function ae(ve){return(0,D.K)(ue(ve))?ve.pop():void 0}function ee(ve,ce){return"number"==typeof ue(ve)?ve.pop():ce}},4742:(Mt,ke,F)=>{"use strict";F.d(ke,{D:()=>ae});const{isArray:w}=Array,{getPrototypeOf:D,prototype:ue,keys:he}=Object;function ae(ve){if(1===ve.length){const ce=ve[0];if(w(ce))return{args:ce,keys:null};if(function ee(ve){return ve&&"object"==typeof ve&&D(ve)===ue}(ce)){const Ce=he(ce);return{args:Ce.map(Le=>ce[Le]),keys:Ce}}}return{args:ve,keys:null}}},8737:(Mt,ke,F)=>{"use strict";function w(D,ue){if(D){const he=D.indexOf(ue);0<=he&&D.splice(he,1)}}F.d(ke,{P:()=>w})},3888:(Mt,ke,F)=>{"use strict";function w(D){const he=D(ae=>{Error.call(ae),ae.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}F.d(ke,{d:()=>w})},1810:(Mt,ke,F)=>{"use strict";function w(D,ue){return D.reduce((he,ae,ee)=>(he[ae]=ue[ee],he),{})}F.d(ke,{n:()=>w})},2806:(Mt,ke,F)=>{"use strict";F.d(ke,{O:()=>he,x:()=>ue});var w=F(2416);let D=null;function ue(ae){if(w.v.useDeprecatedSynchronousErrorHandling){const ee=!D;if(ee&&(D={errorThrown:!1,error:null}),ae(),ee){const{errorThrown:ve,error:ce}=D;if(D=null,ve)throw ce}}else ae()}function he(ae){w.v.useDeprecatedSynchronousErrorHandling&&D&&(D.errorThrown=!0,D.error=ae)}},9672:(Mt,ke,F)=>{"use strict";function w(D,ue,he,ae=0,ee=!1){const ve=ue.schedule(function(){he(),ee?D.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(D.add(ve),!ee)return ve}F.d(ke,{f:()=>w})},4671:(Mt,ke,F)=>{"use strict";function w(D){return D}F.d(ke,{y:()=>w})},1144:(Mt,ke,F)=>{"use strict";F.d(ke,{z:()=>w});const w=D=>D&&"number"==typeof D.length&&"function"!=typeof D},2206:(Mt,ke,F)=>{"use strict";F.d(ke,{D:()=>D});var w=F(576);function D(ue){return Symbol.asyncIterator&&(0,w.m)(ue?.[Symbol.asyncIterator])}},576:(Mt,ke,F)=>{"use strict";function w(D){return"function"==typeof D}F.d(ke,{m:()=>w})},3670:(Mt,ke,F)=>{"use strict";F.d(ke,{c:()=>ue});var w=F(8822),D=F(576);function ue(he){return(0,D.m)(he[w.L])}},6495:(Mt,ke,F)=>{"use strict";F.d(ke,{T:()=>ue});var w=F(2202),D=F(576);function ue(he){return(0,D.m)(he?.[w.h])}},8239:(Mt,ke,F)=>{"use strict";F.d(ke,{t:()=>D});var w=F(576);function D(ue){return(0,w.m)(ue?.then)}},3260:(Mt,ke,F)=>{"use strict";F.d(ke,{L:()=>he,Q:()=>ue});var w=F(655),D=F(576);function ue(ae){return(0,w.FC)(this,arguments,function*(){const ve=ae.getReader();try{for(;;){const{value:ce,done:Ce}=yield(0,w.qq)(ve.read());if(Ce)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(ce)}}finally{ve.releaseLock()}})}function he(ae){return(0,D.m)(ae?.getReader)}},3532:(Mt,ke,F)=>{"use strict";F.d(ke,{K:()=>D});var w=F(576);function D(ue){return ue&&(0,w.m)(ue.schedule)}},4482:(Mt,ke,F)=>{"use strict";F.d(ke,{A:()=>D,e:()=>ue});var w=F(576);function D(he){return(0,w.m)(he?.lift)}function ue(he){return ae=>{if(D(ae))return ae.lift(function(ee){try{return he(ee,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Mt,ke,F)=>{"use strict";F.d(ke,{Z:()=>he});var w=F(4004);const{isArray:D}=Array;function he(ae){return(0,w.U)(ee=>function ue(ae,ee){return D(ee)?ae(...ee):ae(ee)}(ae,ee))}},5032:(Mt,ke,F)=>{"use strict";function w(){}F.d(ke,{Z:()=>w})},9635:(Mt,ke,F)=>{"use strict";F.d(ke,{U:()=>ue,z:()=>D});var w=F(4671);function D(...he){return ue(he)}function ue(he){return 0===he.length?w.y:1===he.length?he[0]:function(ee){return he.reduce((ve,ce)=>ce(ve),ee)}}},7849:(Mt,ke,F)=>{"use strict";F.d(ke,{h:()=>ue});var w=F(2416),D=F(3410);function ue(he){D.z.setTimeout(()=>{const{onUnhandledError:ae}=w.v;if(!ae)throw he;ae(he)})}},4532:(Mt,ke,F)=>{"use strict";function w(D){return new TypeError(`You provided ${null!==D&&"object"==typeof D?"an invalid object":`'${D}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(ke,{z:()=>w})},1308:function(Mt,ke,F){var w;Mt=F.nmd(Mt),function(D){"object"==typeof global&&global;var ee,ve=2147483647,ce=36,Ce=1,Le=26,Pe=38,Ae=700,it=72,$e=128,gt="-",Tt=/^xn--/,Ke=/[^\x20-\x7E]/,bt=/[\x2E\u3002\uFF0E\uFF61]/g,st={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ct=ce-Ce,Xe=Math.floor,ne=String.fromCharCode;function He(fe){throw RangeError(st[fe])}function at(fe,me){for(var Ve=fe.length,De=[];Ve--;)De[Ve]=me(fe[Ve]);return De}function xe(fe,me){var Ve=fe.split("@"),De="";return Ve.length>1&&(De=Ve[0]+"@",fe=Ve[1]),De+at((fe=fe.replace(bt,".")).split("."),me).join(".")}function wt(fe){for(var Ze,Q,me=[],Ve=0,De=fe.length;Ve<De;)(Ze=fe.charCodeAt(Ve++))>=55296&&Ze<=56319&&Ve<De?56320==(64512&(Q=fe.charCodeAt(Ve++)))?me.push(((1023&Ze)<<10)+(1023&Q)+65536):(me.push(Ze),Ve--):me.push(Ze);return me}function Ot(fe){return at(fe,function(me){var Ve="";return me>65535&&(Ve+=ne((me-=65536)>>>10&1023|55296),me=56320|1023&me),Ve+ne(me)}).join("")}function Rt(fe){return fe-48<10?fe-22:fe-65<26?fe-65:fe-97<26?fe-97:ce}function en(fe,me){return fe+22+75*(fe<26)-((0!=me)<<5)}function W(fe,me,Ve){var De=0;for(fe=Ve?Xe(fe/Ae):fe>>1,fe+=Xe(fe/me);fe>Ct*Le>>1;De+=ce)fe=Xe(fe/Ct);return Xe(De+(Ct+1)*fe/(fe+Pe))}function te(fe){var De,Ue,Ye,pt,zt,Kt,dn,vn,$t,St,me=[],Ve=fe.length,Ze=0,Q=$e,Ee=it;for((Ue=fe.lastIndexOf(gt))<0&&(Ue=0),Ye=0;Ye<Ue;++Ye)fe.charCodeAt(Ye)>=128&&He("not-basic"),me.push(fe.charCodeAt(Ye));for(pt=Ue>0?Ue+1:0;pt<Ve;){for(zt=Ze,Kt=1,dn=ce;pt>=Ve&&He("invalid-input"),((vn=Rt(fe.charCodeAt(pt++)))>=ce||vn>Xe((ve-Ze)/Kt))&&He("overflow"),Ze+=vn*Kt,!(vn<($t=dn<=Ee?Ce:dn>=Ee+Le?Le:dn-Ee));dn+=ce)Kt>Xe(ve/(St=ce-$t))&&He("overflow"),Kt*=St;Ee=W(Ze-zt,De=me.length+1,0==zt),Xe(Ze/De)>ve-Q&&He("overflow"),Q+=Xe(Ze/De),Ze%=De,me.splice(Ze++,0,Q)}return Ot(me)}function Y(fe){var me,Ve,De,Ze,Q,Ee,Ue,Ye,pt,zt,Kt,vn,$t,St,Un,dn=[];for(vn=(fe=wt(fe)).length,me=$e,Ve=0,Q=it,Ee=0;Ee<vn;++Ee)(Kt=fe[Ee])<128&&dn.push(ne(Kt));for(De=Ze=dn.length,Ze&&dn.push(gt);De<vn;){for(Ue=ve,Ee=0;Ee<vn;++Ee)(Kt=fe[Ee])>=me&&Kt<Ue&&(Ue=Kt);for(Ue-me>Xe((ve-Ve)/($t=De+1))&&He("overflow"),Ve+=(Ue-me)*$t,me=Ue,Ee=0;Ee<vn;++Ee)if((Kt=fe[Ee])<me&&++Ve>ve&&He("overflow"),Kt==me){for(Ye=Ve,pt=ce;!(Ye<(zt=pt<=Q?Ce:pt>=Q+Le?Le:pt-Q));pt+=ce)dn.push(ne(en(zt+(Un=Ye-zt)%(St=ce-zt),0))),Ye=Xe(Un/St);dn.push(ne(en(Ye,0))),Q=W(Ve,$t,De==Ze),Ve=0,++De}++Ve,++me}return dn.join("")}ee={version:"1.3.2",ucs2:{decode:wt,encode:Ot},decode:te,encode:Y,toASCII:function Se(fe){return xe(fe,function(me){return Ke.test(me)?"xn--"+Y(me):me})},toUnicode:function we(fe){return xe(fe,function(me){return Tt.test(me)?te(me.slice(4).toLowerCase()):me})}},void 0!==(w=function(){return ee}.call(ke,F,ke,Mt))&&(Mt.exports=w)}()},8762:(Mt,ke,F)=>{"use strict";var D=F(1308),ue=F(796);function he(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}ke.Qc=Ct,ke.DB=function ne(He,at){return Ct(He,!1,!0).resolve(at)},ke.WU=function Xe(He){return ue.isString(He)&&(He=Ct(He)),He instanceof he?He.format():he.prototype.format.call(He)};var ae=/^([a-z0-9.+-]+:)/i,ee=/:[0-9]*$/,ve=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Ce=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Le=["'"].concat(Ce),Pe=["%","/","?",";","#"].concat(Le),Ae=["/","?","#"],$e=/^[+a-z0-9A-Z_-]{0,63}$/,gt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Tt={javascript:!0,"javascript:":!0},Ke={javascript:!0,"javascript:":!0},bt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},st=F(7137);function Ct(He,at,xe){if(He&&ue.isObject(He)&&He instanceof he)return He;var wt=new he;return wt.parse(He,at,xe),wt}he.prototype.parse=function(He,at,xe){if(!ue.isString(He))throw new TypeError("Parameter 'url' must be a string, not "+typeof He);var wt=He.indexOf("?"),Ot=-1!==wt&&wt<He.indexOf("#")?"?":"#",Rt=He.split(Ot);Rt[0]=Rt[0].replace(/\\/g,"/");var W=He=Rt.join(Ot);if(W=W.trim(),!xe&&1===He.split("#").length){var te=ve.exec(W);if(te)return this.path=W,this.href=W,this.pathname=te[1],te[2]?(this.search=te[2],this.query=at?st.parse(this.search.substr(1)):this.search.substr(1)):at&&(this.search="",this.query={}),this}var Y=ae.exec(W);if(Y){var we=(Y=Y[0]).toLowerCase();this.protocol=we,W=W.substr(Y.length)}if(xe||Y||W.match(/^\/\/[^@\/]+@[^@\/]+/)){var Se="//"===W.substr(0,2);Se&&(!Y||!Ke[Y])&&(W=W.substr(2),this.slashes=!0)}if(!Ke[Y]&&(Se||Y&&!bt[Y])){for(var fe=-1,me=0;me<Ae.length;me++)-1!==(Ve=W.indexOf(Ae[me]))&&(-1===fe||Ve<fe)&&(fe=Ve);var De,Ze;for(-1!==(Ze=-1===fe?W.lastIndexOf("@"):W.lastIndexOf("@",fe))&&(De=W.slice(0,Ze),W=W.slice(Ze+1),this.auth=decodeURIComponent(De)),fe=-1,me=0;me<Pe.length;me++){var Ve;-1!==(Ve=W.indexOf(Pe[me]))&&(-1===fe||Ve<fe)&&(fe=Ve)}-1===fe&&(fe=W.length),this.host=W.slice(0,fe),W=W.slice(fe),this.parseHost(),this.hostname=this.hostname||"";var Q="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Q)for(var Ee=this.hostname.split(/\./),Ue=(me=0,Ee.length);me<Ue;me++){var Ye=Ee[me];if(Ye&&!Ye.match($e)){for(var pt="",zt=0,Kt=Ye.length;zt<Kt;zt++)Ye.charCodeAt(zt)>127?pt+="x":pt+=Ye[zt];if(!pt.match($e)){var dn=Ee.slice(0,me),vn=Ee.slice(me+1),$t=Ye.match(gt);$t&&(dn.push($t[1]),vn.unshift($t[2])),vn.length&&(W="/"+vn.join(".")+W),this.hostname=dn.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Q||(this.hostname=D.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Q&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==W[0]&&(W="/"+W))}if(!Tt[we])for(me=0,Ue=Le.length;me<Ue;me++){var ln=Le[me];if(-1!==W.indexOf(ln)){var ii=encodeURIComponent(ln);ii===ln&&(ii=escape(ln)),W=W.split(ln).join(ii)}}var Bn=W.indexOf("#");-1!==Bn&&(this.hash=W.substr(Bn),W=W.slice(0,Bn));var Wt=W.indexOf("?");return-1!==Wt?(this.search=W.substr(Wt),this.query=W.substr(Wt+1),at&&(this.query=st.parse(this.query)),W=W.slice(0,Wt)):at&&(this.search="",this.query={}),W&&(this.pathname=W),bt[we]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},he.prototype.format=function(){var He=this.auth||"";He&&(He=(He=encodeURIComponent(He)).replace(/%3A/i,":"),He+="@");var at=this.protocol||"",xe=this.pathname||"",wt=this.hash||"",Ot=!1,Rt="";this.host?Ot=He+this.host:this.hostname&&(Ot=He+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Ot+=":"+this.port)),this.query&&ue.isObject(this.query)&&Object.keys(this.query).length&&(Rt=st.stringify(this.query));var en=this.search||Rt&&"?"+Rt||"";return at&&":"!==at.substr(-1)&&(at+=":"),this.slashes||(!at||bt[at])&&!1!==Ot?(Ot="//"+(Ot||""),xe&&"/"!==xe.charAt(0)&&(xe="/"+xe)):Ot||(Ot=""),wt&&"#"!==wt.charAt(0)&&(wt="#"+wt),en&&"?"!==en.charAt(0)&&(en="?"+en),at+Ot+(xe=xe.replace(/[?#]/g,function(W){return encodeURIComponent(W)}))+(en=en.replace("#","%23"))+wt},he.prototype.resolve=function(He){return this.resolveObject(Ct(He,!1,!0)).format()},he.prototype.resolveObject=function(He){if(ue.isString(He)){var at=new he;at.parse(He,!1,!0),He=at}for(var xe=new he,wt=Object.keys(this),Ot=0;Ot<wt.length;Ot++){var Rt=wt[Ot];xe[Rt]=this[Rt]}if(xe.hash=He.hash,""===He.href)return xe.href=xe.format(),xe;if(He.slashes&&!He.protocol){for(var en=Object.keys(He),W=0;W<en.length;W++){var te=en[W];"protocol"!==te&&(xe[te]=He[te])}return bt[xe.protocol]&&xe.hostname&&!xe.pathname&&(xe.path=xe.pathname="/"),xe.href=xe.format(),xe}if(He.protocol&&He.protocol!==xe.protocol){if(!bt[He.protocol]){for(var Y=Object.keys(He),we=0;we<Y.length;we++){var Se=Y[we];xe[Se]=He[Se]}return xe.href=xe.format(),xe}if(xe.protocol=He.protocol,He.host||Ke[He.protocol])xe.pathname=He.pathname;else{for(var Ue=(He.pathname||"").split("/");Ue.length&&!(He.host=Ue.shift()););He.host||(He.host=""),He.hostname||(He.hostname=""),""!==Ue[0]&&Ue.unshift(""),Ue.length<2&&Ue.unshift(""),xe.pathname=Ue.join("/")}return xe.search=He.search,xe.query=He.query,xe.host=He.host||"",xe.auth=He.auth,xe.hostname=He.hostname||He.host,xe.port=He.port,(xe.pathname||xe.search)&&(xe.path=(xe.pathname||"")+(xe.search||"")),xe.slashes=xe.slashes||He.slashes,xe.href=xe.format(),xe}var Ve=xe.pathname&&"/"===xe.pathname.charAt(0),De=He.host||He.pathname&&"/"===He.pathname.charAt(0),Ze=De||Ve||xe.host&&He.pathname,Q=Ze,Ee=xe.pathname&&xe.pathname.split("/")||[],Ye=(Ue=He.pathname&&He.pathname.split("/")||[],xe.protocol&&!bt[xe.protocol]);if(Ye&&(xe.hostname="",xe.port=null,xe.host&&(""===Ee[0]?Ee[0]=xe.host:Ee.unshift(xe.host)),xe.host="",He.protocol&&(He.hostname=null,He.port=null,He.host&&(""===Ue[0]?Ue[0]=He.host:Ue.unshift(He.host)),He.host=null),Ze=Ze&&(""===Ue[0]||""===Ee[0])),De)xe.host=He.host||""===He.host?He.host:xe.host,xe.hostname=He.hostname||""===He.hostname?He.hostname:xe.hostname,xe.search=He.search,xe.query=He.query,Ee=Ue;else if(Ue.length)Ee||(Ee=[]),Ee.pop(),Ee=Ee.concat(Ue),xe.search=He.search,xe.query=He.query;else if(!ue.isNullOrUndefined(He.search))return Ye&&(xe.hostname=xe.host=Ee.shift(),(pt=!!(xe.host&&xe.host.indexOf("@")>0)&&xe.host.split("@"))&&(xe.auth=pt.shift(),xe.host=xe.hostname=pt.shift())),xe.search=He.search,xe.query=He.query,(!ue.isNull(xe.pathname)||!ue.isNull(xe.search))&&(xe.path=(xe.pathname?xe.pathname:"")+(xe.search?xe.search:"")),xe.href=xe.format(),xe;if(!Ee.length)return xe.pathname=null,xe.path=xe.search?"/"+xe.search:null,xe.href=xe.format(),xe;for(var zt=Ee.slice(-1)[0],Kt=(xe.host||He.host||Ee.length>1)&&("."===zt||".."===zt)||""===zt,dn=0,vn=Ee.length;vn>=0;vn--)"."===(zt=Ee[vn])?Ee.splice(vn,1):".."===zt?(Ee.splice(vn,1),dn++):dn&&(Ee.splice(vn,1),dn--);if(!Ze&&!Q)for(;dn--;dn)Ee.unshift("..");Ze&&""!==Ee[0]&&(!Ee[0]||"/"!==Ee[0].charAt(0))&&Ee.unshift(""),Kt&&"/"!==Ee.join("/").substr(-1)&&Ee.push("");var pt,$t=""===Ee[0]||Ee[0]&&"/"===Ee[0].charAt(0);return Ye&&(xe.hostname=xe.host=$t?"":Ee.length?Ee.shift():"",(pt=!!(xe.host&&xe.host.indexOf("@")>0)&&xe.host.split("@"))&&(xe.auth=pt.shift(),xe.host=xe.hostname=pt.shift())),(Ze=Ze||xe.host&&Ee.length)&&!$t&&Ee.unshift(""),Ee.length?xe.pathname=Ee.join("/"):(xe.pathname=null,xe.path=null),(!ue.isNull(xe.pathname)||!ue.isNull(xe.search))&&(xe.path=(xe.pathname?xe.pathname:"")+(xe.search?xe.search:"")),xe.auth=He.auth||xe.auth,xe.slashes=xe.slashes||He.slashes,xe.href=xe.format(),xe},he.prototype.parseHost=function(){var He=this.host,at=ee.exec(He);at&&(":"!==(at=at[0])&&(this.port=at.substr(1)),He=He.substr(0,He.length-at.length)),He&&(this.hostname=He)}},796:Mt=>{"use strict";Mt.exports={isString:function(ke){return"string"==typeof ke},isObject:function(ke){return"object"==typeof ke&&null!==ke},isNull:function(ke){return null===ke},isNullOrUndefined:function(ke){return null==ke}}},655:(Mt,ke,F)=>{"use strict";function Ae(te,Y,we,Se){return new(we||(we=Promise))(function(me,Ve){function De(Ee){try{Q(Se.next(Ee))}catch(Ue){Ve(Ue)}}function Ze(Ee){try{Q(Se.throw(Ee))}catch(Ue){Ve(Ue)}}function Q(Ee){Ee.done?me(Ee.value):function fe(me){return me instanceof we?me:new we(function(Ve){Ve(me)})}(Ee.value).then(De,Ze)}Q((Se=Se.apply(te,Y||[])).next())})}function Xe(te){return this instanceof Xe?(this.v=te,this):new Xe(te)}function ne(te,Y,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,Se=we.apply(te,Y||[]),me=[];return fe={},Ve("next"),Ve("throw"),Ve("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function Ve(Ye){Se[Ye]&&(fe[Ye]=function(pt){return new Promise(function(zt,Kt){me.push([Ye,pt,zt,Kt])>1||De(Ye,pt)})})}function De(Ye,pt){try{!function Ze(Ye){Ye.value instanceof Xe?Promise.resolve(Ye.value.v).then(Q,Ee):Ue(me[0][2],Ye)}(Se[Ye](pt))}catch(zt){Ue(me[0][3],zt)}}function Q(Ye){De("next",Ye)}function Ee(Ye){De("throw",Ye)}function Ue(Ye,pt){Ye(pt),me.shift(),me.length&&De(me[0][0],me[0][1])}}function He(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,Y=te[Symbol.asyncIterator];return Y?Y.call(te):(te=function Tt(te){var Y="function"==typeof Symbol&&Symbol.iterator,we=Y&&te[Y],Se=0;if(we)return we.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&Se>=te.length&&(te=void 0),{value:te&&te[Se++],done:!te}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),we={},Se("next"),Se("throw"),Se("return"),we[Symbol.asyncIterator]=function(){return this},we);function Se(me){we[me]=te[me]&&function(Ve){return new Promise(function(De,Ze){!function fe(me,Ve,De,Ze){Promise.resolve(Ze).then(function(Q){me({value:Q,done:De})},Ve)}(De,Ze,(Ve=te[me](Ve)).done,Ve.value)})}}}F.d(ke,{FC:()=>ne,KL:()=>He,mG:()=>Ae,qq:()=>Xe})},7340:(Mt,ke,F)=>{"use strict";F.d(ke,{IO:()=>gt,LC:()=>D,SB:()=>Ce,X$:()=>he,ZE:()=>st,ZN:()=>bt,_j:()=>w,eR:()=>Pe,jt:()=>ae,k1:()=>Ct,l3:()=>ue,oB:()=>ce,pV:()=>it,ru:()=>ee,vP:()=>ve});class w{}class D{}const ue="*";function he(Xe,ne){return{type:7,name:Xe,definitions:ne,options:{}}}function ae(Xe,ne=null){return{type:4,styles:ne,timings:Xe}}function ee(Xe,ne=null){return{type:3,steps:Xe,options:ne}}function ve(Xe,ne=null){return{type:2,steps:Xe,options:ne}}function ce(Xe){return{type:6,styles:Xe,offset:null}}function Ce(Xe,ne,dt){return{type:0,name:Xe,styles:ne,options:dt}}function Pe(Xe,ne,dt=null){return{type:1,expr:Xe,animation:ne,options:dt}}function it(Xe=null){return{type:9,options:Xe}}function gt(Xe,ne,dt=null){return{type:11,selector:Xe,animation:ne,options:dt}}function Ke(Xe){Promise.resolve().then(Xe)}class bt{constructor(ne=0,dt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ne+dt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ne=>ne()),this._onDoneFns=[])}onStart(ne){this._originalOnStartFns.push(ne),this._onStartFns.push(ne)}onDone(ne){this._originalOnDoneFns.push(ne),this._onDoneFns.push(ne)}onDestroy(ne){this._onDestroyFns.push(ne)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ke(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ne=>ne()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ne=>ne()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(ne){this._position=this.totalTime?ne*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ne){const dt="start"==ne?this._onStartFns:this._onDoneFns;dt.forEach(He=>He()),dt.length=0}}class st{constructor(ne){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ne;let dt=0,He=0,at=0;const xe=this.players.length;0==xe?Ke(()=>this._onFinish()):this.players.forEach(wt=>{wt.onDone(()=>{++dt==xe&&this._onFinish()}),wt.onDestroy(()=>{++He==xe&&this._onDestroy()}),wt.onStart(()=>{++at==xe&&this._onStart()})}),this.totalTime=this.players.reduce((wt,Ot)=>Math.max(wt,Ot.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ne=>ne()),this._onDoneFns=[])}init(){this.players.forEach(ne=>ne.init())}onStart(ne){this._onStartFns.push(ne)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ne=>ne()),this._onStartFns=[])}onDone(ne){this._onDoneFns.push(ne)}onDestroy(ne){this._onDestroyFns.push(ne)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ne=>ne.play())}pause(){this.players.forEach(ne=>ne.pause())}restart(){this.players.forEach(ne=>ne.restart())}finish(){this._onFinish(),this.players.forEach(ne=>ne.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ne=>ne.destroy()),this._onDestroyFns.forEach(ne=>ne()),this._onDestroyFns=[])}reset(){this.players.forEach(ne=>ne.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ne){const dt=ne*this.totalTime;this.players.forEach(He=>{const at=He.totalTime?Math.min(1,dt/He.totalTime):1;He.setPosition(at)})}getPosition(){const ne=this.players.reduce((dt,He)=>null===dt||He.totalTime>dt.totalTime?He:dt,null);return null!=ne?ne.getPosition():0}beforeDestroy(){this.players.forEach(ne=>{ne.beforeDestroy&&ne.beforeDestroy()})}triggerCallback(ne){const dt="start"==ne?this._onStartFns:this._onDoneFns;dt.forEach(He=>He()),dt.length=0}}const Ct="!"},2016:(Mt,ke,F)=>{"use strict";F.d(ke,{rt:()=>tn,tE:()=>Oe,qV:()=>ri,qm:()=>Lt,ic:()=>ln,X6:()=>Ii,yG:()=>Ft});var w=F(6895),D=F(4650),ue=F(3353),he=F(1135),ae=F(7579),ee=F(9646),ve=F(9521),ce=F(5698),Ce=F(9300);function Le(Fe){return(0,Ce.h)((be,se)=>Fe<=se)}var Pe=F(4671),Ae=F(4482),it=F(5403);function gt(Fe,be){return Fe===be}var Tt=F(2722),Ke=F(1281);let bt=(()=>{class Fe{create(se){return typeof MutationObserver>"u"?null:new MutationObserver(se)}}return Fe.\u0275fac=function(se){return new(se||Fe)},Fe.\u0275prov=D.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})(),Xe=(()=>{class Fe{}return Fe.\u0275fac=function(se){return new(se||Fe)},Fe.\u0275mod=D.oAB({type:Fe}),Fe.\u0275inj=D.cJS({providers:[bt]}),Fe})();var ne=F(9841),dt=F(7272),He=F(9751),at=F(4986),wt=F(4004),Ot=F(8675);const en=new Set;let W,te=(()=>{class Fe{constructor(se){this._platform=se,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):we}matchMedia(se){return(this._platform.WEBKIT||this._platform.BLINK)&&function Y(Fe){if(!en.has(Fe))try{W||(W=document.createElement("style"),W.setAttribute("type","text/css"),document.head.appendChild(W)),W.sheet&&(W.sheet.insertRule(`@media ${Fe} {body{ }}`,0),en.add(Fe))}catch(be){console.error(be)}}(se),this._matchMedia(se)}}return Fe.\u0275fac=function(se){return new(se||Fe)(D.LFG(ue.t4))},Fe.\u0275prov=D.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();function we(Fe){return{matches:"all"===Fe||""===Fe,media:Fe,addListener:()=>{},removeListener:()=>{}}}let Se=(()=>{class Fe{constructor(se,We){this._mediaMatcher=se,this._zone=We,this._queries=new Map,this._destroySubject=new ae.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(se){return fe((0,Ke.Eq)(se)).some(nt=>this._registerQuery(nt).mql.matches)}observe(se){const nt=fe((0,Ke.Eq)(se)).map(an=>this._registerQuery(an).observable);let Nt=(0,ne.a)(nt);return Nt=(0,dt.z)(Nt.pipe((0,ce.q)(1)),Nt.pipe(Le(1),function xe(Fe,be=at.z){return(0,Ae.e)((se,We)=>{let nt=null,Nt=null,an=null;const An=()=>{if(nt){nt.unsubscribe(),nt=null;const ci=Nt;Nt=null,We.next(ci)}};function bi(){const ci=an+Fe,$n=be.now();if($n<ci)return nt=this.schedule(void 0,ci-$n),void We.add(nt);An()}se.subscribe((0,it.x)(We,ci=>{Nt=ci,an=be.now(),nt||(nt=be.schedule(bi,Fe),We.add(nt))},()=>{An(),We.complete()},void 0,()=>{Nt=nt=null}))})}(0))),Nt.pipe((0,wt.U)(an=>{const An={matches:!1,breakpoints:{}};return an.forEach(({matches:bi,query:ci})=>{An.matches=An.matches||bi,An.breakpoints[ci]=bi}),An}))}_registerQuery(se){if(this._queries.has(se))return this._queries.get(se);const We=this._mediaMatcher.matchMedia(se),Nt={observable:new He.y(an=>{const An=bi=>this._zone.run(()=>an.next(bi));return We.addListener(An),()=>{We.removeListener(An)}}).pipe((0,Ot.O)(We),(0,wt.U)(({matches:an})=>({query:se,matches:an})),(0,Tt.R)(this._destroySubject)),mql:We};return this._queries.set(se,Nt),Nt}}return Fe.\u0275fac=function(se){return new(se||Fe)(D.LFG(te),D.LFG(D.R0b))},Fe.\u0275prov=D.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();function fe(Fe){return Fe.map(be=>be.split(",")).reduce((be,se)=>be.concat(se)).map(be=>be.trim())}let ln=(()=>{class Fe{constructor(se){this._platform=se}isDisabled(se){return se.hasAttribute("disabled")}isVisible(se){return function Bn(Fe){return!!(Fe.offsetWidth||Fe.offsetHeight||"function"==typeof Fe.getClientRects&&Fe.getClientRects().length)}(se)&&"visible"===getComputedStyle(se).visibility}isTabbable(se){if(!this._platform.isBrowser)return!1;const We=function ii(Fe){try{return Fe.frameElement}catch{return null}}(function Gi(Fe){return Fe.ownerDocument&&Fe.ownerDocument.defaultView||window}(se));if(We&&(-1===Dn(We)||!this.isVisible(We)))return!1;let nt=se.nodeName.toLowerCase(),Nt=Dn(se);return se.hasAttribute("contenteditable")?-1!==Nt:!("iframe"===nt||"object"===nt||this._platform.WEBKIT&&this._platform.IOS&&!function pn(Fe){let be=Fe.nodeName.toLowerCase(),se="input"===be&&Fe.type;return"text"===se||"password"===se||"select"===be||"textarea"===be}(se))&&("audio"===nt?!!se.hasAttribute("controls")&&-1!==Nt:"video"===nt?-1!==Nt&&(null!==Nt||this._platform.FIREFOX||se.hasAttribute("controls")):se.tabIndex>=0)}isFocusable(se,We){return function Gt(Fe){return!function Xi(Fe){return function ai(Fe){return"input"==Fe.nodeName.toLowerCase()}(Fe)&&"hidden"==Fe.type}(Fe)&&(function Wt(Fe){let be=Fe.nodeName.toLowerCase();return"input"===be||"select"===be||"button"===be||"textarea"===be}(Fe)||function Kr(Fe){return function Wi(Fe){return"a"==Fe.nodeName.toLowerCase()}(Fe)&&Fe.hasAttribute("href")}(Fe)||Fe.hasAttribute("contenteditable")||fr(Fe))}(se)&&!this.isDisabled(se)&&(We?.ignoreVisibility||this.isVisible(se))}}return Fe.\u0275fac=function(se){return new(se||Fe)(D.LFG(ue.t4))},Fe.\u0275prov=D.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();function fr(Fe){if(!Fe.hasAttribute("tabindex")||void 0===Fe.tabIndex)return!1;let be=Fe.getAttribute("tabindex");return!(!be||isNaN(parseInt(be,10)))}function Dn(Fe){if(!fr(Fe))return null;const be=parseInt(Fe.getAttribute("tabindex")||"",10);return isNaN(be)?-1:be}class Li{get enabled(){return this._enabled}set enabled(be){this._enabled=be,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(be,this._startAnchor),this._toggleAnchorTabIndex(be,this._endAnchor))}constructor(be,se,We,nt,Nt=!1){this._element=be,this._checker=se,this._ngZone=We,this._document=nt,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Nt||this.attachAnchors()}destroy(){const be=this._startAnchor,se=this._endAnchor;be&&(be.removeEventListener("focus",this.startAnchorListener),be.remove()),se&&(se.removeEventListener("focus",this.endAnchorListener),se.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(be){return new Promise(se=>{this._executeOnStable(()=>se(this.focusInitialElement(be)))})}focusFirstTabbableElementWhenReady(be){return new Promise(se=>{this._executeOnStable(()=>se(this.focusFirstTabbableElement(be)))})}focusLastTabbableElementWhenReady(be){return new Promise(se=>{this._executeOnStable(()=>se(this.focusLastTabbableElement(be)))})}_getRegionBoundary(be){const se=this._element.querySelectorAll(`[cdk-focus-region-${be}], [cdkFocusRegion${be}], [cdk-focus-${be}]`);return"start"==be?se.length?se[0]:this._getFirstTabbableElement(this._element):se.length?se[se.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(be){const se=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(se){if(!this._checker.isFocusable(se)){const We=this._getFirstTabbableElement(se);return We?.focus(be),!!We}return se.focus(be),!0}return this.focusFirstTabbableElement(be)}focusFirstTabbableElement(be){const se=this._getRegionBoundary("start");return se&&se.focus(be),!!se}focusLastTabbableElement(be){const se=this._getRegionBoundary("end");return se&&se.focus(be),!!se}hasAttached(){return this._hasAttached}_getFirstTabbableElement(be){if(this._checker.isFocusable(be)&&this._checker.isTabbable(be))return be;const se=be.children;for(let We=0;We<se.length;We++){const nt=se[We].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(se[We]):null;if(nt)return nt}return null}_getLastTabbableElement(be){if(this._checker.isFocusable(be)&&this._checker.isTabbable(be))return be;const se=be.children;for(let We=se.length-1;We>=0;We--){const nt=se[We].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(se[We]):null;if(nt)return nt}return null}_createAnchor(){const be=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,be),be.classList.add("cdk-visually-hidden"),be.classList.add("cdk-focus-trap-anchor"),be.setAttribute("aria-hidden","true"),be}_toggleAnchorTabIndex(be,se){be?se.setAttribute("tabindex","0"):se.removeAttribute("tabindex")}toggleAnchors(be){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(be,this._startAnchor),this._toggleAnchorTabIndex(be,this._endAnchor))}_executeOnStable(be){this._ngZone.isStable?be():this._ngZone.onStable.pipe((0,ce.q)(1)).subscribe(be)}}let ri=(()=>{class Fe{constructor(se,We,nt){this._checker=se,this._ngZone=We,this._document=nt}create(se,We=!1){return new Li(se,this._checker,this._ngZone,this._document,We)}}return Fe.\u0275fac=function(se){return new(se||Fe)(D.LFG(ln),D.LFG(D.R0b),D.LFG(w.K0))},Fe.\u0275prov=D.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();function Ii(Fe){return 0===Fe.buttons||0===Fe.offsetX&&0===Fe.offsetY}function Ft(Fe){const be=Fe.touches&&Fe.touches[0]||Fe.changedTouches&&Fe.changedTouches[0];return!(!be||-1!==be.identifier||null!=be.radiusX&&1!==be.radiusX||null!=be.radiusY&&1!==be.radiusY)}const Re=new D.OlP("cdk-input-modality-detector-options"),Be={ignoreKeys:[ve.zL,ve.jx,ve.b2,ve.MW,ve.JU]},re=(0,ue.i$)({passive:!0,capture:!0});let Me=(()=>{class Fe{get mostRecentModality(){return this._modality.value}constructor(se,We,nt,Nt){this._platform=se,this._mostRecentTarget=null,this._modality=new he.X(null),this._lastTouchMs=0,this._onKeydown=an=>{this._options?.ignoreKeys?.some(An=>An===an.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,ue.sA)(an))},this._onMousedown=an=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Ii(an)?"keyboard":"mouse"),this._mostRecentTarget=(0,ue.sA)(an))},this._onTouchstart=an=>{Ft(an)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,ue.sA)(an))},this._options={...Be,...Nt},this.modalityDetected=this._modality.pipe(Le(1)),this.modalityChanged=this.modalityDetected.pipe(function $e(Fe,be=Pe.y){return Fe=Fe??gt,(0,Ae.e)((se,We)=>{let nt,Nt=!0;se.subscribe((0,it.x)(We,an=>{const An=be(an);(Nt||!Fe(nt,An))&&(Nt=!1,nt=An,We.next(an))}))})}()),se.isBrowser&&We.runOutsideAngular(()=>{nt.addEventListener("keydown",this._onKeydown,re),nt.addEventListener("mousedown",this._onMousedown,re),nt.addEventListener("touchstart",this._onTouchstart,re)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,re),document.removeEventListener("mousedown",this._onMousedown,re),document.removeEventListener("touchstart",this._onTouchstart,re))}}return Fe.\u0275fac=function(se){return new(se||Fe)(D.LFG(ue.t4),D.LFG(D.R0b),D.LFG(w.K0),D.LFG(Re,8))},Fe.\u0275prov=D.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();const Zn=new D.OlP("cdk-focus-monitor-default-options"),ei=(0,ue.i$)({passive:!0,capture:!0});let Oe=(()=>{class Fe{constructor(se,We,nt,Nt,an){this._ngZone=se,this._platform=We,this._inputModalityDetector=nt,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ae.x,this._rootNodeFocusAndBlurListener=An=>{for(let ci=(0,ue.sA)(An);ci;ci=ci.parentElement)"focus"===An.type?this._onFocus(An,ci):this._onBlur(An,ci)},this._document=Nt,this._detectionMode=an?.detectionMode||0}monitor(se,We=!1){const nt=(0,Ke.fI)(se);if(!this._platform.isBrowser||1!==nt.nodeType)return(0,ee.of)(null);const Nt=(0,ue.kV)(nt)||this._getDocument(),an=this._elementInfo.get(nt);if(an)return We&&(an.checkChildren=!0),an.subject;const An={checkChildren:We,subject:new ae.x,rootNode:Nt};return this._elementInfo.set(nt,An),this._registerGlobalListeners(An),An.subject}stopMonitoring(se){const We=(0,Ke.fI)(se),nt=this._elementInfo.get(We);nt&&(nt.subject.complete(),this._setClasses(We),this._elementInfo.delete(We),this._removeGlobalListeners(nt))}focusVia(se,We,nt){const Nt=(0,Ke.fI)(se);Nt===this._getDocument().activeElement?this._getClosestElementsInfo(Nt).forEach(([An,bi])=>this._originChanged(An,We,bi)):(this._setOrigin(We),"function"==typeof Nt.focus&&Nt.focus(nt))}ngOnDestroy(){this._elementInfo.forEach((se,We)=>this.stopMonitoring(We))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(se){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(se)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:se&&this._isLastInteractionFromInputLabel(se)?"mouse":"program"}_shouldBeAttributedToTouch(se){return 1===this._detectionMode||!!se?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(se,We){se.classList.toggle("cdk-focused",!!We),se.classList.toggle("cdk-touch-focused","touch"===We),se.classList.toggle("cdk-keyboard-focused","keyboard"===We),se.classList.toggle("cdk-mouse-focused","mouse"===We),se.classList.toggle("cdk-program-focused","program"===We)}_setOrigin(se,We=!1){this._ngZone.runOutsideAngular(()=>{this._origin=se,this._originFromTouchInteraction="touch"===se&&We,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(se,We){const nt=this._elementInfo.get(We),Nt=(0,ue.sA)(se);!nt||!nt.checkChildren&&We!==Nt||this._originChanged(We,this._getFocusOrigin(Nt),nt)}_onBlur(se,We){const nt=this._elementInfo.get(We);!nt||nt.checkChildren&&se.relatedTarget instanceof Node&&We.contains(se.relatedTarget)||(this._setClasses(We),this._emitOrigin(nt,null))}_emitOrigin(se,We){se.subject.observers.length&&this._ngZone.run(()=>se.subject.next(We))}_registerGlobalListeners(se){if(!this._platform.isBrowser)return;const We=se.rootNode,nt=this._rootNodeFocusListenerCount.get(We)||0;nt||this._ngZone.runOutsideAngular(()=>{We.addEventListener("focus",this._rootNodeFocusAndBlurListener,ei),We.addEventListener("blur",this._rootNodeFocusAndBlurListener,ei)}),this._rootNodeFocusListenerCount.set(We,nt+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Tt.R)(this._stopInputModalityDetector)).subscribe(Nt=>{this._setOrigin(Nt,!0)}))}_removeGlobalListeners(se){const We=se.rootNode;if(this._rootNodeFocusListenerCount.has(We)){const nt=this._rootNodeFocusListenerCount.get(We);nt>1?this._rootNodeFocusListenerCount.set(We,nt-1):(We.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ei),We.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ei),this._rootNodeFocusListenerCount.delete(We))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(se,We,nt){this._setClasses(se,We),this._emitOrigin(nt,We),this._lastFocusOrigin=We}_getClosestElementsInfo(se){const We=[];return this._elementInfo.forEach((nt,Nt)=>{(Nt===se||nt.checkChildren&&Nt.contains(se))&&We.push([Nt,nt])}),We}_isLastInteractionFromInputLabel(se){const{_mostRecentTarget:We,mostRecentModality:nt}=this._inputModalityDetector;if("mouse"!==nt||!We||We===se||"INPUT"!==se.nodeName&&"TEXTAREA"!==se.nodeName||se.disabled)return!1;const Nt=se.labels;if(Nt)for(let an=0;an<Nt.length;an++)if(Nt[an].contains(We))return!0;return!1}}return Fe.\u0275fac=function(se){return new(se||Fe)(D.LFG(D.R0b),D.LFG(ue.t4),D.LFG(Me),D.LFG(w.K0,8),D.LFG(Zn,8))},Fe.\u0275prov=D.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();const ie="cdk-high-contrast-black-on-white",Ne="cdk-high-contrast-white-on-black",ht="cdk-high-contrast-active";let Lt=(()=>{class Fe{constructor(se,We){this._platform=se,this._document=We,this._breakpointSubscription=(0,D.f3M)(Se).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const se=this._document.createElement("div");se.style.backgroundColor="rgb(1,2,3)",se.style.position="absolute",this._document.body.appendChild(se);const We=this._document.defaultView||window,nt=We&&We.getComputedStyle?We.getComputedStyle(se):null,Nt=(nt&&nt.backgroundColor||"").replace(/ /g,"");switch(se.remove(),Nt){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const se=this._document.body.classList;se.remove(ht,ie,Ne),this._hasCheckedHighContrastMode=!0;const We=this.getHighContrastMode();1===We?se.add(ht,ie):2===We&&se.add(ht,Ne)}}}return Fe.\u0275fac=function(se){return new(se||Fe)(D.LFG(ue.t4),D.LFG(w.K0))},Fe.\u0275prov=D.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})(),tn=(()=>{class Fe{constructor(se){se._applyBodyHighContrastModeCssClasses()}}return Fe.\u0275fac=function(se){return new(se||Fe)(D.LFG(Lt))},Fe.\u0275mod=D.oAB({type:Fe}),Fe.\u0275inj=D.cJS({imports:[Xe]}),Fe})()},445:(Mt,ke,F)=>{"use strict";F.d(ke,{Is:()=>ve,vT:()=>Ce});var w=F(4650),D=F(6895);const ue=new w.OlP("cdk-dir-doc",{providedIn:"root",factory:function he(){return(0,w.f3M)(D.K0)}}),ae=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ve=(()=>{class Le{constructor(Ae){this.value="ltr",this.change=new w.vpe,Ae&&(this.value=function ee(Le){const Pe=Le?.toLowerCase()||"";return"auto"===Pe&&typeof navigator<"u"&&navigator?.language?ae.test(navigator.language)?"rtl":"ltr":"rtl"===Pe?"rtl":"ltr"}((Ae.body?Ae.body.dir:null)||(Ae.documentElement?Ae.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return Le.\u0275fac=function(Ae){return new(Ae||Le)(w.LFG(ue,8))},Le.\u0275prov=w.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Le})(),Ce=(()=>{class Le{}return Le.\u0275fac=function(Ae){return new(Ae||Le)},Le.\u0275mod=w.oAB({type:Le}),Le.\u0275inj=w.cJS({}),Le})()},1281:(Mt,ke,F)=>{"use strict";F.d(ke,{Eq:()=>ae,HM:()=>ee,Ig:()=>D,fI:()=>ve,su:()=>ue});var w=F(4650);function D(Ce){return null!=Ce&&"false"!=`${Ce}`}function ue(Ce,Le=0){return function he(Ce){return!isNaN(parseFloat(Ce))&&!isNaN(Number(Ce))}(Ce)?Number(Ce):Le}function ae(Ce){return Array.isArray(Ce)?Ce:[Ce]}function ee(Ce){return null==Ce?"":"string"==typeof Ce?Ce:`${Ce}px`}function ve(Ce){return Ce instanceof w.SBq?Ce.nativeElement:Ce}},9521:(Mt,ke,F)=>{"use strict";F.d(ke,{JU:()=>ee,MW:()=>Gi,Vb:()=>Ar,b2:()=>mi,hY:()=>Pe,jx:()=>ve,zL:()=>ce});const ee=16,ve=17,ce=18,Pe=27,Gi=91,mi=224;function Ar(wi,...yn){return yn.length?yn.some(Lr=>wi[Lr]):wi.altKey||wi.shiftKey||wi.ctrlKey||wi.metaKey}},3353:(Mt,ke,F)=>{"use strict";F.d(ke,{Mq:()=>$e,Oy:()=>Xe,_i:()=>gt,ht:()=>st,i$:()=>Pe,kV:()=>bt,sA:()=>Ct,t4:()=>he});var w=F(4650),D=F(6895);let ue;try{ue=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ue=!1}let Ce,Ae,it,Tt,he=(()=>{class ne{constructor(He){this._platformId=He,this.isBrowser=this._platformId?(0,D.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ue)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return ne.\u0275fac=function(He){return new(He||ne)(w.LFG(w.Lbi))},ne.\u0275prov=w.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();function Pe(ne){return function Le(){if(null==Ce&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ce=!0}))}finally{Ce=Ce||!1}return Ce}()?ne:!!ne.capture}function $e(){if(null==it){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return it=!1,it;if("scrollBehavior"in document.documentElement.style)it=!0;else{const ne=Element.prototype.scrollTo;it=!!ne&&!/\{\s*\[native code\]\s*\}/.test(ne.toString())}}return it}function gt(){if("object"!=typeof document||!document)return 0;if(null==Ae){const ne=document.createElement("div"),dt=ne.style;ne.dir="rtl",dt.width="1px",dt.overflow="auto",dt.visibility="hidden",dt.pointerEvents="none",dt.position="absolute";const He=document.createElement("div"),at=He.style;at.width="2px",at.height="1px",ne.appendChild(He),document.body.appendChild(ne),Ae=0,0===ne.scrollLeft&&(ne.scrollLeft=1,Ae=0===ne.scrollLeft?1:2),ne.remove()}return Ae}function bt(ne){if(function Ke(){if(null==Tt){const ne=typeof document<"u"?document.head:null;Tt=!(!ne||!ne.createShadowRoot&&!ne.attachShadow)}return Tt}()){const dt=ne.getRootNode?ne.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&dt instanceof ShadowRoot)return dt}return null}function st(){let ne=typeof document<"u"&&document?document.activeElement:null;for(;ne&&ne.shadowRoot;){const dt=ne.shadowRoot.activeElement;if(dt===ne)break;ne=dt}return ne}function Ct(ne){return ne.composedPath?ne.composedPath()[0]:ne.target}function Xe(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},6895:(Mt,ke,F)=>{"use strict";F.d(ke,{Do:()=>st,EM:()=>Qr,HT:()=>he,JF:()=>co,K0:()=>ee,Mx:()=>Qt,NF:()=>Rr,O5:()=>Lr,S$:()=>Tt,V_:()=>Ce,Ye:()=>Ct,ax:()=>Ar,b0:()=>bt,bD:()=>Ds,ez:()=>so,q:()=>ue,w_:()=>ae});var w=F(4650);let D=null;function ue(){return D}function he(C){D||(D=C)}class ae{}const ee=new w.OlP("DocumentToken");let ve=(()=>{class C{historyGo(S){throw new Error("Not implemented")}}return C.\u0275fac=function(S){return new(S||C)},C.\u0275prov=w.Yz7({token:C,factory:function(){return function ce(){return(0,w.LFG)(Le)}()},providedIn:"platform"}),C})();const Ce=new w.OlP("Location Initialized");let Le=(()=>{class C extends ve{constructor(S){super(),this._doc=S,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ue().getBaseHref(this._doc)}onPopState(S){const j=ue().getGlobalEventTarget(this._doc,"window");return j.addEventListener("popstate",S,!1),()=>j.removeEventListener("popstate",S)}onHashChange(S){const j=ue().getGlobalEventTarget(this._doc,"window");return j.addEventListener("hashchange",S,!1),()=>j.removeEventListener("hashchange",S)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(S){this._location.pathname=S}pushState(S,j,ge){Pe()?this._history.pushState(S,j,ge):this._location.hash=ge}replaceState(S,j,ge){Pe()?this._history.replaceState(S,j,ge):this._location.hash=ge}forward(){this._history.forward()}back(){this._history.back()}historyGo(S=0){this._history.go(S)}getState(){return this._history.state}}return C.\u0275fac=function(S){return new(S||C)(w.LFG(ee))},C.\u0275prov=w.Yz7({token:C,factory:function(){return function Ae(){return new Le((0,w.LFG)(ee))}()},providedIn:"platform"}),C})();function Pe(){return!!window.history.pushState}function it(C,L){if(0==C.length)return L;if(0==L.length)return C;let S=0;return C.endsWith("/")&&S++,L.startsWith("/")&&S++,2==S?C+L.substring(1):1==S?C+L:C+"/"+L}function $e(C){const L=C.match(/#|\?|$/),S=L&&L.index||C.length;return C.slice(0,S-("/"===C[S-1]?1:0))+C.slice(S)}function gt(C){return C&&"?"!==C[0]?"?"+C:C}let Tt=(()=>{class C{historyGo(S){throw new Error("Not implemented")}}return C.\u0275fac=function(S){return new(S||C)},C.\u0275prov=w.Yz7({token:C,factory:function(){return(0,w.f3M)(bt)},providedIn:"root"}),C})();const Ke=new w.OlP("appBaseHref");let bt=(()=>{class C extends Tt{constructor(S,j){super(),this._platformLocation=S,this._removeListenerFns=[],this._baseHref=j??this._platformLocation.getBaseHrefFromDOM()??(0,w.f3M)(ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(S){this._removeListenerFns.push(this._platformLocation.onPopState(S),this._platformLocation.onHashChange(S))}getBaseHref(){return this._baseHref}prepareExternalUrl(S){return it(this._baseHref,S)}path(S=!1){const j=this._platformLocation.pathname+gt(this._platformLocation.search),ge=this._platformLocation.hash;return ge&&S?`${j}${ge}`:j}pushState(S,j,ge,Je){const lt=this.prepareExternalUrl(ge+gt(Je));this._platformLocation.pushState(S,j,lt)}replaceState(S,j,ge,Je){const lt=this.prepareExternalUrl(ge+gt(Je));this._platformLocation.replaceState(S,j,lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(S=0){this._platformLocation.historyGo?.(S)}}return C.\u0275fac=function(S){return new(S||C)(w.LFG(ve),w.LFG(Ke,8))},C.\u0275prov=w.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),st=(()=>{class C extends Tt{constructor(S,j){super(),this._platformLocation=S,this._baseHref="",this._removeListenerFns=[],null!=j&&(this._baseHref=j)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(S){this._removeListenerFns.push(this._platformLocation.onPopState(S),this._platformLocation.onHashChange(S))}getBaseHref(){return this._baseHref}path(S=!1){let j=this._platformLocation.hash;return null==j&&(j="#"),j.length>0?j.substring(1):j}prepareExternalUrl(S){const j=it(this._baseHref,S);return j.length>0?"#"+j:j}pushState(S,j,ge,Je){let lt=this.prepareExternalUrl(ge+gt(Je));0==lt.length&&(lt=this._platformLocation.pathname),this._platformLocation.pushState(S,j,lt)}replaceState(S,j,ge,Je){let lt=this.prepareExternalUrl(ge+gt(Je));0==lt.length&&(lt=this._platformLocation.pathname),this._platformLocation.replaceState(S,j,lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(S=0){this._platformLocation.historyGo?.(S)}}return C.\u0275fac=function(S){return new(S||C)(w.LFG(ve),w.LFG(Ke,8))},C.\u0275prov=w.Yz7({token:C,factory:C.\u0275fac}),C})(),Ct=(()=>{class C{constructor(S){this._subject=new w.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=S;const j=this._locationStrategy.getBaseHref();this._basePath=function He(C){if(new RegExp("^(https?:)?//").test(C)){const[,S]=C.split(/\/\/[^\/]+/);return S}return C}($e(dt(j))),this._locationStrategy.onPopState(ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:ge.state,type:ge.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(S=!1){return this.normalize(this._locationStrategy.path(S))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(S,j=""){return this.path()==this.normalize(S+gt(j))}normalize(S){return C.stripTrailingSlash(function ne(C,L){if(!C||!L.startsWith(C))return L;const S=L.substring(C.length);return""===S||["/",";","?","#"].includes(S[0])?S:L}(this._basePath,dt(S)))}prepareExternalUrl(S){return S&&"/"!==S[0]&&(S="/"+S),this._locationStrategy.prepareExternalUrl(S)}go(S,j="",ge=null){this._locationStrategy.pushState(ge,"",S,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(S+gt(j)),ge)}replaceState(S,j="",ge=null){this._locationStrategy.replaceState(ge,"",S,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(S+gt(j)),ge)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(S=0){this._locationStrategy.historyGo?.(S)}onUrlChange(S){return this._urlChangeListeners.push(S),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(j=>{this._notifyUrlChangeListeners(j.url,j.state)})),()=>{const j=this._urlChangeListeners.indexOf(S);this._urlChangeListeners.splice(j,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(S="",j){this._urlChangeListeners.forEach(ge=>ge(S,j))}subscribe(S,j,ge){return this._subject.subscribe({next:S,error:j,complete:ge})}}return C.normalizeQueryParams=gt,C.joinWithSlash=it,C.stripTrailingSlash=$e,C.\u0275fac=function(S){return new(S||C)(w.LFG(Tt))},C.\u0275prov=w.Yz7({token:C,factory:function(){return function Xe(){return new Ct((0,w.LFG)(Tt))}()},providedIn:"root"}),C})();function dt(C){return C.replace(/\/index.html$/,"")}function Qt(C,L){L=encodeURIComponent(L);for(const S of C.split(";")){const j=S.indexOf("="),[ge,Je]=-1==j?[S,""]:[S.slice(0,j),S.slice(j+1)];if(ge.trim()===L)return decodeURIComponent(Je)}return null}class mi{constructor(L,S,j,ge){this.$implicit=L,this.ngForOf=S,this.index=j,this.count=ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ar=(()=>{class C{set ngForOf(S){this._ngForOf=S,this._ngForOfDirty=!0}set ngForTrackBy(S){this._trackByFn=S}get ngForTrackBy(){return this._trackByFn}constructor(S,j,ge){this._viewContainer=S,this._template=j,this._differs=ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(S){S&&(this._template=S)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const S=this._ngForOf;!this._differ&&S&&(this._differ=this._differs.find(S).create(this.ngForTrackBy))}if(this._differ){const S=this._differ.diff(this._ngForOf);S&&this._applyChanges(S)}}_applyChanges(S){const j=this._viewContainer;S.forEachOperation((ge,Je,lt)=>{if(null==ge.previousIndex)j.createEmbeddedView(this._template,new mi(ge.item,this._ngForOf,-1,-1),null===lt?void 0:lt);else if(null==lt)j.remove(null===Je?void 0:Je);else if(null!==Je){const Yt=j.get(Je);j.move(Yt,lt),wi(Yt,ge)}});for(let ge=0,Je=j.length;ge<Je;ge++){const Yt=j.get(ge).context;Yt.index=ge,Yt.count=Je,Yt.ngForOf=this._ngForOf}S.forEachIdentityChange(ge=>{wi(j.get(ge.currentIndex),ge)})}static ngTemplateContextGuard(S,j){return!0}}return C.\u0275fac=function(S){return new(S||C)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))},C.\u0275dir=w.lG2({type:C,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),C})();function wi(C,L){C.context.$implicit=L.item}let Lr=(()=>{class C{constructor(S,j){this._viewContainer=S,this._context=new Mr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=j}set ngIf(S){this._context.$implicit=this._context.ngIf=S,this._updateView()}set ngIfThen(S){ys("ngIfThen",S),this._thenTemplateRef=S,this._thenViewRef=null,this._updateView()}set ngIfElse(S){ys("ngIfElse",S),this._elseTemplateRef=S,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(S,j){return!0}}return C.\u0275fac=function(S){return new(S||C)(w.Y36(w.s_b),w.Y36(w.Rgc))},C.\u0275dir=w.lG2({type:C,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),C})();class Mr{constructor(){this.$implicit=null,this.ngIf=null}}function ys(C,L){if(L&&!L.createEmbeddedView)throw new Error(`${C} must be a TemplateRef, but received '${(0,w.AaK)(L)}'.`)}let so=(()=>{class C{}return C.\u0275fac=function(S){return new(S||C)},C.\u0275mod=w.oAB({type:C}),C.\u0275inj=w.cJS({}),C})();const Ds="browser";function Rr(C){return C===Ds}let Qr=(()=>{class C{}return C.\u0275prov=(0,w.Yz7)({token:C,providedIn:"root",factory:()=>new Bs((0,w.LFG)(ee),window)}),C})();class Bs{constructor(L,S){this.document=L,this.window=S,this.offset=()=>[0,0]}setOffset(L){this.offset=Array.isArray(L)?()=>L:L}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(L){this.supportsScrolling()&&this.window.scrollTo(L[0],L[1])}scrollToAnchor(L){if(!this.supportsScrolling())return;const S=function Xs(C,L){const S=C.getElementById(L)||C.getElementsByName(L)[0];if(S)return S;if("function"==typeof C.createTreeWalker&&C.body&&(C.body.createShadowRoot||C.body.attachShadow)){const j=C.createTreeWalker(C.body,NodeFilter.SHOW_ELEMENT);let ge=j.currentNode;for(;ge;){const Je=ge.shadowRoot;if(Je){const lt=Je.getElementById(L)||Je.querySelector(`[name="${L}"]`);if(lt)return lt}ge=j.nextNode()}}return null}(this.document,L);S&&(this.scrollToElement(S),S.focus())}setHistoryScrollRestoration(L){if(this.supportScrollRestoration()){const S=this.window.history;S&&S.scrollRestoration&&(S.scrollRestoration=L)}}scrollToElement(L){const S=L.getBoundingClientRect(),j=S.left+this.window.pageXOffset,ge=S.top+this.window.pageYOffset,Je=this.offset();this.window.scrollTo(j-Je[0],ge-Je[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const L=lo(this.window.history)||lo(Object.getPrototypeOf(this.window.history));return!(!L||!L.writable&&!L.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function lo(C){return Object.getOwnPropertyDescriptor(C,"scrollRestoration")}class co{}},529:(Mt,ke,F)=>{"use strict";F.d(ke,{JF:()=>Ft,eN:()=>Y});var w=F(6895),D=F(4650),ue=F(9646),he=F(9751),ae=F(4351),ee=F(9300),ve=F(4004);class ce{}class Ce{}class Le{constructor(re){this.normalizedNames=new Map,this.lazyUpdate=null,re?this.lazyInit="string"==typeof re?()=>{this.headers=new Map,re.split("\n").forEach(Me=>{const Et=Me.indexOf(":");if(Et>0){const mt=Me.slice(0,Et),_n=mt.toLowerCase(),Hn=Me.slice(Et+1).trim();this.maybeSetNormalizedName(mt,_n),this.headers.has(_n)?this.headers.get(_n).push(Hn):this.headers.set(_n,[Hn])}})}:()=>{this.headers=new Map,Object.keys(re).forEach(Me=>{let Et=re[Me];const mt=Me.toLowerCase();"string"==typeof Et&&(Et=[Et]),Et.length>0&&(this.headers.set(mt,Et),this.maybeSetNormalizedName(Me,mt))})}:this.headers=new Map}has(re){return this.init(),this.headers.has(re.toLowerCase())}get(re){this.init();const Me=this.headers.get(re.toLowerCase());return Me&&Me.length>0?Me[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(re){return this.init(),this.headers.get(re.toLowerCase())||null}append(re,Me){return this.clone({name:re,value:Me,op:"a"})}set(re,Me){return this.clone({name:re,value:Me,op:"s"})}delete(re,Me){return this.clone({name:re,value:Me,op:"d"})}maybeSetNormalizedName(re,Me){this.normalizedNames.has(Me)||this.normalizedNames.set(Me,re)}init(){this.lazyInit&&(this.lazyInit instanceof Le?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(re=>this.applyUpdate(re)),this.lazyUpdate=null))}copyFrom(re){re.init(),Array.from(re.headers.keys()).forEach(Me=>{this.headers.set(Me,re.headers.get(Me)),this.normalizedNames.set(Me,re.normalizedNames.get(Me))})}clone(re){const Me=new Le;return Me.lazyInit=this.lazyInit&&this.lazyInit instanceof Le?this.lazyInit:this,Me.lazyUpdate=(this.lazyUpdate||[]).concat([re]),Me}applyUpdate(re){const Me=re.name.toLowerCase();switch(re.op){case"a":case"s":let Et=re.value;if("string"==typeof Et&&(Et=[Et]),0===Et.length)return;this.maybeSetNormalizedName(re.name,Me);const mt=("a"===re.op?this.headers.get(Me):void 0)||[];mt.push(...Et),this.headers.set(Me,mt);break;case"d":const _n=re.value;if(_n){let Hn=this.headers.get(Me);if(!Hn)return;Hn=Hn.filter(Cn=>-1===_n.indexOf(Cn)),0===Hn.length?(this.headers.delete(Me),this.normalizedNames.delete(Me)):this.headers.set(Me,Hn)}else this.headers.delete(Me),this.normalizedNames.delete(Me)}}forEach(re){this.init(),Array.from(this.normalizedNames.keys()).forEach(Me=>re(this.normalizedNames.get(Me),this.headers.get(Me)))}}class Ae{encodeKey(re){return Tt(re)}encodeValue(re){return Tt(re)}decodeKey(re){return decodeURIComponent(re)}decodeValue(re){return decodeURIComponent(re)}}const $e=/%(\d[a-f0-9])/gi,gt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Tt(Te){return encodeURIComponent(Te).replace($e,(re,Me)=>gt[Me]??re)}function Ke(Te){return`${Te}`}class bt{constructor(re={}){if(this.updates=null,this.cloneFrom=null,this.encoder=re.encoder||new Ae,re.fromString){if(re.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function it(Te,re){const Me=new Map;return Te.length>0&&Te.replace(/^\?/,"").split("&").forEach(mt=>{const _n=mt.indexOf("="),[Hn,Cn]=-1==_n?[re.decodeKey(mt),""]:[re.decodeKey(mt.slice(0,_n)),re.decodeValue(mt.slice(_n+1))],un=Me.get(Hn)||[];un.push(Cn),Me.set(Hn,un)}),Me}(re.fromString,this.encoder)}else re.fromObject?(this.map=new Map,Object.keys(re.fromObject).forEach(Me=>{const Et=re.fromObject[Me],mt=Array.isArray(Et)?Et.map(Ke):[Ke(Et)];this.map.set(Me,mt)})):this.map=null}has(re){return this.init(),this.map.has(re)}get(re){this.init();const Me=this.map.get(re);return Me?Me[0]:null}getAll(re){return this.init(),this.map.get(re)||null}keys(){return this.init(),Array.from(this.map.keys())}append(re,Me){return this.clone({param:re,value:Me,op:"a"})}appendAll(re){const Me=[];return Object.keys(re).forEach(Et=>{const mt=re[Et];Array.isArray(mt)?mt.forEach(_n=>{Me.push({param:Et,value:_n,op:"a"})}):Me.push({param:Et,value:mt,op:"a"})}),this.clone(Me)}set(re,Me){return this.clone({param:re,value:Me,op:"s"})}delete(re,Me){return this.clone({param:re,value:Me,op:"d"})}toString(){return this.init(),this.keys().map(re=>{const Me=this.encoder.encodeKey(re);return this.map.get(re).map(Et=>Me+"="+this.encoder.encodeValue(Et)).join("&")}).filter(re=>""!==re).join("&")}clone(re){const Me=new bt({encoder:this.encoder});return Me.cloneFrom=this.cloneFrom||this,Me.updates=(this.updates||[]).concat(re),Me}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(re=>this.map.set(re,this.cloneFrom.map.get(re))),this.updates.forEach(re=>{switch(re.op){case"a":case"s":const Me=("a"===re.op?this.map.get(re.param):void 0)||[];Me.push(Ke(re.value)),this.map.set(re.param,Me);break;case"d":if(void 0===re.value){this.map.delete(re.param);break}{let Et=this.map.get(re.param)||[];const mt=Et.indexOf(Ke(re.value));-1!==mt&&Et.splice(mt,1),Et.length>0?this.map.set(re.param,Et):this.map.delete(re.param)}}}),this.cloneFrom=this.updates=null)}}class Ct{constructor(){this.map=new Map}set(re,Me){return this.map.set(re,Me),this}get(re){return this.map.has(re)||this.map.set(re,re.defaultValue()),this.map.get(re)}delete(re){return this.map.delete(re),this}has(re){return this.map.has(re)}keys(){return this.map.keys()}}function ne(Te){return typeof ArrayBuffer<"u"&&Te instanceof ArrayBuffer}function dt(Te){return typeof Blob<"u"&&Te instanceof Blob}function He(Te){return typeof FormData<"u"&&Te instanceof FormData}class xe{constructor(re,Me,Et,mt){let _n;if(this.url=Me,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=re.toUpperCase(),function Xe(Te){switch(Te){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||mt?(this.body=void 0!==Et?Et:null,_n=mt):_n=Et,_n&&(this.reportProgress=!!_n.reportProgress,this.withCredentials=!!_n.withCredentials,_n.responseType&&(this.responseType=_n.responseType),_n.headers&&(this.headers=_n.headers),_n.context&&(this.context=_n.context),_n.params&&(this.params=_n.params)),this.headers||(this.headers=new Le),this.context||(this.context=new Ct),this.params){const Hn=this.params.toString();if(0===Hn.length)this.urlWithParams=Me;else{const Cn=Me.indexOf("?");this.urlWithParams=Me+(-1===Cn?"?":Cn<Me.length-1?"&":"")+Hn}}else this.params=new bt,this.urlWithParams=Me}serializeBody(){return null===this.body?null:ne(this.body)||dt(this.body)||He(this.body)||function at(Te){return typeof URLSearchParams<"u"&&Te instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof bt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||He(this.body)?null:dt(this.body)?this.body.type||null:ne(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof bt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(re={}){const Me=re.method||this.method,Et=re.url||this.url,mt=re.responseType||this.responseType,_n=void 0!==re.body?re.body:this.body,Hn=void 0!==re.withCredentials?re.withCredentials:this.withCredentials,Cn=void 0!==re.reportProgress?re.reportProgress:this.reportProgress;let un=re.headers||this.headers,Zn=re.params||this.params;const ei=re.context??this.context;return void 0!==re.setHeaders&&(un=Object.keys(re.setHeaders).reduce((Oe,Ie)=>Oe.set(Ie,re.setHeaders[Ie]),un)),re.setParams&&(Zn=Object.keys(re.setParams).reduce((Oe,Ie)=>Oe.set(Ie,re.setParams[Ie]),Zn)),new xe(Me,Et,_n,{params:Zn,headers:un,context:ei,reportProgress:Cn,responseType:mt,withCredentials:Hn})}}var wt=(()=>((wt=wt||{})[wt.Sent=0]="Sent",wt[wt.UploadProgress=1]="UploadProgress",wt[wt.ResponseHeader=2]="ResponseHeader",wt[wt.DownloadProgress=3]="DownloadProgress",wt[wt.Response=4]="Response",wt[wt.User=5]="User",wt))();class Ot{constructor(re,Me=200,Et="OK"){this.headers=re.headers||new Le,this.status=void 0!==re.status?re.status:Me,this.statusText=re.statusText||Et,this.url=re.url||null,this.ok=this.status>=200&&this.status<300}}class Rt extends Ot{constructor(re={}){super(re),this.type=wt.ResponseHeader}clone(re={}){return new Rt({headers:re.headers||this.headers,status:void 0!==re.status?re.status:this.status,statusText:re.statusText||this.statusText,url:re.url||this.url||void 0})}}class en extends Ot{constructor(re={}){super(re),this.type=wt.Response,this.body=void 0!==re.body?re.body:null}clone(re={}){return new en({body:void 0!==re.body?re.body:this.body,headers:re.headers||this.headers,status:void 0!==re.status?re.status:this.status,statusText:re.statusText||this.statusText,url:re.url||this.url||void 0})}}class W extends Ot{constructor(re){super(re,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${re.url||"(unknown url)"}`:`Http failure response for ${re.url||"(unknown url)"}: ${re.status} ${re.statusText}`,this.error=re.error||null}}function te(Te,re){return{body:re,headers:Te.headers,context:Te.context,observe:Te.observe,params:Te.params,reportProgress:Te.reportProgress,responseType:Te.responseType,withCredentials:Te.withCredentials}}let Y=(()=>{class Te{constructor(Me){this.handler=Me}request(Me,Et,mt={}){let _n;if(Me instanceof xe)_n=Me;else{let un,Zn;un=mt.headers instanceof Le?mt.headers:new Le(mt.headers),mt.params&&(Zn=mt.params instanceof bt?mt.params:new bt({fromObject:mt.params})),_n=new xe(Me,Et,void 0!==mt.body?mt.body:null,{headers:un,context:mt.context,params:Zn,reportProgress:mt.reportProgress,responseType:mt.responseType||"json",withCredentials:mt.withCredentials})}const Hn=(0,ue.of)(_n).pipe((0,ae.b)(un=>this.handler.handle(un)));if(Me instanceof xe||"events"===mt.observe)return Hn;const Cn=Hn.pipe((0,ee.h)(un=>un instanceof en));switch(mt.observe||"body"){case"body":switch(_n.responseType){case"arraybuffer":return Cn.pipe((0,ve.U)(un=>{if(null!==un.body&&!(un.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return un.body}));case"blob":return Cn.pipe((0,ve.U)(un=>{if(null!==un.body&&!(un.body instanceof Blob))throw new Error("Response is not a Blob.");return un.body}));case"text":return Cn.pipe((0,ve.U)(un=>{if(null!==un.body&&"string"!=typeof un.body)throw new Error("Response is not a string.");return un.body}));default:return Cn.pipe((0,ve.U)(un=>un.body))}case"response":return Cn;default:throw new Error(`Unreachable: unhandled observe type ${mt.observe}}`)}}delete(Me,Et={}){return this.request("DELETE",Me,Et)}get(Me,Et={}){return this.request("GET",Me,Et)}head(Me,Et={}){return this.request("HEAD",Me,Et)}jsonp(Me,Et){return this.request("JSONP",Me,{params:(new bt).append(Et,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Me,Et={}){return this.request("OPTIONS",Me,Et)}patch(Me,Et,mt={}){return this.request("PATCH",Me,te(mt,Et))}post(Me,Et,mt={}){return this.request("POST",Me,te(mt,Et))}put(Me,Et,mt={}){return this.request("PUT",Me,te(mt,Et))}}return Te.\u0275fac=function(Me){return new(Me||Te)(D.LFG(ce))},Te.\u0275prov=D.Yz7({token:Te,factory:Te.\u0275fac}),Te})();function we(Te,re){return re(Te)}function Se(Te,re){return(Me,Et)=>re.intercept(Me,{handle:mt=>Te(mt,Et)})}const me=new D.OlP("HTTP_INTERCEPTORS"),Ve=new D.OlP("HTTP_INTERCEPTOR_FNS");function De(){let Te=null;return(re,Me)=>(null===Te&&(Te=((0,D.f3M)(me,{optional:!0})??[]).reduceRight(Se,we)),Te(re,Me))}let Ze=(()=>{class Te extends ce{constructor(Me,Et){super(),this.backend=Me,this.injector=Et,this.chain=null}handle(Me){if(null===this.chain){const Et=Array.from(new Set(this.injector.get(Ve)));this.chain=Et.reduceRight((mt,_n)=>function fe(Te,re,Me){return(Et,mt)=>Me.runInContext(()=>re(Et,_n=>Te(_n,mt)))}(mt,_n,this.injector),we)}return this.chain(Me,Et=>this.backend.handle(Et))}}return Te.\u0275fac=function(Me){return new(Me||Te)(D.LFG(Ce),D.LFG(D.lqb))},Te.\u0275prov=D.Yz7({token:Te,factory:Te.\u0275fac}),Te})();const Un=/^\)\]\}',?\n/;let ii=(()=>{class Te{constructor(Me){this.xhrFactory=Me}handle(Me){if("JSONP"===Me.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new he.y(Et=>{const mt=this.xhrFactory.build();if(mt.open(Me.method,Me.urlWithParams),Me.withCredentials&&(mt.withCredentials=!0),Me.headers.forEach((ie,Ne)=>mt.setRequestHeader(ie,Ne.join(","))),Me.headers.has("Accept")||mt.setRequestHeader("Accept","application/json, text/plain, */*"),!Me.headers.has("Content-Type")){const ie=Me.detectContentTypeHeader();null!==ie&&mt.setRequestHeader("Content-Type",ie)}if(Me.responseType){const ie=Me.responseType.toLowerCase();mt.responseType="json"!==ie?ie:"text"}const _n=Me.serializeBody();let Hn=null;const Cn=()=>{if(null!==Hn)return Hn;const ie=mt.statusText||"OK",Ne=new Le(mt.getAllResponseHeaders()),ht=function ln(Te){return"responseURL"in Te&&Te.responseURL?Te.responseURL:/^X-Request-URL:/m.test(Te.getAllResponseHeaders())?Te.getResponseHeader("X-Request-URL"):null}(mt)||Me.url;return Hn=new Rt({headers:Ne,status:mt.status,statusText:ie,url:ht}),Hn},un=()=>{let{headers:ie,status:Ne,statusText:ht,url:Lt}=Cn(),tn=null;204!==Ne&&(tn=typeof mt.response>"u"?mt.responseText:mt.response),0===Ne&&(Ne=tn?200:0);let Fe=Ne>=200&&Ne<300;if("json"===Me.responseType&&"string"==typeof tn){const be=tn;tn=tn.replace(Un,"");try{tn=""!==tn?JSON.parse(tn):null}catch(se){tn=be,Fe&&(Fe=!1,tn={error:se,text:tn})}}Fe?(Et.next(new en({body:tn,headers:ie,status:Ne,statusText:ht,url:Lt||void 0})),Et.complete()):Et.error(new W({error:tn,headers:ie,status:Ne,statusText:ht,url:Lt||void 0}))},Zn=ie=>{const{url:Ne}=Cn(),ht=new W({error:ie,status:mt.status||0,statusText:mt.statusText||"Unknown Error",url:Ne||void 0});Et.error(ht)};let ei=!1;const Oe=ie=>{ei||(Et.next(Cn()),ei=!0);let Ne={type:wt.DownloadProgress,loaded:ie.loaded};ie.lengthComputable&&(Ne.total=ie.total),"text"===Me.responseType&&mt.responseText&&(Ne.partialText=mt.responseText),Et.next(Ne)},Ie=ie=>{let Ne={type:wt.UploadProgress,loaded:ie.loaded};ie.lengthComputable&&(Ne.total=ie.total),Et.next(Ne)};return mt.addEventListener("load",un),mt.addEventListener("error",Zn),mt.addEventListener("timeout",Zn),mt.addEventListener("abort",Zn),Me.reportProgress&&(mt.addEventListener("progress",Oe),null!==_n&&mt.upload&&mt.upload.addEventListener("progress",Ie)),mt.send(_n),Et.next({type:wt.Sent}),()=>{mt.removeEventListener("error",Zn),mt.removeEventListener("abort",Zn),mt.removeEventListener("load",un),mt.removeEventListener("timeout",Zn),Me.reportProgress&&(mt.removeEventListener("progress",Oe),null!==_n&&mt.upload&&mt.upload.removeEventListener("progress",Ie)),mt.readyState!==mt.DONE&&mt.abort()}})}}return Te.\u0275fac=function(Me){return new(Me||Te)(D.LFG(w.JF))},Te.\u0275prov=D.Yz7({token:Te,factory:Te.\u0275fac}),Te})();const Bn=new D.OlP("XSRF_ENABLED"),Xi=new D.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),ai=new D.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Wi{}let fr=(()=>{class Te{constructor(Me,Et,mt){this.doc=Me,this.platform=Et,this.cookieName=mt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Me=this.doc.cookie||"";return Me!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,w.Mx)(Me,this.cookieName),this.lastCookieString=Me),this.lastToken}}return Te.\u0275fac=function(Me){return new(Me||Te)(D.LFG(w.K0),D.LFG(D.Lbi),D.LFG(Xi))},Te.\u0275prov=D.Yz7({token:Te,factory:Te.\u0275fac}),Te})();function Dn(Te,re){const Me=Te.url.toLowerCase();if(!(0,D.f3M)(Bn)||"GET"===Te.method||"HEAD"===Te.method||Me.startsWith("http://")||Me.startsWith("https://"))return re(Te);const Et=(0,D.f3M)(Wi).getToken(),mt=(0,D.f3M)(ai);return null!=Et&&!Te.headers.has(mt)&&(Te=Te.clone({headers:Te.headers.set(mt,Et)})),re(Te)}var Gt=(()=>((Gt=Gt||{})[Gt.Interceptors=0]="Interceptors",Gt[Gt.LegacyInterceptors=1]="LegacyInterceptors",Gt[Gt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Gt[Gt.NoXsrfProtection=3]="NoXsrfProtection",Gt[Gt.JsonpSupport=4]="JsonpSupport",Gt[Gt.RequestsMadeViaParent=5]="RequestsMadeViaParent",Gt))();function Gi(Te,re){return{\u0275kind:Te,\u0275providers:re}}function Li(...Te){const re=[Y,ii,Ze,{provide:ce,useExisting:Ze},{provide:Ce,useExisting:ii},{provide:Ve,useValue:Dn,multi:!0},{provide:Bn,useValue:!0},{provide:Wi,useClass:fr}];for(const Me of Te)re.push(...Me.\u0275providers);return(0,D.MR2)(re)}const gn=new D.OlP("LEGACY_INTERCEPTOR_FN");let Ft=(()=>{class Te{}return Te.\u0275fac=function(Me){return new(Me||Te)},Te.\u0275mod=D.oAB({type:Te}),Te.\u0275inj=D.cJS({providers:[Li(Gi(Gt.LegacyInterceptors,[{provide:gn,useFactory:De},{provide:Ve,useExisting:gn,multi:!0}]))]}),Te})()},4650:(Mt,ke,F)=>{"use strict";F.d(ke,{$8M:()=>Yl,$WT:()=>Er,$Z:()=>Ol,AFp:()=>zy,ALo:()=>hy,AaK:()=>ce,CHM:()=>Di,CRH:()=>by,CZH:()=>_f,CqO:()=>Mm,D6c:()=>dw,EJc:()=>Ab,EiD:()=>ad,EpF:()=>Sm,F$t:()=>Fm,F4k:()=>Am,FYo:()=>Vu,FiY:()=>yr,G48:()=>Xb,Gf:()=>vy,GfV:()=>Dd,Gpc:()=>Pe,Hsn:()=>Lm,Ikx:()=>_g,JOm:()=>vo,JVY:()=>rp,JZr:()=>Tt,KtG:()=>$o,L6k:()=>Jh,LAX:()=>sp,LFG:()=>Re,Lbi:()=>Cb,Lck:()=>EE,MAs:()=>xm,MMx:()=>Sg,MR2:()=>pd,NdJ:()=>ag,OlP:()=>vi,Oqu:()=>mg,P3R:()=>Lu,PXZ:()=>jb,Q6J:()=>tg,QGY:()=>og,QbO:()=>xb,Qsj:()=>wp,R0b:()=>Do,RDi:()=>yl,Rgc:()=>wh,SBq:()=>ns,Sil:()=>Ib,Suo:()=>Ey,TTD:()=>ao,TgZ:()=>nf,Udp:()=>fg,W1O:()=>xy,WFA:()=>lg,XFs:()=>Wt,Xpm:()=>be,Xts:()=>pa,Y36:()=>Ea,YKP:()=>q_,YNc:()=>Cm,Yjl:()=>ci,Yz7:()=>Ue,Z0I:()=>Kt,ZZ4:()=>Jg,_Bn:()=>Z_,_UZ:()=>ig,_Vd:()=>xl,_c5:()=>uw,_uU:()=>r_,aQg:()=>em,c2e:()=>Tb,cJS:()=>pt,cg1:()=>vg,d8E:()=>yg,dDg:()=>Ub,dqk:()=>Dn,eBb:()=>ed,eFA:()=>iv,eJc:()=>kg,ekj:()=>pg,eoX:()=>Jy,evT:()=>Tc,f3M:()=>Te,g9A:()=>Wy,h0i:()=>Jc,hGG:()=>hw,hij:()=>lf,iGM:()=>yy,ifc:()=>Zn,ip1:()=>jy,jDz:()=>J_,kL8:()=>w_,lG2:()=>bi,lcZ:()=>dy,lqb:()=>ma,lri:()=>qy,mCW:()=>bl,n5z:()=>Ko,oAB:()=>Nt,oxw:()=>Om,pB0:()=>op,q3G:()=>dr,qLn:()=>Tl,qOj:()=>il,qZA:()=>rf,qzn:()=>ko,rWj:()=>Qy,sBO:()=>Kb,s_b:()=>pf,soG:()=>yf,tBr:()=>qt,tb:()=>tv,tp0:()=>ka,uIk:()=>eg,vHH:()=>Ke,vpe:()=>ra,wAp:()=>Mn,xp6:()=>Pl,z2F:()=>vf,z3N:()=>No,zSh:()=>Ka,zs3:()=>el});var w=F(7579),D=F(727),ue=F(9751),he=F(6451),ae=F(3099);function ee(t){for(let i in t)if(t[i]===ee)return i;throw Error("Could not find renamed property on target object.")}function ve(t,i){for(const s in i)i.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=i[s])}function ce(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ce).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const i=t.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function Ce(t,i){return null==t||""===t?null===i?"":i:null==i||""===i?t:t+" "+i}const Le=ee({__forward_ref__:ee});function Pe(t){return t.__forward_ref__=Pe,t.toString=function(){return ce(this())},t}function Ae(t){return it(t)?t():t}function it(t){return"function"==typeof t&&t.hasOwnProperty(Le)&&t.__forward_ref__===Pe}function $e(t){return t&&!!t.\u0275providers}const Tt="https://g.co/ng/security#xss";class Ke extends Error{constructor(i,s){super(bt(i,s)),this.code=i}}function bt(t,i){return`NG0${Math.abs(t)}${i?": "+i.trim():""}`}function st(t){return"string"==typeof t?t:null==t?"":String(t)}function He(t,i){throw new Ke(-201,!1)}function Ve(t,i){null==t&&function De(t,i,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${i} <=Actual]`))}(i,t,null,"!=")}function Ue(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function pt(t){return{providers:t.providers||[],imports:t.imports||[]}}function zt(t){return dn(t,Un)||dn(t,ii)}function Kt(t){return null!==zt(t)}function dn(t,i){return t.hasOwnProperty(i)?t[i]:null}function St(t){return t&&(t.hasOwnProperty(ln)||t.hasOwnProperty(Bn))?t[ln]:null}const Un=ee({\u0275prov:ee}),ln=ee({\u0275inj:ee}),ii=ee({ngInjectableDef:ee}),Bn=ee({ngInjectorDef:ee});var Wt=(()=>((Wt=Wt||{})[Wt.Default=0]="Default",Wt[Wt.Host=1]="Host",Wt[Wt.Self=2]="Self",Wt[Wt.SkipSelf=4]="SkipSelf",Wt[Wt.Optional=8]="Optional",Wt))();let Xi;function ai(t){const i=Xi;return Xi=t,i}function Wi(t,i,s){const a=zt(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Wt.Optional?null:void 0!==i?i:void He(ce(t))}const Dn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Li={},ri="__NG_DI_FLAG__",gn="ngTempTokenPath",Ci="ngTokenPath",is=/\n/gm,Jn="\u0275",Fr="__source";let In;function Ii(t){const i=In;return In=t,i}function Ft(t,i=Wt.Default){if(void 0===In)throw new Ke(-203,!1);return null===In?Wi(t,void 0,i):In.get(t,i&Wt.Optional?null:void 0,i)}function Re(t,i=Wt.Default){return(function Kr(){return Xi}()||Ft)(Ae(t),i)}function Te(t,i=Wt.Default){return Re(t,re(i))}function re(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Me(t){const i=[];for(let s=0;s<t.length;s++){const a=Ae(t[s]);if(Array.isArray(a)){if(0===a.length)throw new Ke(900,!1);let c,h=Wt.Default;for(let p=0;p<a.length;p++){const b=a[p],T=mt(b);"number"==typeof T?-1===T?c=b.token:h|=T:c=b}i.push(Re(c,h))}else i.push(Re(a))}return i}function Et(t,i){return t[ri]=i,t.prototype[ri]=i,t}function mt(t){return t[ri]}function Cn(t){return{toString:t}.toString()}var un=(()=>((un=un||{})[un.OnPush=0]="OnPush",un[un.Default=1]="Default",un))(),Zn=(()=>{return(t=Zn||(Zn={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Zn;var t})();const ei={},Oe=[],Ie=ee({\u0275cmp:ee}),ie=ee({\u0275dir:ee}),Ne=ee({\u0275pipe:ee}),ht=ee({\u0275mod:ee}),Lt=ee({\u0275fac:ee}),tn=ee({__NG_ELEMENT_ID__:ee});let Fe=0;function be(t){return Cn(()=>{const s=!0===t.standalone,a={},c={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===un.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||Oe,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Zn.Emulated,id:"c"+Fe++,styles:t.styles||Oe,_:null,setInput:null,schemas:t.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},h=t.dependencies,p=t.features;return c.inputs=An(t.inputs,a),c.outputs=An(t.outputs),p&&p.forEach(b=>b(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(We).filter(nt):null,c.pipeDefs=h?()=>("function"==typeof h?h():h).map(Ni).filter(nt):null,c})}function We(t){return $n(t)||xi(t)}function nt(t){return null!==t}function Nt(t){return Cn(()=>({type:t.type,bootstrap:t.bootstrap||Oe,declarations:t.declarations||Oe,imports:t.imports||Oe,exports:t.exports||Oe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function An(t,i){if(null==t)return ei;const s={};for(const a in t)if(t.hasOwnProperty(a)){let c=t[a],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),s[c]=a,i&&(i[c]=h)}return s}const bi=be;function ci(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function $n(t){return t[Ie]||null}function xi(t){return t[ie]||null}function Ni(t){return t[Ne]||null}function Er(t){const i=$n(t)||xi(t)||Ni(t);return null!==i&&i.standalone}function or(t,i){const s=t[ht]||null;if(!s&&!0===i)throw new Error(`Type ${ce(t)} does not have '\u0275mod' property.`);return s}const br=0,Qt=1,Sn=2,ui=3,Ti=4,nr=5,pi=6,Sr=7,mi=8,Ar=9,wi=10,yn=11,Lr=12,Mr=13,ys=14,pr=15,Si=16,wr=17,zr=18,Yi=19,$r=20,Co=21,_i=22,no=1,gr=2,Zr=7,js=8,Ri=9,Ai=10;function ar(t){return Array.isArray(t)&&"object"==typeof t[no]}function Ki(t){return Array.isArray(t)&&!0===t[no]}function io(t){return 0!=(4&t.flags)}function rs(t){return t.componentOffset>-1}function Ir(t){return 1==(1&t.flags)}function lr(t){return null!==t.template}function Nr(t){return 0!=(256&t[Sn])}function Rr(t,i){return t.hasOwnProperty(Lt)?t[Lt]:null}class Ys{constructor(i,s,a){this.previousValue=i,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ao(){return ji}function ji(t){return t.type.prototype.ngOnChanges&&(t.setInput=Qr),ss}function ss(){const t=lo(this),i=t?.current;if(i){const s=t.previous;if(s===ei)t.previous=i;else for(let a in i)s[a]=i[a];t.current=null,this.ngOnChanges(i)}}function Qr(t,i,s,a){const c=this.declaredInputs[s],h=lo(t)||function Xs(t,i){return t[Bs]=i}(t,{previous:ei,current:null}),p=h.current||(h.current={}),b=h.previous,T=b[c];p[c]=new Ys(T&&T.currentValue,i,b===ei),t[a]=i}ao.ngInherit=!0;const Bs="__ngSimpleChanges__";function lo(t){return t[Bs]||null}const kr=function(t,i,s){};function Pi(t){for(;Array.isArray(t);)t=t[br];return t}function xs(t,i){return Pi(i[t])}function li(t,i){return Pi(i[t.index])}function Zi(t,i){return t.data[i]}function X(t,i){return t[i]}function I(t,i){const s=i[t];return ar(s)?s:s[br]}function N(t){return 64==(64&t[Sn])}function ye(t,i){return null==i?null:t[i]}function Qe(t){t[zr]=0}function _t(t,i){t[nr]+=i;let s=t,a=t[ui];for(;null!==a&&(1===i&&1===s[nr]||-1===i&&0===s[nr]);)a[nr]+=i,s=a,a=a[ui]}const ct={lFrame:Zs(null),bindingsEnabled:!0};function ir(){return ct.bindingsEnabled}function xt(){return ct.lFrame.lView}function zn(){return ct.lFrame.tView}function Di(t){return ct.lFrame.contextLView=t,t[mi]}function $o(t){return ct.lFrame.contextLView=null,t}function cr(){let t=Ao();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ao(){return ct.lFrame.currentTNode}function ur(t,i){const s=ct.lFrame;s.currentTNode=t,s.isParent=i}function Wo(){return ct.lFrame.isParent}function Us(){ct.lFrame.isParent=!1}function Pr(){return ct.lFrame.bindingIndex++}function cs(t,i){const s=ct.lFrame;s.bindingIndex=s.bindingRootIndex=t,Or(i)}function Or(t){ct.lFrame.currentDirectiveIndex=t}function Io(t){const i=ct.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}function Hs(){return ct.lFrame.currentQueryIndex}function Ks(t){ct.lFrame.currentQueryIndex=t}function Cr(t){const i=t[Qt];return 2===i.type?i.declTNode:1===i.type?t[pi]:null}function hr(t,i,s){if(s&Wt.SkipSelf){let c=i,h=t;for(;!(c=c.parent,null!==c||s&Wt.Host||(c=Cr(h),null===c||(h=h[pr],10&c.type))););if(null===c)return!1;i=c,t=h}const a=ct.lFrame=aa();return a.currentTNode=i,a.lView=t,!0}function Yo(t){const i=aa(),s=t[Qt];ct.lFrame=i,i.currentTNode=s.firstChild,i.lView=t,i.tView=s,i.contextLView=t,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function aa(){const t=ct.lFrame,i=null===t?null:t.child;return null===i?Zs(t):i}function Zs(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function ho(){const t=ct.lFrame;return ct.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const U=ho;function g(){const t=ho();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function H(){return ct.lFrame.selectedIndex}function J(t){ct.lFrame.selectedIndex=t}function _e(){const t=ct.lFrame;return Zi(t.tView,t.selectedIndex)}function On(t,i){for(let s=i.directiveStart,a=i.directiveEnd;s<a;s++){const h=t.data[s].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:b,ngAfterViewInit:T,ngAfterViewChecked:k,ngOnDestroy:z}=h;p&&(t.contentHooks||(t.contentHooks=[])).push(-s,p),b&&((t.contentHooks||(t.contentHooks=[])).push(s,b),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(s,b)),T&&(t.viewHooks||(t.viewHooks=[])).push(-s,T),k&&((t.viewHooks||(t.viewHooks=[])).push(s,k),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(s,k)),null!=z&&(t.destroyHooks||(t.destroyHooks=[])).push(s,z)}}function wn(t,i,s){hi(t,i,3,s)}function Tn(t,i,s,a){(3&t[Sn])===s&&hi(t,i,s,a)}function Qn(t,i){let s=t[Sn];(3&s)===i&&(s&=2047,s+=1,t[Sn]=s)}function hi(t,i,s,a){const h=a??-1,p=i.length-1;let b=0;for(let T=void 0!==a?65535&t[zr]:0;T<p;T++)if("number"==typeof i[T+1]){if(b=i[T],null!=a&&b>=a)break}else i[T]<0&&(t[zr]+=65536),(b<h||-1==h)&&(C(t,s,i,T),t[zr]=(4294901760&t[zr])+T+2),T++}function C(t,i,s,a){const c=s[a]<0,h=s[a+1],b=t[c?-s[a]:s[a]];if(c){if(t[Sn]>>11<t[zr]>>16&&(3&t[Sn])===i){t[Sn]+=2048,kr(4,b,h);try{h.call(b)}finally{kr(5,b,h)}}}else{kr(4,b,h);try{h.call(b)}finally{kr(5,b,h)}}}const L=-1;class S{constructor(i,s,a){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function kt(t,i,s){let a=0;for(;a<s.length;){const c=s[a];if("number"==typeof c){if(0!==c)break;a++;const h=s[a++],p=s[a++],b=s[a++];t.setAttribute(i,p,b,h)}else{const h=c,p=s[++a];di(h)?t.setProperty(i,h,p):t.setAttribute(i,h,p),a++}}return a}function yi(t){return 3===t||4===t||6===t}function di(t){return 64===t.charCodeAt(0)}function At(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let s=-1;for(let a=0;a<i.length;a++){const c=i[a];"number"==typeof c?s=c:0===s||sn(t,s,c,null,-1===s||2===s?i[++a]:null)}}return t}function sn(t,i,s,a,c){let h=0,p=t.length;if(-1===i)p=-1;else for(;h<t.length;){const b=t[h++];if("number"==typeof b){if(b===i){p=-1;break}if(b>i){p=h-1;break}}}for(;h<t.length;){const b=t[h];if("number"==typeof b)break;if(b===s){if(null===a)return void(null!==c&&(t[h+1]=c));if(a===t[h+1])return void(t[h+2]=c)}h++,null!==a&&h++,null!==c&&h++}-1!==p&&(t.splice(p,0,i),h=p+1),t.splice(h++,0,s),null!==a&&t.splice(h++,0,a),null!==c&&t.splice(h++,0,c)}function hn(t){return t!==L}function Ln(t){return 32767&t}function zi(t,i){let s=function gi(t){return t>>16}(t),a=i;for(;s>0;)a=a[pr],s--;return a}let Bi=!0;function Ui(t){const i=Bi;return Bi=t,i}const fo=255,Ra=5;let _r=0;const oi={};function Ur(t,i){const s=Pa(t,i);if(-1!==s)return s;const a=i[Qt];a.firstCreatePass&&(t.injectorIndex=i.length,Gn(a.data,t),Gn(i,null),Gn(a.blueprint,null));const c=Ro(t,i),h=t.injectorIndex;if(hn(c)){const p=Ln(c),b=zi(c,i),T=b[Qt].data;for(let k=0;k<8;k++)i[h+k]=b[p+k]|T[p+k]}return i[h+8]=c,h}function Gn(t,i){t.push(0,0,0,0,0,0,0,0,i)}function Pa(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function Ro(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,c=i;for(;null!==c;){if(a=us(c),null===a)return L;if(s++,c=c[pr],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return L}function po(t,i,s){!function Rn(t,i,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(tn)&&(a=s[tn]),null==a&&(a=s[tn]=_r++);const c=a&fo;i.data[t+(c>>Ra)]|=1<<c}(t,i,s)}function Oi(t,i,s){if(s&Wt.Optional||void 0!==t)return t;He()}function go(t,i,s,a){if(s&Wt.Optional&&void 0===a&&(a=null),!(s&(Wt.Self|Wt.Host))){const c=t[Ar],h=ai(void 0);try{return c?c.get(i,a,s&Wt.Optional):Wi(i,a,s&Wt.Optional)}finally{ai(h)}}return Oi(a,0,s)}function Qi(t,i,s,a=Wt.Default,c){if(null!==t){if(1024&i[Sn]){const p=function iu(t,i,s,a,c){let h=t,p=i;for(;null!==h&&null!==p&&1024&p[Sn]&&!(256&p[Sn]);){const b=mo(h,p,s,a|Wt.Self,oi);if(b!==oi)return b;let T=h.parent;if(!T){const k=p[Co];if(k){const z=k.get(s,oi,a);if(z!==oi)return z}T=us(p),p=p[pr]}h=T}return c}(t,i,s,a,oi);if(p!==oi)return p}const h=mo(t,i,s,a,oi);if(h!==oi)return h}return go(i,s,a,c)}function mo(t,i,s,a,c){const h=function la(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(tn)?t[tn]:void 0;return"number"==typeof i?i>=0?i&fo:Oa:i}(s);if("function"==typeof h){if(!hr(i,t,a))return a&Wt.Host?Oi(c,0,a):go(i,s,a,c);try{const p=h(a);if(null!=p||a&Wt.Optional)return p;He()}finally{U()}}else if("number"==typeof h){let p=null,b=Pa(t,i),T=L,k=a&Wt.Host?i[Si][pi]:null;for((-1===b||a&Wt.SkipSelf)&&(T=-1===b?Ro(t,i):i[b+8],T!==L&&$i(a,!1)?(p=i[Qt],b=Ln(T),i=zi(T,i)):b=-1);-1!==b;){const z=i[Qt];if(nu(h,b,z.data)){const de=Gs(b,i,s,p,a,k);if(de!==oi)return de}T=i[b+8],T!==L&&$i(a,i[Qt].data[b+8]===k)&&nu(h,b,i)?(p=z,b=Ln(T),i=zi(T,i)):b=-1}}return c}function Gs(t,i,s,a,c,h){const p=i[Qt],b=p.data[t+8],z=Xo(b,p,s,null==a?rs(b)&&Bi:a!=p&&0!=(3&b.type),c&Wt.Host&&h===b);return null!==z?_o(i,p,z,b):oi}function Xo(t,i,s,a,c){const h=t.providerIndexes,p=i.data,b=1048575&h,T=t.directiveStart,z=h>>20,Ge=c?b+z:t.directiveEnd;for(let et=a?b:b+z;et<Ge;et++){const vt=p[et];if(et<T&&s===vt||et>=T&&vt.type===s)return et}if(c){const et=p[T];if(et&&lr(et)&&et.type===s)return T}return null}function _o(t,i,s,a){let c=t[s];const h=i.data;if(function j(t){return t instanceof S}(c)){const p=c;p.resolving&&function Xe(t,i){const s=i?`. Dependency path: ${i.join(" > ")} > ${t}`:"";throw new Ke(-200,`Circular dependency in DI detected for ${t}${s}`)}(function Ct(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():st(t)}(h[s]));const b=Ui(p.canSeeViewProviders);p.resolving=!0;const T=p.injectImpl?ai(p.injectImpl):null;hr(t,a,Wt.Default);try{c=t[s]=p.factory(void 0,h,t,a),i.firstCreatePass&&s>=a.directiveStart&&function Xn(t,i,s){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:h}=i.type.prototype;if(a){const p=ji(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(t,p),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,p)}c&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-t,c),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(t,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,h))}(s,h[s],i)}finally{null!==T&&ai(T),Ui(b),p.resolving=!1,U()}}return c}function nu(t,i,s){return!!(s[i+(t>>Ra)]&1<<t)}function $i(t,i){return!(t&Wt.Self||t&Wt.Host&&i)}class Jr{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,a){return Qi(this._tNode,this._lView,i,re(a),s)}}function Oa(){return new Jr(cr(),xt())}function Ko(t){return Cn(()=>{const i=t.prototype.constructor,s=i[Lt]||Hr(i),a=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==a;){const h=c[Lt]||Hr(c);if(h&&h!==s)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function Hr(t){return it(t)?()=>{const i=Hr(Ae(t));return i&&i()}:Rr(t)}function us(t){const i=t[Qt],s=i.type;return 2===s?i.declTNode:1===s?t[pi]:null}function Yl(t){return function ol(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const s=t.attrs;if(s){const a=s.length;let c=0;for(;c<a;){const h=s[c];if(yi(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<a&&"string"==typeof s[c];)c++;else{if(h===i)return s[c+1];c+=2}}}return null}(cr(),t)}const es="__parameters__";function yo(t,i,s){return Cn(()=>{const a=function Xl(t){return function(...s){if(t){const a=t(...s);for(const c in a)this[c]=a[c]}}}(i);function c(...h){if(this instanceof c)return a.apply(this,h),this;const p=new c(...h);return b.annotation=p,b;function b(T,k,z){const de=T.hasOwnProperty(es)?T[es]:Object.defineProperty(T,es,{value:[]})[es];for(;de.length<=z;)de.push(null);return(de[z]=de[z]||[]).push(p),T}}return s&&(c.prototype=Object.create(s.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}class vi{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Ue({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Vs(t,i){t.forEach(s=>Array.isArray(s)?Vs(s,i):i(s))}function Ql(t,i,s){i>=t.length?t.push(s):t.splice(i,0,s)}function Na(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function Gr(t,i){const s=[];for(let a=0;a<t;a++)s.push(i);return s}function _(t,i,s){let a=x(t,i);return a>=0?t[1|a]=s:(a=~a,function Th(t,i,s,a){let c=t.length;if(c==i)t.push(s,a);else if(1===c)t.push(a,t[0]),t[0]=s;else{for(c--,t.push(t[c-1],t[c]);c>i;)t[c]=t[c-2],c--;t[i]=s,t[i+1]=a}}(t,a,i,s)),a}function f(t,i){const s=x(t,i);if(s>=0)return t[1|s]}function x(t,i){return function V(t,i,s){let a=0,c=t.length>>s;for(;c!==a;){const h=a+(c-a>>1),p=t[h<<s];if(i===p)return h<<s;p>i?c=h:a=h+1}return~(c<<s)}(t,i,1)}const qt=Et(yo("Inject",t=>({token:t})),-1),yr=Et(yo("Optional"),8),ka=Et(yo("SkipSelf"),4);var vo=(()=>((vo=vo||{})[vo.Important=1]="Important",vo[vo.DashCase=2]="DashCase",vo))();const da=new Map;let kf=0;const fu="__ngContext__";function Xr(t,i){ar(i)?(t[fu]=i[$r],function sc(t){da.set(t[$r],t)}(i)):t[fu]=i}let Fo;function fl(t,i){return Fo(t,i)}function er(t){const i=t[ui];return Ki(i)?i[ui]:i}function mu(t){return zh(t[Mr])}function _u(t){return zh(t[Ti])}function zh(t){for(;null!==t&&!Ki(t);)t=t[Ti];return t}function Ga(t,i,s,a,c){if(null!=a){let h,p=!1;Ki(a)?h=a:ar(a)&&(p=!0,a=a[br]);const b=Pi(a);0===t&&null!==s?null==c?$f(i,s,b):za(i,s,b,c||null,!0):1===t&&null!==s?za(i,s,b,c||null,!0):2===t?function wu(t,i,s){const a=pc(t,i);a&&function tr(t,i,s,a){t.removeChild(i,s,a)}(t,a,i,s)}(i,b,p):3===t&&i.destroyNode(b),null!=h&&function Cu(t,i,s,a,c){const h=s[Zr];h!==Pi(s)&&Ga(i,t,a,h,c);for(let b=Ai;b<s.length;b++){const T=s[b];_l(T[Qt],T,t,i,a,h)}}(i,t,h,s,c)}}function cc(t,i,s){return t.createElement(i,s)}function ja(t,i){const s=t[Ri],a=s.indexOf(i),c=i[ui];512&i[Sn]&&(i[Sn]&=-513,_t(c,-1)),s.splice(a,1)}function uc(t,i){if(t.length<=Ai)return;const s=Ai+i,a=t[s];if(a){const c=a[wr];null!==c&&c!==t&&ja(c,a),i>0&&(t[s-1][Ti]=a[Ti]);const h=Na(t,Ai+i);!function $h(t,i){_l(t,i,i[yn],2,null,null),i[br]=null,i[pi]=null}(a[Qt],a);const p=h[Yi];null!==p&&p.detachView(h[Qt]),a[ui]=null,a[Ti]=null,a[Sn]&=-65}return a}function Nn(t,i){if(!(128&i[Sn])){const s=i[yn];s.destroyNode&&_l(t,i,s,3,null,null),function Wh(t){let i=t[Mr];if(!i)return qo(t[Qt],t);for(;i;){let s=null;if(ar(i))s=i[Mr];else{const a=i[Ai];a&&(s=a)}if(!s){for(;i&&!i[Ti]&&i!==t;)ar(i)&&qo(i[Qt],i),i=i[ui];null===i&&(i=t),ar(i)&&qo(i[Qt],i),s=i&&i[Ti]}i=s}}(i)}}function qo(t,i){if(!(128&i[Sn])){i[Sn]&=-65,i[Sn]|=128,function pl(t,i){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const c=i[s[a]];if(!(c instanceof S)){const h=s[a+1];if(Array.isArray(h))for(let p=0;p<h.length;p+=2){const b=c[h[p]],T=h[p+1];kr(4,b,T);try{T.call(b)}finally{kr(5,b,T)}}else{kr(4,c,h);try{h.call(c)}finally{kr(5,c,h)}}}}}(t,i),function hc(t,i){const s=t.cleanup,a=i[Sr];let c=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const p=s[h+3];p>=0?a[c=p]():a[c=-p].unsubscribe(),h+=2}else{const p=a[c=s[h+1]];s[h].call(p)}if(null!==a){for(let h=c+1;h<a.length;h++)(0,a[h])();i[Sr]=null}}(t,i),1===i[Qt].type&&i[yn].destroy();const s=i[wr];if(null!==s&&Ki(i[ui])){s!==i[ui]&&ja(s,i);const a=i[Yi];null!==a&&a.detachView(t)}!function Bh(t){da.delete(t[$r])}(i)}}function dc(t,i,s){return function fc(t,i,s){let a=i;for(;null!==a&&40&a.type;)a=(i=a).parent;if(null===a)return s[br];{const{componentOffset:c}=a;if(c>-1){const{encapsulation:h}=t.data[a.directiveStart+c];if(h===Zn.None||h===Zn.Emulated)return null}return li(a,s)}}(t,i.parent,s)}function za(t,i,s,a,c){t.insertBefore(i,s,a,c)}function $f(t,i,s){t.appendChild(i,s)}function gl(t,i,s,a,c){null!==a?za(t,i,s,a,c):$f(t,i,s)}function pc(t,i){return t.parentNode(i)}function gc(t,i,s){return $a(t,i,s)}let Eu,yc,vc,gs,$a=function Ms(t,i,s){return 40&t.type?li(t,s):null};function ml(t,i,s,a){const c=dc(t,a,i),h=i[yn],b=gc(a.parent||i[pi],a,i);if(null!=c)if(Array.isArray(s))for(let T=0;T<s.length;T++)gl(h,c,s[T],b,!1);else gl(h,c,s,b,!1);void 0!==Eu&&Eu(h,a,i,s,c)}function mc(t,i){if(null!==i){const s=i.type;if(3&s)return li(i,t);if(4&s)return bu(-1,t[i.index]);if(8&s){const a=i.child;if(null!==a)return mc(t,a);{const c=t[i.index];return Ki(c)?bu(-1,c):Pi(c)}}if(32&s)return fl(i,t)()||Pi(t[i.index]);{const a=Yh(t,i);return null!==a?Array.isArray(a)?a[0]:mc(er(t[Si]),a):mc(t,i.next)}}return null}function Yh(t,i){return null!==i?t[Si][pi].projection[i.projection]:null}function bu(t,i){const s=Ai+t+1;if(s<i.length){const a=i[s],c=a[Qt].firstChild;if(null!==c)return mc(a,c)}return i[Zr]}function Du(t,i,s,a,c,h,p){for(;null!=s;){const b=a[s.index],T=s.type;if(p&&0===i&&(b&&Xr(Pi(b),a),s.flags|=2),32!=(32&s.flags))if(8&T)Du(t,i,s.child,a,c,h,!1),Ga(i,t,c,b,h);else if(32&T){const k=fl(s,a);let z;for(;z=k();)Ga(i,t,c,z,h);Ga(i,t,c,b,h)}else 16&T?Xh(t,i,a,s,c,h):Ga(i,t,c,b,h);s=p?s.projectionNext:s.next}}function _l(t,i,s,a,c,h){Du(s,a,t.firstChild,i,c,h,!1)}function Xh(t,i,s,a,c,h){const p=s[Si],T=p[pi].projection[a.projection];if(Array.isArray(T))for(let k=0;k<T.length;k++)Ga(i,t,c,T[k],h);else Du(t,i,T,p[ui],c,h,!0)}function _c(t,i,s){""===s?t.removeAttribute(i,"class"):t.setAttribute(i,"class",s)}function Kh(t,i,s){const{mergedAttrs:a,classes:c,styles:h}=s;null!==a&&kt(t,i,a),null!==c&&_c(t,i,c),null!==h&&function Kf(t,i,s){t.setAttribute(i,"style",s)}(t,i,h)}function Wa(t){return function xu(){if(void 0===yc&&(yc=null,Dn.trustedTypes))try{yc=Dn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return yc}()?.createHTML(t)||t}function yl(t){vc=t}function Ec(t){return function El(){if(void 0===gs&&(gs=null,Dn.trustedTypes))try{gs=Dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gs}()?.createScriptURL(t)||t}class fa{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Tt})`}}class Jf extends fa{getTypeName(){return"HTML"}}class ep extends fa{getTypeName(){return"Style"}}class Qh extends fa{getTypeName(){return"Script"}}class tp extends fa{getTypeName(){return"URL"}}class np extends fa{getTypeName(){return"ResourceURL"}}function No(t){return t instanceof fa?t.changingThisBreaksApplicationSecurity:t}function ko(t,i){const s=function ip(t){return t instanceof fa&&t.getTypeName()||null}(t);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see ${Tt})`)}return s===i}function rp(t){return new Jf(t)}function Jh(t){return new ep(t)}function ed(t){return new Qh(t)}function sp(t){return new tp(t)}function op(t){return new np(t)}class nd{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(Wa(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch{return null}}}class Tu{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const s=this.inertDocument.createElement("template");return s.innerHTML=Wa(i),s}}const id=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function bl(t){return(t=String(t)).match(id)?t:"unsafe:"+t}function Bo(t){const i={};for(const s of t.split(","))i[s]=!0;return i}function Qo(...t){const i={};for(const s of t)for(const a in s)s.hasOwnProperty(a)&&(i[a]=!0);return i}const Eo=Bo("area,br,col,hr,img,wbr"),rd=Bo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ya=Bo("rp,rt"),Mu=Qo(Eo,Qo(rd,Bo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qo(Ya,Bo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qo(Ya,rd)),Iu=Bo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sd=Qo(Iu,Bo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),lp=Bo("script,style,template");class cp{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let s=i.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let c=this.checkClobberedElement(s,s.nextSibling);if(c){s=c;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(i){const s=i.nodeName.toLowerCase();if(!Mu.hasOwnProperty(s))return this.sanitizedSomething=!0,!lp.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=i.attributes;for(let c=0;c<a.length;c++){const h=a.item(c),p=h.name,b=p.toLowerCase();if(!sd.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let T=h.value;Iu[b]&&(T=bl(T)),this.buf.push(" ",p,'="',bc(T),'"')}return this.buf.push(">"),!0}endElement(i){const s=i.nodeName.toLowerCase();Mu.hasOwnProperty(s)&&!Eo.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(i){this.buf.push(bc(i))}checkClobberedElement(i,s){if(s&&(i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return s}}const up=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,od=/([^\#-~ |!])/g;function bc(t){return t.replace(/&/g,"&amp;").replace(up,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(od,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ru;function ad(t,i){let s=null;try{Ru=Ru||function td(t){const i=new Tu(t);return function Su(){try{return!!(new window.DOMParser).parseFromString(Wa(""),"text/html")}catch{return!1}}()?new nd(i):i}(t);let a=i?String(i):"";s=Ru.getInertBodyElement(a);let c=5,h=a;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,a=h,h=s.innerHTML,s=Ru.getInertBodyElement(a)}while(a!==h);return Wa((new cp).sanitizeChildren(Pu(s)||s))}finally{if(s){const a=Pu(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function Pu(t){return"content"in t&&function Ou(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var dr=(()=>((dr=dr||{})[dr.NONE=0]="NONE",dr[dr.HTML=1]="HTML",dr[dr.STYLE=2]="STYLE",dr[dr.SCRIPT=3]="SCRIPT",dr[dr.URL=4]="URL",dr[dr.RESOURCE_URL=5]="RESOURCE_URL",dr))();function cd(t){const i=Dl();return i?i.sanitize(dr.URL,t)||"":ko(t,"URL")?No(t):bl(st(t))}function ud(t){const i=Dl();if(i)return Ec(i.sanitize(dr.RESOURCE_URL,t)||"");if(ko(t,"ResourceURL"))return Ec(No(t));throw new Ke(904,!1)}function Lu(t,i,s){return function dp(t,i){return"src"===i&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===i&&("base"===t||"link"===t)?ud:cd}(i,s)(t)}function Dl(){const t=xt();return t&&t[Lr]}const pa=new vi("ENVIRONMENT_INITIALIZER"),hd=new vi("INJECTOR",-1),dd=new vi("INJECTOR_DEF_TYPES");class fd{get(i,s=Li){if(s===Li){const a=new Error(`NullInjectorError: No provider for ${ce(i)}!`);throw a.name="NullInjectorError",a}return s}}function pd(t){return{\u0275providers:t}}function fp(...t){return{\u0275providers:gd(0,t),\u0275fromNgModule:!0}}function gd(t,...i){const s=[],a=new Set;let c;return Vs(i,h=>{const p=h;ts(p,s,[],a)&&(c||(c=[]),c.push(p))}),void 0!==c&&Dc(c,s),s}function Dc(t,i){for(let s=0;s<t.length;s++){const{providers:c}=t[s];eo(c,h=>{i.push(h)})}}function ts(t,i,s,a){if(!(t=Ae(t)))return!1;let c=null,h=St(t);const p=!h&&$n(t);if(h||p){if(p&&!p.standalone)return!1;c=t}else{const T=t.ngModule;if(h=St(T),!h)return!1;c=T}const b=a.has(c);if(p){if(b)return!1;if(a.add(c),p.dependencies){const T="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const k of T)ts(k,i,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!b){let k;a.add(c);try{Vs(h.imports,z=>{ts(z,i,s,a)&&(k||(k=[]),k.push(z))})}finally{}void 0!==k&&Dc(k,i)}if(!b){const k=Rr(c)||(()=>new c);i.push({provide:c,useFactory:k,deps:Oe},{provide:dd,useValue:c,multi:!0},{provide:pa,useValue:()=>Re(c),multi:!0})}const T=h.providers;null==T||b||eo(T,z=>{i.push(z)})}}return c!==t&&void 0!==t.providers}function eo(t,i){for(let s of t)$e(s)&&(s=s.\u0275providers),Array.isArray(s)?eo(s,i):i(s)}const Xa=ee({provide:String,useValue:ee});function Cc(t){return null!==t&&"object"==typeof t&&Xa in t}function Is(t){return"function"==typeof t}const Ka=new vi("Set Injector scope."),xc={},yd={};let Bu;function ga(){return void 0===Bu&&(Bu=new fd),Bu}class ma{}class Cl extends ma{get destroyed(){return this._destroyed}constructor(i,s,a,c){super(),this.parent=s,this.source=a,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hu(i,p=>this.processProvider(p)),this.records.set(hd,Za(void 0,this)),c.has("environment")&&this.records.set(ma,Za(void 0,this));const h=this.records.get(Ka);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(dd.multi,Oe,Wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const s=Ii(this),a=ai(void 0);try{return i()}finally{Ii(s),ai(a)}}get(i,s=Li,a=Wt.Default){this.assertNotDestroyed(),a=re(a);const c=Ii(this),h=ai(void 0);try{if(!(a&Wt.SkipSelf)){let b=this.records.get(i);if(void 0===b){const T=function yp(t){return"function"==typeof t||"object"==typeof t&&t instanceof vi}(i)&&zt(i);b=T&&this.injectableDefInScope(T)?Za(Uu(i),xc):null,this.records.set(i,b)}if(null!=b)return this.hydrate(i,b)}return(a&Wt.Self?ga():this.parent).get(i,s=a&Wt.Optional&&s===Li?null:s)}catch(p){if("NullInjectorError"===p.name){if((p[gn]=p[gn]||[]).unshift(ce(i)),c)throw p;return function _n(t,i,s,a){const c=t[gn];throw i[Fr]&&c.unshift(i[Fr]),t.message=function Hn(t,i,s,a=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Jn?t.slice(2):t;let c=ce(i);if(Array.isArray(i))c=i.map(ce).join(" -> ");else if("object"==typeof i){let h=[];for(let p in i)if(i.hasOwnProperty(p)){let b=i[p];h.push(p+":"+("string"==typeof b?JSON.stringify(b):ce(b)))}c=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${c}]: ${t.replace(is,"\n  ")}`}("\n"+t.message,c,s,a),t[Ci]=c,t[gn]=null,t}(p,i,"R3InjectorError",this.source)}throw p}finally{ai(h),Ii(c)}}resolveInjectorInitializers(){const i=Ii(this),s=ai(void 0);try{const a=this.get(pa.multi,Oe,Wt.Self);for(const c of a)c()}finally{Ii(i),ai(s)}}toString(){const i=[],s=this.records;for(const a of s.keys())i.push(ce(a));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ke(205,!1)}processProvider(i){let s=Is(i=Ae(i))?i:Ae(i&&i.provide);const a=function gp(t){return Cc(t)?Za(void 0,t.useValue):Za(vd(t),xc)}(i);if(Is(i)||!0!==i.multi)this.records.get(s);else{let c=this.records.get(s);c||(c=Za(void 0,xc,!0),c.factory=()=>Me(c.multi),this.records.set(s,c)),s=i,c.multi.push(i)}this.records.set(s,a)}hydrate(i,s){return s.value===xc&&(s.value=yd,s.value=s.factory()),"object"==typeof s.value&&s.value&&function _p(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=Ae(i.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Uu(t){const i=zt(t),s=null!==i?i.factory:Rr(t);if(null!==s)return s;if(t instanceof vi)throw new Ke(204,!1);if(t instanceof Function)return function pp(t){const i=t.length;if(i>0)throw Gr(i,"?"),new Ke(204,!1);const s=function vn(t){const i=t&&(t[Un]||t[ii]);return i?(function $t(t){if(t.hasOwnProperty("name"))return t.name;(""+t).match(/^function\s*([^\s(]+)/)}(t),i):null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new Ke(204,!1)}function vd(t,i,s){let a;if(Is(t)){const c=Ae(t);return Rr(c)||Uu(c)}if(Cc(t))a=()=>Ae(t.useValue);else if(function _d(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Me(t.deps||[]));else if(function md(t){return!(!t||!t.useExisting)}(t))a=()=>Re(Ae(t.useExisting));else{const c=Ae(t&&(t.useClass||t.provide));if(!function mp(t){return!!t.deps}(t))return Rr(c)||Uu(c);a=()=>new c(...Me(t.deps))}return a}function Za(t,i,s=!1){return{factory:t,value:i,multi:s?[]:void 0}}function Hu(t,i){for(const s of t)Array.isArray(s)?Hu(s,i):s&&$e(s)?Hu(s.\u0275providers,i):i(s)}class vp{}class Ed{}class bp{resolveComponentFactory(i){throw function Ep(t){const i=Error(`No component factory found for ${ce(t)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=t,i}(i)}}let xl=(()=>{class t{}return t.NULL=new bp,t})();function wd(){return qa(cr(),xt())}function qa(t,i){return new ns(li(t,i))}let ns=(()=>{class t{constructor(s){this.nativeElement=s}}return t.__NG_ELEMENT_ID__=wd,t})();function Gu(t){return t instanceof ns?t.nativeElement:t}class Vu{}let wp=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function Dp(){const t=xt(),s=I(cr().index,t);return(ar(s)?s:t)[yn]}(),t})(),Cp=(()=>{class t{}return t.\u0275prov=Ue({token:t,providedIn:"root",factory:()=>null}),t})();class Dd{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const xp=new Dd("15.2.2"),ju={},zu="ngOriginalError";function $u(t){return t[zu]}class Tl{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i);this._console.error("ERROR",i),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&$u(i);for(;s&&$u(s);)s=$u(s);return s||null}}function Tc(t){return t.ownerDocument}function xr(t){return t instanceof Function?t():t}function Jo(t,i,s){let a=t.length;for(;;){const c=t.indexOf(i,s);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const h=i.length;if(c+h===a||t.charCodeAt(c+h)<=32)return c}s=c+1}}const Ad="ng-template";function Mp(t,i,s){let a=0;for(;a<t.length;){let c=t[a++];if(s&&"class"===c){if(c=t[a],-1!==Jo(c.toLowerCase(),i,0))return!0}else if(1===c){for(;a<t.length&&"string"==typeof(c=t[a++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function Sc(t){return 4===t.type&&t.value!==Ad}function Ac(t,i,s){return i===(4!==t.type||s?t.value:Ad)}function Mc(t,i,s){let a=4;const c=t.attrs||[],h=function Ja(t){for(let i=0;i<t.length;i++)if(yi(t[i]))return i;return t.length}(c);let p=!1;for(let b=0;b<i.length;b++){const T=i[b];if("number"!=typeof T){if(!p)if(4&a){if(a=2|1&a,""!==T&&!Ac(t,T,s)||""===T&&1===i.length){if(Rs(a))return!1;p=!0}}else{const k=8&a?T:i[++b];if(8&a&&null!==t.attrs){if(!Mp(t.attrs,k,s)){if(Rs(a))return!1;p=!0}continue}const de=Ml(8&a?"class":T,c,Sc(t),s);if(-1===de){if(Rs(a))return!1;p=!0;continue}if(""!==k){let Ge;Ge=de>h?"":c[de+1].toLowerCase();const et=8&a?Ge:null;if(et&&-1!==Jo(et,k,0)||2&a&&k!==Ge){if(Rs(a))return!1;p=!0}}}}else{if(!p&&!Rs(a)&&!Rs(T))return!1;if(p&&Rs(T))continue;p=!1,a=T|1&a}}return Rs(a)||p}function Rs(t){return 0==(1&t)}function Ml(t,i,s,a){if(null===i)return-1;let c=0;if(a||!s){let h=!1;for(;c<i.length;){const p=i[c];if(p===t)return c;if(3===p||6===p)h=!0;else{if(1===p||2===p){let b=i[++c];for(;"string"==typeof b;)b=i[++c];continue}if(4===p)break;if(0===p){c+=4;continue}}c+=h?1:2}return-1}return function Id(t,i){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===i)return s;s++}return-1}(i,t)}function Il(t,i,s=!1){for(let a=0;a<i.length;a++)if(Mc(t,i[a],s))return!0;return!1}function Rd(t,i){e:for(let s=0;s<i.length;s++){const a=i[s];if(t.length===a.length){for(let c=0;c<t.length;c++)if(t[c]!==a[c])continue e;return!0}}return!1}function Rl(t,i){return t?":not("+i.trim()+")":i}function Yu(t){let i=t[0],s=1,a=2,c="",h=!1;for(;s<t.length;){let p=t[s];if("string"==typeof p)if(2&a){const b=t[++s];c+="["+p+(b.length>0?'="'+b+'"':"")+"]"}else 8&a?c+="."+p:4&a&&(c+=" "+p);else""!==c&&!Rs(p)&&(i+=Rl(h,c),c=""),a=p,h=h||!Rs(a);s++}return""!==c&&(i+=Rl(h,c)),i}const kn={};function Pl(t){Rp(zn(),xt(),H()+t,!1)}function Rp(t,i,s,a){if(!a)if(3==(3&i[Sn])){const h=t.preOrderCheckHooks;null!==h&&wn(i,h,s)}else{const h=t.preOrderHooks;null!==h&&Tn(i,h,0,s)}J(s)}function Lp(t,i=null,s=null,a){const c=Np(t,i,s,a);return c.resolveInjectorInitializers(),c}function Np(t,i=null,s=null,a,c=new Set){const h=[s||Oe,fp(t)];return a=a||("object"==typeof t?void 0:ce(t)),new Cl(h,i||ga(),a||null,c)}let el=(()=>{class t{static create(s,a){if(Array.isArray(s))return Lp({name:""},a,s,"");{const c=s.name??"";return Lp({name:c},s.parent,s.providers,c)}}}return t.THROW_IF_NOT_FOUND=Li,t.NULL=new fd,t.\u0275prov=Ue({token:t,providedIn:"any",factory:()=>Re(hd)}),t.__NG_ELEMENT_ID__=-1,t})();function Ea(t,i=Wt.Default){const s=xt();return null===s?Re(t,i):Qi(cr(),s,Ae(t),i)}function Ol(){throw new Error("invalid")}function Gd(t,i){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const h=s[a+1];if(-1!==h){const p=t.data[h];Ks(s[a]),p.contentQueries(2,i[h],h)}}}function ba(t,i,s,a,c,h,p,b,T,k,z){const de=i.blueprint.slice();return de[br]=c,de[Sn]=76|a,(null!==z||t&&1024&t[Sn])&&(de[Sn]|=1024),Qe(de),de[ui]=de[pr]=t,de[mi]=s,de[wi]=p||t&&t[wi],de[yn]=b||t&&t[yn],de[Lr]=T||t&&t[Lr]||null,de[Ar]=k||t&&t[Ar]||null,de[pi]=h,de[$r]=function Bf(){return kf++}(),de[Co]=z,de[Si]=2==i.type?t[Si]:de,de}function bo(t,i,s,a,c){let h=t.data[i];if(null===h)h=function Fl(t,i,s,a,c){const h=Ao(),p=Wo(),T=t.data[i]=function Lc(t,i,s,a,c,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?h:h&&h.parent,s,i,a,c);return null===t.firstChild&&(t.firstChild=T),null!==h&&(p?null==h.child&&null!==T.parent&&(h.child=T):null===h.next&&(h.next=T,T.prev=h)),T}(t,i,s,a,c),function Ia(){return ct.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=s,h.value=a,h.attrs=c;const p=function as(){const t=ct.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}();h.injectorIndex=null===p?-1:p.injectorIndex}return ur(h,!0),h}function Ll(t,i,s,a){if(0===s)return-1;const c=i.length;for(let h=0;h<s;h++)i.push(a),t.blueprint.push(a),t.data.push(null);return c}function oh(t,i,s){Yo(i);try{const a=t.viewQuery;null!==a&&qe(1,a,s);const c=t.template;null!==c&&ah(t,i,c,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Gd(t,i),t.staticViewQueries&&qe(2,t.viewQuery,s);const h=t.components;null!==h&&function Vd(t,i){for(let s=0;s<i.length;s++)B(t,i[s])}(i,h)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{i[Sn]&=-5,g()}}function Oc(t,i,s,a){const c=i[Sn];if(128!=(128&c)){Yo(i);try{Qe(i),function Ma(t){return ct.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&ah(t,i,s,2,a);const p=3==(3&c);if(p){const k=t.preOrderCheckHooks;null!==k&&wn(i,k,null)}else{const k=t.preOrderHooks;null!==k&&Tn(i,k,0,null),Qn(i,0)}if(function y(t){for(let i=mu(t);null!==i;i=_u(i)){if(!i[gr])continue;const s=i[Ri];for(let a=0;a<s.length;a++){const c=s[a];512&c[Sn]||_t(c[ui],1),c[Sn]|=512}}}(i),function d(t){for(let i=mu(t);null!==i;i=_u(i))for(let s=Ai;s<i.length;s++){const a=i[s],c=a[Qt];N(a)&&Oc(c,a,c.template,a[mi])}}(i),null!==t.contentQueries&&Gd(t,i),p){const k=t.contentCheckHooks;null!==k&&wn(i,k)}else{const k=t.contentHooks;null!==k&&Tn(i,k,1),Qn(i,1)}!function Hd(t,i){const s=t.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const c=s[a];if(c<0)J(~c);else{const h=c,p=s[++a],b=s[++a];cs(p,h),b(2,i[h])}}}finally{J(-1)}}(t,i);const b=t.components;null!==b&&function jp(t,i){for(let s=0;s<i.length;s++)M(t,i[s])}(i,b);const T=t.viewQuery;if(null!==T&&qe(2,T,a),p){const k=t.viewCheckHooks;null!==k&&wn(i,k)}else{const k=t.viewHooks;null!==k&&Tn(i,k,2),Qn(i,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i[Sn]&=-41,512&i[Sn]&&(i[Sn]&=-513,_t(i[ui],-1))}finally{g()}}}function ah(t,i,s,a,c){const h=H(),p=2&a;try{J(-1),p&&i.length>_i&&Rp(t,i,_i,!1),kr(p?2:0,c),s(a,c)}finally{J(h),kr(p?3:1,c)}}function lh(t,i,s){if(io(i)){const c=i.directiveEnd;for(let h=i.directiveStart;h<c;h++){const p=t.data[h];p.contentQueries&&p.contentQueries(1,s[h],h)}}}function tl(t,i,s){ir()&&(function Yp(t,i,s,a){const c=s.directiveStart,h=s.directiveEnd;rs(s)&&function n(t,i,s){const a=li(i,t),c=nl(s),h=t[wi],p=$(t,ba(t,c,null,s.onPush?32:16,a,i,h,h.createRenderer(a,s),null,null,null));t[i.index]=p}(i,s,t.data[c+s.componentOffset]),t.firstCreatePass||Ur(s,i),Xr(a,i);const p=s.initialInputs;for(let b=c;b<h;b++){const T=t.data[b],k=_o(i,t,b,s);Xr(k,i),null!==p&&o(0,b-c,k,T,0,p),lr(T)&&(I(s.index,i)[mi]=_o(i,t,b,s))}}(t,i,s,li(s,i)),64==(64&s.flags)&&Wd(t,i,s))}function Fc(t,i,s=li){const a=i.localNames;if(null!==a){let c=i.index+1;for(let h=0;h<a.length;h+=2){const p=a[h+1],b=-1===p?s(i,t):t[p];t[c++]=b}}}function nl(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=Nl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):i}function Nl(t,i,s,a,c,h,p,b,T,k){const z=_i+a,de=z+c,Ge=function zp(t,i){const s=[];for(let a=0;a<i;a++)s.push(a<t?null:kn);return s}(z,de),et="function"==typeof k?k():k;return Ge[Qt]={type:t,blueprint:Ge,template:s,queries:null,viewQuery:b,declTNode:i,data:Ge.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:de,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:T,consts:et,incompleteFirstPass:!1}}function zd(t,i,s,a){const c=Pt(i);null===s?c.push(a):(c.push(s),t.firstCreatePass&&rt(t).push(a,c.length-1))}function kl(t,i,s,a){for(let c in t)if(t.hasOwnProperty(c)){s=null===s?{}:s;const h=t[c];null===a?Nc(s,i,c,h):a.hasOwnProperty(c)&&Nc(s,i,a[c],h)}return s}function Nc(t,i,s,a){t.hasOwnProperty(s)?t[s].push(i,a):t[s]=[i,a]}function Ps(t,i,s,a,c,h,p,b){const T=li(i,s);let z,k=i.inputs;!b&&null!=k&&(z=k[a])?(En(t,s,z,a,c),rs(i)&&$d(s,i.index)):3&i.type&&(a=function uh(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),c=null!=p?p(c,i.value||"",a):c,h.setProperty(T,a,c))}function $d(t,i){const s=I(i,t);16&s[Sn]||(s[Sn]|=32)}function hh(t,i,s,a){if(ir()){const c=null===a?null:{"":-1},h=function Xd(t,i){const s=t.directiveRegistry;let a=null,c=null;if(s)for(let h=0;h<s.length;h++){const p=s[h];if(Il(i,p.selectors,!1))if(a||(a=[]),lr(p))if(null!==p.findHostDirectiveDefs){const b=[];c=c||new Map,p.findHostDirectiveDefs(p,b,c),a.unshift(...b,p),kc(t,i,b.length)}else a.unshift(p),kc(t,i,0);else c=c||new Map,p.findHostDirectiveDefs?.(p,a,c),a.push(p)}return null===a?null:[a,c]}(t,s);let p,b;null===h?p=b=null:[p,b]=h,null!==p&&Bl(t,i,s,p,c,b),c&&function Kd(t,i,s){if(i){const a=t.localNames=[];for(let c=0;c<i.length;c+=2){const h=s[i[c+1]];if(null==h)throw new Ke(-301,!1);a.push(i[c],h)}}}(s,a,c)}s.mergedAttrs=At(s.mergedAttrs,s.attrs)}function Bl(t,i,s,a,c,h){for(let k=0;k<a.length;k++)po(Ur(s,i),t,a[k].type);!function Kp(t,i,s){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+s,t.providerIndexes=i}(s,t.data.length,a.length);for(let k=0;k<a.length;k++){const z=a[k];z.providersResolver&&z.providersResolver(z)}let p=!1,b=!1,T=Ll(t,i,a.length,null);for(let k=0;k<a.length;k++){const z=a[k];s.mergedAttrs=At(s.mergedAttrs,z.hostAttrs),Zp(t,s,i,T,z),Xp(T,z,c),null!==z.contentQueries&&(s.flags|=4),(null!==z.hostBindings||null!==z.hostAttrs||0!==z.hostVars)&&(s.flags|=64);const de=z.type.prototype;!p&&(de.ngOnChanges||de.ngOnInit||de.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(s.index),p=!0),!b&&(de.ngOnChanges||de.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(s.index),b=!0),T++}!function ch(t,i,s){const c=i.directiveEnd,h=t.data,p=i.attrs,b=[];let T=null,k=null;for(let z=i.directiveStart;z<c;z++){const de=h[z],Ge=s?s.get(de):null,vt=Ge?Ge.outputs:null;T=kl(de.inputs,z,T,Ge?Ge.inputs:null),k=kl(de.outputs,z,k,vt);const Ut=null===T||null===p||Sc(i)?null:l(T,z,p);b.push(Ut)}null!==T&&(T.hasOwnProperty("class")&&(i.flags|=8),T.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=b,i.inputs=T,i.outputs=k}(t,s,h)}function Wd(t,i,s){const a=s.directiveStart,c=s.directiveEnd,h=s.index,p=function uo(){return ct.lFrame.currentDirectiveIndex}();try{J(h);for(let b=a;b<c;b++){const T=t.data[b],k=i[b];Or(b),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Yd(T,k)}}finally{J(-1),Or(p)}}function Yd(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function kc(t,i,s){i.componentOffset=s,(t.components||(t.components=[])).push(i.index)}function Xp(t,i,s){if(s){if(i.exportAs)for(let a=0;a<i.exportAs.length;a++)s[i.exportAs[a]]=t;lr(i)&&(s[""]=t)}}function Zp(t,i,s,a,c){t.data[a]=c;const h=c.factory||(c.factory=Rr(c.type)),p=new S(h,lr(c),Ea);t.blueprint[a]=p,s[a]=p,function to(t,i,s,a,c){const h=c.hostBindings;if(h){let p=t.hostBindingOpCodes;null===p&&(p=t.hostBindingOpCodes=[]);const b=~i.index;(function ms(t){let i=t.length;for(;i>0;){const s=t[--i];if("number"==typeof s&&s<0)return s}return 0})(p)!=b&&p.push(b),p.push(s,a,h)}}(t,i,a,Ll(t,s,c.hostVars,kn),c)}function e(t,i,s,a,c,h){const p=li(t,i);!function r(t,i,s,a,c,h,p){if(null==h)t.removeAttribute(i,c,s);else{const b=null==p?st(h):p(h,a||"",c);t.setAttribute(i,c,b,s)}}(i[yn],p,h,t.value,s,a,c)}function o(t,i,s,a,c,h){const p=h[i];if(null!==p){const b=a.setInput;for(let T=0;T<p.length;){const k=p[T++],z=p[T++],de=p[T++];null!==b?a.setInput(s,de,k,z):s[z]=de}}}function l(t,i,s){let a=null,c=0;for(;c<s.length;){const h=s[c];if(0!==h)if(5!==h){if("number"==typeof h)break;if(t.hasOwnProperty(h)){null===a&&(a=[]);const p=t[h];for(let b=0;b<p.length;b+=2)if(p[b]===i){a.push(h,p[b+1],s[c+1]);break}}c+=2}else c+=2;else c+=4}return a}function u(t,i,s,a){return[t,!0,!1,i,null,0,a,s,null,null]}function M(t,i){const s=I(i,t);if(N(s)){const a=s[Qt];48&s[Sn]?Oc(a,s,a.template,s[mi]):s[nr]>0&&O(s)}}function O(t){for(let a=mu(t);null!==a;a=_u(a))for(let c=Ai;c<a.length;c++){const h=a[c];if(N(h))if(512&h[Sn]){const p=h[Qt];Oc(p,h,p.template,h[mi])}else h[nr]>0&&O(h)}const s=t[Qt].components;if(null!==s)for(let a=0;a<s.length;a++){const c=I(s[a],t);N(c)&&c[nr]>0&&O(c)}}function B(t,i){const s=I(i,t),a=s[Qt];(function G(t,i){for(let s=i.length;s<t.blueprint.length;s++)i.push(t.blueprint[s])})(a,s),oh(a,s,s[mi])}function $(t,i){return t[Mr]?t[ys][Ti]=i:t[Mr]=i,t[ys]=i,i}function le(t){for(;t;){t[Sn]|=32;const i=er(t);if(Nr(t)&&!i)return t;t=i}return null}function pe(t,i,s,a=!0){const c=i[wi];c.begin&&c.begin();try{Oc(t,i,t.template,s)}catch(p){throw a&&xn(i,p),p}finally{c.end&&c.end()}}function qe(t,i,s){Ks(0),i(t,s)}function Pt(t){return t[Sr]||(t[Sr]=[])}function rt(t){return t.cleanup||(t.cleanup=[])}function Dt(t,i,s){return(null===t||lr(t))&&(s=function So(t){for(;Array.isArray(t);){if("object"==typeof t[no])return t;t=t[br]}return null}(s[i.index])),s[yn]}function xn(t,i){const s=t[Ar],a=s?s.get(Tl,null):null;a&&a.handleError(i)}function En(t,i,s,a,c){for(let h=0;h<s.length;){const p=s[h++],b=s[h++],T=i[p],k=t.data[p];null!==k.setInput?k.setInput(T,c,a,b):T[b]=c}}function Zt(t,i,s){let a=s?t.styles:null,c=s?t.classes:null,h=0;if(null!==i)for(let p=0;p<i.length;p++){const b=i[p];"number"==typeof b?h=b:1==h?c=Ce(c,b):2==h&&(a=Ce(a,b+": "+i[++p]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=c:t.classesWithoutHost=c}function Vn(t,i,s,a,c=!1){for(;null!==s;){const h=i[s.index];if(null!==h&&a.push(Pi(h)),Ki(h))for(let b=Ai;b<h.length;b++){const T=h[b],k=T[Qt].firstChild;null!==k&&Vn(T[Qt],T,k,a)}const p=s.type;if(8&p)Vn(t,i,s.child,a);else if(32&p){const b=fl(s,i);let T;for(;T=b();)a.push(T)}else if(16&p){const b=Yh(i,s);if(Array.isArray(b))a.push(...b);else{const T=er(i[Si]);Vn(T[Qt],T,b,a,!0)}}s=c?s.projectionNext:s.next}return a}class jt{get rootNodes(){const i=this._lView,s=i[Qt];return Vn(s,i,s.firstChild,[])}constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[mi]}set context(i){this._lView[mi]=i}get destroyed(){return 128==(128&this._lView[Sn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[ui];if(Ki(i)){const s=i[js],a=s?s.indexOf(this):-1;a>-1&&(uc(i,a),Na(s,a))}this._attachedToViewContainer=!1}Nn(this._lView[Qt],this._lView)}onDestroy(i){zd(this._lView[Qt],this._lView,null,i)}markForCheck(){le(this._cdRefInjectingView||this._lView)}detach(){this._lView[Sn]&=-65}reattach(){this._lView[Sn]|=64}detectChanges(){pe(this._lView[Qt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Va(t,i){_l(t,i,i[yn],2,null,null)}(this._lView[Qt],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Ke(902,!1);this._appRef=i}}class cn extends jt{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;pe(i[Qt],i,i[mi],!1)}checkNoChanges(){}get context(){return null}}class ni extends xl{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=$n(i);return new jn(s,this.ngModule)}}function Bt(t){const i=[];for(let s in t)t.hasOwnProperty(s)&&i.push({propName:t[s],templateName:s});return i}class Fi{constructor(i,s){this.injector=i,this.parentInjector=s}get(i,s,a){a=re(a);const c=this.injector.get(i,ju,a);return c!==ju||s===ju?c:this.parentInjector.get(i,s,a)}}class jn extends Ed{get inputs(){return Bt(this.componentDef.inputs)}get outputs(){return Bt(this.componentDef.outputs)}constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function Ip(t){return t.map(Yu).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}create(i,s,a,c){let h=(c=c||this.ngModule)instanceof ma?c:c?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const p=h?new Fi(i,h):i,b=p.get(Vu,null);if(null===b)throw new Ke(407,!1);const T=p.get(Cp,null),k=b.createRenderer(null,this.componentDef),z=this.componentDef.selectors[0][0]||"div",de=a?function jd(t,i,s){return t.selectRootElement(i,s===Zn.ShadowDom)}(k,a,this.componentDef.encapsulation):cc(k,z,function Ht(t){const i=t.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(z)),Ge=this.componentDef.onPush?288:272,et=Nl(0,null,null,1,0,null,null,null,null,null),vt=ba(null,et,null,Ge,null,null,b,k,T,p,null);let Ut,rn;Yo(vt);try{const mn=this.componentDef;let Pn,It=null;mn.findHostDirectiveDefs?(Pn=[],It=new Map,mn.findHostDirectiveDefs(mn,Pn,It),Pn.push(mn)):Pn=[mn];const Yn=function fi(t,i){const s=t[Qt],a=_i;return t[a]=i,bo(s,a,2,"#host",null)}(vt,de),sr=function Ul(t,i,s,a,c,h,p,b){const T=c[Qt];!function Hl(t,i,s,a){for(const c of t)i.mergedAttrs=At(i.mergedAttrs,c.hostAttrs);null!==i.mergedAttrs&&(Zt(i,i.mergedAttrs,!0),null!==s&&Kh(a,s,i))}(a,t,i,p);const k=h.createRenderer(i,s),z=ba(c,nl(s),null,s.onPush?32:16,c[t.index],t,h,k,b||null,null,null);return T.firstCreatePass&&kc(T,t,a.length-1),$(c,z),c[t.index]=z}(Yn,de,mn,Pn,vt,b,k);rn=Zi(et,_i),de&&function Bc(t,i,s,a){if(a)kt(t,s,["ng-version",xp.full]);else{const{attrs:c,classes:h}=function Xu(t){const i=[],s=[];let a=1,c=2;for(;a<t.length;){let h=t[a];if("string"==typeof h)2===c?""!==h&&i.push(h,t[++a]):8===c&&s.push(h);else{if(!Rs(c))break;c=h}a++}return{attrs:i,classes:s}}(i.selectors[0]);c&&kt(t,s,c),h&&h.length>0&&_c(t,s,h.join(" "))}}(k,mn,de,a),void 0!==s&&function Gl(t,i,s){const a=t.projection=[];for(let c=0;c<i.length;c++){const h=s[c];a.push(null!=h?Array.from(h):null)}}(rn,this.ngContentSelectors,s),Ut=function Zd(t,i,s,a,c,h){const p=cr(),b=c[Qt],T=li(p,c);Bl(b,c,p,s,null,a);for(let z=0;z<s.length;z++)Xr(_o(c,b,p.directiveStart+z,p),c);Wd(b,c,p),T&&Xr(T,c);const k=_o(c,b,p.directiveStart+p.componentOffset,p);if(t[mi]=c[mi]=k,null!==h)for(const z of h)z(k,i);return lh(b,p,t),k}(sr,mn,Pn,It,vt,[qd]),oh(et,vt,null)}finally{g()}return new Kn(this.componentType,Ut,qa(rn,vt),vt,rn)}}class Kn extends vp{constructor(i,s,a,c,h){super(),this.location=a,this._rootLView=c,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new cn(c),this.componentType=i}setInput(i,s){const a=this._tNode.inputs;let c;if(null!==a&&(c=a[i])){const h=this._rootLView;En(h[Qt],h,c,i,s),$d(h,this._tNode.index)}}get injector(){return new Jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function qd(){const t=cr();On(xt()[Qt],t)}function il(t){let i=function dh(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;i;){let c;if(lr(t))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Ke(903,!1);c=i.\u0275dir}if(c){if(s){a.push(c);const p=t;p.inputs=Hc(t.inputs),p.declaredInputs=Hc(t.declaredInputs),p.outputs=Hc(t.outputs);const b=c.hostBindings;b&&Ca(t,b);const T=c.viewQuery,k=c.contentQueries;if(T&&wa(t,T),k&&Da(t,k),ve(t.inputs,c.inputs),ve(t.declaredInputs,c.declaredInputs),ve(t.outputs,c.outputs),lr(c)&&c.data.animation){const z=t.data;z.animation=(z.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let p=0;p<h.length;p++){const b=h[p];b&&b.ngInherit&&b(t),b===il&&(s=!1)}}i=Object.getPrototypeOf(i)}!function Uc(t){let i=0,s=null;for(let a=t.length-1;a>=0;a--){const c=t[a];c.hostVars=i+=c.hostVars,c.hostAttrs=At(c.hostAttrs,s=At(s,c.hostAttrs))}}(a)}function Hc(t){return t===ei?{}:t===Oe?[]:t}function wa(t,i){const s=t.viewQuery;t.viewQuery=s?(a,c)=>{i(a,c),s(a,c)}:i}function Da(t,i){const s=t.contentQueries;t.contentQueries=s?(a,c,h)=>{i(a,c,h),s(a,c,h)}:i}function Ca(t,i){const s=t.hostBindings;t.hostBindings=s?(a,c)=>{i(a,c),s(a,c)}:i}function ef(t){return!!Jp(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Jp(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function _s(t,i,s){return!Object.is(t[i],s)&&(t[i]=s,!0)}function eg(t,i,s,a){const c=xt();return _s(c,Pr(),i)&&(zn(),e(_e(),c,t,i,s,a)),eg}function Cm(t,i,s,a,c,h,p,b){const T=xt(),k=zn(),z=t+_i,de=k.firstCreatePass?function Av(t,i,s,a,c,h,p,b,T){const k=i.consts,z=bo(i,t,4,p||null,ye(k,b));hh(i,s,z,ye(k,T)),On(i,z);const de=z.tView=Nl(2,z,a,c,h,i.directiveRegistry,i.pipeRegistry,null,i.schemas,k);return null!==i.queries&&(i.queries.template(i,z),de.queries=i.queries.embeddedTView(z)),z}(z,k,T,i,s,a,c,h,p):k.data[z];ur(de,!1);const Ge=T[yn].createComment("");ml(k,T,Ge,de),Xr(Ge,T),$(T,T[z]=u(Ge,T,Ge,de)),Ir(de)&&tl(k,T,de),null!=p&&Fc(T,de,b)}function xm(t){return X(function Mo(){return ct.lFrame.contextLView}(),_i+t)}function tg(t,i,s){const a=xt();return _s(a,Pr(),i)&&Ps(zn(),_e(),a,t,i,a[yn],s,!1),tg}function ng(t,i,s,a,c){const p=c?"class":"style";En(t,s,i.inputs[p],p,a)}function nf(t,i,s,a){const c=xt(),h=zn(),p=_i+t,b=c[yn],T=h.firstCreatePass?function Iv(t,i,s,a,c,h){const p=i.consts,T=bo(i,t,2,a,ye(p,c));return hh(i,s,T,ye(p,h)),null!==T.attrs&&Zt(T,T.attrs,!1),null!==T.mergedAttrs&&Zt(T,T.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,T),T}(p,h,c,i,s,a):h.data[p],k=c[p]=cc(b,i,function nn(){return ct.lFrame.currentNamespace}()),z=Ir(T);return ur(T,!0),Kh(b,k,T),32!=(32&T.flags)&&ml(h,c,k,T),0===function qn(){return ct.lFrame.elementDepthCount}()&&Xr(k,c),function mr(){ct.lFrame.elementDepthCount++}(),z&&(tl(h,c,T),lh(h,T,c)),null!==a&&Fc(c,T),nf}function rf(){let t=cr();Wo()?Us():(t=t.parent,ur(t,!1));const i=t;!function ki(){ct.lFrame.elementDepthCount--}();const s=zn();return s.firstCreatePass&&(On(s,t),io(t)&&s.queries.elementEnd(t)),null!=i.classesWithoutHost&&function Yt(t){return 0!=(8&t.flags)}(i)&&ng(s,i,xt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Fn(t){return 0!=(16&t.flags)}(i)&&ng(s,i,xt(),i.stylesWithoutHost,!1),rf}function ig(t,i,s,a){return nf(t,i,s,a),rf(),ig}function Sm(){return xt()}function og(t){return!!t&&"function"==typeof t.then}function Am(t){return!!t&&"function"==typeof t.subscribe}const Mm=Am;function ag(t,i,s,a){const c=xt(),h=zn(),p=cr();return Im(h,c,c[yn],p,t,i,a),ag}function lg(t,i){const s=cr(),a=xt(),c=zn();return Im(c,a,Dt(Io(c.data),s,a),s,t,i),lg}function Im(t,i,s,a,c,h,p){const b=Ir(a),k=t.firstCreatePass&&rt(t),z=i[mi],de=Pt(i);let Ge=!0;if(3&a.type||p){const Ut=li(a,i),rn=p?p(Ut):Ut,mn=de.length,Pn=p?Yn=>p(Pi(Yn[a.index])):a.index;let It=null;if(!p&&b&&(It=function Pv(t,i,s,a){const c=t.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const p=c[h];if(p===s&&c[h+1]===a){const b=i[Sr],T=c[h+2];return b.length>T?b[T]:null}"string"==typeof p&&(h+=2)}return null}(t,i,c,a.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=h,It.__ngLastListenerFn__=h,Ge=!1;else{h=Pm(a,i,z,h,!1);const Yn=s.listen(rn,c,h);de.push(h,Yn),k&&k.push(c,Pn,mn,mn+1)}}else h=Pm(a,i,z,h,!1);const et=a.outputs;let vt;if(Ge&&null!==et&&(vt=et[c])){const Ut=vt.length;if(Ut)for(let rn=0;rn<Ut;rn+=2){const sr=i[vt[rn]][vt[rn+1]].subscribe(h),Tr=de.length;de.push(h,sr),k&&k.push(c,a.index,Tr,-(Tr+1))}}}function Rm(t,i,s,a){try{return kr(6,i,s),!1!==s(a)}catch(c){return xn(t,c),!1}finally{kr(7,i,s)}}function Pm(t,i,s,a,c){return function h(p){if(p===Function)return a;le(t.componentOffset>-1?I(t.index,i):i);let T=Rm(i,s,a,p),k=h.__ngNextListenerFn__;for(;k;)T=Rm(i,s,k,p)&&T,k=k.__ngNextListenerFn__;return c&&!1===T&&(p.preventDefault(),p.returnValue=!1),T}}function Om(t=1){return function v(t){return(ct.lFrame.contextLView=function R(t,i){for(;t>0;)i=i[pr],t--;return i}(t,ct.lFrame.contextLView))[mi]}(t)}function Ov(t,i){let s=null;const a=function Md(t){const i=t.attrs;if(null!=i){const s=i.indexOf(5);if(!(1&s))return i[s+1]}return null}(t);for(let c=0;c<i.length;c++){const h=i[c];if("*"!==h){if(null===a?Il(t,h,!0):Rd(a,h))return c}else s=c}return s}function Fm(t){const i=xt()[Si][pi];if(!i.projection){const a=i.projection=Gr(t?t.length:1,null),c=a.slice();let h=i.child;for(;null!==h;){const p=t?Ov(h,t):0;null!==p&&(c[p]?c[p].projectionNext=h:a[p]=h,c[p]=h),h=h.next}}}function Lm(t,i=0,s){const a=xt(),c=zn(),h=bo(c,_i+t,16,null,s||null);null===h.projection&&(h.projection=i),Us(),32!=(32&h.flags)&&function Yf(t,i,s){Xh(i[yn],0,i,s,dc(t,s,i),gc(s.parent||i[pi],s,i))}(c,a,h)}function sf(t,i){return t<<17|i<<2}function rl(t){return t>>17&32767}function ug(t){return 2|t}function zl(t){return(131068&t)>>2}function hg(t,i){return-131069&t|i<<2}function dg(t){return 1|t}function $m(t,i,s,a,c){const h=t[s+1],p=null===i;let b=a?rl(h):zl(h),T=!1;for(;0!==b&&(!1===T||p);){const z=t[b+1];Uv(t[b],i)&&(T=!0,t[b+1]=a?dg(z):ug(z)),b=a?rl(z):zl(z)}T&&(t[s+1]=a?ug(h):dg(h))}function Uv(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&x(t,i)>=0}function fg(t,i,s){return Ho(t,i,s,!1),fg}function pg(t,i){return Ho(t,i,null,!0),pg}function Ho(t,i,s,a){const c=xt(),h=zn(),p=function rr(t){const i=ct.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,s}(2);h.firstUpdatePass&&function Jm(t,i,s,a){const c=t.data;if(null===c[s+1]){const h=c[H()],p=function Qm(t,i){return i>=t.expandoStartIndex}(t,s);(function i_(t,i){return 0!=(t.flags&(i?8:16))})(h,a)&&null===i&&!p&&(i=!1),i=function Xv(t,i,s,a){const c=Io(t);let h=a?i.residualClasses:i.residualStyles;if(null===c)0===(a?i.classBindings:i.styleBindings)&&(s=ph(s=gg(null,t,i,s,a),i.attrs,a),h=null);else{const p=i.directiveStylingLast;if(-1===p||t[p]!==c)if(s=gg(c,t,i,s,a),null===h){let T=function Kv(t,i,s){const a=s?i.classBindings:i.styleBindings;if(0!==zl(a))return t[rl(a)]}(t,i,a);void 0!==T&&Array.isArray(T)&&(T=gg(null,t,i,T[1],a),T=ph(T,i.attrs,a),function Zv(t,i,s,a){t[rl(s?i.classBindings:i.styleBindings)]=a}(t,i,a,T))}else h=function qv(t,i,s){let a;const c=i.directiveEnd;for(let h=1+i.directiveStylingLast;h<c;h++)a=ph(a,t[h].hostAttrs,s);return ph(a,i.attrs,s)}(t,i,a)}return void 0!==h&&(a?i.residualClasses=h:i.residualStyles=h),s}(c,h,i,a),function kv(t,i,s,a,c,h){let p=h?i.classBindings:i.styleBindings,b=rl(p),T=zl(p);t[a]=s;let z,k=!1;if(Array.isArray(s)?(z=s[1],(null===z||x(s,z)>0)&&(k=!0)):z=s,c)if(0!==T){const Ge=rl(t[b+1]);t[a+1]=sf(Ge,b),0!==Ge&&(t[Ge+1]=hg(t[Ge+1],a)),t[b+1]=function Lv(t,i){return 131071&t|i<<17}(t[b+1],a)}else t[a+1]=sf(b,0),0!==b&&(t[b+1]=hg(t[b+1],a)),b=a;else t[a+1]=sf(T,0),0===b?b=a:t[T+1]=hg(t[T+1],a),T=a;k&&(t[a+1]=ug(t[a+1])),$m(t,z,a,!0),$m(t,z,a,!1),function Bv(t,i,s,a,c){const h=c?t.residualClasses:t.residualStyles;null!=h&&"string"==typeof i&&x(h,i)>=0&&(s[a+1]=dg(s[a+1]))}(i,z,t,a,h),p=sf(b,T),h?i.classBindings=p:i.styleBindings=p}(c,h,i,s,p,a)}}(h,t,p,a),i!==kn&&_s(c,p,i)&&function t_(t,i,s,a,c,h,p,b){if(!(3&i.type))return;const T=t.data,k=T[b+1],z=function Nv(t){return 1==(1&t)}(k)?n_(T,i,s,c,zl(k),p):void 0;af(z)||(af(h)||function Fv(t){return 2==(2&t)}(k)&&(h=n_(T,null,s,c,b,p)),function Xf(t,i,s,a,c){if(i)c?t.addClass(s,a):t.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:vo.DashCase;null==c?t.removeStyle(s,a,h):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),h|=vo.Important),t.setStyle(s,a,c,h))}}(a,p,xs(H(),s),c,h))}(h,h.data[H()],c,c[yn],t,c[p+1]=function e0(t,i){return null==t||("string"==typeof i?t+=i:"object"==typeof t&&(t=ce(No(t)))),t}(i,s),a,p)}function gg(t,i,s,a,c){let h=null;const p=s.directiveEnd;let b=s.directiveStylingLast;for(-1===b?b=s.directiveStart:b++;b<p&&(h=i[b],a=ph(a,h.hostAttrs,c),h!==t);)b++;return null!==t&&(s.directiveStylingLast=b),a}function ph(t,i,s){const a=s?1:2;let c=-1;if(null!==i)for(let h=0;h<i.length;h++){const p=i[h];"number"==typeof p?c=p:c===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),_(t,p,!!s||i[++h]))}return void 0===t?null:t}function n_(t,i,s,a,c,h){const p=null===i;let b;for(;c>0;){const T=t[c],k=Array.isArray(T),z=k?T[1]:T,de=null===z;let Ge=s[c+1];Ge===kn&&(Ge=de?Oe:void 0);let et=de?f(Ge,a):z===a?Ge:void 0;if(k&&!af(et)&&(et=f(T,a)),af(et)&&(b=et,p))return b;const vt=t[c+1];c=p?rl(vt):zl(vt)}if(null!==i){let T=h?i.residualClasses:i.residualStyles;null!=T&&(b=f(T,a))}return b}function af(t){return void 0!==t}function r_(t,i=""){const s=xt(),a=zn(),c=t+_i,h=a.firstCreatePass?bo(a,c,1,i,null):a.data[c],p=s[c]=function lc(t,i){return t.createText(i)}(s[yn],i);ml(a,s,p,h),ur(h,!1)}function mg(t){return lf("",t,""),mg}function lf(t,i,s){const a=xt(),c=function Vc(t,i,s,a){return _s(t,Pr(),s)?i+st(s)+a:kn}(a,t,i,s);return c!==kn&&function Xt(t,i,s){const a=xs(i,t);!function yu(t,i,s){t.setValue(i,s)}(t[yn],a,s)}(a,H(),c),lf}function _g(t,i,s){const a=xt();return _s(a,Pr(),i)&&Ps(zn(),_e(),a,t,i,a[yn],s,!0),_g}function yg(t,i,s){const a=xt();if(_s(a,Pr(),i)){const h=zn(),p=_e();Ps(h,p,a,t,i,Dt(Io(h.data),p,a),s,!0)}return yg}const $l=void 0;var b0=["en",[["a","p"],["AM","PM"],$l],[["AM","PM"],$l,$l],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$l,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$l,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$l,"{1} 'at' {0}",$l],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function E0(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let qc={};function vg(t){const i=function w0(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=D_(i);if(s)return s;const a=i.split("-")[0];if(s=D_(a),s)return s;if("en"===a)return b0;throw new Ke(701,!1)}function w_(t){return vg(t)[Mn.PluralCase]}function D_(t){return t in qc||(qc[t]=Dn.ng&&Dn.ng.common&&Dn.ng.common.locales&&Dn.ng.common.locales[t]),qc[t]}var Mn=(()=>((Mn=Mn||{})[Mn.LocaleId=0]="LocaleId",Mn[Mn.DayPeriodsFormat=1]="DayPeriodsFormat",Mn[Mn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mn[Mn.DaysFormat=3]="DaysFormat",Mn[Mn.DaysStandalone=4]="DaysStandalone",Mn[Mn.MonthsFormat=5]="MonthsFormat",Mn[Mn.MonthsStandalone=6]="MonthsStandalone",Mn[Mn.Eras=7]="Eras",Mn[Mn.FirstDayOfWeek=8]="FirstDayOfWeek",Mn[Mn.WeekendRange=9]="WeekendRange",Mn[Mn.DateFormat=10]="DateFormat",Mn[Mn.TimeFormat=11]="TimeFormat",Mn[Mn.DateTimeFormat=12]="DateTimeFormat",Mn[Mn.NumberSymbols=13]="NumberSymbols",Mn[Mn.NumberFormats=14]="NumberFormats",Mn[Mn.CurrencyCode=15]="CurrencyCode",Mn[Mn.CurrencySymbol=16]="CurrencySymbol",Mn[Mn.CurrencyName=17]="CurrencyName",Mn[Mn.Currencies=18]="Currencies",Mn[Mn.Directionality=19]="Directionality",Mn[Mn.PluralCase=20]="PluralCase",Mn[Mn.ExtraData=21]="ExtraData",Mn))();const Qc="en-US";let C_=Qc;function wg(t,i,s,a,c){if(t=Ae(t),Array.isArray(t))for(let h=0;h<t.length;h++)wg(t[h],i,s,a,c);else{const h=zn(),p=xt();let b=Is(t)?t:Ae(t.provide),T=vd(t);const k=cr(),z=1048575&k.providerIndexes,de=k.directiveStart,Ge=k.providerIndexes>>20;if(Is(t)||!t.multi){const et=new S(T,c,Ea),vt=Cg(b,i,c?z:z+Ge,de);-1===vt?(po(Ur(k,p),h,b),Dg(h,t,i.length),i.push(b),k.directiveStart++,k.directiveEnd++,c&&(k.providerIndexes+=1048576),s.push(et),p.push(et)):(s[vt]=et,p[vt]=et)}else{const et=Cg(b,i,z+Ge,de),vt=Cg(b,i,z,z+Ge),rn=vt>=0&&s[vt];if(c&&!rn||!c&&!(et>=0&&s[et])){po(Ur(k,p),h,b);const mn=function vE(t,i,s,a,c){const h=new S(t,s,Ea);return h.multi=[],h.index=i,h.componentProviders=0,K_(h,c,a&&!s),h}(c?yE:_E,s.length,c,a,T);!c&&rn&&(s[vt].providerFactory=mn),Dg(h,t,i.length,0),i.push(b),k.directiveStart++,k.directiveEnd++,c&&(k.providerIndexes+=1048576),s.push(mn),p.push(mn)}else Dg(h,t,et>-1?et:vt,K_(s[c?vt:et],T,!c&&a));!c&&a&&rn&&s[vt].componentProviders++}}}function Dg(t,i,s,a){const c=Is(i),h=function ku(t){return!!t.useClass}(i);if(c||h){const T=(h?Ae(i.useClass):i).prototype.ngOnDestroy;if(T){const k=t.destroyHooks||(t.destroyHooks=[]);if(!c&&i.multi){const z=k.indexOf(s);-1===z?k.push(s,[a,T]):k[z+1].push(a,T)}else k.push(s,T)}}}function K_(t,i,s){return s&&t.componentProviders++,t.multi.push(i)-1}function Cg(t,i,s,a){for(let c=s;c<a;c++)if(i[c]===t)return c;return-1}function _E(t,i,s,a){return xg(this.multi,[])}function yE(t,i,s,a){const c=this.multi;let h;if(this.providerFactory){const p=this.providerFactory.componentProviders,b=_o(s,s[Qt],this.providerFactory.index,a);h=b.slice(0,p),xg(c,h);for(let T=p;T<b.length;T++)h.push(b[T])}else h=[],xg(c,h);return h}function xg(t,i){for(let s=0;s<t.length;s++)i.push((0,t[s])());return i}function Z_(t,i=[]){return s=>{s.providersResolver=(a,c)=>function mE(t,i,s){const a=zn();if(a.firstCreatePass){const c=lr(t);wg(s,a.data,a.blueprint,c,!0),wg(i,a.data,a.blueprint,c,!1)}}(a,c?c(t):t,i)}}class Jc{}class q_{}function EE(t,i){return new Q_(t,i??null)}class Q_ extends Jc{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ni(this);const a=or(i);this._bootstrapComponents=xr(a.bootstrap),this._r3Injector=Np(i,s,[{provide:Jc,useValue:this},{provide:xl,useValue:this.componentFactoryResolver}],ce(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Tg extends q_{constructor(i){super(),this.moduleType=i}create(i){return new Q_(this.moduleType,i)}}class bE extends Jc{constructor(i,s,a){super(),this.componentFactoryResolver=new ni(this),this.instance=null;const c=new Cl([...i,{provide:Jc,useValue:this},{provide:xl,useValue:this.componentFactoryResolver}],s||ga(),a,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Sg(t,i,s=null){return new bE(t,i,s).injector}let wE=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=gd(0,s.type),c=a.length>0?Sg([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,c)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=Ue({token:t,providedIn:"environment",factory:()=>new t(Re(ma))}),t})();function J_(t){t.getStandaloneInjector=i=>i.get(wE).getOrCreateStandaloneInjector(t)}function oy(t,i,s,a,c,h){const p=i+s;return _s(t,p,c)?function ta(t,i,s){return t[i]=s}(t,p+1,h?a.call(h,c):a(c)):function Eh(t,i){const s=t[i];return s===kn?void 0:s}(t,p+1)}function hy(t,i){const s=zn();let a;const c=t+_i;s.firstCreatePass?(a=function GE(t,i){if(i)for(let s=i.length-1;s>=0;s--){const a=i[s];if(t===a.name)return a}}(i,s.pipeRegistry),s.data[c]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(c,a.onDestroy)):a=s.data[c];const h=a.factory||(a.factory=Rr(a.type)),p=ai(Ea);try{const b=Ui(!1),T=h();return Ui(b),function Mv(t,i,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),i[s]=a}(s,xt(),c,T),T}finally{ai(p)}}function dy(t,i,s){const a=t+_i,c=xt(),h=X(c,a);return function bh(t,i){return t[Qt].data[i].pure}(c,a)?oy(c,function qi(){const t=ct.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}(),i,h.transform,s,h):h.transform(s)}function Mg(t){return i=>{setTimeout(t,void 0,i)}}const ra=class WE extends w.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,a){let c=i,h=s||(()=>null),p=a;if(i&&"object"==typeof i){const T=i;c=T.next?.bind(T),h=T.error?.bind(T),p=T.complete?.bind(T)}this.__isAsync&&(h=Mg(h),c&&(c=Mg(c)),p&&(p=Mg(p)));const b=super.subscribe({next:c,error:h,complete:p});return i instanceof D.w0&&i.add(b),b}};function YE(){return this._results[Symbol.iterator]()}class Ig{get changes(){return this._changes||(this._changes=new ra)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Ig.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=YE)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const a=this;a.dirty=!1;const c=function hs(t){return t.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function au(t,i,s){if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++){let c=t[a],h=i[a];if(s&&(c=s(c),h=s(h)),h!==c)return!1}return!0}(a._results,c,s))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let wh=(()=>{class t{}return t.__NG_ELEMENT_ID__=ZE,t})();const XE=wh,KE=class extends XE{constructor(i,s,a){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(i,s){const a=this._declarationTContainer.tView,c=ba(this._declarationLView,a,i,16,null,a.declTNode,null,null,null,null,s||null);c[wr]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[Yi];return null!==p&&(c[Yi]=p.createEmbeddedView(a)),oh(a,c,i),new jt(c)}};function ZE(){return ff(cr(),xt())}function ff(t,i){return 4&t.type?new KE(i,t,qa(t,i)):null}let pf=(()=>{class t{}return t.__NG_ELEMENT_ID__=qE,t})();function qE(){return gy(cr(),xt())}const QE=pf,fy=class extends QE{constructor(i,s,a){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=a}get element(){return qa(this._hostTNode,this._hostLView)}get injector(){return new Jr(this._hostTNode,this._hostLView)}get parentInjector(){const i=Ro(this._hostTNode,this._hostLView);if(hn(i)){const s=zi(i,this._hostLView),a=Ln(i);return new Jr(s[Qt].data[a+8],s)}return new Jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=py(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-Ai}createEmbeddedView(i,s,a){let c,h;"number"==typeof a?c=a:null!=a&&(c=a.index,h=a.injector);const p=i.createEmbeddedView(s||{},h);return this.insert(p,c),p}createComponent(i,s,a,c,h){const p=i&&!function Oo(t){return"function"==typeof t}(i);let b;if(p)b=s;else{const de=s||{};b=de.index,a=de.injector,c=de.projectableNodes,h=de.environmentInjector||de.ngModuleRef}const T=p?i:new jn($n(i)),k=a||this.parentInjector;if(!h&&null==T.ngModule){const Ge=(p?k:this.parentInjector).get(ma,null);Ge&&(h=Ge)}const z=T.create(k,c,void 0,h);return this.insert(z.hostView,b),z}insert(i,s){const a=i._lView,c=a[Qt];if(function q(t){return Ki(t[ui])}(a)){const z=this.indexOf(i);if(-1!==z)this.detach(z);else{const de=a[ui],Ge=new fy(de,de[pi],de[ui]);Ge.detach(Ge.indexOf(i))}}const h=this._adjustIndex(s),p=this._lContainer;!function jf(t,i,s,a){const c=Ai+a,h=s.length;a>0&&(s[c-1][Ti]=i),a<h-Ai?(i[Ti]=s[c],Ql(s,Ai+a,i)):(s.push(i),i[Ti]=null),i[ui]=s;const p=i[wr];null!==p&&s!==p&&function zf(t,i){const s=t[Ri];i[Si]!==i[ui][ui][Si]&&(t[gr]=!0),null===s?t[Ri]=[i]:s.push(i)}(p,i);const b=i[Yi];null!==b&&b.insertView(t),i[Sn]|=64}(c,a,p,h);const b=bu(h,p),T=a[yn],k=pc(T,p[Zr]);return null!==k&&function vu(t,i,s,a,c,h){a[br]=c,a[pi]=i,_l(t,a,s,1,c,h)}(c,p[pi],T,a,k,b),i.attachToViewContainerRef(),Ql(Rg(p),h,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=py(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),a=uc(this._lContainer,s);a&&(Na(Rg(this._lContainer),s),Nn(a[Qt],a))}detach(i){const s=this._adjustIndex(i,-1),a=uc(this._lContainer,s);return a&&null!=Na(Rg(this._lContainer),s)?new jt(a):null}_adjustIndex(i,s=0){return i??this.length+s}};function py(t){return t[js]}function Rg(t){return t[js]||(t[js]=[])}function gy(t,i){let s;const a=i[t.index];if(Ki(a))s=a;else{let c;if(8&t.type)c=Pi(a);else{const h=i[yn];c=h.createComment("");const p=li(t,i);za(h,pc(h,p),c,function Wf(t,i){return t.nextSibling(i)}(h,p),!1)}i[t.index]=s=u(a,i,c,t),$(i,s)}return new fy(s,t,i)}class Pg{constructor(i){this.queryList=i,this.matches=null}clone(){return new Pg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Og{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const a=null!==i.contentQueries?i.contentQueries[0]:s.length,c=[];for(let h=0;h<a;h++){const p=s.getByIndex(h);c.push(this.queries[p.indexInDeclarationView].clone())}return new Og(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==Cy(i,s).matches&&this.queries[s].setDirty()}}class my{constructor(i,s,a=null){this.predicate=i,this.flags=s,this.read=a}}class Fg{constructor(i=[]){this.queries=i}elementStart(i,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let a=0;a<this.length;a++){const c=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(i,c);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new Fg(s):null}template(i,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Lg{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new Lg(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=i.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const h=a[c];this.matchTNodeWithReadOption(i,s,JE(s,h)),this.matchTNodeWithReadOption(i,s,Xo(s,i,h,!1,!1))}else a===wh?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,Xo(s,i,a,!1,!1))}matchTNodeWithReadOption(i,s,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===ns||c===pf||c===wh&&4&s.type)this.addMatch(s.index,-2);else{const h=Xo(s,i,c,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function JE(t,i){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===i)return s[a+1];return null}function tb(t,i,s,a){return-1===s?function eb(t,i){return 11&t.type?qa(t,i):4&t.type?ff(t,i):null}(i,t):-2===s?function nb(t,i,s){return s===ns?qa(i,t):s===wh?ff(i,t):s===pf?gy(i,t):void 0}(t,i,a):_o(t,t[Qt],s,i)}function _y(t,i,s,a){const c=i[Yi].queries[a];if(null===c.matches){const h=t.data,p=s.matches,b=[];for(let T=0;T<p.length;T+=2){const k=p[T];b.push(k<0?null:tb(i,h[k],p[T+1],s.metadata.read))}c.matches=b}return c.matches}function Ng(t,i,s,a){const c=t.queries.getByIndex(s),h=c.matches;if(null!==h){const p=_y(t,i,c,s);for(let b=0;b<h.length;b+=2){const T=h[b];if(T>0)a.push(p[b/2]);else{const k=h[b+1],z=i[-T];for(let de=Ai;de<z.length;de++){const Ge=z[de];Ge[wr]===Ge[ui]&&Ng(Ge[Qt],Ge,k,a)}if(null!==z[Ri]){const de=z[Ri];for(let Ge=0;Ge<de.length;Ge++){const et=de[Ge];Ng(et[Qt],et,k,a)}}}}}return a}function yy(t){const i=xt(),s=zn(),a=Hs();Ks(a+1);const c=Cy(s,a);if(t.dirty&&function E(t){return 4==(4&t[Sn])}(i)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const h=c.crossesNgTemplate?Ng(s,i,a,[]):_y(s,i,c,a);t.reset(h,Gu),t.notifyOnChanges()}return!0}return!1}function vy(t,i,s){const a=zn();a.firstCreatePass&&(Dy(a,new my(t,i,s),-1),2==(2&i)&&(a.staticViewQueries=!0)),wy(a,xt(),i)}function Ey(t,i,s,a){const c=zn();if(c.firstCreatePass){const h=cr();Dy(c,new my(i,s,a),h.index),function rb(t,i){const s=t.contentQueries||(t.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,i)}(c,t),2==(2&s)&&(c.staticContentQueries=!0)}wy(c,xt(),s)}function by(){return function ib(t,i){return t[Yi].queries[i].queryList}(xt(),Hs())}function wy(t,i,s){const a=new Ig(4==(4&s));zd(t,i,a,a.destroy),null===i[Yi]&&(i[Yi]=new Og),i[Yi].queries.push(new Pg(a))}function Dy(t,i,s){null===t.queries&&(t.queries=new Fg),t.queries.track(new Lg(i,s))}function Cy(t,i){return t.queries.getByIndex(i)}function xy(t,i){return ff(t,i)}function kg(t){return!!or(t)}function mf(...t){}const jy=new vi("Application Initializer");let _f=(()=>{class t{constructor(s){this.appInits=s,this.resolve=mf,this.reject=mf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(og(h))s.push(h);else if(Mm(h)){const p=new Promise((b,T)=>{h.subscribe({complete:b,error:T})});s.push(p)}}Promise.all(s).then(()=>{a()}).catch(c=>{this.reject(c)}),0===s.length&&a(),this.initialized=!0}}return t.\u0275fac=function(s){return new(s||t)(Re(jy,8))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const zy=new vi("AppId",{providedIn:"root",factory:function $y(){return`${Vg()}${Vg()}${Vg()}`}});function Vg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Wy=new vi("Platform Initializer"),Cb=new vi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),xb=new vi("AnimationModuleType");let Tb=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const yf=new vi("LocaleId",{providedIn:"root",factory:()=>Te(yf,Wt.Optional|Wt.SkipSelf)||function Sb(){return typeof $localize<"u"&&$localize.locale||Qc}()}),Ab=new vi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Mb{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}let Ib=(()=>{class t{compileModuleSync(s){return new Tg(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=xr(or(s).declarations).reduce((p,b)=>{const T=$n(b);return T&&p.push(new jn(T)),p},[]);return new Mb(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ob=(()=>Promise.resolve(0))();function jg(t){typeof Zone>"u"?Ob.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Do{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ra(!1),this.onMicrotaskEmpty=new ra(!1),this.onStable=new ra(!1),this.onError=new ra(!1),typeof Zone>"u")throw new Ke(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&s,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Fb(){let t=Dn.requestAnimationFrame,i=Dn.cancelAnimationFrame;if(typeof Zone<"u"&&t&&i){const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s);const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function kb(t){const i=()=>{!function Nb(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Dn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,$g(t),t.isCheckStableRunning=!0,zg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),$g(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,c,h,p,b)=>{try{return Ky(t),s.invokeTask(c,h,p,b)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||t.shouldCoalesceRunChangeDetection)&&i(),Zy(t)}},onInvoke:(s,a,c,h,p,b,T)=>{try{return Ky(t),s.invoke(c,h,p,b,T)}finally{t.shouldCoalesceRunChangeDetection&&i(),Zy(t)}},onHasTask:(s,a,c,h)=>{s.hasTask(c,h),a===c&&("microTask"==h.change?(t._hasPendingMicrotasks=h.microTask,$g(t),zg(t)):"macroTask"==h.change&&(t.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,c,h)=>(s.handleError(c,h),t.runOutsideAngular(()=>t.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Do.isInAngularZone())throw new Ke(909,!1)}static assertNotInAngularZone(){if(Do.isInAngularZone())throw new Ke(909,!1)}run(i,s,a){return this._inner.run(i,s,a)}runTask(i,s,a,c){const h=this._inner,p=h.scheduleEventTask("NgZoneEvent: "+c,i,Lb,mf,mf);try{return h.runTask(p,s,a)}finally{h.cancelTask(p)}}runGuarded(i,s,a){return this._inner.runGuarded(i,s,a)}runOutsideAngular(i){return this._outer.run(i)}}const Lb={};function zg(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $g(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Ky(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Zy(t){t._nesting--,zg(t)}class Bb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ra,this.onMicrotaskEmpty=new ra,this.onStable=new ra,this.onError=new ra}run(i,s,a){return i.apply(s,a)}runGuarded(i,s,a){return i.apply(s,a)}runOutsideAngular(i){return i()}runTask(i,s,a,c){return i.apply(s,a)}}const qy=new vi(""),Qy=new vi("");let Wg,Ub=(()=>{class t{constructor(s,a,c){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Wg||(function Hb(t){Wg=t}(c),c.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Do.assertNotInAngularZone(),jg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())jg(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,c){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:c})}whenStable(s,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,c){return[]}}return t.\u0275fac=function(s){return new(s||t)(Re(Do),Re(Jy),Re(Qy))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),Jy=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Wg?.findTestabilityInTree(this,s,a)??null}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Ta=!1;let sl=null;const ev=new vi("AllowMultipleToken"),Yg=new vi("PlatformDestroyListeners"),tv=new vi("appBootstrapListener");class jb{constructor(i,s){this.name=i,this.token=s}}function iv(t,i,s=[]){const a=`Platform: ${i}`,c=new vi(a);return(h=[])=>{let p=Xg();if(!p||p.injector.get(ev,!1)){const b=[...s,...h,{provide:c,useValue:!0}];t?t(b):function zb(t){if(sl&&!sl.get(ev,!1))throw new Ke(400,!1);sl=t;const i=t.get(sv);(function nv(t){const i=t.get(Wy,null);i&&i.forEach(s=>s())})(t)}(function rv(t=[],i){return el.create({name:i,providers:[{provide:Ka,useValue:"platform"},{provide:Yg,useValue:new Set([()=>sl=null])},...t]})}(b,a))}return function Wb(t){const i=Xg();if(!i)throw new Ke(401,!1);return i}()}}function Xg(){return sl?.get(sv)??null}let sv=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const c=function av(t,i){let s;return s="noop"===t?new Bb:("zone.js"===t?void 0:t)||new Do(i),s}(a?.ngZone,function ov(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(a)),h=[{provide:Do,useValue:c}];return c.run(()=>{const p=el.create({providers:h,parent:this.injector,name:s.moduleType.name}),b=s.create(p),T=b.injector.get(Tl,null);if(!T)throw new Ke(402,!1);return c.runOutsideAngular(()=>{const k=c.onError.subscribe({next:z=>{T.handleError(z)}});b.onDestroy(()=>{Ef(this._modules,b),k.unsubscribe()})}),function lv(t,i,s){try{const a=s();return og(a)?a.catch(c=>{throw i.runOutsideAngular(()=>t.handleError(c)),c}):a}catch(a){throw i.runOutsideAngular(()=>t.handleError(a)),a}}(T,c,()=>{const k=b.injector.get(_f);return k.runInitializers(),k.donePromise.then(()=>(function x_(t){Ve(t,"Expected localeId to be defined"),"string"==typeof t&&(C_=t.toLowerCase().replace(/_/g,"-"))}(b.injector.get(yf,Qc)||Qc),this._moduleDoBootstrap(b),b))})})}bootstrapModule(s,a=[]){const c=cv({},a);return function Gb(t,i,s){const a=new Tg(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(s){const a=s.injector.get(vf);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!s.instance.ngDoBootstrap)throw new Ke(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ke(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(Yg,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(s){return new(s||t)(Re(el))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function cv(t,i){return Array.isArray(i)?i.reduce(cv,t):{...t,...i}}let vf=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(s,a,c){this._zone=s,this._injector=a,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new ue.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),p=new ue.y(b=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Do.assertNotInAngularZone(),jg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Do.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{T.unsubscribe(),k.unsubscribe()}});this.isStable=(0,he.T)(h,p.pipe((0,ae.B)()))}bootstrap(s,a){const c=s instanceof Ed;if(!this._injector.get(_f).done){!c&&Er(s);throw new Ke(405,Ta)}let p;p=c?s:this._injector.get(xl).resolveComponentFactory(s),this.componentTypes.push(p.componentType);const b=function Vb(t){return t.isBoundToModule}(p)?void 0:this._injector.get(Jc),k=p.create(el.NULL,[],a||p.selector,b),z=k.location.nativeElement,de=k.injector.get(qy,null);return de?.registerApplication(z),k.onDestroy(()=>{this.detachView(k.hostView),Ef(this.components,k),de?.unregisterApplication(z)}),this._loadComponent(k),k}tick(){if(this._runningTick)throw new Ke(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Ef(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(tv,[]);a.push(...this._bootstrapListeners),a.forEach(c=>c(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Ef(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Ke(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(s){return new(s||t)(Re(Do),Re(ma),Re(Tl))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ef(t,i){const s=t.indexOf(i);s>-1&&t.splice(s,1)}function Xb(){}let Kb=(()=>{class t{}return t.__NG_ELEMENT_ID__=Zb,t})();function Zb(t){return function qb(t,i,s){if(rs(t)&&!s){const a=I(t.index,i);return new jt(a,a)}return 47&t.type?new jt(i[Si],i):null}(cr(),xt(),16==(16&t))}class pv{constructor(){}supports(i){return ef(i)}create(i){return new iw(i)}}const nw=(t,i)=>i;class iw{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||nw}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,a=this._removalsHead,c=0,h=null;for(;s||a;){const p=!a||s&&s.currentIndex<mv(a,c,h)?s:a,b=mv(p,c,h),T=p.currentIndex;if(p===a)c--,a=a._nextRemoved;else if(s=s._next,null==p.previousIndex)c++;else{h||(h=[]);const k=b-c,z=T-c;if(k!=z){for(let Ge=0;Ge<k;Ge++){const et=Ge<h.length?h[Ge]:h[Ge]=0,vt=et+Ge;z<=vt&&vt<k&&(h[Ge]=et+1)}h[p.previousIndex]=z-k}}b!==T&&i(p,b,T)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!ef(i))throw new Ke(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,h,p,s=this._itHead,a=!1;if(Array.isArray(i)){this.length=i.length;for(let b=0;b<this.length;b++)h=i[b],p=this._trackByFn(b,h),null!==s&&Object.is(s.trackById,p)?(a&&(s=this._verifyReinsertion(s,h,p,b)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,p,b),a=!0),s=s._next}else c=0,function xv(t,i){if(Array.isArray(t))for(let s=0;s<t.length;s++)i(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)i(a.value)}}(i,b=>{p=this._trackByFn(c,b),null!==s&&Object.is(s.trackById,p)?(a&&(s=this._verifyReinsertion(s,b,p,c)),Object.is(s.item,b)||this._addIdentityChange(s,b)):(s=this._mismatch(s,b,p,c),a=!0),s=s._next,c++}),this.length=c;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,a,c){let h;return null===i?h=this._itTail:(h=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,h,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,h,c)):i=this._addAfter(new rw(s,a),h,c),i}_verifyReinsertion(i,s,a,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?i=this._reinsertAfter(h,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,h=i._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(i,s,a),this._addToMoves(i,a),i}_moveAfter(i,s,a){return this._unlink(i),this._insertAfter(i,s,a),this._addToMoves(i,a),i}_addAfter(i,s,a){return this._insertAfter(i,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,a){const c=null===s?this._itHead:s._next;return i._next=c,i._prev=s,null===c?this._itTail=i:c._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new gv),this._linkedRecords.put(i),i.currentIndex=a,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,a=i._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gv),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class rw{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sw{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,i))return a;return null}remove(i){const s=i._prevDup,a=i._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class gv{constructor(){this.map=new Map}put(i){const s=i.trackById;let a=this.map.get(s);a||(a=new sw,this.map.set(s,a)),a.add(i)}get(i,s){const c=this.map.get(i);return c?c.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mv(t,i,s){const a=t.previousIndex;if(null===a)return a;let c=0;return s&&a<s.length&&(c=s[a]),a+i+c}class _v{constructor(){}supports(i){return i instanceof Map||Jp(i)}create(){return new ow}}class ow{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||Jp(i)))throw new Ke(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(a,c)=>{if(s&&s.key===c)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(c,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const a=i._prev;return s._next=i,s._prev=a,i._prev=s,a&&(a._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,s);const h=c._prev,p=c._next;return h&&(h._next=p),p&&(p._prev=h),c._next=null,c._prev=null,c}const a=new aw(i);return this._records.set(i,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(a=>s(i[a],a))}}class aw{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yv(){return new Jg([new pv])}let Jg=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(null!=a){const c=a.factories.slice();s=s.concat(c)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||yv()),deps:[[t,new ka,new yr]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(null!=a)return a;throw new Ke(901,!1)}}return t.\u0275prov=Ue({token:t,providedIn:"root",factory:yv}),t})();function vv(){return new em([new _v])}let em=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(a){const c=a.factories.slice();s=s.concat(c)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||vv()),deps:[[t,new ka,new yr]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(a)return a;throw new Ke(901,!1)}}return t.\u0275prov=Ue({token:t,providedIn:"root",factory:vv}),t})();const uw=iv(null,"core",[]);let hw=(()=>{class t{constructor(s){}}return t.\u0275fac=function(s){return new(s||t)(Re(vf))},t.\u0275mod=Nt({type:t}),t.\u0275inj=pt({}),t})();function dw(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}},3238:(Mt,ke,F)=>{"use strict";F.d(ke,{BQ:()=>Xe,pj:()=>xe});var w=F(4650),D=F(2016),ue=F(445),ae=F(6895),ee=F(3353),ve=F(1281);const Ct=new w.OlP("mat-sanity-checks",{providedIn:"root",factory:function st(){return!0}});let Xe=(()=>{class Ft{constructor(Be,Te,re){this._sanityChecks=Te,this._document=re,this._hasDoneGlobalChecks=!1,Be._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(Be){return!(0,ee.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[Be])}}return Ft.\u0275fac=function(Be){return new(Be||Ft)(w.LFG(D.qm),w.LFG(Ct,8),w.LFG(ae.K0))},Ft.\u0275mod=w.oAB({type:Ft}),Ft.\u0275inj=w.cJS({imports:[ue.vT,ue.vT]}),Ft})();function xe(Ft,Re){return class extends Ft{get color(){return this._color}set color(Be){const Te=Be||this.defaultColor;Te!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),Te&&this._elementRef.nativeElement.classList.add(`mat-${Te}`),this._color=Te)}constructor(...Be){super(...Be),this.defaultColor=Re,this.color=Re}}}class Kt{constructor(Re,Be,Te,re=!1){this._renderer=Re,this.element=Be,this.config=Te,this._animationForciblyDisabledThroughCss=re,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const dn=(0,ee.i$)({passive:!0,capture:!0});class vn{constructor(){this._events=new Map,this._delegateEventHandler=Re=>{const Be=(0,ee.sA)(Re);Be&&this._events.get(Re.type)?.forEach((Te,re)=>{(re===Be||re.contains(Be))&&Te.forEach(Me=>Me.handleEvent(Re))})}}addHandler(Re,Be,Te,re){const Me=this._events.get(Be);if(Me){const Et=Me.get(Te);Et?Et.add(re):Me.set(Te,new Set([re]))}else this._events.set(Be,new Map([[Te,new Set([re])]])),Re.runOutsideAngular(()=>{document.addEventListener(Be,this._delegateEventHandler,dn)})}removeHandler(Re,Be,Te){const re=this._events.get(Re);if(!re)return;const Me=re.get(Be);Me&&(Me.delete(Te),0===Me.size&&re.delete(Be),0===re.size&&(this._events.delete(Re),document.removeEventListener(Re,this._delegateEventHandler,dn)))}}const $t={enterDuration:225,exitDuration:150},Un=(0,ee.i$)({passive:!0,capture:!0}),ln=["mousedown","touchstart"],ii=["mouseup","mouseleave","touchend","touchcancel"];class Bn{constructor(Re,Be,Te,re){this._target=Re,this._ngZone=Be,this._platform=re,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,re.isBrowser&&(this._containerElement=(0,ve.fI)(Te))}fadeInRipple(Re,Be,Te={}){const re=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Me={...$t,...Te.animation};Te.centered&&(Re=re.left+re.width/2,Be=re.top+re.height/2);const Et=Te.radius||function Wt(Ft,Re,Be){const Te=Math.max(Math.abs(Ft-Be.left),Math.abs(Ft-Be.right)),re=Math.max(Math.abs(Re-Be.top),Math.abs(Re-Be.bottom));return Math.sqrt(Te*Te+re*re)}(Re,Be,re),mt=Re-re.left,_n=Be-re.top,Hn=Me.enterDuration,Cn=document.createElement("div");Cn.classList.add("mat-ripple-element"),Cn.style.left=mt-Et+"px",Cn.style.top=_n-Et+"px",Cn.style.height=2*Et+"px",Cn.style.width=2*Et+"px",null!=Te.color&&(Cn.style.backgroundColor=Te.color),Cn.style.transitionDuration=`${Hn}ms`,this._containerElement.appendChild(Cn);const un=window.getComputedStyle(Cn),ei=un.transitionDuration,Oe="none"===un.transitionProperty||"0s"===ei||"0s, 0s"===ei||0===re.width&&0===re.height,Ie=new Kt(this,Cn,Te,Oe);Cn.style.transform="scale3d(1, 1, 1)",Ie.state=0,Te.persistent||(this._mostRecentTransientRipple=Ie);let ie=null;return!Oe&&(Hn||Me.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ne=()=>this._finishRippleTransition(Ie),ht=()=>this._destroyRipple(Ie);Cn.addEventListener("transitionend",Ne),Cn.addEventListener("transitioncancel",ht),ie={onTransitionEnd:Ne,onTransitionCancel:ht}}),this._activeRipples.set(Ie,ie),(Oe||!Hn)&&this._finishRippleTransition(Ie),Ie}fadeOutRipple(Re){if(2===Re.state||3===Re.state)return;const Be=Re.element,Te={...$t,...Re.config.animation};Be.style.transitionDuration=`${Te.exitDuration}ms`,Be.style.opacity="0",Re.state=2,(Re._animationForciblyDisabledThroughCss||!Te.exitDuration)&&this._finishRippleTransition(Re)}fadeOutAll(){this._getActiveRipples().forEach(Re=>Re.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(Re=>{Re.config.persistent||Re.fadeOut()})}setupTriggerEvents(Re){const Be=(0,ve.fI)(Re);!this._platform.isBrowser||!Be||Be===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=Be,ln.forEach(Te=>{Bn._eventManager.addHandler(this._ngZone,Te,Be,this)}))}handleEvent(Re){"mousedown"===Re.type?this._onMousedown(Re):"touchstart"===Re.type?this._onTouchStart(Re):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{ii.forEach(Be=>{this._triggerElement.addEventListener(Be,this,Un)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(Re){0===Re.state?this._startFadeOutTransition(Re):2===Re.state&&this._destroyRipple(Re)}_startFadeOutTransition(Re){const Be=Re===this._mostRecentTransientRipple,{persistent:Te}=Re.config;Re.state=1,!Te&&(!Be||!this._isPointerDown)&&Re.fadeOut()}_destroyRipple(Re){const Be=this._activeRipples.get(Re)??null;this._activeRipples.delete(Re),this._activeRipples.size||(this._containerRect=null),Re===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),Re.state=3,null!==Be&&(Re.element.removeEventListener("transitionend",Be.onTransitionEnd),Re.element.removeEventListener("transitioncancel",Be.onTransitionCancel)),Re.element.remove()}_onMousedown(Re){const Be=(0,D.X6)(Re),Te=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!Be&&!Te&&(this._isPointerDown=!0,this.fadeInRipple(Re.clientX,Re.clientY,this._target.rippleConfig))}_onTouchStart(Re){if(!this._target.rippleDisabled&&!(0,D.yG)(Re)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const Be=Re.changedTouches;for(let Te=0;Te<Be.length;Te++)this.fadeInRipple(Be[Te].clientX,Be[Te].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(Re=>{!Re.config.persistent&&(1===Re.state||Re.config.terminateOnPointerUp&&0===Re.state)&&Re.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const Re=this._triggerElement;Re&&(ln.forEach(Be=>Bn._eventManager.removeHandler(Be,Re,this)),this._pointerUpEventsRegistered&&ii.forEach(Be=>Re.removeEventListener(Be,this,Un)))}}Bn._eventManager=new vn},3903:(Mt,ke,F)=>{"use strict";F.d(ke,{Bq:()=>ji,uw:()=>co,ZT:()=>os,Is:()=>li,so:()=>Rr});var w=F(1281),D=F(4650),ue=F(7579),he=F(9646),ae=F(9751),ee=F(8421),ve=F(5577),ce=F(1144),Ce=F(576),Le=F(3268);const Pe=["addListener","removeListener"],Ae=["addEventListener","removeEventListener"],it=["on","off"];function $e(X,I,E,N){if((0,Ce.m)(E)&&(N=E,E=void 0),N)return $e(X,I,E).pipe((0,Le.Z)(N));const[q,ye]=function bt(X){return(0,Ce.m)(X.addEventListener)&&(0,Ce.m)(X.removeEventListener)}(X)?Ae.map(Qe=>_t=>X[Qe](I,_t,E)):function Tt(X){return(0,Ce.m)(X.addListener)&&(0,Ce.m)(X.removeListener)}(X)?Pe.map(gt(X,I)):function Ke(X){return(0,Ce.m)(X.on)&&(0,Ce.m)(X.off)}(X)?it.map(gt(X,I)):[];if(!q&&(0,ce.z)(X))return(0,ve.z)(Qe=>$e(Qe,I,E))((0,ee.Xf)(X));if(!q)throw new TypeError("Invalid event target");return new ae.y(Qe=>{const _t=(...ct)=>Qe.next(1<ct.length?ct:ct[0]);return q(_t),()=>ye(_t)})}function gt(X,I){return E=>N=>X[E](I,N)}var st=F(4408),Ct=F(727);const Xe={schedule(X){let I=requestAnimationFrame,E=cancelAnimationFrame;const{delegate:N}=Xe;N&&(I=N.requestAnimationFrame,E=N.cancelAnimationFrame);const q=I(ye=>{E=void 0,X(ye)});return new Ct.w0(()=>E?.(q))},requestAnimationFrame(...X){const{delegate:I}=Xe;return(I?.requestAnimationFrame||requestAnimationFrame)(...X)},cancelAnimationFrame(...X){const{delegate:I}=Xe;return(I?.cancelAnimationFrame||cancelAnimationFrame)(...X)},delegate:void 0};var dt=F(7565);const at=new class He extends dt.v{flush(I){this._active=!0;const E=this._scheduled;this._scheduled=void 0;const{actions:N}=this;let q;I=I||N.shift();do{if(q=I.execute(I.state,I.delay))break}while((I=N[0])&&I.id===E&&N.shift());if(this._active=!1,q){for(;(I=N[0])&&I.id===E&&N.shift();)I.unsubscribe();throw q}}}(class ne extends st.o{constructor(I,E){super(I,E),this.scheduler=I,this.work=E}requestAsyncId(I,E,N=0){return null!==N&&N>0?super.requestAsyncId(I,E,N):(I.actions.push(this),I._scheduled||(I._scheduled=Xe.requestAnimationFrame(()=>I.flush(void 0))))}recycleAsyncId(I,E,N=0){var q;if(null!=N?N>0:this.delay>0)return super.recycleAsyncId(I,E,N);const{actions:ye}=I;null!=E&&(null===(q=ye[ye.length-1])||void 0===q?void 0:q.id)!==E&&(Xe.cancelAnimationFrame(E),I._scheduled=void 0)}});let Ot,wt=1;const Rt={};function en(X){return X in Rt&&(delete Rt[X],!0)}const W={setImmediate(X){const I=wt++;return Rt[I]=!0,Ot||(Ot=Promise.resolve()),Ot.then(()=>en(I)&&X()),I},clearImmediate(X){en(X)}},{setImmediate:Y,clearImmediate:we}=W,Se={setImmediate(...X){const{delegate:I}=Se;return(I?.setImmediate||Y)(...X)},clearImmediate(X){const{delegate:I}=Se;return(I?.clearImmediate||we)(X)},delegate:void 0},Ve=new class me extends dt.v{flush(I){this._active=!0;const E=this._scheduled;this._scheduled=void 0;const{actions:N}=this;let q;I=I||N.shift();do{if(q=I.execute(I.state,I.delay))break}while((I=N[0])&&I.id===E&&N.shift());if(this._active=!1,q){for(;(I=N[0])&&I.id===E&&N.shift();)I.unsubscribe();throw q}}}(class fe extends st.o{constructor(I,E){super(I,E),this.scheduler=I,this.work=E}requestAsyncId(I,E,N=0){return null!==N&&N>0?super.requestAsyncId(I,E,N):(I.actions.push(this),I._scheduled||(I._scheduled=Se.setImmediate(I.flush.bind(I,void 0))))}recycleAsyncId(I,E,N=0){var q;if(null!=N?N>0:this.delay>0)return super.recycleAsyncId(I,E,N);const{actions:ye}=I;null!=E&&(null===(q=ye[ye.length-1])||void 0===q?void 0:q.id)!==E&&(Se.clearImmediate(E),I._scheduled=void 0)}});var Ze=F(4986),Q=F(4482),Ee=F(5403),Ye=F(3532);function Kt(X,I=Ze.z){return function Ue(X){return(0,Q.e)((I,E)=>{let N=!1,q=null,ye=null,Qe=!1;const _t=()=>{if(ye?.unsubscribe(),ye=null,N){N=!1;const on=q;q=null,E.next(on)}Qe&&E.complete()},ct=()=>{ye=null,Qe&&E.complete()};I.subscribe((0,Ee.x)(E,on=>{N=!0,q=on,ye||(0,ee.Xf)(X(on)).subscribe(ye=(0,Ee.x)(E,_t,ct))},()=>{Qe=!0,(!N||!ye||ye.closed)&&E.complete()}))})}(()=>function zt(X=0,I,E=Ze.P){let N=-1;return null!=I&&((0,Ye.K)(I)?E=I:N=I),new ae.y(q=>{let ye=function pt(X){return X instanceof Date&&!isNaN(X)}(X)?+X-E.now():X;ye<0&&(ye=0);let Qe=0;return E.schedule(function(){q.closed||(q.next(Qe++),0<=N?this.schedule(void 0,N):q.complete())},ye)})}(X,I))}var dn=F(9300),vn=F(2722),$t=F(8675),St=F(3353),Un=F(6895),ln=F(445);const ii=["contentWrapper"],Bn=["*"],Wt=new D.OlP("VIRTUAL_SCROLL_STRATEGY");let fr=(()=>{class X{constructor(E,N,q){this._ngZone=E,this._platform=N,this._scrolled=new ue.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=q}register(E){this.scrollContainers.has(E)||this.scrollContainers.set(E,E.elementScrolled().subscribe(()=>this._scrolled.next(E)))}deregister(E){const N=this.scrollContainers.get(E);N&&(N.unsubscribe(),this.scrollContainers.delete(E))}scrolled(E=20){return this._platform.isBrowser?new ae.y(N=>{this._globalSubscription||this._addGlobalListener();const q=E>0?this._scrolled.pipe(Kt(E)).subscribe(N):this._scrolled.subscribe(N);return this._scrolledCount++,()=>{q.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,he.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((E,N)=>this.deregister(N)),this._scrolled.complete()}ancestorScrolled(E,N){const q=this.getAncestorScrollContainers(E);return this.scrolled(N).pipe((0,dn.h)(ye=>!ye||q.indexOf(ye)>-1))}getAncestorScrollContainers(E){const N=[];return this.scrollContainers.forEach((q,ye)=>{this._scrollableContainsElement(ye,E)&&N.push(ye)}),N}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(E,N){let q=(0,w.fI)(N),ye=E.getElementRef().nativeElement;do{if(q==ye)return!0}while(q=q.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>$e(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return X.\u0275fac=function(E){return new(E||X)(D.LFG(D.R0b),D.LFG(St.t4),D.LFG(Un.K0,8))},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})(),Dn=(()=>{class X{constructor(E,N,q,ye){this.elementRef=E,this.scrollDispatcher=N,this.ngZone=q,this.dir=ye,this._destroyed=new ue.x,this._elementScrolled=new ae.y(Qe=>this.ngZone.runOutsideAngular(()=>$e(this.elementRef.nativeElement,"scroll").pipe((0,vn.R)(this._destroyed)).subscribe(Qe)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(E){const N=this.elementRef.nativeElement,q=this.dir&&"rtl"==this.dir.value;null==E.left&&(E.left=q?E.end:E.start),null==E.right&&(E.right=q?E.start:E.end),null!=E.bottom&&(E.top=N.scrollHeight-N.clientHeight-E.bottom),q&&0!=(0,St._i)()?(null!=E.left&&(E.right=N.scrollWidth-N.clientWidth-E.left),2==(0,St._i)()?E.left=E.right:1==(0,St._i)()&&(E.left=E.right?-E.right:E.right)):null!=E.right&&(E.left=N.scrollWidth-N.clientWidth-E.right),this._applyScrollToOptions(E)}_applyScrollToOptions(E){const N=this.elementRef.nativeElement;(0,St.Mq)()?N.scrollTo(E):(null!=E.top&&(N.scrollTop=E.top),null!=E.left&&(N.scrollLeft=E.left))}measureScrollOffset(E){const N="left",q="right",ye=this.elementRef.nativeElement;if("top"==E)return ye.scrollTop;if("bottom"==E)return ye.scrollHeight-ye.clientHeight-ye.scrollTop;const Qe=this.dir&&"rtl"==this.dir.value;return"start"==E?E=Qe?q:N:"end"==E&&(E=Qe?N:q),Qe&&2==(0,St._i)()?E==N?ye.scrollWidth-ye.clientWidth-ye.scrollLeft:ye.scrollLeft:Qe&&1==(0,St._i)()?E==N?ye.scrollLeft+ye.scrollWidth-ye.clientWidth:-ye.scrollLeft:E==N?ye.scrollLeft:ye.scrollWidth-ye.clientWidth-ye.scrollLeft}}return X.\u0275fac=function(E){return new(E||X)(D.Y36(D.SBq),D.Y36(fr),D.Y36(D.R0b),D.Y36(ln.Is,8))},X.\u0275dir=D.lG2({type:X,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),X})(),Gt=(()=>{class X{constructor(E,N,q){this._platform=E,this._change=new ue.x,this._changeListener=ye=>{this._change.next(ye)},this._document=q,N.runOutsideAngular(()=>{if(E.isBrowser){const ye=this._getWindow();ye.addEventListener("resize",this._changeListener),ye.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const E=this._getWindow();E.removeEventListener("resize",this._changeListener),E.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const E={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),E}getViewportRect(){const E=this.getViewportScrollPosition(),{width:N,height:q}=this.getViewportSize();return{top:E.top,left:E.left,bottom:E.top+q,right:E.left+N,height:q,width:N}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const E=this._document,N=this._getWindow(),q=E.documentElement,ye=q.getBoundingClientRect();return{top:-ye.top||E.body.scrollTop||N.scrollY||q.scrollTop||0,left:-ye.left||E.body.scrollLeft||N.scrollX||q.scrollLeft||0}}change(E=20){return E>0?this._change.pipe(Kt(E)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const E=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:E.innerWidth,height:E.innerHeight}:{width:0,height:0}}}return X.\u0275fac=function(E){return new(E||X)(D.LFG(St.t4),D.LFG(D.R0b),D.LFG(Un.K0,8))},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})();const Gi=new D.OlP("VIRTUAL_SCROLLABLE");let Li=(()=>{class X extends Dn{constructor(E,N,q,ye){super(E,N,q,ye)}measureViewportSize(E){const N=this.elementRef.nativeElement;return"horizontal"===E?N.clientWidth:N.clientHeight}}return X.\u0275fac=function(E){return new(E||X)(D.Y36(D.SBq),D.Y36(fr),D.Y36(D.R0b),D.Y36(ln.Is,8))},X.\u0275dir=D.lG2({type:X,features:[D.qOj]}),X})();const gn=typeof requestAnimationFrame<"u"?at:Ve;let Ci=(()=>{class X extends Li{get orientation(){return this._orientation}set orientation(E){this._orientation!==E&&(this._orientation=E,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(E){this._appendOnly=(0,w.Ig)(E)}constructor(E,N,q,ye,Qe,_t,ct,on){super(E,_t,q,Qe),this.elementRef=E,this._changeDetectorRef=N,this._scrollStrategy=ye,this.scrollable=on,this._platform=(0,D.f3M)(St.t4),this._detachedSubject=new ue.x,this._renderedRangeSubject=new ue.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new ae.y(bn=>this._scrollStrategy.scrolledIndexChange.subscribe(qn=>Promise.resolve().then(()=>this.ngZone.run(()=>bn.next(qn))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Ct.w0.EMPTY,this._viewportChanges=ct.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,$t.O)(null),Kt(0,gn)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(E){this.ngZone.runOutsideAngular(()=>{this._forOf=E,this._forOf.dataStream.pipe((0,vn.R)(this._detachedSubject)).subscribe(N=>{const q=N.length;q!==this._dataLength&&(this._dataLength=q,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(E){return this.getElementRef().nativeElement.getBoundingClientRect()[E]}setTotalContentSize(E){this._totalContentSize!==E&&(this._totalContentSize=E,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(E){(function ri(X,I){return X.start==I.start&&X.end==I.end})(this._renderedRange,E)||(this.appendOnly&&(E={start:0,end:Math.max(this._renderedRange.end,E.end)}),this._renderedRangeSubject.next(this._renderedRange=E),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(E,N="to-start"){E=this.appendOnly&&"to-start"===N?0:E;const ye="horizontal"==this.orientation,Qe=ye?"X":"Y";let ct=`translate${Qe}(${Number((ye&&this.dir&&"rtl"==this.dir.value?-1:1)*E)}px)`;this._renderedContentOffset=E,"to-end"===N&&(ct+=` translate${Qe}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=ct&&(this._renderedContentTransform=ct,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(E,N="auto"){const q={behavior:N};"horizontal"===this.orientation?q.start=E:q.top=E,this.scrollable.scrollTo(q)}scrollToIndex(E,N="auto"){this._scrollStrategy.scrollToIndex(E,N)}measureScrollOffset(E){let N;return N=this.scrollable==this?q=>super.measureScrollOffset(q):q=>this.scrollable.measureScrollOffset(q),Math.max(0,N(E??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(E){let N;const q="left",Qe="rtl"==this.dir?.value;N="start"==E?Qe?"right":q:"end"==E?Qe?q:"right":E||("horizontal"===this.orientation?"left":"top");const _t=this.scrollable.measureBoundingClientRectWithScrollOffset(N);return this.elementRef.nativeElement.getBoundingClientRect()[N]-_t}measureRenderedContentSize(){const E=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?E.offsetWidth:E.offsetHeight}measureRangeSize(E){return this._forOf?this._forOf.measureRangeSize(E,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(E){E&&this._runAfterChangeDetection.push(E),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const E=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const N of E)N()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return X.\u0275fac=function(E){return new(E||X)(D.Y36(D.SBq),D.Y36(D.sBO),D.Y36(D.R0b),D.Y36(Wt,8),D.Y36(ln.Is,8),D.Y36(fr),D.Y36(Gt),D.Y36(Gi,8))},X.\u0275cmp=D.Xpm({type:X,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(E,N){if(1&E&&D.Gf(ii,7),2&E){let q;D.iGM(q=D.CRH())&&(N._contentWrapper=q.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(E,N){2&E&&D.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===N.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==N.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[D._Bn([{provide:Dn,useFactory:(I,E)=>I||E,deps:[[new D.FiY,new D.tBr(Gi)],X]}]),D.qOj,D.jDz],ngContentSelectors:Bn,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(E,N){1&E&&(D.F$t(),D.TgZ(0,"div",0,1),D.Hsn(2),D.qZA(),D._UZ(3,"div",2)),2&E&&(D.xp6(3),D.Udp("width",N._totalContentWidth)("height",N._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),X})(),Ii=(()=>{class X{}return X.\u0275fac=function(E){return new(E||X)},X.\u0275mod=D.oAB({type:X}),X.\u0275inj=D.cJS({}),X})(),Ft=(()=>{class X{}return X.\u0275fac=function(E){return new(E||X)},X.\u0275mod=D.oAB({type:X}),X.\u0275inj=D.cJS({imports:[ln.vT,Ii,Ci,ln.vT,Ii]}),X})();class mt{attach(I){return this._attachedHost=I,I.attach(this)}detach(){let I=this._attachedHost;null!=I&&(this._attachedHost=null,I.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(I){this._attachedHost=I}}class _n extends mt{constructor(I,E,N,q,ye){super(),this.component=I,this.viewContainerRef=E,this.injector=N,this.componentFactoryResolver=q,this.projectableNodes=ye}}class Hn extends mt{constructor(I,E,N,q){super(),this.templateRef=I,this.viewContainerRef=E,this.context=N,this.injector=q}get origin(){return this.templateRef.elementRef}attach(I,E=this.context){return this.context=E,super.attach(I)}detach(){return this.context=void 0,super.detach()}}class Cn extends mt{constructor(I){super(),this.element=I instanceof D.SBq?I.nativeElement:I}}class un{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(I){return I instanceof _n?(this._attachedPortal=I,this.attachComponentPortal(I)):I instanceof Hn?(this._attachedPortal=I,this.attachTemplatePortal(I)):this.attachDomPortal&&I instanceof Cn?(this._attachedPortal=I,this.attachDomPortal(I)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(I){this._disposeFn=I}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ei extends un{constructor(I,E,N,q,ye){super(),this.outletElement=I,this._componentFactoryResolver=E,this._appRef=N,this._defaultInjector=q,this.attachDomPortal=Qe=>{const _t=Qe.element,ct=this._document.createComment("dom-portal");_t.parentNode.insertBefore(ct,_t),this.outletElement.appendChild(_t),this._attachedPortal=Qe,super.setDisposeFn(()=>{ct.parentNode&&ct.parentNode.replaceChild(_t,ct)})},this._document=ye}attachComponentPortal(I){const N=(I.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(I.component);let q;return I.viewContainerRef?(q=I.viewContainerRef.createComponent(N,I.viewContainerRef.length,I.injector||I.viewContainerRef.injector,I.projectableNodes||void 0),this.setDisposeFn(()=>q.destroy())):(q=N.create(I.injector||this._defaultInjector||D.zs3.NULL),this._appRef.attachView(q.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(q.hostView),q.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(q)),this._attachedPortal=I,q}attachTemplatePortal(I){let E=I.viewContainerRef,N=E.createEmbeddedView(I.templateRef,I.context,{injector:I.injector});return N.rootNodes.forEach(q=>this.outletElement.appendChild(q)),N.detectChanges(),this.setDisposeFn(()=>{let q=E.indexOf(N);-1!==q&&E.remove(q)}),this._attachedPortal=I,N}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(I){return I.hostView.rootNodes[0]}}let Ne=(()=>{class X extends un{constructor(E,N,q){super(),this._componentFactoryResolver=E,this._viewContainerRef=N,this._isInitialized=!1,this.attached=new D.vpe,this.attachDomPortal=ye=>{const Qe=ye.element,_t=this._document.createComment("dom-portal");ye.setAttachedHost(this),Qe.parentNode.insertBefore(_t,Qe),this._getRootNode().appendChild(Qe),this._attachedPortal=ye,super.setDisposeFn(()=>{_t.parentNode&&_t.parentNode.replaceChild(Qe,_t)})},this._document=q}get portal(){return this._attachedPortal}set portal(E){this.hasAttached()&&!E&&!this._isInitialized||(this.hasAttached()&&super.detach(),E&&super.attach(E),this._attachedPortal=E||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(E){E.setAttachedHost(this);const N=null!=E.viewContainerRef?E.viewContainerRef:this._viewContainerRef,ye=(E.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(E.component),Qe=N.createComponent(ye,N.length,E.injector||N.injector,E.projectableNodes||void 0);return N!==this._viewContainerRef&&this._getRootNode().appendChild(Qe.hostView.rootNodes[0]),super.setDisposeFn(()=>Qe.destroy()),this._attachedPortal=E,this._attachedRef=Qe,this.attached.emit(Qe),Qe}attachTemplatePortal(E){E.setAttachedHost(this);const N=this._viewContainerRef.createEmbeddedView(E.templateRef,E.context,{injector:E.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=E,this._attachedRef=N,this.attached.emit(N),N}_getRootNode(){const E=this._viewContainerRef.element.nativeElement;return E.nodeType===E.ELEMENT_NODE?E:E.parentNode}}return X.\u0275fac=function(E){return new(E||X)(D.Y36(D._Vd),D.Y36(D.s_b),D.Y36(Un.K0))},X.\u0275dir=D.lG2({type:X,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[D.qOj]}),X})(),Lt=(()=>{class X{}return X.\u0275fac=function(E){return new(E||X)},X.\u0275mod=D.oAB({type:X}),X.\u0275inj=D.cJS({}),X})();var Fe=F(6451),be=F(5698);const se=(0,St.Mq)();class We{constructor(I,E){this._viewportRuler=I,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=E}attach(){}enable(){if(this._canBeEnabled()){const I=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=I.style.left||"",this._previousHTMLStyles.top=I.style.top||"",I.style.left=(0,w.HM)(-this._previousScrollPosition.left),I.style.top=(0,w.HM)(-this._previousScrollPosition.top),I.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const I=this._document.documentElement,N=I.style,q=this._document.body.style,ye=N.scrollBehavior||"",Qe=q.scrollBehavior||"";this._isEnabled=!1,N.left=this._previousHTMLStyles.left,N.top=this._previousHTMLStyles.top,I.classList.remove("cdk-global-scrollblock"),se&&(N.scrollBehavior=q.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),se&&(N.scrollBehavior=ye,q.scrollBehavior=Qe)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const E=this._document.body,N=this._viewportRuler.getViewportSize();return E.scrollHeight>N.height||E.scrollWidth>N.width}}class Nt{constructor(I,E,N,q){this._scrollDispatcher=I,this._ngZone=E,this._viewportRuler=N,this._config=q,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(I){this._overlayRef=I}enable(){if(this._scrollSubscription)return;const I=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=I.subscribe(()=>{const E=this._viewportRuler.getViewportScrollPosition().top;Math.abs(E-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=I.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class an{enable(){}disable(){}attach(){}}function An(X,I){return I.some(E=>X.bottom<E.top||X.top>E.bottom||X.right<E.left||X.left>E.right)}function bi(X,I){return I.some(E=>X.top<E.top||X.bottom>E.bottom||X.left<E.left||X.right>E.right)}class ci{constructor(I,E,N,q){this._scrollDispatcher=I,this._viewportRuler=E,this._ngZone=N,this._config=q,this._scrollSubscription=null}attach(I){this._overlayRef=I}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const E=this._overlayRef.overlayElement.getBoundingClientRect(),{width:N,height:q}=this._viewportRuler.getViewportSize();An(E,[{width:N,height:q,bottom:q,right:N,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let $n=(()=>{class X{constructor(E,N,q,ye){this._scrollDispatcher=E,this._viewportRuler=N,this._ngZone=q,this.noop=()=>new an,this.close=Qe=>new Nt(this._scrollDispatcher,this._ngZone,this._viewportRuler,Qe),this.block=()=>new We(this._viewportRuler,this._document),this.reposition=Qe=>new ci(this._scrollDispatcher,this._viewportRuler,this._ngZone,Qe),this._document=ye}}return X.\u0275fac=function(E){return new(E||X)(D.LFG(fr),D.LFG(Gt),D.LFG(D.R0b),D.LFG(Un.K0))},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})();class xi{constructor(I){if(this.scrollStrategy=new an,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,I){const E=Object.keys(I);for(const N of E)void 0!==I[N]&&(this[N]=I[N])}}}class or{constructor(I,E){this.connectionPair=I,this.scrollableViewProperties=E}}let Sn=(()=>{class X{constructor(E){this._attachedOverlays=[],this._document=E}ngOnDestroy(){this.detach()}add(E){this.remove(E),this._attachedOverlays.push(E)}remove(E){const N=this._attachedOverlays.indexOf(E);N>-1&&this._attachedOverlays.splice(N,1),0===this._attachedOverlays.length&&this.detach()}}return X.\u0275fac=function(E){return new(E||X)(D.LFG(Un.K0))},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})(),ui=(()=>{class X extends Sn{constructor(E,N){super(E),this._ngZone=N,this._keydownListener=q=>{const ye=this._attachedOverlays;for(let Qe=ye.length-1;Qe>-1;Qe--)if(ye[Qe]._keydownEvents.observers.length>0){const _t=ye[Qe]._keydownEvents;this._ngZone?this._ngZone.run(()=>_t.next(q)):_t.next(q);break}}}add(E){super.add(E),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return X.\u0275fac=function(E){return new(E||X)(D.LFG(Un.K0),D.LFG(D.R0b,8))},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})(),Ti=(()=>{class X extends Sn{constructor(E,N,q){super(E),this._platform=N,this._ngZone=q,this._cursorStyleIsSet=!1,this._pointerDownListener=ye=>{this._pointerDownEventTarget=(0,St.sA)(ye)},this._clickListener=ye=>{const Qe=(0,St.sA)(ye),_t="click"===ye.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Qe;this._pointerDownEventTarget=null;const ct=this._attachedOverlays.slice();for(let on=ct.length-1;on>-1;on--){const bn=ct[on];if(bn._outsidePointerEvents.observers.length<1||!bn.hasAttached())continue;if(bn.overlayElement.contains(Qe)||bn.overlayElement.contains(_t))break;const qn=bn._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>qn.next(ye)):qn.next(ye)}}}add(E){if(super.add(E),!this._isAttached){const N=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(N)):this._addEventListeners(N),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=N.style.cursor,N.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const E=this._document.body;E.removeEventListener("pointerdown",this._pointerDownListener,!0),E.removeEventListener("click",this._clickListener,!0),E.removeEventListener("auxclick",this._clickListener,!0),E.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(E.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(E){E.addEventListener("pointerdown",this._pointerDownListener,!0),E.addEventListener("click",this._clickListener,!0),E.addEventListener("auxclick",this._clickListener,!0),E.addEventListener("contextmenu",this._clickListener,!0)}}return X.\u0275fac=function(E){return new(E||X)(D.LFG(Un.K0),D.LFG(St.t4),D.LFG(D.R0b,8))},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})(),nr=(()=>{class X{constructor(E,N){this._platform=N,this._document=E}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const E="cdk-overlay-container";if(this._platform.isBrowser||(0,St.Oy)()){const q=this._document.querySelectorAll(`.${E}[platform="server"], .${E}[platform="test"]`);for(let ye=0;ye<q.length;ye++)q[ye].remove()}const N=this._document.createElement("div");N.classList.add(E),(0,St.Oy)()?N.setAttribute("platform","test"):this._platform.isBrowser||N.setAttribute("platform","server"),this._document.body.appendChild(N),this._containerElement=N}}return X.\u0275fac=function(E){return new(E||X)(D.LFG(Un.K0),D.LFG(St.t4))},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})();class pi{constructor(I,E,N,q,ye,Qe,_t,ct,on,bn=!1){this._portalOutlet=I,this._host=E,this._pane=N,this._config=q,this._ngZone=ye,this._keyboardDispatcher=Qe,this._document=_t,this._location=ct,this._outsideClickDispatcher=on,this._animationsDisabled=bn,this._backdropElement=null,this._backdropClick=new ue.x,this._attachments=new ue.x,this._detachments=new ue.x,this._locationChanges=Ct.w0.EMPTY,this._backdropClickHandler=qn=>this._backdropClick.next(qn),this._backdropTransitionendHandler=qn=>{this._disposeBackdrop(qn.target)},this._keydownEvents=new ue.x,this._outsidePointerEvents=new ue.x,q.scrollStrategy&&(this._scrollStrategy=q.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=q.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(I){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const E=this._portalOutlet.attach(I);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,be.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof E?.onDestroy&&E.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),E}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const I=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),I}dispose(){const I=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,I&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(I){I!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=I,this.hasAttached()&&(I.attach(this),this.updatePosition()))}updateSize(I){this._config={...this._config,...I},this._updateElementSize()}setDirection(I){this._config={...this._config,direction:I},this._updateElementDirection()}addPanelClass(I){this._pane&&this._toggleClasses(this._pane,I,!0)}removePanelClass(I){this._pane&&this._toggleClasses(this._pane,I,!1)}getDirection(){const I=this._config.direction;return I?"string"==typeof I?I:I.value:"ltr"}updateScrollStrategy(I){I!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=I,this.hasAttached()&&(I.attach(this),I.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const I=this._pane.style;I.width=(0,w.HM)(this._config.width),I.height=(0,w.HM)(this._config.height),I.minWidth=(0,w.HM)(this._config.minWidth),I.minHeight=(0,w.HM)(this._config.minHeight),I.maxWidth=(0,w.HM)(this._config.maxWidth),I.maxHeight=(0,w.HM)(this._config.maxHeight)}_togglePointerEvents(I){this._pane.style.pointerEvents=I?"":"none"}_attachBackdrop(){const I="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(I)})}):this._backdropElement.classList.add(I)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const I=this._backdropElement;if(I){if(this._animationsDisabled)return void this._disposeBackdrop(I);I.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{I.addEventListener("transitionend",this._backdropTransitionendHandler)}),I.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(I)},500))}}_toggleClasses(I,E,N){const q=(0,w.Eq)(E||[]).filter(ye=>!!ye);q.length&&(N?I.classList.add(...q):I.classList.remove(...q))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const I=this._ngZone.onStable.pipe((0,vn.R)((0,Fe.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),I.unsubscribe())})})}_disposeScrollStrategy(){const I=this._scrollStrategy;I&&(I.disable(),I.detach&&I.detach())}_disposeBackdrop(I){I&&(I.removeEventListener("click",this._backdropClickHandler),I.removeEventListener("transitionend",this._backdropTransitionendHandler),I.remove(),this._backdropElement===I&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Sr="cdk-overlay-connected-position-bounding-box",mi=/([A-Za-z%]+)$/;class Ar{get positions(){return this._preferredPositions}constructor(I,E,N,q,ye){this._viewportRuler=E,this._document=N,this._platform=q,this._overlayContainer=ye,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ue.x,this._resizeSubscription=Ct.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(I)}attach(I){this._validatePositions(),I.hostElement.classList.add(Sr),this._overlayRef=I,this._boundingBox=I.hostElement,this._pane=I.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const I=this._originRect,E=this._overlayRect,N=this._viewportRect,q=this._containerRect,ye=[];let Qe;for(let _t of this._preferredPositions){let ct=this._getOriginPoint(I,q,_t),on=this._getOverlayPoint(ct,E,_t),bn=this._getOverlayFit(on,E,N,_t);if(bn.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(_t,ct);this._canFitWithFlexibleDimensions(bn,on,N)?ye.push({position:_t,origin:ct,overlayRect:E,boundingBoxRect:this._calculateBoundingBoxRect(ct,_t)}):(!Qe||Qe.overlayFit.visibleArea<bn.visibleArea)&&(Qe={overlayFit:bn,overlayPoint:on,originPoint:ct,position:_t,overlayRect:E})}if(ye.length){let _t=null,ct=-1;for(const on of ye){const bn=on.boundingBoxRect.width*on.boundingBoxRect.height*(on.position.weight||1);bn>ct&&(ct=bn,_t=on)}return this._isPushed=!1,void this._applyPosition(_t.position,_t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Qe.position,Qe.originPoint);this._applyPosition(Qe.position,Qe.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&wi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Sr),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const I=this._lastPosition;if(I){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const E=this._getOriginPoint(this._originRect,this._containerRect,I);this._applyPosition(I,E)}else this.apply()}withScrollableContainers(I){return this._scrollables=I,this}withPositions(I){return this._preferredPositions=I,-1===I.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(I){return this._viewportMargin=I,this}withFlexibleDimensions(I=!0){return this._hasFlexibleDimensions=I,this}withGrowAfterOpen(I=!0){return this._growAfterOpen=I,this}withPush(I=!0){return this._canPush=I,this}withLockedPosition(I=!0){return this._positionLocked=I,this}setOrigin(I){return this._origin=I,this}withDefaultOffsetX(I){return this._offsetX=I,this}withDefaultOffsetY(I){return this._offsetY=I,this}withTransformOriginOn(I){return this._transformOriginSelector=I,this}_getOriginPoint(I,E,N){let q,ye;if("center"==N.originX)q=I.left+I.width/2;else{const Qe=this._isRtl()?I.right:I.left,_t=this._isRtl()?I.left:I.right;q="start"==N.originX?Qe:_t}return E.left<0&&(q-=E.left),ye="center"==N.originY?I.top+I.height/2:"top"==N.originY?I.top:I.bottom,E.top<0&&(ye-=E.top),{x:q,y:ye}}_getOverlayPoint(I,E,N){let q,ye;return q="center"==N.overlayX?-E.width/2:"start"===N.overlayX?this._isRtl()?-E.width:0:this._isRtl()?0:-E.width,ye="center"==N.overlayY?-E.height/2:"top"==N.overlayY?0:-E.height,{x:I.x+q,y:I.y+ye}}_getOverlayFit(I,E,N,q){const ye=Lr(E);let{x:Qe,y:_t}=I,ct=this._getOffset(q,"x"),on=this._getOffset(q,"y");ct&&(Qe+=ct),on&&(_t+=on);let mr=0-_t,ki=_t+ye.height-N.height,ir=this._subtractOverflows(ye.width,0-Qe,Qe+ye.width-N.width),Dr=this._subtractOverflows(ye.height,mr,ki),Ts=ir*Dr;return{visibleArea:Ts,isCompletelyWithinViewport:ye.width*ye.height===Ts,fitsInViewportVertically:Dr===ye.height,fitsInViewportHorizontally:ir==ye.width}}_canFitWithFlexibleDimensions(I,E,N){if(this._hasFlexibleDimensions){const q=N.bottom-E.y,ye=N.right-E.x,Qe=yn(this._overlayRef.getConfig().minHeight),_t=yn(this._overlayRef.getConfig().minWidth);return(I.fitsInViewportVertically||null!=Qe&&Qe<=q)&&(I.fitsInViewportHorizontally||null!=_t&&_t<=ye)}return!1}_pushOverlayOnScreen(I,E,N){if(this._previousPushAmount&&this._positionLocked)return{x:I.x+this._previousPushAmount.x,y:I.y+this._previousPushAmount.y};const q=Lr(E),ye=this._viewportRect,Qe=Math.max(I.x+q.width-ye.width,0),_t=Math.max(I.y+q.height-ye.height,0),ct=Math.max(ye.top-N.top-I.y,0),on=Math.max(ye.left-N.left-I.x,0);let bn=0,qn=0;return bn=q.width<=ye.width?on||-Qe:I.x<this._viewportMargin?ye.left-N.left-I.x:0,qn=q.height<=ye.height?ct||-_t:I.y<this._viewportMargin?ye.top-N.top-I.y:0,this._previousPushAmount={x:bn,y:qn},{x:I.x+bn,y:I.y+qn}}_applyPosition(I,E){if(this._setTransformOrigin(I),this._setOverlayElementStyles(E,I),this._setBoundingBoxStyles(E,I),I.panelClass&&this._addPanelClasses(I.panelClass),this._lastPosition=I,this._positionChanges.observers.length){const N=this._getScrollVisibility(),q=new or(I,N);this._positionChanges.next(q)}this._isInitialRender=!1}_setTransformOrigin(I){if(!this._transformOriginSelector)return;const E=this._boundingBox.querySelectorAll(this._transformOriginSelector);let N,q=I.overlayY;N="center"===I.overlayX?"center":this._isRtl()?"start"===I.overlayX?"right":"left":"start"===I.overlayX?"left":"right";for(let ye=0;ye<E.length;ye++)E[ye].style.transformOrigin=`${N} ${q}`}_calculateBoundingBoxRect(I,E){const N=this._viewportRect,q=this._isRtl();let ye,Qe,_t,bn,qn,mr;if("top"===E.overlayY)Qe=I.y,ye=N.height-Qe+this._viewportMargin;else if("bottom"===E.overlayY)_t=N.height-I.y+2*this._viewportMargin,ye=N.height-_t+this._viewportMargin;else{const ki=Math.min(N.bottom-I.y+N.top,I.y),ir=this._lastBoundingBoxSize.height;ye=2*ki,Qe=I.y-ki,ye>ir&&!this._isInitialRender&&!this._growAfterOpen&&(Qe=I.y-ir/2)}if("end"===E.overlayX&&!q||"start"===E.overlayX&&q)mr=N.width-I.x+this._viewportMargin,bn=I.x-this._viewportMargin;else if("start"===E.overlayX&&!q||"end"===E.overlayX&&q)qn=I.x,bn=N.right-I.x;else{const ki=Math.min(N.right-I.x+N.left,I.x),ir=this._lastBoundingBoxSize.width;bn=2*ki,qn=I.x-ki,bn>ir&&!this._isInitialRender&&!this._growAfterOpen&&(qn=I.x-ir/2)}return{top:Qe,left:qn,bottom:_t,right:mr,width:bn,height:ye}}_setBoundingBoxStyles(I,E){const N=this._calculateBoundingBoxRect(I,E);!this._isInitialRender&&!this._growAfterOpen&&(N.height=Math.min(N.height,this._lastBoundingBoxSize.height),N.width=Math.min(N.width,this._lastBoundingBoxSize.width));const q={};if(this._hasExactPosition())q.top=q.left="0",q.bottom=q.right=q.maxHeight=q.maxWidth="",q.width=q.height="100%";else{const ye=this._overlayRef.getConfig().maxHeight,Qe=this._overlayRef.getConfig().maxWidth;q.height=(0,w.HM)(N.height),q.top=(0,w.HM)(N.top),q.bottom=(0,w.HM)(N.bottom),q.width=(0,w.HM)(N.width),q.left=(0,w.HM)(N.left),q.right=(0,w.HM)(N.right),q.alignItems="center"===E.overlayX?"center":"end"===E.overlayX?"flex-end":"flex-start",q.justifyContent="center"===E.overlayY?"center":"bottom"===E.overlayY?"flex-end":"flex-start",ye&&(q.maxHeight=(0,w.HM)(ye)),Qe&&(q.maxWidth=(0,w.HM)(Qe))}this._lastBoundingBoxSize=N,wi(this._boundingBox.style,q)}_resetBoundingBoxStyles(){wi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){wi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(I,E){const N={},q=this._hasExactPosition(),ye=this._hasFlexibleDimensions,Qe=this._overlayRef.getConfig();if(q){const bn=this._viewportRuler.getViewportScrollPosition();wi(N,this._getExactOverlayY(E,I,bn)),wi(N,this._getExactOverlayX(E,I,bn))}else N.position="static";let _t="",ct=this._getOffset(E,"x"),on=this._getOffset(E,"y");ct&&(_t+=`translateX(${ct}px) `),on&&(_t+=`translateY(${on}px)`),N.transform=_t.trim(),Qe.maxHeight&&(q?N.maxHeight=(0,w.HM)(Qe.maxHeight):ye&&(N.maxHeight="")),Qe.maxWidth&&(q?N.maxWidth=(0,w.HM)(Qe.maxWidth):ye&&(N.maxWidth="")),wi(this._pane.style,N)}_getExactOverlayY(I,E,N){let q={top:"",bottom:""},ye=this._getOverlayPoint(E,this._overlayRect,I);return this._isPushed&&(ye=this._pushOverlayOnScreen(ye,this._overlayRect,N)),"bottom"===I.overlayY?q.bottom=this._document.documentElement.clientHeight-(ye.y+this._overlayRect.height)+"px":q.top=(0,w.HM)(ye.y),q}_getExactOverlayX(I,E,N){let Qe,q={left:"",right:""},ye=this._getOverlayPoint(E,this._overlayRect,I);return this._isPushed&&(ye=this._pushOverlayOnScreen(ye,this._overlayRect,N)),Qe=this._isRtl()?"end"===I.overlayX?"left":"right":"end"===I.overlayX?"right":"left","right"===Qe?q.right=this._document.documentElement.clientWidth-(ye.x+this._overlayRect.width)+"px":q.left=(0,w.HM)(ye.x),q}_getScrollVisibility(){const I=this._getOriginRect(),E=this._pane.getBoundingClientRect(),N=this._scrollables.map(q=>q.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:bi(I,N),isOriginOutsideView:An(I,N),isOverlayClipped:bi(E,N),isOverlayOutsideView:An(E,N)}}_subtractOverflows(I,...E){return E.reduce((N,q)=>N-Math.max(q,0),I)}_getNarrowedViewportRect(){const I=this._document.documentElement.clientWidth,E=this._document.documentElement.clientHeight,N=this._viewportRuler.getViewportScrollPosition();return{top:N.top+this._viewportMargin,left:N.left+this._viewportMargin,right:N.left+I-this._viewportMargin,bottom:N.top+E-this._viewportMargin,width:I-2*this._viewportMargin,height:E-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(I,E){return"x"===E?null==I.offsetX?this._offsetX:I.offsetX:null==I.offsetY?this._offsetY:I.offsetY}_validatePositions(){}_addPanelClasses(I){this._pane&&(0,w.Eq)(I).forEach(E=>{""!==E&&-1===this._appliedPanelClasses.indexOf(E)&&(this._appliedPanelClasses.push(E),this._pane.classList.add(E))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(I=>{this._pane.classList.remove(I)}),this._appliedPanelClasses=[])}_getOriginRect(){const I=this._origin;if(I instanceof D.SBq)return I.nativeElement.getBoundingClientRect();if(I instanceof Element)return I.getBoundingClientRect();const E=I.width||0,N=I.height||0;return{top:I.y,bottom:I.y+N,left:I.x,right:I.x+E,height:N,width:E}}}function wi(X,I){for(let E in I)I.hasOwnProperty(E)&&(X[E]=I[E]);return X}function yn(X){if("number"!=typeof X&&null!=X){const[I,E]=X.split(mi);return E&&"px"!==E?null:parseFloat(I)}return X||null}function Lr(X){return{top:Math.floor(X.top),right:Math.floor(X.right),bottom:Math.floor(X.bottom),left:Math.floor(X.left),width:Math.floor(X.width),height:Math.floor(X.height)}}const pr="cdk-global-overlay-wrapper";class Si{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(I){const E=I.getConfig();this._overlayRef=I,this._width&&!E.width&&I.updateSize({width:this._width}),this._height&&!E.height&&I.updateSize({height:this._height}),I.hostElement.classList.add(pr),this._isDisposed=!1}top(I=""){return this._bottomOffset="",this._topOffset=I,this._alignItems="flex-start",this}left(I=""){return this._xOffset=I,this._xPosition="left",this}bottom(I=""){return this._topOffset="",this._bottomOffset=I,this._alignItems="flex-end",this}right(I=""){return this._xOffset=I,this._xPosition="right",this}start(I=""){return this._xOffset=I,this._xPosition="start",this}end(I=""){return this._xOffset=I,this._xPosition="end",this}width(I=""){return this._overlayRef?this._overlayRef.updateSize({width:I}):this._width=I,this}height(I=""){return this._overlayRef?this._overlayRef.updateSize({height:I}):this._height=I,this}centerHorizontally(I=""){return this.left(I),this._xPosition="center",this}centerVertically(I=""){return this.top(I),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const I=this._overlayRef.overlayElement.style,E=this._overlayRef.hostElement.style,N=this._overlayRef.getConfig(),{width:q,height:ye,maxWidth:Qe,maxHeight:_t}=N,ct=!("100%"!==q&&"100vw"!==q||Qe&&"100%"!==Qe&&"100vw"!==Qe),on=!("100%"!==ye&&"100vh"!==ye||_t&&"100%"!==_t&&"100vh"!==_t),bn=this._xPosition,qn=this._xOffset,mr="rtl"===this._overlayRef.getConfig().direction;let ki="",ir="",Dr="";ct?Dr="flex-start":"center"===bn?(Dr="center",mr?ir=qn:ki=qn):mr?"left"===bn||"end"===bn?(Dr="flex-end",ki=qn):("right"===bn||"start"===bn)&&(Dr="flex-start",ir=qn):"left"===bn||"start"===bn?(Dr="flex-start",ki=qn):("right"===bn||"end"===bn)&&(Dr="flex-end",ir=qn),I.position=this._cssPosition,I.marginLeft=ct?"0":ki,I.marginTop=on?"0":this._topOffset,I.marginBottom=this._bottomOffset,I.marginRight=ct?"0":ir,E.justifyContent=Dr,E.alignItems=on?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const I=this._overlayRef.overlayElement.style,E=this._overlayRef.hostElement,N=E.style;E.classList.remove(pr),N.justifyContent=N.alignItems=I.marginTop=I.marginBottom=I.marginLeft=I.marginRight=I.position="",this._overlayRef=null,this._isDisposed=!0}}let wr=(()=>{class X{constructor(E,N,q,ye){this._viewportRuler=E,this._document=N,this._platform=q,this._overlayContainer=ye}global(){return new Si}flexibleConnectedTo(E){return new Ar(E,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return X.\u0275fac=function(E){return new(E||X)(D.LFG(Gt),D.LFG(Un.K0),D.LFG(St.t4),D.LFG(nr))},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})(),zr=0,Yi=(()=>{class X{constructor(E,N,q,ye,Qe,_t,ct,on,bn,qn,mr,ki){this.scrollStrategies=E,this._overlayContainer=N,this._componentFactoryResolver=q,this._positionBuilder=ye,this._keyboardDispatcher=Qe,this._injector=_t,this._ngZone=ct,this._document=on,this._directionality=bn,this._location=qn,this._outsideClickDispatcher=mr,this._animationsModuleType=ki}create(E){const N=this._createHostElement(),q=this._createPaneElement(N),ye=this._createPortalOutlet(q),Qe=new xi(E);return Qe.direction=Qe.direction||this._directionality.value,new pi(ye,N,q,Qe,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(E){const N=this._document.createElement("div");return N.id="cdk-overlay-"+zr++,N.classList.add("cdk-overlay-pane"),E.appendChild(N),N}_createHostElement(){const E=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(E),E}_createPortalOutlet(E){return this._appRef||(this._appRef=this._injector.get(D.z2F)),new ei(E,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return X.\u0275fac=function(E){return new(E||X)(D.LFG($n),D.LFG(nr),D.LFG(D._Vd),D.LFG(wr),D.LFG(ui),D.LFG(D.zs3),D.LFG(D.R0b),D.LFG(Un.K0),D.LFG(ln.Is),D.LFG(Un.Ye),D.LFG(Ti),D.LFG(D.QbO,8))},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})();const gr={provide:new D.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Yi],useFactory:function no(X){return()=>X.scrollStrategies.reposition()}};let Zr=(()=>{class X{}return X.\u0275fac=function(E){return new(E||X)},X.\u0275mod=D.oAB({type:X}),X.\u0275inj=D.cJS({providers:[Yi,gr],imports:[ln.vT,Lt,Ft,Ft]}),X})();var Ri=F(2016),Ai=F(9521),Fs=F(9770);function ar(X,I){}class Ki{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let rs=(()=>{class X extends un{constructor(E,N,q,ye,Qe,_t,ct,on){super(),this._elementRef=E,this._focusTrapFactory=N,this._config=ye,this._interactivityChecker=Qe,this._ngZone=_t,this._overlayRef=ct,this._focusMonitor=on,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=bn=>{this._portalOutlet.hasAttached();const qn=this._portalOutlet.attachDomPortal(bn);return this._contentAttached(),qn},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=q}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(E){this._portalOutlet.hasAttached();const N=this._portalOutlet.attachComponentPortal(E);return this._contentAttached(),N}attachTemplatePortal(E){this._portalOutlet.hasAttached();const N=this._portalOutlet.attachTemplatePortal(E);return this._contentAttached(),N}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(E,N){this._interactivityChecker.isFocusable(E)||(E.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const q=()=>{E.removeEventListener("blur",q),E.removeEventListener("mousedown",q),E.removeAttribute("tabindex")};E.addEventListener("blur",q),E.addEventListener("mousedown",q)})),E.focus(N)}_focusByCssSelector(E,N){let q=this._elementRef.nativeElement.querySelector(E);q&&this._forceFocus(q,N)}_trapFocus(){const E=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||E.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(N=>{N||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const E=this._config.restoreFocus;let N=null;if("string"==typeof E?N=this._document.querySelector(E):"boolean"==typeof E?N=E?this._elementFocusedBeforeDialogWasOpened:null:E&&(N=E),this._config.restoreFocus&&N&&"function"==typeof N.focus){const q=(0,St.ht)(),ye=this._elementRef.nativeElement;(!q||q===this._document.body||q===ye||ye.contains(q))&&(this._focusMonitor?(this._focusMonitor.focusVia(N,this._closeInteractionType),this._closeInteractionType=null):N.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const E=this._elementRef.nativeElement,N=(0,St.ht)();return E===N||E.contains(N)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,St.ht)())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return X.\u0275fac=function(E){return new(E||X)(D.Y36(D.SBq),D.Y36(Ri.qV),D.Y36(Un.K0,8),D.Y36(Ki),D.Y36(Ri.ic),D.Y36(D.R0b),D.Y36(pi),D.Y36(Ri.tE))},X.\u0275cmp=D.Xpm({type:X,selectors:[["cdk-dialog-container"]],viewQuery:function(E,N){if(1&E&&D.Gf(Ne,7),2&E){let q;D.iGM(q=D.CRH())&&(N._portalOutlet=q.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(E,N){2&E&&D.uIk("id",N._config.id||null)("role",N._config.role)("aria-modal",N._config.ariaModal)("aria-labelledby",N._config.ariaLabel?null:N._ariaLabelledBy)("aria-label",N._config.ariaLabel)("aria-describedby",N._config.ariaDescribedBy||null)},features:[D.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(E,N){1&E&&D.YNc(0,ar,0,0,"ng-template",0)},dependencies:[Ne],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),X})();class Ir{constructor(I,E){this.overlayRef=I,this.config=E,this.closed=new ue.x,this.disableClose=E.disableClose,this.backdropClick=I.backdropClick(),this.keydownEvents=I.keydownEvents(),this.outsidePointerEvents=I.outsidePointerEvents(),this.id=E.id,this.keydownEvents.subscribe(N=>{N.keyCode===Ai.hY&&!this.disableClose&&!(0,Ai.Vb)(N)&&(N.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=I.detachments().subscribe(()=>{!1!==E.closeOnOverlayDetachments&&this.close()})}close(I,E){if(this.containerInstance){const N=this.closed;this.containerInstance._closeInteractionType=E?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),N.next(I),N.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(I="",E=""){return this.overlayRef.updateSize({width:I,height:E}),this}addPanelClass(I){return this.overlayRef.addPanelClass(I),this}removePanelClass(I){return this.overlayRef.removePanelClass(I),this}}const lr=new D.OlP("DialogScrollStrategy"),Nr=new D.OlP("DialogData"),vs=new D.OlP("DefaultDialogConfig"),Ls={provide:lr,deps:[Yi],useFactory:function zs(X){return()=>X.scrollStrategies.block()}};let xo=0,Es=(()=>{class X{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(E,N,q,ye,Qe,_t){this._overlay=E,this._injector=N,this._defaultOptions=q,this._parentDialog=ye,this._overlayContainer=Qe,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ue.x,this._afterOpenedAtThisLevel=new ue.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Fs.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,$t.O)(void 0))),this._scrollStrategy=_t}open(E,N){(N={...this._defaultOptions||new Ki,...N}).id=N.id||"cdk-dialog-"+xo++,N.id&&this.getDialogById(N.id);const ye=this._getOverlayConfig(N),Qe=this._overlay.create(ye),_t=new Ir(Qe,N),ct=this._attachContainer(Qe,_t,N);return _t.containerInstance=ct,this._attachDialogContent(E,_t,ct,N),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(_t),_t.closed.subscribe(()=>this._removeOpenDialog(_t,!0)),this.afterOpened.next(_t),_t}closeAll(){$s(this.openDialogs,E=>E.close())}getDialogById(E){return this.openDialogs.find(N=>N.id===E)}ngOnDestroy(){$s(this._openDialogsAtThisLevel,E=>{!1===E.config.closeOnDestroy&&this._removeOpenDialog(E,!1)}),$s(this._openDialogsAtThisLevel,E=>E.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(E){const N=new xi({positionStrategy:E.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:E.scrollStrategy||this._scrollStrategy(),panelClass:E.panelClass,hasBackdrop:E.hasBackdrop,direction:E.direction,minWidth:E.minWidth,minHeight:E.minHeight,maxWidth:E.maxWidth,maxHeight:E.maxHeight,width:E.width,height:E.height,disposeOnNavigation:E.closeOnNavigation});return E.backdropClass&&(N.backdropClass=E.backdropClass),N}_attachContainer(E,N,q){const ye=q.injector||q.viewContainerRef?.injector,Qe=[{provide:Ki,useValue:q},{provide:Ir,useValue:N},{provide:pi,useValue:E}];let _t;q.container?"function"==typeof q.container?_t=q.container:(_t=q.container.type,Qe.push(...q.container.providers(q))):_t=rs;const ct=new _n(_t,q.viewContainerRef,D.zs3.create({parent:ye||this._injector,providers:Qe}),q.componentFactoryResolver);return E.attach(ct).instance}_attachDialogContent(E,N,q,ye){if(E instanceof D.Rgc){const Qe=this._createInjector(ye,N,q,void 0);let _t={$implicit:ye.data,dialogRef:N};ye.templateContext&&(_t={..._t,..."function"==typeof ye.templateContext?ye.templateContext():ye.templateContext}),q.attachTemplatePortal(new Hn(E,null,_t,Qe))}else{const Qe=this._createInjector(ye,N,q,this._injector),_t=q.attachComponentPortal(new _n(E,ye.viewContainerRef,Qe,ye.componentFactoryResolver));N.componentInstance=_t.instance}}_createInjector(E,N,q,ye){const Qe=E.injector||E.viewContainerRef?.injector,_t=[{provide:Nr,useValue:E.data},{provide:Ir,useValue:N}];return E.providers&&("function"==typeof E.providers?_t.push(...E.providers(N,E,q)):_t.push(...E.providers)),E.direction&&(!Qe||!Qe.get(ln.Is,null,{optional:!0}))&&_t.push({provide:ln.Is,useValue:{value:E.direction,change:(0,he.of)()}}),D.zs3.create({parent:Qe||ye,providers:_t})}_removeOpenDialog(E,N){const q=this.openDialogs.indexOf(E);q>-1&&(this.openDialogs.splice(q,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((ye,Qe)=>{ye?Qe.setAttribute("aria-hidden",ye):Qe.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),N&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const E=this._overlayContainer.getContainerElement();if(E.parentElement){const N=E.parentElement.children;for(let q=N.length-1;q>-1;q--){const ye=N[q];ye!==E&&"SCRIPT"!==ye.nodeName&&"STYLE"!==ye.nodeName&&!ye.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(ye,ye.getAttribute("aria-hidden")),ye.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const E=this._parentDialog;return E?E._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return X.\u0275fac=function(E){return new(E||X)(D.LFG(Yi),D.LFG(D.zs3),D.LFG(vs,8),D.LFG(X,12),D.LFG(nr),D.LFG(lr))},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac}),X})();function $s(X,I){let E=X.length;for(;E--;)I(X[E])}let jo=(()=>{class X{}return X.\u0275fac=function(E){return new(E||X)},X.\u0275mod=D.oAB({type:X}),X.\u0275inj=D.cJS({providers:[Es,Ls],imports:[Zr,Lt,Ri.rt,Lt]}),X})();var bs=F(3238);function ro(X,I){}F(7340);class Ns{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const qr="mdc-dialog--open",ws="mdc-dialog--opening",zo="mdc-dialog--closing";let Ds=(()=>{class X extends rs{constructor(E,N,q,ye,Qe,_t,ct,on){super(E,N,q,ye,Qe,_t,ct,on),this._animationStateChanged=new D.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(E){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:E})}}return X.\u0275fac=function(E){return new(E||X)(D.Y36(D.SBq),D.Y36(Ri.qV),D.Y36(Un.K0,8),D.Y36(Ns),D.Y36(Ri.ic),D.Y36(D.R0b),D.Y36(pi),D.Y36(Ri.tE))},X.\u0275cmp=D.Xpm({type:X,selectors:[["ng-component"]],features:[D.qOj],decls:0,vars:0,template:function(E,N){},encapsulation:2}),X})();const Ws="--mat-dialog-transition-duration";function oo(X){return null==X?null:"number"==typeof X?X:X.endsWith("ms")?(0,w.su)(X.substring(0,X.length-2)):X.endsWith("s")?1e3*(0,w.su)(X.substring(0,X.length-1)):"0"===X?0:null}let To=(()=>{class X extends Ds{constructor(E,N,q,ye,Qe,_t,ct,on,bn){super(E,N,q,ye,Qe,_t,ct,bn),this._animationMode=on,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?oo(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?oo(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Ws,`${this._openAnimationDuration}ms`),this._hostElement.classList.add(ws),this._hostElement.classList.add(qr),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(qr),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(qr),this._animationsEnabled?(this._hostElement.style.setProperty(Ws,`${this._openAnimationDuration}ms`),this._hostElement.classList.add(zo),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(ws),this._hostElement.classList.remove(zo)}_waitForAnimationToComplete(E,N){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(N,E)}}return X.\u0275fac=function(E){return new(E||X)(D.Y36(D.SBq),D.Y36(Ri.qV),D.Y36(Un.K0,8),D.Y36(Ns),D.Y36(Ri.ic),D.Y36(D.R0b),D.Y36(pi),D.Y36(D.QbO,8),D.Y36(Ri.tE))},X.\u0275cmp=D.Xpm({type:X,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(E,N){2&E&&(D.Ikx("id",N._config.id),D.uIk("aria-modal",N._config.ariaModal)("role",N._config.role)("aria-labelledby",N._config.ariaLabel?null:N._ariaLabelledBy)("aria-label",N._config.ariaLabel)("aria-describedby",N._config.ariaDescribedBy||null),D.ekj("_mat-animation-noopable",!N._animationsEnabled))},features:[D.qOj],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(E,N){1&E&&(D.TgZ(0,"div",0)(1,"div",1),D.YNc(2,ro,0,0,"ng-template",2),D.qZA()())},dependencies:[Ne],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),X})();class Rr{constructor(I,E,N){this._ref=I,this._containerInstance=N,this._afterOpened=new ue.x,this._beforeClosed=new ue.x,this._state=0,this.disableClose=E.disableClose,this.id=I.id,N._animationStateChanged.pipe((0,dn.h)(q=>"opened"===q.state),(0,be.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),N._animationStateChanged.pipe((0,dn.h)(q=>"closed"===q.state),(0,be.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),I.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Fe.T)(this.backdropClick(),this.keydownEvents().pipe((0,dn.h)(q=>q.keyCode===Ai.hY&&!this.disableClose&&!(0,Ai.Vb)(q)))).subscribe(q=>{this.disableClose||(q.preventDefault(),Ys(this,"keydown"===q.type?"keyboard":"mouse"))})}close(I){this._result=I,this._containerInstance._animationStateChanged.pipe((0,dn.h)(E=>"closing"===E.state),(0,be.q)(1)).subscribe(E=>{this._beforeClosed.next(I),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),E.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(I){let E=this._ref.config.positionStrategy;return I&&(I.left||I.right)?I.left?E.left(I.left):E.right(I.right):E.centerHorizontally(),I&&(I.top||I.bottom)?I.top?E.top(I.top):E.bottom(I.bottom):E.centerVertically(),this._ref.updatePosition(),this}updateSize(I="",E=""){return this._ref.updateSize(I,E),this}addPanelClass(I){return this._ref.addPanelClass(I),this}removePanelClass(I){return this._ref.removePanelClass(I),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function Ys(X,I,E){return X._closeInteractionType=I,X.close(E)}const ao=new D.OlP("MatMdcDialogData"),ji=new D.OlP("mat-mdc-dialog-default-options"),ss=new D.OlP("mat-mdc-dialog-scroll-strategy"),Bs={provide:ss,deps:[Yi],useFactory:function Qr(X){return()=>X.scrollStrategies.block()}};let Xs=0,Cs=(()=>{class X{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const E=this._parentDialog;return E?E._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(E,N,q,ye,Qe,_t,ct,on,bn,qn){this._overlay=E,this._defaultOptions=q,this._parentDialog=ye,this._dialogRefConstructor=ct,this._dialogContainerType=on,this._dialogDataToken=bn,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ue.x,this._afterOpenedAtThisLevel=new ue.x,this._idPrefix="mat-dialog-",this.dialogConfigClass=Ns,this.afterAllClosed=(0,Fs.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,$t.O)(void 0))),this._scrollStrategy=_t,this._dialog=N.get(Es)}open(E,N){let q;(N={...this._defaultOptions||new Ns,...N}).id=N.id||`${this._idPrefix}${Xs++}`,N.scrollStrategy=N.scrollStrategy||this._scrollStrategy();const ye=this._dialog.open(E,{...N,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:N},{provide:Ki,useValue:N}]},templateContext:()=>({dialogRef:q}),providers:(Qe,_t,ct)=>(q=new this._dialogRefConstructor(Qe,N,ct),q.updatePosition(N?.position),[{provide:this._dialogContainerType,useValue:ct},{provide:this._dialogDataToken,useValue:_t.data},{provide:this._dialogRefConstructor,useValue:q}])});return q.componentInstance=ye.componentInstance,this.openDialogs.push(q),this.afterOpened.next(q),q.afterClosed().subscribe(()=>{const Qe=this.openDialogs.indexOf(q);Qe>-1&&(this.openDialogs.splice(Qe,1),this.openDialogs.length||this._getAfterAllClosed().next())}),q}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(E){return this.openDialogs.find(N=>N.id===E)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(E){let N=E.length;for(;N--;)E[N].close()}}return X.\u0275fac=function(E){D.$Z()},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac}),X})(),co=(()=>{class X extends Cs{constructor(E,N,q,ye,Qe,_t,ct,on){super(E,N,ye,_t,ct,Qe,Rr,To,ao,on),this._idPrefix="mat-mdc-dialog-"}}return X.\u0275fac=function(E){return new(E||X)(D.LFG(Yi),D.LFG(D.zs3),D.LFG(Un.Ye,8),D.LFG(ji,8),D.LFG(ss),D.LFG(X,12),D.LFG(nr),D.LFG(D.QbO,8))},X.\u0275prov=D.Yz7({token:X,factory:X.\u0275fac}),X})(),os=(()=>{class X{constructor(E,N,q){this.dialogRef=E,this._elementRef=N,this._dialog=q,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=function xs(X,I){let E=X.nativeElement.parentElement;for(;E&&!E.classList.contains("mat-mdc-dialog-container");)E=E.parentElement;return E?I.find(N=>N.id===E.id):null}(this._elementRef,this._dialog.openDialogs))}ngOnChanges(E){const N=E._matDialogClose||E._matDialogCloseResult;N&&(this.dialogResult=N.currentValue)}_onButtonClick(E){Ys(this.dialogRef,0===E.screenX&&0===E.screenY?"keyboard":"mouse",this.dialogResult)}}return X.\u0275fac=function(E){return new(E||X)(D.Y36(Rr,8),D.Y36(D.SBq),D.Y36(co))},X.\u0275dir=D.lG2({type:X,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(E,N){1&E&&D.NdJ("click",function(ye){return N._onButtonClick(ye)}),2&E&&D.uIk("aria-label",N.ariaLabel||null)("type",N.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[D.TTD]}),X})(),li=(()=>{class X{}return X.\u0275fac=function(E){return new(E||X)},X.\u0275mod=D.oAB({type:X}),X.\u0275inj=D.cJS({providers:[co,Bs],imports:[jo,Zr,Lt,bs.BQ,bs.BQ]}),X})()},1481:(Mt,ke,F)=>{"use strict";F.d(ke,{Dx:()=>Dn,H7:()=>Cn,b2:()=>Xi,q6:()=>ln,se:()=>W});var w=F(6895),D=F(4650);class ue extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class he extends ue{static makeCurrent(){(0,w.HT)(new he)}onAndCancel(Ie,ie,Ne){return Ie.addEventListener(ie,Ne,!1),()=>{Ie.removeEventListener(ie,Ne,!1)}}dispatchEvent(Ie,ie){Ie.dispatchEvent(ie)}remove(Ie){Ie.parentNode&&Ie.parentNode.removeChild(Ie)}createElement(Ie,ie){return(ie=ie||this.getDefaultDocument()).createElement(Ie)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ie){return Ie.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ie){return Ie instanceof DocumentFragment}getGlobalEventTarget(Ie,ie){return"window"===ie?window:"document"===ie?Ie:"body"===ie?Ie.body:null}getBaseHref(Ie){const ie=function ee(){return ae=ae||document.querySelector("base"),ae?ae.getAttribute("href"):null}();return null==ie?null:function ce(Oe){ve=ve||document.createElement("a"),ve.setAttribute("href",Oe);const Ie=ve.pathname;return"/"===Ie.charAt(0)?Ie:`/${Ie}`}(ie)}resetBaseElement(){ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ie){return(0,w.Mx)(document.cookie,Ie)}}let ve,ae=null;const Ce=new D.OlP("TRANSITION_ID"),Pe=[{provide:D.ip1,useFactory:function Le(Oe,Ie,ie){return()=>{ie.get(D.CZH).donePromise.then(()=>{const Ne=(0,w.q)(),ht=Ie.querySelectorAll(`style[ng-transition="${Oe}"]`);for(let Lt=0;Lt<ht.length;Lt++)Ne.remove(ht[Lt])})}},deps:[Ce,w.K0,D.zs3],multi:!0}];let it=(()=>{class Oe{build(){return new XMLHttpRequest}}return Oe.\u0275fac=function(ie){return new(ie||Oe)},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const $e=new D.OlP("EventManagerPlugins");let gt=(()=>{class Oe{constructor(ie,Ne){this._zone=Ne,this._eventNameToPlugin=new Map,ie.forEach(ht=>{ht.manager=this}),this._plugins=ie.slice().reverse()}addEventListener(ie,Ne,ht){return this._findPluginFor(Ne).addEventListener(ie,Ne,ht)}addGlobalEventListener(ie,Ne,ht){return this._findPluginFor(Ne).addGlobalEventListener(ie,Ne,ht)}getZone(){return this._zone}_findPluginFor(ie){const Ne=this._eventNameToPlugin.get(ie);if(Ne)return Ne;const ht=this._plugins;for(let Lt=0;Lt<ht.length;Lt++){const tn=ht[Lt];if(tn.supports(ie))return this._eventNameToPlugin.set(ie,tn),tn}throw new Error(`No event manager plugin found for event ${ie}`)}}return Oe.\u0275fac=function(ie){return new(ie||Oe)(D.LFG($e),D.LFG(D.R0b))},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();class Tt{constructor(Ie){this._doc=Ie}addGlobalEventListener(Ie,ie,Ne){const ht=(0,w.q)().getGlobalEventTarget(this._doc,Ie);if(!ht)throw new Error(`Unsupported event target ${ht} for event ${ie}`);return this.addEventListener(ht,ie,Ne)}}let Ke=(()=>{class Oe{constructor(){this.usageCount=new Map}addStyles(ie){for(const Ne of ie)1===this.changeUsageCount(Ne,1)&&this.onStyleAdded(Ne)}removeStyles(ie){for(const Ne of ie)0===this.changeUsageCount(Ne,-1)&&this.onStyleRemoved(Ne)}onStyleRemoved(ie){}onStyleAdded(ie){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ie,Ne){const ht=this.usageCount;let Lt=ht.get(ie)??0;return Lt+=Ne,Lt>0?ht.set(ie,Lt):ht.delete(ie),Lt}ngOnDestroy(){for(const ie of this.getAllStyles())this.onStyleRemoved(ie);this.usageCount.clear()}}return Oe.\u0275fac=function(ie){return new(ie||Oe)},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})(),bt=(()=>{class Oe extends Ke{constructor(ie){super(),this.doc=ie,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ie){for(const Ne of this.hostNodes)this.addStyleToHost(Ne,ie)}onStyleRemoved(ie){const Ne=this.styleRef;Ne.get(ie)?.forEach(Lt=>Lt.remove()),Ne.delete(ie)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ie){this.hostNodes.add(ie);for(const Ne of this.getAllStyles())this.addStyleToHost(ie,Ne)}removeHost(ie){this.hostNodes.delete(ie)}addStyleToHost(ie,Ne){const ht=this.doc.createElement("style");ht.textContent=Ne,ie.appendChild(ht);const Lt=this.styleRef.get(Ne);Lt?Lt.push(ht):this.styleRef.set(Ne,[ht])}resetHostNodes(){const ie=this.hostNodes;ie.clear(),ie.add(this.doc.head)}}return Oe.\u0275fac=function(ie){return new(ie||Oe)(D.LFG(w.K0))},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const st={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ct=/%COMP%/g,xe=new D.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Rt(Oe,Ie){return Ie.flat(100).map(ie=>ie.replace(Ct,Oe))}function en(Oe){return Ie=>{if("__ngUnwrap__"===Ie)return Oe;!1===Oe(Ie)&&(Ie.preventDefault(),Ie.returnValue=!1)}}let W=(()=>{class Oe{constructor(ie,Ne,ht,Lt){this.eventManager=ie,this.sharedStylesHost=Ne,this.appId=ht,this.removeStylesOnCompDestory=Lt,this.rendererByCompId=new Map,this.defaultRenderer=new te(ie)}createRenderer(ie,Ne){if(!ie||!Ne)return this.defaultRenderer;const ht=this.getOrCreateRenderer(ie,Ne);return ht instanceof Ve?ht.applyToHost(ie):ht instanceof me&&ht.applyStyles(),ht}getOrCreateRenderer(ie,Ne){const ht=this.rendererByCompId;let Lt=ht.get(Ne.id);if(!Lt){const tn=this.eventManager,Fe=this.sharedStylesHost,be=this.removeStylesOnCompDestory;switch(Ne.encapsulation){case D.ifc.Emulated:Lt=new Ve(tn,Fe,Ne,this.appId,be);break;case D.ifc.ShadowDom:return new fe(tn,Fe,ie,Ne);default:Lt=new me(tn,Fe,Ne,be)}Lt.onDestroy=()=>ht.delete(Ne.id),ht.set(Ne.id,Lt)}return Lt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Oe.\u0275fac=function(ie){return new(ie||Oe)(D.LFG(gt),D.LFG(bt),D.LFG(D.AFp),D.LFG(xe))},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();class te{constructor(Ie){this.eventManager=Ie,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ie,ie){return ie?document.createElementNS(st[ie]||ie,Ie):document.createElement(Ie)}createComment(Ie){return document.createComment(Ie)}createText(Ie){return document.createTextNode(Ie)}appendChild(Ie,ie){(Se(Ie)?Ie.content:Ie).appendChild(ie)}insertBefore(Ie,ie,Ne){Ie&&(Se(Ie)?Ie.content:Ie).insertBefore(ie,Ne)}removeChild(Ie,ie){Ie&&Ie.removeChild(ie)}selectRootElement(Ie,ie){let Ne="string"==typeof Ie?document.querySelector(Ie):Ie;if(!Ne)throw new Error(`The selector "${Ie}" did not match any elements`);return ie||(Ne.textContent=""),Ne}parentNode(Ie){return Ie.parentNode}nextSibling(Ie){return Ie.nextSibling}setAttribute(Ie,ie,Ne,ht){if(ht){ie=ht+":"+ie;const Lt=st[ht];Lt?Ie.setAttributeNS(Lt,ie,Ne):Ie.setAttribute(ie,Ne)}else Ie.setAttribute(ie,Ne)}removeAttribute(Ie,ie,Ne){if(Ne){const ht=st[Ne];ht?Ie.removeAttributeNS(ht,ie):Ie.removeAttribute(`${Ne}:${ie}`)}else Ie.removeAttribute(ie)}addClass(Ie,ie){Ie.classList.add(ie)}removeClass(Ie,ie){Ie.classList.remove(ie)}setStyle(Ie,ie,Ne,ht){ht&(D.JOm.DashCase|D.JOm.Important)?Ie.style.setProperty(ie,Ne,ht&D.JOm.Important?"important":""):Ie.style[ie]=Ne}removeStyle(Ie,ie,Ne){Ne&D.JOm.DashCase?Ie.style.removeProperty(ie):Ie.style[ie]=""}setProperty(Ie,ie,Ne){Ie[ie]=Ne}setValue(Ie,ie){Ie.nodeValue=ie}listen(Ie,ie,Ne){return"string"==typeof Ie?this.eventManager.addGlobalEventListener(Ie,ie,en(Ne)):this.eventManager.addEventListener(Ie,ie,en(Ne))}}function Se(Oe){return"TEMPLATE"===Oe.tagName&&void 0!==Oe.content}class fe extends te{constructor(Ie,ie,Ne,ht){super(Ie),this.sharedStylesHost=ie,this.hostEl=Ne,this.shadowRoot=Ne.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Lt=Rt(ht.id,ht.styles);for(const tn of Lt){const Fe=document.createElement("style");Fe.textContent=tn,this.shadowRoot.appendChild(Fe)}}nodeOrShadowRoot(Ie){return Ie===this.hostEl?this.shadowRoot:Ie}appendChild(Ie,ie){return super.appendChild(this.nodeOrShadowRoot(Ie),ie)}insertBefore(Ie,ie,Ne){return super.insertBefore(this.nodeOrShadowRoot(Ie),ie,Ne)}removeChild(Ie,ie){return super.removeChild(this.nodeOrShadowRoot(Ie),ie)}parentNode(Ie){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ie)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class me extends te{constructor(Ie,ie,Ne,ht,Lt=Ne.id){super(Ie),this.sharedStylesHost=ie,this.removeStylesOnCompDestory=ht,this.rendererUsageCount=0,this.styles=Rt(Lt,Ne.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ve extends me{constructor(Ie,ie,Ne,ht,Lt){const tn=ht+"-"+Ne.id;super(Ie,ie,Ne,Lt,tn),this.contentAttr=function wt(Oe){return"_ngcontent-%COMP%".replace(Ct,Oe)}(tn),this.hostAttr=function Ot(Oe){return"_nghost-%COMP%".replace(Ct,Oe)}(tn)}applyToHost(Ie){this.applyStyles(),this.setAttribute(Ie,this.hostAttr,"")}createElement(Ie,ie){const Ne=super.createElement(Ie,ie);return super.setAttribute(Ne,this.contentAttr,""),Ne}}let De=(()=>{class Oe extends Tt{constructor(ie){super(ie)}supports(ie){return!0}addEventListener(ie,Ne,ht){return ie.addEventListener(Ne,ht,!1),()=>this.removeEventListener(ie,Ne,ht)}removeEventListener(ie,Ne,ht){return ie.removeEventListener(Ne,ht)}}return Oe.\u0275fac=function(ie){return new(ie||Oe)(D.LFG(w.K0))},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const Ze=["alt","control","meta","shift"],Q={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ee={alt:Oe=>Oe.altKey,control:Oe=>Oe.ctrlKey,meta:Oe=>Oe.metaKey,shift:Oe=>Oe.shiftKey};let Ue=(()=>{class Oe extends Tt{constructor(ie){super(ie)}supports(ie){return null!=Oe.parseEventName(ie)}addEventListener(ie,Ne,ht){const Lt=Oe.parseEventName(Ne),tn=Oe.eventCallback(Lt.fullKey,ht,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(ie,Lt.domEventName,tn))}static parseEventName(ie){const Ne=ie.toLowerCase().split("."),ht=Ne.shift();if(0===Ne.length||"keydown"!==ht&&"keyup"!==ht)return null;const Lt=Oe._normalizeKey(Ne.pop());let tn="",Fe=Ne.indexOf("code");if(Fe>-1&&(Ne.splice(Fe,1),tn="code."),Ze.forEach(se=>{const We=Ne.indexOf(se);We>-1&&(Ne.splice(We,1),tn+=se+".")}),tn+=Lt,0!=Ne.length||0===Lt.length)return null;const be={};return be.domEventName=ht,be.fullKey=tn,be}static matchEventFullKeyCode(ie,Ne){let ht=Q[ie.key]||ie.key,Lt="";return Ne.indexOf("code.")>-1&&(ht=ie.code,Lt="code."),!(null==ht||!ht)&&(ht=ht.toLowerCase()," "===ht?ht="space":"."===ht&&(ht="dot"),Ze.forEach(tn=>{tn!==ht&&(0,Ee[tn])(ie)&&(Lt+=tn+".")}),Lt+=ht,Lt===Ne)}static eventCallback(ie,Ne,ht){return Lt=>{Oe.matchEventFullKeyCode(Lt,ie)&&ht.runGuarded(()=>Ne(Lt))}}static _normalizeKey(ie){return"esc"===ie?"escape":ie}}return Oe.\u0275fac=function(ie){return new(ie||Oe)(D.LFG(w.K0))},Oe.\u0275prov=D.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const ln=(0,D.eFA)(D._c5,"browser",[{provide:D.Lbi,useValue:w.bD},{provide:D.g9A,useValue:function vn(){he.makeCurrent()},multi:!0},{provide:w.K0,useFactory:function St(){return(0,D.RDi)(document),document},deps:[]}]),ii=new D.OlP(""),Bn=[{provide:D.rWj,useClass:class Ae{addToWindow(Ie){D.dqk.getAngularTestability=(Ne,ht=!0)=>{const Lt=Ie.findTestabilityInTree(Ne,ht);if(null==Lt)throw new Error("Could not find testability for element.");return Lt},D.dqk.getAllAngularTestabilities=()=>Ie.getAllTestabilities(),D.dqk.getAllAngularRootElements=()=>Ie.getAllRootElements(),D.dqk.frameworkStabilizers||(D.dqk.frameworkStabilizers=[]),D.dqk.frameworkStabilizers.push(Ne=>{const ht=D.dqk.getAllAngularTestabilities();let Lt=ht.length,tn=!1;const Fe=function(be){tn=tn||be,Lt--,0==Lt&&Ne(tn)};ht.forEach(function(be){be.whenStable(Fe)})})}findTestabilityInTree(Ie,ie,Ne){return null==ie?null:Ie.getTestability(ie)??(Ne?(0,w.q)().isShadowRoot(ie)?this.findTestabilityInTree(Ie,ie.host,!0):this.findTestabilityInTree(Ie,ie.parentElement,!0):null)}},deps:[]},{provide:D.lri,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]},{provide:D.dDg,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]}],Wt=[{provide:D.zSh,useValue:"root"},{provide:D.qLn,useFactory:function $t(){return new D.qLn},deps:[]},{provide:$e,useClass:De,multi:!0,deps:[w.K0,D.R0b,D.Lbi]},{provide:$e,useClass:Ue,multi:!0,deps:[w.K0]},{provide:W,useClass:W,deps:[gt,bt,D.AFp,xe]},{provide:D.FYo,useExisting:W},{provide:Ke,useExisting:bt},{provide:bt,useClass:bt,deps:[w.K0]},{provide:gt,useClass:gt,deps:[$e,D.R0b]},{provide:w.JF,useClass:it,deps:[]},[]];let Xi=(()=>{class Oe{constructor(ie){}static withServerTransition(ie){return{ngModule:Oe,providers:[{provide:D.AFp,useValue:ie.appId},{provide:Ce,useExisting:D.AFp},Pe]}}}return Oe.\u0275fac=function(ie){return new(ie||Oe)(D.LFG(ii,12))},Oe.\u0275mod=D.oAB({type:Oe}),Oe.\u0275inj=D.cJS({providers:[...Wt,...Bn],imports:[w.ez,D.hGG]}),Oe})(),Dn=(()=>{class Oe{constructor(ie){this._doc=ie}getTitle(){return this._doc.title}setTitle(ie){this._doc.title=ie||""}}return Oe.\u0275fac=function(ie){return new(ie||Oe)(D.LFG(w.K0))},Oe.\u0275prov=D.Yz7({token:Oe,factory:function(ie){let Ne=null;return Ne=ie?new ie:function fr(){return new Dn((0,D.LFG)(w.K0))}(),Ne},providedIn:"root"}),Oe})();typeof window<"u"&&window;let Cn=(()=>{class Oe{}return Oe.\u0275fac=function(ie){return new(ie||Oe)},Oe.\u0275prov=D.Yz7({token:Oe,factory:function(ie){let Ne=null;return Ne=ie?new(ie||Oe):D.LFG(Zn),Ne},providedIn:"root"}),Oe})(),Zn=(()=>{class Oe extends Cn{constructor(ie){super(),this._doc=ie}sanitize(ie,Ne){if(null==Ne)return null;switch(ie){case D.q3G.NONE:return Ne;case D.q3G.HTML:return(0,D.qzn)(Ne,"HTML")?(0,D.z3N)(Ne):(0,D.EiD)(this._doc,String(Ne)).toString();case D.q3G.STYLE:return(0,D.qzn)(Ne,"Style")?(0,D.z3N)(Ne):Ne;case D.q3G.SCRIPT:if((0,D.qzn)(Ne,"Script"))return(0,D.z3N)(Ne);throw new Error("unsafe value used in a script context");case D.q3G.URL:return(0,D.qzn)(Ne,"URL")?(0,D.z3N)(Ne):(0,D.mCW)(String(Ne));case D.q3G.RESOURCE_URL:if((0,D.qzn)(Ne,"ResourceURL"))return(0,D.z3N)(Ne);throw new Error(`unsafe value used in a resource URL context (see ${D.JZr})`);default:throw new Error(`Unexpected SecurityContext ${ie} (see ${D.JZr})`)}}bypassSecurityTrustHtml(ie){return(0,D.JVY)(ie)}bypassSecurityTrustStyle(ie){return(0,D.L6k)(ie)}bypassSecurityTrustScript(ie){return(0,D.eBb)(ie)}bypassSecurityTrustUrl(ie){return(0,D.LAX)(ie)}bypassSecurityTrustResourceUrl(ie){return(0,D.pB0)(ie)}}return Oe.\u0275fac=function(ie){return new(ie||Oe)(D.LFG(w.K0))},Oe.\u0275prov=D.Yz7({token:Oe,factory:function(ie){let Ne=null;return Ne=ie?new ie:function un(Oe){return new Zn(Oe.get(w.K0))}(D.LFG(D.zs3)),Ne},providedIn:"root"}),Oe})()},4843:(Mt,ke,F)=>{"use strict";F.d(ke,{F0:()=>Qi,rH:()=>Gs,Bz:()=>au,lC:()=>Qr});var w=F(4650),D=F(2076),ue=F(9646),he=F(1135);const ee=(0,F(3888).d)(m=>function(){m(this),this.name="EmptyError",this.message="no elements in sequence"});var ve=F(9841),ce=F(7272),Ce=F(9770),Le=F(9635),Pe=F(2843),Ae=F(9751),it=F(515),$e=F(727),gt=F(4482),Tt=F(5403);function Ke(){return(0,gt.e)((m,_)=>{let f=null;m._refCount++;const x=(0,Tt.x)(_,void 0,void 0,void 0,()=>{if(!m||m._refCount<=0||0<--m._refCount)return void(f=null);const P=m._connection,V=f;f=null,P&&(!V||P===V)&&P.unsubscribe(),_.unsubscribe()});m.subscribe(x),x.closed||(f=m.connect())})}class bt extends Ae.y{constructor(_,f){super(),this.source=_,this.subjectFactory=f,this._subject=null,this._refCount=0,this._connection=null,(0,gt.A)(_)&&(this.lift=_.lift)}_subscribe(_){return this.getSubject().subscribe(_)}getSubject(){const _=this._subject;return(!_||_.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:_}=this;this._subject=this._connection=null,_?.unsubscribe()}connect(){let _=this._connection;if(!_){_=this._connection=new $e.w0;const f=this.getSubject();_.add(this.source.subscribe((0,Tt.x)(f,void 0,()=>{this._teardown(),f.complete()},x=>{this._teardown(),f.error(x)},()=>this._teardown()))),_.closed&&(this._connection=null,_=$e.w0.EMPTY)}return _}refCount(){return Ke()(this)}}var st=F(7579),Ct=F(6895),Xe=F(4004),ne=F(3900),dt=F(5698),He=F(8675),at=F(9300),xe=F(5577);function wt(m){return(0,gt.e)((_,f)=>{let x=!1;_.subscribe((0,Tt.x)(f,P=>{x=!0,f.next(P)},()=>{x||f.next(m),f.complete()}))})}function Ot(m=Rt){return(0,gt.e)((_,f)=>{let x=!1;_.subscribe((0,Tt.x)(f,P=>{x=!0,f.next(P)},()=>x?f.complete():f.error(m())))})}function Rt(){return new ee}var en=F(4671);function W(m,_){const f=arguments.length>=2;return x=>x.pipe(m?(0,at.h)((P,V)=>m(P,V,x)):en.y,(0,dt.q)(1),f?wt(_):Ot(()=>new ee))}var te=F(4351),Y=F(8505),we=F(262);function fe(m,_){return(0,gt.e)(function Se(m,_,f,x,P){return(V,K)=>{let je=f,yt=_,Vt=0;V.subscribe((0,Tt.x)(K,Jt=>{const ti=Vt++;yt=je?m(yt,Jt,ti):(je=!0,Jt),x&&K.next(yt)},P&&(()=>{je&&K.next(yt),K.complete()})))}}(m,_,arguments.length>=2,!0))}function me(m){return m<=0?()=>it.E:(0,gt.e)((_,f)=>{let x=[];_.subscribe((0,Tt.x)(f,P=>{x.push(P),m<x.length&&x.shift()},()=>{for(const P of x)f.next(P);f.complete()},void 0,()=>{x=null}))})}function Ve(m,_){const f=arguments.length>=2;return x=>x.pipe(m?(0,at.h)((P,V)=>m(P,V,x)):en.y,me(1),f?wt(_):Ot(()=>new ee))}var Q=F(8746),Ee=F(8189),Ue=F(1481);const Ye="primary",pt=Symbol("RouteTitle");class zt{constructor(_){this.params=_||{}}has(_){return Object.prototype.hasOwnProperty.call(this.params,_)}get(_){if(this.has(_)){const f=this.params[_];return Array.isArray(f)?f[0]:f}return null}getAll(_){if(this.has(_)){const f=this.params[_];return Array.isArray(f)?f:[f]}return[]}get keys(){return Object.keys(this.params)}}function Kt(m){return new zt(m)}function dn(m,_,f){const x=f.path.split("/");if(x.length>m.length||"full"===f.pathMatch&&(_.hasChildren()||x.length<m.length))return null;const P={};for(let V=0;V<x.length;V++){const K=x[V],je=m[V];if(K.startsWith(":"))P[K.substring(1)]=je;else if(K!==je.path)return null}return{consumed:m.slice(0,x.length),posParams:P}}function $t(m,_){const f=m?Object.keys(m):void 0,x=_?Object.keys(_):void 0;if(!f||!x||f.length!=x.length)return!1;let P;for(let V=0;V<f.length;V++)if(P=f[V],!St(m[P],_[P]))return!1;return!0}function St(m,_){if(Array.isArray(m)&&Array.isArray(_)){if(m.length!==_.length)return!1;const f=[...m].sort(),x=[..._].sort();return f.every((P,V)=>x[V]===P)}return m===_}function Un(m){return Array.prototype.concat.apply([],m)}function ln(m){return m.length>0?m[m.length-1]:null}function Bn(m,_){for(const f in m)m.hasOwnProperty(f)&&_(m[f],f)}function Wt(m){return(0,w.CqO)(m)?m:(0,w.QGY)(m)?(0,D.D)(Promise.resolve(m)):(0,ue.of)(m)}const Xi=!1,Kr={exact:function Dn(m,_,f){if(!Jn(m.segments,_.segments)||!Li(m.segments,_.segments,f)||m.numberOfChildren!==_.numberOfChildren)return!1;for(const x in _.children)if(!m.children[x]||!Dn(m.children[x],_.children[x],f))return!1;return!0},subset:Gt},ai={exact:function fr(m,_){return $t(m,_)},subset:function pn(m,_){return Object.keys(_).length<=Object.keys(m).length&&Object.keys(_).every(f=>St(m[f],_[f]))},ignored:()=>!0};function Wi(m,_,f){return Kr[f.paths](m.root,_.root,f.matrixParams)&&ai[f.queryParams](m.queryParams,_.queryParams)&&!("exact"===f.fragment&&m.fragment!==_.fragment)}function Gt(m,_,f){return Gi(m,_,_.segments,f)}function Gi(m,_,f,x){if(m.segments.length>f.length){const P=m.segments.slice(0,f.length);return!(!Jn(P,f)||_.hasChildren()||!Li(P,f,x))}if(m.segments.length===f.length){if(!Jn(m.segments,f)||!Li(m.segments,f,x))return!1;for(const P in _.children)if(!m.children[P]||!Gt(m.children[P],_.children[P],x))return!1;return!0}{const P=f.slice(0,m.segments.length),V=f.slice(m.segments.length);return!!(Jn(m.segments,P)&&Li(m.segments,P,x)&&m.children[Ye])&&Gi(m.children[Ye],_,V,x)}}function Li(m,_,f){return _.every((x,P)=>ai[f](m[P].parameters,x.parameters))}class ri{constructor(_=new gn([],{}),f={},x=null){this.root=_,this.queryParams=f,this.fragment=x}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kt(this.queryParams)),this._queryParamMap}toString(){return Ft.serialize(this)}}class gn{constructor(_,f){this.segments=_,this.children=f,this.parent=null,Bn(f,(x,P)=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Re(this)}}class Ci{constructor(_,f){this.path=_,this.parameters=f}get parameterMap(){return this._parameterMap||(this._parameterMap=Kt(this.parameters)),this._parameterMap}toString(){return Hn(this)}}function Jn(m,_){return m.length===_.length&&m.every((f,x)=>f.path===_[x].path)}let In=(()=>{class m{}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=w.Yz7({token:m,factory:function(){return new Ii},providedIn:"root"}),m})();class Ii{parse(_){const f=new ht(_);return new ri(f.parseRootSegment(),f.parseQueryParams(),f.parseFragment())}serialize(_){const f=`/${Be(_.root,!0)}`,x=function un(m){const _=Object.keys(m).map(f=>{const x=m[f];return Array.isArray(x)?x.map(P=>`${re(f)}=${re(P)}`).join("&"):`${re(f)}=${re(x)}`}).filter(f=>!!f);return _.length?`?${_.join("&")}`:""}(_.queryParams);return`${f}${x}${"string"==typeof _.fragment?`#${function Me(m){return encodeURI(m)}(_.fragment)}`:""}`}}const Ft=new Ii;function Re(m){return m.segments.map(_=>Hn(_)).join("/")}function Be(m,_){if(!m.hasChildren())return Re(m);if(_){const f=m.children[Ye]?Be(m.children[Ye],!1):"",x=[];return Bn(m.children,(P,V)=>{V!==Ye&&x.push(`${V}:${Be(P,!1)}`)}),x.length>0?`${f}(${x.join("//")})`:f}{const f=function Fr(m,_){let f=[];return Bn(m.children,(x,P)=>{P===Ye&&(f=f.concat(_(x,P)))}),Bn(m.children,(x,P)=>{P!==Ye&&(f=f.concat(_(x,P)))}),f}(m,(x,P)=>P===Ye?[Be(m.children[Ye],!1)]:[`${P}:${Be(x,!1)}`]);return 1===Object.keys(m.children).length&&null!=m.children[Ye]?`${Re(m)}/${f[0]}`:`${Re(m)}/(${f.join("//")})`}}function Te(m){return encodeURIComponent(m).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function re(m){return Te(m).replace(/%3B/gi,";")}function Et(m){return Te(m).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mt(m){return decodeURIComponent(m)}function _n(m){return mt(m.replace(/\+/g,"%20"))}function Hn(m){return`${Et(m.path)}${function Cn(m){return Object.keys(m).map(_=>`;${Et(_)}=${Et(m[_])}`).join("")}(m.parameters)}`}const Zn=/^[^\/()?;=#]+/;function ei(m){const _=m.match(Zn);return _?_[0]:""}const Oe=/^[^=?&#]+/,ie=/^[^&#]+/;class ht{constructor(_){this.url=_,this.remaining=_}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new gn([],{}):new gn([],this.parseChildren())}parseQueryParams(){const _={};if(this.consumeOptional("?"))do{this.parseQueryParam(_)}while(this.consumeOptional("&"));return _}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const _=[];for(this.peekStartsWith("(")||_.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),_.push(this.parseSegment());let f={};this.peekStartsWith("/(")&&(this.capture("/"),f=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(_.length>0||Object.keys(f).length>0)&&(x[Ye]=new gn(_,f)),x}parseSegment(){const _=ei(this.remaining);if(""===_&&this.peekStartsWith(";"))throw new w.vHH(4009,Xi);return this.capture(_),new Ci(mt(_),this.parseMatrixParams())}parseMatrixParams(){const _={};for(;this.consumeOptional(";");)this.parseParam(_);return _}parseParam(_){const f=ei(this.remaining);if(!f)return;this.capture(f);let x="";if(this.consumeOptional("=")){const P=ei(this.remaining);P&&(x=P,this.capture(x))}_[mt(f)]=mt(x)}parseQueryParam(_){const f=function Ie(m){const _=m.match(Oe);return _?_[0]:""}(this.remaining);if(!f)return;this.capture(f);let x="";if(this.consumeOptional("=")){const K=function Ne(m){const _=m.match(ie);return _?_[0]:""}(this.remaining);K&&(x=K,this.capture(x))}const P=_n(f),V=_n(x);if(_.hasOwnProperty(P)){let K=_[P];Array.isArray(K)||(K=[K],_[P]=K),K.push(V)}else _[P]=V}parseParens(_){const f={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=ei(this.remaining),P=this.remaining[x.length];if("/"!==P&&")"!==P&&";"!==P)throw new w.vHH(4010,Xi);let V;x.indexOf(":")>-1?(V=x.slice(0,x.indexOf(":")),this.capture(V),this.capture(":")):_&&(V=Ye);const K=this.parseChildren();f[V]=1===Object.keys(K).length?K[Ye]:new gn([],K),this.consumeOptional("//")}return f}peekStartsWith(_){return this.remaining.startsWith(_)}consumeOptional(_){return!!this.peekStartsWith(_)&&(this.remaining=this.remaining.substring(_.length),!0)}capture(_){if(!this.consumeOptional(_))throw new w.vHH(4011,Xi)}}function Lt(m){return m.segments.length>0?new gn([],{[Ye]:m}):m}function tn(m){const _={};for(const x of Object.keys(m.children)){const V=tn(m.children[x]);(V.segments.length>0||V.hasChildren())&&(_[x]=V)}return function Fe(m){if(1===m.numberOfChildren&&m.children[Ye]){const _=m.children[Ye];return new gn(m.segments.concat(_.segments),_.children)}return m}(new gn(m.segments,_))}function be(m){return m instanceof ri}const se=!1;function an(m,_,f,x,P){if(0===f.length)return ci(_.root,_.root,_.root,x,P);const V=function Ni(m){if("string"==typeof m[0]&&1===m.length&&"/"===m[0])return new xi(!0,0,m);let _=0,f=!1;const x=m.reduce((P,V,K)=>{if("object"==typeof V&&null!=V){if(V.outlets){const je={};return Bn(V.outlets,(yt,Vt)=>{je[Vt]="string"==typeof yt?yt.split("/"):yt}),[...P,{outlets:je}]}if(V.segmentPath)return[...P,V.segmentPath]}return"string"!=typeof V?[...P,V]:0===K?(V.split("/").forEach((je,yt)=>{0==yt&&"."===je||(0==yt&&""===je?f=!0:".."===je?_++:""!=je&&P.push(je))}),P):[...P,V]},[]);return new xi(f,_,x)}(f);return V.toRoot()?ci(_.root,_.root,new gn([],{}),x,P):function K(yt){const Vt=function br(m,_,f,x){if(m.isAbsolute)return new Er(_.root,!0,0);if(-1===x)return new Er(f,f===_.root,0);return function Qt(m,_,f){let x=m,P=_,V=f;for(;V>P;){if(V-=P,x=x.parent,!x)throw new w.vHH(4005,se&&"Invalid number of '../'");P=x.segments.length}return new Er(x,!1,P-V)}(f,x+(An(m.commands[0])?0:1),m.numberOfDoubleDots)}(V,_,m.snapshot?._urlSegment,yt),Jt=Vt.processChildren?Ti(Vt.segmentGroup,Vt.index,V.commands):ui(Vt.segmentGroup,Vt.index,V.commands);return ci(_.root,Vt.segmentGroup,Jt,x,P)}(m.snapshot?._lastPathIndex)}function An(m){return"object"==typeof m&&null!=m&&!m.outlets&&!m.segmentPath}function bi(m){return"object"==typeof m&&null!=m&&m.outlets}function ci(m,_,f,x,P){let K,V={};x&&Bn(x,(yt,Vt)=>{V[Vt]=Array.isArray(yt)?yt.map(Jt=>`${Jt}`):`${yt}`}),K=m===_?f:$n(m,_,f);const je=Lt(tn(K));return new ri(je,V,P)}function $n(m,_,f){const x={};return Bn(m.children,(P,V)=>{x[V]=P===_?f:$n(P,_,f)}),new gn(m.segments,x)}class xi{constructor(_,f,x){if(this.isAbsolute=_,this.numberOfDoubleDots=f,this.commands=x,_&&x.length>0&&An(x[0]))throw new w.vHH(4003,se&&"Root segment cannot have matrix parameters");const P=x.find(bi);if(P&&P!==ln(x))throw new w.vHH(4004,se&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Er{constructor(_,f,x){this.segmentGroup=_,this.processChildren=f,this.index=x}}function ui(m,_,f){if(m||(m=new gn([],{})),0===m.segments.length&&m.hasChildren())return Ti(m,_,f);const x=function nr(m,_,f){let x=0,P=_;const V={match:!1,pathIndex:0,commandIndex:0};for(;P<m.segments.length;){if(x>=f.length)return V;const K=m.segments[P],je=f[x];if(bi(je))break;const yt=`${je}`,Vt=x<f.length-1?f[x+1]:null;if(P>0&&void 0===yt)break;if(yt&&Vt&&"object"==typeof Vt&&void 0===Vt.outlets){if(!Ar(yt,Vt,K))return V;x+=2}else{if(!Ar(yt,{},K))return V;x++}P++}return{match:!0,pathIndex:P,commandIndex:x}}(m,_,f),P=f.slice(x.commandIndex);if(x.match&&x.pathIndex<m.segments.length){const V=new gn(m.segments.slice(0,x.pathIndex),{});return V.children[Ye]=new gn(m.segments.slice(x.pathIndex),m.children),Ti(V,0,P)}return x.match&&0===P.length?new gn(m.segments,{}):x.match&&!m.hasChildren()?pi(m,_,f):x.match?Ti(m,0,P):pi(m,_,f)}function Ti(m,_,f){if(0===f.length)return new gn(m.segments,{});{const x=function Sn(m){return bi(m[0])?m[0].outlets:{[Ye]:m}}(f),P={};return!x[Ye]&&m.children[Ye]&&1===m.numberOfChildren&&0===m.children[Ye].segments.length?Ti(m.children[Ye],_,f):(Bn(x,(V,K)=>{"string"==typeof V&&(V=[V]),null!==V&&(P[K]=ui(m.children[K],_,V))}),Bn(m.children,(V,K)=>{void 0===x[K]&&(P[K]=V)}),new gn(m.segments,P))}}function pi(m,_,f){const x=m.segments.slice(0,_);let P=0;for(;P<f.length;){const V=f[P];if(bi(V)){const yt=Sr(V.outlets);return new gn(x,yt)}if(0===P&&An(f[0])){x.push(new Ci(m.segments[_].path,mi(f[0]))),P++;continue}const K=bi(V)?V.outlets[Ye]:`${V}`,je=P<f.length-1?f[P+1]:null;K&&je&&An(je)?(x.push(new Ci(K,mi(je))),P+=2):(x.push(new Ci(K,{})),P++)}return new gn(x,{})}function Sr(m){const _={};return Bn(m,(f,x)=>{"string"==typeof f&&(f=[f]),null!==f&&(_[x]=pi(new gn([],{}),0,f))}),_}function mi(m){const _={};return Bn(m,(f,x)=>_[x]=`${f}`),_}function Ar(m,_,f){return m==f.path&&$t(_,f.parameters)}const wi="imperative";class yn{constructor(_,f){this.id=_,this.url=f}}class Lr extends yn{constructor(_,f,x="imperative",P=null){super(_,f),this.type=0,this.navigationTrigger=x,this.restoredState=P}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mr extends yn{constructor(_,f,x){super(_,f),this.urlAfterRedirects=x,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ys extends yn{constructor(_,f,x,P){super(_,f),this.reason=x,this.code=P,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pr extends yn{constructor(_,f,x,P){super(_,f),this.reason=x,this.code=P,this.type=16}}class Si extends yn{constructor(_,f,x,P){super(_,f),this.error=x,this.target=P,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wr extends yn{constructor(_,f,x,P){super(_,f),this.urlAfterRedirects=x,this.state=P,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zr extends yn{constructor(_,f,x,P){super(_,f),this.urlAfterRedirects=x,this.state=P,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yi extends yn{constructor(_,f,x,P,V){super(_,f),this.urlAfterRedirects=x,this.state=P,this.shouldActivate=V,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $r extends yn{constructor(_,f,x,P){super(_,f),this.urlAfterRedirects=x,this.state=P,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Co extends yn{constructor(_,f,x,P){super(_,f),this.urlAfterRedirects=x,this.state=P,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _i{constructor(_){this.route=_,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Sa{constructor(_){this.route=_,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class no{constructor(_){this.snapshot=_,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gr{constructor(_){this.snapshot=_,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zr{constructor(_){this.snapshot=_,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class js{constructor(_){this.snapshot=_,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ri{constructor(_,f,x){this.routerEvent=_,this.position=f,this.anchor=x,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ar=(()=>{class m{createUrlTree(f,x,P,V,K,je){return an(f||x.root,P,V,K,je)}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=w.Yz7({token:m,factory:m.\u0275fac}),m})(),io=(()=>{class m{}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=w.Yz7({token:m,factory:function(_){return ar.\u0275fac(_)},providedIn:"root"}),m})();class rs{constructor(_){this._root=_}get root(){return this._root.value}parent(_){const f=this.pathFromRoot(_);return f.length>1?f[f.length-2]:null}children(_){const f=Ir(_,this._root);return f?f.children.map(x=>x.value):[]}firstChild(_){const f=Ir(_,this._root);return f&&f.children.length>0?f.children[0].value:null}siblings(_){const f=lr(_,this._root);return f.length<2?[]:f[f.length-2].children.map(P=>P.value).filter(P=>P!==_)}pathFromRoot(_){return lr(_,this._root).map(f=>f.value)}}function Ir(m,_){if(m===_.value)return _;for(const f of _.children){const x=Ir(m,f);if(x)return x}return null}function lr(m,_){if(m===_.value)return[_];for(const f of _.children){const x=lr(m,f);if(x.length)return x.unshift(_),x}return[]}class Nr{constructor(_,f){this.value=_,this.children=f}toString(){return`TreeNode(${this.value})`}}function vs(m){const _={};return m&&m.children.forEach(f=>_[f.value.outlet]=f),_}class zs extends rs{constructor(_,f){super(_),this.snapshot=f,ro(this,_)}toString(){return this.snapshot.toString()}}function Ls(m,_){const f=function xo(m,_){const K=new bs([],{},{},"",{},Ye,_,null,m.root,-1,{});return new Vi("",new Nr(K,[]))}(m,_),x=new he.X([new Ci("",{})]),P=new he.X({}),V=new he.X({}),K=new he.X({}),je=new he.X(""),yt=new Es(x,P,K,je,V,Ye,_,f.root);return yt.snapshot=f.root,new zs(new Nr(yt,[]),f)}class Es{constructor(_,f,x,P,V,K,je,yt){this.url=_,this.params=f,this.queryParams=x,this.fragment=P,this.data=V,this.outlet=K,this.component=je,this.title=this.data?.pipe((0,Xe.U)(Vt=>Vt[pt]))??(0,ue.of)(void 0),this._futureSnapshot=yt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xe.U)(_=>Kt(_)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xe.U)(_=>Kt(_)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $s(m,_="emptyOnly"){const f=m.pathFromRoot;let x=0;if("always"!==_)for(x=f.length-1;x>=1;){const P=f[x],V=f[x-1];if(P.routeConfig&&""===P.routeConfig.path)x--;else{if(V.component)break;x--}}return function jo(m){return m.reduce((_,f)=>({params:{..._.params,...f.params},data:{..._.data,...f.data},resolve:{...f.data,..._.resolve,...f.routeConfig?.data,...f._resolvedData}}),{params:{},data:{},resolve:{}})}(f.slice(x))}class bs{get title(){return this.data?.[pt]}constructor(_,f,x,P,V,K,je,yt,Vt,Jt,ti){this.url=_,this.params=f,this.queryParams=x,this.fragment=P,this.data=V,this.outlet=K,this.component=je,this.routeConfig=yt,this._urlSegment=Vt,this._lastPathIndex=Jt,this._resolve=ti}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Kt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vi extends rs{constructor(_,f){super(f),this.url=_,ro(this,f)}toString(){return Ns(this._root)}}function ro(m,_){_.value._routerState=m,_.children.forEach(f=>ro(m,f))}function Ns(m){const _=m.children.length>0?` { ${m.children.map(Ns).join(", ")} } `:"";return`${m.value}${_}`}function qr(m){if(m.snapshot){const _=m.snapshot,f=m._futureSnapshot;m.snapshot=f,$t(_.queryParams,f.queryParams)||m.queryParams.next(f.queryParams),_.fragment!==f.fragment&&m.fragment.next(f.fragment),$t(_.params,f.params)||m.params.next(f.params),function vn(m,_){if(m.length!==_.length)return!1;for(let f=0;f<m.length;++f)if(!$t(m[f],_[f]))return!1;return!0}(_.url,f.url)||m.url.next(f.url),$t(_.data,f.data)||m.data.next(f.data)}else m.snapshot=m._futureSnapshot,m.data.next(m._futureSnapshot.data)}function ws(m,_){const f=$t(m.params,_.params)&&function is(m,_){return Jn(m,_)&&m.every((f,x)=>$t(f.parameters,_[x].parameters))}(m.url,_.url);return f&&!(!m.parent!=!_.parent)&&(!m.parent||ws(m.parent,_.parent))}function ks(m,_,f){if(f&&m.shouldReuseRoute(_.value,f.value.snapshot)){const x=f.value;x._futureSnapshot=_.value;const P=function so(m,_,f){return _.children.map(x=>{for(const P of f.children)if(m.shouldReuseRoute(x.value,P.value.snapshot))return ks(m,x,P);return ks(m,x)})}(m,_,f);return new Nr(x,P)}{if(m.shouldAttach(_.value)){const V=m.retrieve(_.value);if(null!==V){const K=V.route;return K.value._futureSnapshot=_.value,K.children=_.children.map(je=>ks(m,je)),K}}const x=function Ds(m){return new Es(new he.X(m.url),new he.X(m.params),new he.X(m.queryParams),new he.X(m.fragment),new he.X(m.data),m.outlet,m.component,m)}(_.value),P=_.children.map(V=>ks(m,V));return new Nr(x,P)}}const Ws="ngNavigationCancelingError";function oo(m,_){const{redirectTo:f,navigationBehaviorOptions:x}=be(_)?{redirectTo:_,navigationBehaviorOptions:void 0}:_,P=To(!1,0,_);return P.url=f,P.navigationBehaviorOptions=x,P}function To(m,_,f){const x=new Error("NavigationCancelingError: "+(m||""));return x[Ws]=!0,x.cancellationCode=_,f&&(x.url=f),x}function Rr(m){return Ys(m)&&be(m.url)}function Ys(m){return m&&m[Ws]}class ao{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ji,this.attachRef=null}}let ji=(()=>{class m{constructor(){this.contexts=new Map}onChildOutletCreated(f,x){const P=this.getOrCreateContext(f);P.outlet=x,this.contexts.set(f,P)}onChildOutletDestroyed(f){const x=this.getContext(f);x&&(x.outlet=null,x.attachRef=null)}onOutletDeactivated(){const f=this.contexts;return this.contexts=new Map,f}onOutletReAttached(f){this.contexts=f}getOrCreateContext(f){let x=this.getContext(f);return x||(x=new ao,this.contexts.set(f,x)),x}getContext(f){return this.contexts.get(f)||null}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=w.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();const ss=!1;let Qr=(()=>{class m{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ye,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.parentContexts=(0,w.f3M)(ji),this.location=(0,w.f3M)(w.s_b),this.changeDetector=(0,w.f3M)(w.sBO),this.environmentInjector=(0,w.f3M)(w.lqb)}ngOnChanges(f){if(f.name){const{firstChange:x,previousValue:P}=f.name;if(x)return;this.isTrackedInParentContexts(P)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(P)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(f){return this.parentContexts.getContext(f)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const f=this.parentContexts.getContext(this.name);f?.route&&(f.attachRef?this.attach(f.attachRef,f.route):this.activateWith(f.route,f.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w.vHH(4012,ss);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w.vHH(4012,ss);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w.vHH(4012,ss);this.location.detach();const f=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(f.instance),f}attach(f,x){this.activated=f,this._activatedRoute=x,this.location.insert(f.hostView),this.attachEvents.emit(f.instance)}deactivate(){if(this.activated){const f=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(f)}}activateWith(f,x){if(this.isActivated)throw new w.vHH(4013,ss);this._activatedRoute=f;const P=this.location,K=f.snapshot.component,je=this.parentContexts.getOrCreateContext(this.name).children,yt=new Bs(f,je,P.injector);if(x&&function lo(m){return!!m.resolveComponentFactory}(x)){const Vt=x.resolveComponentFactory(K);this.activated=P.createComponent(Vt,P.length,yt)}else this.activated=P.createComponent(K,{index:P.length,injector:yt,environmentInjector:x??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275dir=w.lG2({type:m,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[w.TTD]}),m})();class Bs{constructor(_,f,x){this.route=_,this.childContexts=f,this.parent=x}get(_,f){return _===Es?this.route:_===ji?this.childContexts:this.parent.get(_,f)}}let Xs=(()=>{class m{}return m.\u0275fac=function(f){return new(f||m)},m.\u0275cmp=w.Xpm({type:m,selectors:[["ng-component"]],standalone:!0,features:[w.jDz],decls:1,vars:0,template:function(f,x){1&f&&w._UZ(0,"router-outlet")},dependencies:[Qr],encapsulation:2}),m})();function Cs(m,_){return m.providers&&!m._injector&&(m._injector=(0,w.MMx)(m.providers,_,`Route: ${m.path}`)),m._injector??_}function Br(m){const _=m.children&&m.children.map(Br),f=_?{...m,children:_}:{...m};return!f.component&&!f.loadComponent&&(_||f.loadChildren)&&f.outlet&&f.outlet!==Ye&&(f.component=Xs),f}function Zi(m){return m.outlet||Ye}function X(m,_){const f=m.filter(x=>Zi(x)===_);return f.push(...m.filter(x=>Zi(x)!==_)),f}function I(m){if(!m)return null;if(m.routeConfig?._injector)return m.routeConfig._injector;for(let _=m.parent;_;_=_.parent){const f=_.routeConfig;if(f?._loadedInjector)return f._loadedInjector;if(f?._injector)return f._injector}return null}class N{constructor(_,f,x,P){this.routeReuseStrategy=_,this.futureState=f,this.currState=x,this.forwardEvent=P}activate(_){const f=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(f,x,_),qr(this.futureState.root),this.activateChildRoutes(f,x,_)}deactivateChildRoutes(_,f,x){const P=vs(f);_.children.forEach(V=>{const K=V.value.outlet;this.deactivateRoutes(V,P[K],x),delete P[K]}),Bn(P,(V,K)=>{this.deactivateRouteAndItsChildren(V,x)})}deactivateRoutes(_,f,x){const P=_.value,V=f?f.value:null;if(P===V)if(P.component){const K=x.getContext(P.outlet);K&&this.deactivateChildRoutes(_,f,K.children)}else this.deactivateChildRoutes(_,f,x);else V&&this.deactivateRouteAndItsChildren(f,x)}deactivateRouteAndItsChildren(_,f){_.value.component&&this.routeReuseStrategy.shouldDetach(_.value.snapshot)?this.detachAndStoreRouteSubtree(_,f):this.deactivateRouteAndOutlet(_,f)}detachAndStoreRouteSubtree(_,f){const x=f.getContext(_.value.outlet),P=x&&_.value.component?x.children:f,V=vs(_);for(const K of Object.keys(V))this.deactivateRouteAndItsChildren(V[K],P);if(x&&x.outlet){const K=x.outlet.detach(),je=x.children.onOutletDeactivated();this.routeReuseStrategy.store(_.value.snapshot,{componentRef:K,route:_,contexts:je})}}deactivateRouteAndOutlet(_,f){const x=f.getContext(_.value.outlet),P=x&&_.value.component?x.children:f,V=vs(_);for(const K of Object.keys(V))this.deactivateRouteAndItsChildren(V[K],P);x&&x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated(),x.attachRef=null,x.resolver=null,x.route=null)}activateChildRoutes(_,f,x){const P=vs(f);_.children.forEach(V=>{this.activateRoutes(V,P[V.value.outlet],x),this.forwardEvent(new js(V.value.snapshot))}),_.children.length&&this.forwardEvent(new gr(_.value.snapshot))}activateRoutes(_,f,x){const P=_.value,V=f?f.value:null;if(qr(P),P===V)if(P.component){const K=x.getOrCreateContext(P.outlet);this.activateChildRoutes(_,f,K.children)}else this.activateChildRoutes(_,f,x);else if(P.component){const K=x.getOrCreateContext(P.outlet);if(this.routeReuseStrategy.shouldAttach(P.snapshot)){const je=this.routeReuseStrategy.retrieve(P.snapshot);this.routeReuseStrategy.store(P.snapshot,null),K.children.onOutletReAttached(je.contexts),K.attachRef=je.componentRef,K.route=je.route.value,K.outlet&&K.outlet.attach(je.componentRef,je.route.value),qr(je.route.value),this.activateChildRoutes(_,null,K.children)}else{const je=I(P.snapshot),yt=je?.get(w._Vd)??null;K.attachRef=null,K.route=P,K.resolver=yt,K.injector=je,K.outlet&&K.outlet.activateWith(P,K.injector),this.activateChildRoutes(_,null,K.children)}}else this.activateChildRoutes(_,null,x)}}class q{constructor(_){this.path=_,this.route=this.path[this.path.length-1]}}class ye{constructor(_,f){this.component=_,this.route=f}}function Qe(m,_,f){const x=m._root;return on(x,_?_._root:null,f,[x.value])}function ct(m,_){const f=Symbol(),x=_.get(m,f);return x===f?"function"!=typeof m||(0,w.Z0I)(m)?_.get(m):m:x}function on(m,_,f,x,P={canDeactivateChecks:[],canActivateChecks:[]}){const V=vs(_);return m.children.forEach(K=>{(function bn(m,_,f,x,P={canDeactivateChecks:[],canActivateChecks:[]}){const V=m.value,K=_?_.value:null,je=f?f.getContext(m.value.outlet):null;if(K&&V.routeConfig===K.routeConfig){const yt=function qn(m,_,f){if("function"==typeof f)return f(m,_);switch(f){case"pathParamsChange":return!Jn(m.url,_.url);case"pathParamsOrQueryParamsChange":return!Jn(m.url,_.url)||!$t(m.queryParams,_.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ws(m,_)||!$t(m.queryParams,_.queryParams);default:return!ws(m,_)}}(K,V,V.routeConfig.runGuardsAndResolvers);yt?P.canActivateChecks.push(new q(x)):(V.data=K.data,V._resolvedData=K._resolvedData),on(m,_,V.component?je?je.children:null:f,x,P),yt&&je&&je.outlet&&je.outlet.isActivated&&P.canDeactivateChecks.push(new ye(je.outlet.component,K))}else K&&mr(_,je,P),P.canActivateChecks.push(new q(x)),on(m,null,V.component?je?je.children:null:f,x,P)})(K,V[K.value.outlet],f,x.concat([K.value]),P),delete V[K.value.outlet]}),Bn(V,(K,je)=>mr(K,f.getContext(je),P)),P}function mr(m,_,f){const x=vs(m),P=m.value;Bn(x,(V,K)=>{mr(V,P.component?_?_.children.getContext(K):null:_,f)}),f.canDeactivateChecks.push(new ye(P.component&&_&&_.outlet&&_.outlet.isActivated?_.outlet.component:null,P))}function ki(m){return"function"==typeof m}function Ao(m){return m instanceof ee||"EmptyError"===m?.name}const as=Symbol("INITIAL_VALUE");function ur(){return(0,ne.w)(m=>(0,ve.a)(m.map(_=>_.pipe((0,dt.q)(1),(0,He.O)(as)))).pipe((0,Xe.U)(_=>{for(const f of _)if(!0!==f){if(f===as)return as;if(!1===f||f instanceof ri)return f}return!0}),(0,at.h)(_=>_!==as),(0,dt.q)(1)))}function rr(m){return(0,Le.z)((0,Y.b)(_=>{if(be(_))throw oo(0,_)}),(0,Xe.U)(_=>!0===_))}const Ss={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cs(m,_,f,x,P){const V=uo(m,_,f);return V.matched?function Ia(m,_,f,x){const P=_.canMatch;if(!P||0===P.length)return(0,ue.of)(!0);const V=P.map(K=>{const je=ct(K,m);return Wt(function Di(m){return m&&ki(m.canMatch)}(je)?je.canMatch(_,f):m.runInContext(()=>je(_,f)))});return(0,ue.of)(V).pipe(ur(),rr())}(x=Cs(_,x),_,f).pipe((0,Xe.U)(K=>!0===K?V:{...Ss})):(0,ue.of)(V)}function uo(m,_,f){if(""===_.path)return"full"===_.pathMatch&&(m.hasChildren()||f.length>0)?{...Ss}:{matched:!0,consumedSegments:[],remainingSegments:f,parameters:{},positionalParamSegments:{}};const P=(_.matcher||dn)(f,m,_);if(!P)return{...Ss};const V={};Bn(P.posParams,(je,yt)=>{V[yt]=je.path});const K=P.consumed.length>0?{...V,...P.consumed[P.consumed.length-1].parameters}:V;return{matched:!0,consumedSegments:P.consumed,remainingSegments:f.slice(P.consumed.length),parameters:K,positionalParamSegments:P.posParams??{}}}function Or(m,_,f,x){if(f.length>0&&function Ks(m,_,f){return f.some(x=>hr(m,_,x)&&Zi(x)!==Ye)}(m,f,x)){const V=new gn(_,function Hs(m,_,f,x){const P={};P[Ye]=x,x._sourceSegment=m,x._segmentIndexShift=_.length;for(const V of f)if(""===V.path&&Zi(V)!==Ye){const K=new gn([],{});K._sourceSegment=m,K._segmentIndexShift=_.length,P[Zi(V)]=K}return P}(m,_,x,new gn(f,m.children)));return V._sourceSegment=m,V._segmentIndexShift=_.length,{segmentGroup:V,slicedSegments:[]}}if(0===f.length&&function Cr(m,_,f){return f.some(x=>hr(m,_,x))}(m,f,x)){const V=new gn(m.segments,function Io(m,_,f,x,P){const V={};for(const K of x)if(hr(m,f,K)&&!P[Zi(K)]){const je=new gn([],{});je._sourceSegment=m,je._segmentIndexShift=_.length,V[Zi(K)]=je}return{...P,...V}}(m,_,f,x,m.children));return V._sourceSegment=m,V._segmentIndexShift=_.length,{segmentGroup:V,slicedSegments:f}}const P=new gn(m.segments,m.children);return P._sourceSegment=m,P._segmentIndexShift=_.length,{segmentGroup:P,slicedSegments:f}}function hr(m,_,f){return(!(m.hasChildren()||_.length>0)||"full"!==f.pathMatch)&&""===f.path}function Yo(m,_,f,x){return!!(Zi(m)===x||x!==Ye&&hr(_,f,m))&&("**"===m.path||uo(_,m,f).matched)}function aa(m,_,f){return 0===_.length&&!m.children[f]}const Zs=!1;class ho{constructor(_){this.segmentGroup=_||null}}class U{constructor(_){this.urlTree=_}}function g(m){return(0,Pe._)(new ho(m))}function v(m){return(0,Pe._)(new U(m))}class _e{constructor(_,f,x,P,V){this.injector=_,this.configLoader=f,this.urlSerializer=x,this.urlTree=P,this.config=V,this.allowRedirects=!0}apply(){const _=Or(this.urlTree.root,[],[],this.config).segmentGroup,f=new gn(_.segments,_.children);return this.expandSegmentGroup(this.injector,this.config,f,Ye).pipe((0,Xe.U)(V=>this.createUrlTree(tn(V),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,we.K)(V=>{if(V instanceof U)return this.allowRedirects=!1,this.match(V.urlTree);throw V instanceof ho?this.noMatchError(V):V}))}match(_){return this.expandSegmentGroup(this.injector,this.config,_.root,Ye).pipe((0,Xe.U)(P=>this.createUrlTree(tn(P),_.queryParams,_.fragment))).pipe((0,we.K)(P=>{throw P instanceof ho?this.noMatchError(P):P}))}noMatchError(_){return new w.vHH(4002,Zs)}createUrlTree(_,f,x){const P=Lt(_);return new ri(P,f,x)}expandSegmentGroup(_,f,x,P){return 0===x.segments.length&&x.hasChildren()?this.expandChildren(_,f,x).pipe((0,Xe.U)(V=>new gn([],V))):this.expandSegment(_,x,f,x.segments,P,!0)}expandChildren(_,f,x){const P=[];for(const V of Object.keys(x.children))"primary"===V?P.unshift(V):P.push(V);return(0,D.D)(P).pipe((0,te.b)(V=>{const K=x.children[V],je=X(f,V);return this.expandSegmentGroup(_,je,K,V).pipe((0,Xe.U)(yt=>({segment:yt,outlet:V})))}),fe((V,K)=>(V[K.outlet]=K.segment,V),{}),Ve())}expandSegment(_,f,x,P,V,K){return(0,D.D)(x).pipe((0,te.b)(je=>this.expandSegmentAgainstRoute(_,f,x,je,P,V,K).pipe((0,we.K)(Vt=>{if(Vt instanceof ho)return(0,ue.of)(null);throw Vt}))),W(je=>!!je),(0,we.K)((je,yt)=>{if(Ao(je))return aa(f,P,V)?(0,ue.of)(new gn([],{})):g(f);throw je}))}expandSegmentAgainstRoute(_,f,x,P,V,K,je){return Yo(P,f,V,K)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(_,f,P,V,K):je&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(_,f,x,P,V,K):g(f):g(f)}expandSegmentAgainstRouteUsingRedirect(_,f,x,P,V,K){return"**"===P.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(_,x,P,K):this.expandRegularSegmentAgainstRouteUsingRedirect(_,f,x,P,V,K)}expandWildCardWithParamsAgainstRouteUsingRedirect(_,f,x,P){const V=this.applyRedirectCommands([],x.redirectTo,{});return x.redirectTo.startsWith("/")?v(V):this.lineralizeSegments(x,V).pipe((0,xe.z)(K=>{const je=new gn(K,{});return this.expandSegment(_,je,f,K,P,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(_,f,x,P,V,K){const{matched:je,consumedSegments:yt,remainingSegments:Vt,positionalParamSegments:Jt}=uo(f,P,V);if(!je)return g(f);const ti=this.applyRedirectCommands(yt,P.redirectTo,Jt);return P.redirectTo.startsWith("/")?v(ti):this.lineralizeSegments(P,ti).pipe((0,xe.z)(Ji=>this.expandSegment(_,f,x,Ji.concat(Vt),K,!1)))}matchSegmentAgainstRoute(_,f,x,P,V){return"**"===x.path?(_=Cs(x,_),x.loadChildren?(x._loadedRoutes?(0,ue.of)({routes:x._loadedRoutes,injector:x._loadedInjector}):this.configLoader.loadChildren(_,x)).pipe((0,Xe.U)(je=>(x._loadedRoutes=je.routes,x._loadedInjector=je.injector,new gn(P,{})))):(0,ue.of)(new gn(P,{}))):cs(f,x,P,_).pipe((0,ne.w)(({matched:K,consumedSegments:je,remainingSegments:yt})=>K?this.getChildConfig(_=x._injector??_,x,P).pipe((0,xe.z)(Jt=>{const ti=Jt.injector??_,Ji=Jt.routes,{segmentGroup:Yr,slicedSegments:qt}=Or(f,je,yt,Ji),yr=new gn(Yr.segments,Yr.children);if(0===qt.length&&yr.hasChildren())return this.expandChildren(ti,Ji,yr).pipe((0,Xe.U)(Jl=>new gn(je,Jl)));if(0===Ji.length&&0===qt.length)return(0,ue.of)(new gn(je,{}));const fs=Zi(x)===V;return this.expandSegment(ti,yr,Ji,qt,fs?Ye:V,!0).pipe((0,Xe.U)(Ba=>new gn(je.concat(Ba.segments),Ba.children)))})):g(f)))}getChildConfig(_,f,x){return f.children?(0,ue.of)({routes:f.children,injector:_}):f.loadChildren?void 0!==f._loadedRoutes?(0,ue.of)({routes:f._loadedRoutes,injector:f._loadedInjector}):function Pr(m,_,f,x){const P=_.canLoad;if(void 0===P||0===P.length)return(0,ue.of)(!0);const V=P.map(K=>{const je=ct(K,m);return Wt(function Dr(m){return m&&ki(m.canLoad)}(je)?je.canLoad(_,f):m.runInContext(()=>je(_,f)))});return(0,ue.of)(V).pipe(ur(),rr())}(_,f,x).pipe((0,xe.z)(P=>P?this.configLoader.loadChildren(_,f).pipe((0,Y.b)(V=>{f._loadedRoutes=V.routes,f._loadedInjector=V.injector})):function H(m){return(0,Pe._)(To(Zs,3))}())):(0,ue.of)({routes:[],injector:_})}lineralizeSegments(_,f){let x=[],P=f.root;for(;;){if(x=x.concat(P.segments),0===P.numberOfChildren)return(0,ue.of)(x);if(P.numberOfChildren>1||!P.children[Ye])return _.redirectTo,(0,Pe._)(new w.vHH(4e3,Zs));P=P.children[Ye]}}applyRedirectCommands(_,f,x){return this.applyRedirectCreateUrlTree(f,this.urlSerializer.parse(f),_,x)}applyRedirectCreateUrlTree(_,f,x,P){const V=this.createSegmentGroup(_,f.root,x,P);return new ri(V,this.createQueryParams(f.queryParams,this.urlTree.queryParams),f.fragment)}createQueryParams(_,f){const x={};return Bn(_,(P,V)=>{if("string"==typeof P&&P.startsWith(":")){const je=P.substring(1);x[V]=f[je]}else x[V]=P}),x}createSegmentGroup(_,f,x,P){const V=this.createSegments(_,f.segments,x,P);let K={};return Bn(f.children,(je,yt)=>{K[yt]=this.createSegmentGroup(_,je,x,P)}),new gn(V,K)}createSegments(_,f,x,P){return f.map(V=>V.path.startsWith(":")?this.findPosParam(_,V,P):this.findOrReturn(V,x))}findPosParam(_,f,x){const P=x[f.path.substring(1)];if(!P)throw new w.vHH(4001,Zs);return P}findOrReturn(_,f){let x=0;for(const P of f){if(P.path===_.path)return f.splice(x),P;x++}return _}}class ft{}class Xn{constructor(_,f,x,P,V,K,je){this.injector=_,this.rootComponentType=f,this.config=x,this.urlTree=P,this.url=V,this.paramsInheritanceStrategy=K,this.urlSerializer=je}recognize(){const _=Or(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,_,Ye).pipe((0,Xe.U)(f=>{if(null===f)return null;const x=new bs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ye,this.rootComponentType,null,this.urlTree.root,-1,{}),P=new Nr(x,f),V=new Vi(this.url,P);return this.inheritParamsAndData(V._root),V}))}inheritParamsAndData(_){const f=_.value,x=$s(f,this.paramsInheritanceStrategy);f.params=Object.freeze(x.params),f.data=Object.freeze(x.data),_.children.forEach(P=>this.inheritParamsAndData(P))}processSegmentGroup(_,f,x,P){return 0===x.segments.length&&x.hasChildren()?this.processChildren(_,f,x):this.processSegment(_,f,x,x.segments,P)}processChildren(_,f,x){return(0,D.D)(Object.keys(x.children)).pipe((0,te.b)(P=>{const V=x.children[P],K=X(f,P);return this.processSegmentGroup(_,K,V,P)}),fe((P,V)=>P&&V?(P.push(...V),P):null),function De(m,_=!1){return(0,gt.e)((f,x)=>{let P=0;f.subscribe((0,Tt.x)(x,V=>{const K=m(V,P++);(K||_)&&x.next(V),!K&&x.complete()}))})}(P=>null!==P),wt(null),Ve(),(0,Xe.U)(P=>{if(null===P)return null;const V=Qn(P);return function On(m){m.sort((_,f)=>_.value.outlet===Ye?-1:f.value.outlet===Ye?1:_.value.outlet.localeCompare(f.value.outlet))}(V),V}))}processSegment(_,f,x,P,V){return(0,D.D)(f).pipe((0,te.b)(K=>this.processSegmentAgainstRoute(K._injector??_,K,x,P,V)),W(K=>!!K),(0,we.K)(K=>{if(Ao(K))return aa(x,P,V)?(0,ue.of)([]):(0,ue.of)(null);throw K}))}processSegmentAgainstRoute(_,f,x,P,V){if(f.redirectTo||!Yo(f,x,P,V))return(0,ue.of)(null);let K;if("**"===f.path){const je=P.length>0?ln(P).parameters:{},yt=L(x)+P.length,Vt=new bs(P,je,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j(f),Zi(f),f.component??f._loadedComponent??null,f,C(x),yt,ge(f));K=(0,ue.of)({snapshot:Vt,consumedSegments:[],remainingSegments:[]})}else K=cs(x,f,P,_).pipe((0,Xe.U)(({matched:je,consumedSegments:yt,remainingSegments:Vt,parameters:Jt})=>{if(!je)return null;const ti=L(x)+yt.length;return{snapshot:new bs(yt,Jt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j(f),Zi(f),f.component??f._loadedComponent??null,f,C(x),ti,ge(f)),consumedSegments:yt,remainingSegments:Vt}}));return K.pipe((0,ne.w)(je=>{if(null===je)return(0,ue.of)(null);const{snapshot:yt,consumedSegments:Vt,remainingSegments:Jt}=je;_=f._injector??_;const ti=f._loadedInjector??_,Ji=function wn(m){return m.children?m.children:m.loadChildren?m._loadedRoutes:[]}(f),{segmentGroup:Yr,slicedSegments:qt}=Or(x,Vt,Jt,Ji.filter(fs=>void 0===fs.redirectTo));if(0===qt.length&&Yr.hasChildren())return this.processChildren(ti,Ji,Yr).pipe((0,Xe.U)(fs=>null===fs?null:[new Nr(yt,fs)]));if(0===Ji.length&&0===qt.length)return(0,ue.of)([new Nr(yt,[])]);const yr=Zi(f)===V;return this.processSegment(ti,Ji,Yr,qt,yr?Ye:V).pipe((0,Xe.U)(fs=>null===fs?null:[new Nr(yt,fs)]))}))}}function Tn(m){const _=m.value.routeConfig;return _&&""===_.path&&void 0===_.redirectTo}function Qn(m){const _=[],f=new Set;for(const x of m){if(!Tn(x)){_.push(x);continue}const P=_.find(V=>x.value.routeConfig===V.value.routeConfig);void 0!==P?(P.children.push(...x.children),f.add(P)):_.push(x)}for(const x of f){const P=Qn(x.children);_.push(new Nr(x.value,P))}return _.filter(x=>!f.has(x))}function C(m){let _=m;for(;_._sourceSegment;)_=_._sourceSegment;return _}function L(m){let _=m,f=_._segmentIndexShift??0;for(;_._sourceSegment;)_=_._sourceSegment,f+=_._segmentIndexShift??0;return f-1}function j(m){return m.data||{}}function ge(m){return m.resolve||{}}function kt(m){return"string"==typeof m.title||null===m.title}function yi(m){return(0,ne.w)(_=>{const f=m(_);return f?(0,D.D)(f).pipe((0,Xe.U)(()=>_)):(0,ue.of)(_)})}const sn=new w.OlP("ROUTES");let hn=(()=>{class m{constructor(f,x){this.injector=f,this.compiler=x,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(f){if(this.componentLoaders.get(f))return this.componentLoaders.get(f);if(f._loadedComponent)return(0,ue.of)(f._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(f);const x=Wt(f.loadComponent()).pipe((0,Xe.U)(gi),(0,Y.b)(V=>{this.onLoadEndListener&&this.onLoadEndListener(f),f._loadedComponent=V}),(0,Q.x)(()=>{this.componentLoaders.delete(f)})),P=new bt(x,()=>new st.x).pipe(Ke());return this.componentLoaders.set(f,P),P}loadChildren(f,x){if(this.childrenLoaders.get(x))return this.childrenLoaders.get(x);if(x._loadedRoutes)return(0,ue.of)({routes:x._loadedRoutes,injector:x._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(x);const V=this.loadModuleFactoryOrRoutes(x.loadChildren).pipe((0,Xe.U)(je=>{this.onLoadEndListener&&this.onLoadEndListener(x);let yt,Vt,Jt=!1;Array.isArray(je)?Vt=je:(yt=je.create(f).injector,Vt=Un(yt.get(sn,[],w.XFs.Self|w.XFs.Optional)));return{routes:Vt.map(Br),injector:yt}}),(0,Q.x)(()=>{this.childrenLoaders.delete(x)})),K=new bt(V,()=>new st.x).pipe(Ke());return this.childrenLoaders.set(x,K),K}loadModuleFactoryOrRoutes(f){return Wt(f()).pipe((0,Xe.U)(gi),(0,xe.z)(P=>P instanceof w.YKP||Array.isArray(P)?(0,ue.of)(P):(0,D.D)(this.compiler.compileModuleAsync(P))))}}return m.\u0275fac=function(f){return new(f||m)(w.LFG(w.zs3),w.LFG(w.Sil))},m.\u0275prov=w.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();function gi(m){return function Ln(m){return m&&"object"==typeof m&&"default"in m}(m)?m.default:m}let Bi=(()=>{class m{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new st.x,this.configLoader=(0,w.f3M)(hn),this.environmentInjector=(0,w.f3M)(w.lqb),this.urlSerializer=(0,w.f3M)(In),this.rootContexts=(0,w.f3M)(ji),this.navigationId=0,this.afterPreactivation=()=>(0,ue.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=P=>this.events.next(new Sa(P)),this.configLoader.onLoadStartListener=P=>this.events.next(new _i(P))}complete(){this.transitions?.complete()}handleNavigationRequest(f){const x=++this.navigationId;this.transitions?.next({...this.transitions.value,...f,id:x})}setupNavigations(f){return this.transitions=new he.X({id:0,targetPageId:0,currentUrlTree:f.currentUrlTree,currentRawUrl:f.currentUrlTree,extractedUrl:f.urlHandlingStrategy.extract(f.currentUrlTree),urlAfterRedirects:f.urlHandlingStrategy.extract(f.currentUrlTree),rawUrl:f.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:wi,restoredState:null,currentSnapshot:f.routerState.snapshot,targetSnapshot:null,currentRouterState:f.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,at.h)(x=>0!==x.id),(0,Xe.U)(x=>({...x,extractedUrl:f.urlHandlingStrategy.extract(x.rawUrl)})),(0,ne.w)(x=>{let P=!1,V=!1;return(0,ue.of)(x).pipe((0,Y.b)(K=>{this.currentNavigation={id:K.id,initialUrl:K.rawUrl,extractedUrl:K.extractedUrl,trigger:K.source,extras:K.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ne.w)(K=>{const je=f.browserUrlTree.toString(),yt=!f.navigated||K.extractedUrl.toString()!==je||je!==f.currentUrlTree.toString();if(!yt&&"reload"!==(K.extras.onSameUrlNavigation??f.onSameUrlNavigation)){const Jt="";return this.events.next(new pr(K.id,f.serializeUrl(x.rawUrl),Jt,0)),f.rawUrlTree=K.rawUrl,K.resolve(null),it.E}if(f.urlHandlingStrategy.shouldProcessUrl(K.rawUrl))return Ui(K.source)&&(f.browserUrlTree=K.extractedUrl),(0,ue.of)(K).pipe((0,ne.w)(Jt=>{const ti=this.transitions?.getValue();return this.events.next(new Lr(Jt.id,this.urlSerializer.serialize(Jt.extractedUrl),Jt.source,Jt.restoredState)),ti!==this.transitions?.getValue()?it.E:Promise.resolve(Jt)}),function oe(m,_,f,x){return(0,ne.w)(P=>function J(m,_,f,x,P){return new _e(m,_,f,x,P).apply()}(m,_,f,P.extractedUrl,x).pipe((0,Xe.U)(V=>({...P,urlAfterRedirects:V}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,f.config),(0,Y.b)(Jt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Jt.urlAfterRedirects},x.urlAfterRedirects=Jt.urlAfterRedirects}),function Je(m,_,f,x,P){return(0,xe.z)(V=>function nn(m,_,f,x,P,V,K="emptyOnly"){return new Xn(m,_,f,x,P,K,V).recognize().pipe((0,ne.w)(je=>null===je?function ut(m){return new Ae.y(_=>_.error(m))}(new ft):(0,ue.of)(je)))}(m,_,f,V.urlAfterRedirects,x.serialize(V.urlAfterRedirects),x,P).pipe((0,Xe.U)(K=>({...V,targetSnapshot:K}))))}(this.environmentInjector,this.rootComponentType,f.config,this.urlSerializer,f.paramsInheritanceStrategy),(0,Y.b)(Jt=>{if(x.targetSnapshot=Jt.targetSnapshot,"eager"===f.urlUpdateStrategy){if(!Jt.extras.skipLocationChange){const Ji=f.urlHandlingStrategy.merge(Jt.urlAfterRedirects,Jt.rawUrl);f.setBrowserUrl(Ji,Jt)}f.browserUrlTree=Jt.urlAfterRedirects}const ti=new wr(Jt.id,this.urlSerializer.serialize(Jt.extractedUrl),this.urlSerializer.serialize(Jt.urlAfterRedirects),Jt.targetSnapshot);this.events.next(ti)}));if(yt&&f.urlHandlingStrategy.shouldProcessUrl(f.rawUrlTree)){const{id:Jt,extractedUrl:ti,source:Ji,restoredState:Yr,extras:qt}=K,yr=new Lr(Jt,this.urlSerializer.serialize(ti),Ji,Yr);this.events.next(yr);const fs=Ls(ti,this.rootComponentType).snapshot;return x={...K,targetSnapshot:fs,urlAfterRedirects:ti,extras:{...qt,skipLocationChange:!1,replaceUrl:!1}},(0,ue.of)(x)}{const Jt="";return this.events.next(new pr(K.id,f.serializeUrl(x.extractedUrl),Jt,1)),f.rawUrlTree=K.rawUrl,K.resolve(null),it.E}}),(0,Y.b)(K=>{const je=new zr(K.id,this.urlSerializer.serialize(K.extractedUrl),this.urlSerializer.serialize(K.urlAfterRedirects),K.targetSnapshot);this.events.next(je)}),(0,Xe.U)(K=>x={...K,guards:Qe(K.targetSnapshot,K.currentSnapshot,this.rootContexts)}),function Wo(m,_){return(0,xe.z)(f=>{const{targetSnapshot:x,currentSnapshot:P,guards:{canActivateChecks:V,canDeactivateChecks:K}}=f;return 0===K.length&&0===V.length?(0,ue.of)({...f,guardsResult:!0}):function Us(m,_,f,x){return(0,D.D)(m).pipe((0,xe.z)(P=>function Ma(m,_,f,x,P){const V=_&&_.routeConfig?_.routeConfig.canDeactivate:null;if(!V||0===V.length)return(0,ue.of)(!0);const K=V.map(je=>{const yt=I(_)??P,Vt=ct(je,yt);return Wt(function zn(m){return m&&ki(m.canDeactivate)}(Vt)?Vt.canDeactivate(m,_,f,x):yt.runInContext(()=>Vt(m,_,f,x))).pipe(W())});return(0,ue.of)(K).pipe(ur())}(P.component,P.route,f,_,x)),W(P=>!0!==P,!0))}(K,x,P,m).pipe((0,xe.z)(je=>je&&function ir(m){return"boolean"==typeof m}(je)?function Mo(m,_,f,x){return(0,D.D)(_).pipe((0,te.b)(P=>(0,ce.z)(function oa(m,_){return null!==m&&_&&_(new no(m)),(0,ue.of)(!0)}(P.route.parent,x),function Aa(m,_){return null!==m&&_&&_(new Zr(m)),(0,ue.of)(!0)}(P.route,x),function ls(m,_,f){const x=_[_.length-1],V=_.slice(0,_.length-1).reverse().map(K=>function _t(m){const _=m.routeConfig?m.routeConfig.canActivateChild:null;return _&&0!==_.length?{node:m,guards:_}:null}(K)).filter(K=>null!==K).map(K=>(0,Ce.P)(()=>{const je=K.guards.map(yt=>{const Vt=I(K.node)??f,Jt=ct(yt,Vt);return Wt(function xt(m){return m&&ki(m.canActivateChild)}(Jt)?Jt.canActivateChild(x,m):Vt.runInContext(()=>Jt(x,m))).pipe(W())});return(0,ue.of)(je).pipe(ur())}));return(0,ue.of)(V).pipe(ur())}(m,P.path,f),function qi(m,_,f){const x=_.routeConfig?_.routeConfig.canActivate:null;if(!x||0===x.length)return(0,ue.of)(!0);const P=x.map(V=>(0,Ce.P)(()=>{const K=I(_)??f,je=ct(V,K);return Wt(function Ts(m){return m&&ki(m.canActivate)}(je)?je.canActivate(_,m):K.runInContext(()=>je(_,m))).pipe(W())}));return(0,ue.of)(P).pipe(ur())}(m,P.route,f))),W(P=>!0!==P,!0))}(x,V,m,_):(0,ue.of)(je)),(0,Xe.U)(je=>({...f,guardsResult:je})))})}(this.environmentInjector,K=>this.events.next(K)),(0,Y.b)(K=>{if(x.guardsResult=K.guardsResult,be(K.guardsResult))throw oo(0,K.guardsResult);const je=new Yi(K.id,this.urlSerializer.serialize(K.extractedUrl),this.urlSerializer.serialize(K.urlAfterRedirects),K.targetSnapshot,!!K.guardsResult);this.events.next(je)}),(0,at.h)(K=>!!K.guardsResult||(f.restoreHistory(K),this.cancelNavigationTransition(K,"",3),!1)),yi(K=>{if(K.guards.canActivateChecks.length)return(0,ue.of)(K).pipe((0,Y.b)(je=>{const yt=new $r(je.id,this.urlSerializer.serialize(je.extractedUrl),this.urlSerializer.serialize(je.urlAfterRedirects),je.targetSnapshot);this.events.next(yt)}),(0,ne.w)(je=>{let yt=!1;return(0,ue.of)(je).pipe(function lt(m,_){return(0,xe.z)(f=>{const{targetSnapshot:x,guards:{canActivateChecks:P}}=f;if(!P.length)return(0,ue.of)(f);let V=0;return(0,D.D)(P).pipe((0,te.b)(K=>function Yt(m,_,f,x){const P=m.routeConfig,V=m._resolve;return void 0!==P?.title&&!kt(P)&&(V[pt]=P.title),function Fn(m,_,f,x){const P=function si(m){return[...Object.keys(m),...Object.getOwnPropertySymbols(m)]}(m);if(0===P.length)return(0,ue.of)({});const V={};return(0,D.D)(P).pipe((0,xe.z)(K=>function Wn(m,_,f,x){const P=I(_)??x,V=ct(m,P);return Wt(V.resolve?V.resolve(_,f):P.runInContext(()=>V(_,f)))}(m[K],_,f,x).pipe(W(),(0,Y.b)(je=>{V[K]=je}))),me(1),function Ze(m){return(0,Xe.U)(()=>m)}(V),(0,we.K)(K=>Ao(K)?it.E:(0,Pe._)(K)))}(V,m,_,x).pipe((0,Xe.U)(K=>(m._resolvedData=K,m.data=$s(m,f).resolve,P&&kt(P)&&(m.data[pt]=P.title),null)))}(K.route,x,m,_)),(0,Y.b)(()=>V++),me(1),(0,xe.z)(K=>V===P.length?(0,ue.of)(f):it.E))})}(f.paramsInheritanceStrategy,this.environmentInjector),(0,Y.b)({next:()=>yt=!0,complete:()=>{yt||(f.restoreHistory(je),this.cancelNavigationTransition(je,"",2))}}))}),(0,Y.b)(je=>{const yt=new Co(je.id,this.urlSerializer.serialize(je.extractedUrl),this.urlSerializer.serialize(je.urlAfterRedirects),je.targetSnapshot);this.events.next(yt)}))}),yi(K=>{const je=yt=>{const Vt=[];yt.routeConfig?.loadComponent&&!yt.routeConfig._loadedComponent&&Vt.push(this.configLoader.loadComponent(yt.routeConfig).pipe((0,Y.b)(Jt=>{yt.component=Jt}),(0,Xe.U)(()=>{})));for(const Jt of yt.children)Vt.push(...je(Jt));return Vt};return(0,ve.a)(je(K.targetSnapshot.root)).pipe(wt(),(0,dt.q)(1))}),yi(()=>this.afterPreactivation()),(0,Xe.U)(K=>{const je=function zo(m,_,f){const x=ks(m,_._root,f?f._root:void 0);return new zs(x,_)}(f.routeReuseStrategy,K.targetSnapshot,K.currentRouterState);return x={...K,targetRouterState:je}}),(0,Y.b)(K=>{f.currentUrlTree=K.urlAfterRedirects,f.rawUrlTree=f.urlHandlingStrategy.merge(K.urlAfterRedirects,K.rawUrl),f.routerState=K.targetRouterState,"deferred"===f.urlUpdateStrategy&&(K.extras.skipLocationChange||f.setBrowserUrl(f.rawUrlTree,K),f.browserUrlTree=K.urlAfterRedirects)}),((m,_,f)=>(0,Xe.U)(x=>(new N(_,x.targetRouterState,x.currentRouterState,f).activate(m),x)))(this.rootContexts,f.routeReuseStrategy,K=>this.events.next(K)),(0,Y.b)({next:K=>{P=!0,this.lastSuccessfulNavigation=this.currentNavigation,f.navigated=!0,this.events.next(new Mr(K.id,this.urlSerializer.serialize(K.extractedUrl),this.urlSerializer.serialize(f.currentUrlTree))),f.titleStrategy?.updateTitle(K.targetRouterState.snapshot),K.resolve(!0)},complete:()=>{P=!0}}),(0,Q.x)(()=>{P||V||this.cancelNavigationTransition(x,"",1),this.currentNavigation?.id===x.id&&(this.currentNavigation=null)}),(0,we.K)(K=>{if(V=!0,Ys(K)){Rr(K)||(f.navigated=!0,f.restoreHistory(x,!0));const je=new ys(x.id,this.urlSerializer.serialize(x.extractedUrl),K.message,K.cancellationCode);if(this.events.next(je),Rr(K)){const yt=f.urlHandlingStrategy.merge(K.url,f.rawUrlTree),Vt={skipLocationChange:x.extras.skipLocationChange,replaceUrl:"eager"===f.urlUpdateStrategy||Ui(x.source)};f.scheduleNavigation(yt,wi,null,Vt,{resolve:x.resolve,reject:x.reject,promise:x.promise})}else x.resolve(!1)}else{f.restoreHistory(x,!0);const je=new Si(x.id,this.urlSerializer.serialize(x.extractedUrl),K,x.targetSnapshot??void 0);this.events.next(je);try{x.resolve(f.errorHandler(K))}catch(yt){x.reject(yt)}}return it.E}))}))}cancelNavigationTransition(f,x,P){const V=new ys(f.id,this.urlSerializer.serialize(f.extractedUrl),x,P);this.events.next(V),f.resolve(!1)}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=w.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();function Ui(m){return m!==wi}let Mi=(()=>{class m{buildTitle(f){let x,P=f.root;for(;void 0!==P;)x=this.getResolvedTitleForRoute(P)??x,P=P.children.find(V=>V.outlet===Ye);return x}getResolvedTitleForRoute(f){return f.data[pt]}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=w.Yz7({token:m,factory:function(){return(0,w.f3M)(fo)},providedIn:"root"}),m})(),fo=(()=>{class m extends Mi{constructor(f){super(),this.title=f}updateTitle(f){const x=this.buildTitle(f);void 0!==x&&this.title.setTitle(x)}}return m.\u0275fac=function(f){return new(f||m)(w.LFG(Ue.Dx))},m.\u0275prov=w.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Ra=(()=>{class m{}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=w.Yz7({token:m,factory:function(){return(0,w.f3M)(oi)},providedIn:"root"}),m})();class _r{shouldDetach(_){return!1}store(_,f){}shouldAttach(_){return!1}retrieve(_){return null}shouldReuseRoute(_,f){return _.routeConfig===f.routeConfig}}let oi=(()=>{class m extends _r{}return m.\u0275fac=function(){let _;return function(x){return(_||(_=w.n5z(m)))(x||m)}}(),m.\u0275prov=w.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();const Ur=new w.OlP("",{providedIn:"root",factory:()=>({})});let Gn=(()=>{class m{}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=w.Yz7({token:m,factory:function(){return(0,w.f3M)(Pa)},providedIn:"root"}),m})(),Pa=(()=>{class m{shouldProcessUrl(f){return!0}extract(f){return f}merge(f,x){return f}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=w.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();function po(m){throw m}function ol(m,_,f){return _.parse("/")}const Oi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},go={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qi=(()=>{class m{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,w.f3M)(w.c2e),this.isNgZoneEnabled=!1,this.options=(0,w.f3M)(Ur,{optional:!0})||{},this.errorHandler=this.options.errorHandler||po,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ol,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,w.f3M)(Gn),this.routeReuseStrategy=(0,w.f3M)(Ra),this.urlCreationStrategy=(0,w.f3M)(io),this.titleStrategy=(0,w.f3M)(Mi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Un((0,w.f3M)(sn,{optional:!0})??[]),this.navigationTransitions=(0,w.f3M)(Bi),this.urlSerializer=(0,w.f3M)(In),this.location=(0,w.f3M)(Ct.Ye),this.isNgZoneEnabled=(0,w.f3M)(w.R0b)instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ri,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ls(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(f=>{this.lastSuccessfulId=f.id,this.currentPageId=f.targetPageId},f=>{this.console.warn(`Unhandled Navigation Error: ${f}`)})}resetRootComponentType(f){this.routerState.root.component=f,this.navigationTransitions.rootComponentType=f}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const f=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),wi,f)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(f=>{const x="popstate"===f.type?"popstate":"hashchange";"popstate"===x&&setTimeout(()=>{this.navigateToSyncWithBrowser(f.url,x,f.state)},0)}))}navigateToSyncWithBrowser(f,x,P){const V={replaceUrl:!0},K=P?.navigationId?P:null;if(P){const yt={...P};delete yt.navigationId,delete yt.\u0275routerPageId,0!==Object.keys(yt).length&&(V.state=yt)}const je=this.parseUrl(f);this.scheduleNavigation(je,x,K,V)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(f){this.config=f.map(Br),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(f,x={}){const{relativeTo:P,queryParams:V,fragment:K,queryParamsHandling:je,preserveFragment:yt}=x,Vt=yt?this.currentUrlTree.fragment:K;let Jt=null;switch(je){case"merge":Jt={...this.currentUrlTree.queryParams,...V};break;case"preserve":Jt=this.currentUrlTree.queryParams;break;default:Jt=V||null}return null!==Jt&&(Jt=this.removeEmptyProps(Jt)),this.urlCreationStrategy.createUrlTree(P,this.routerState,this.currentUrlTree,f,Jt,Vt??null)}navigateByUrl(f,x={skipLocationChange:!1}){const P=be(f)?f:this.parseUrl(f),V=this.urlHandlingStrategy.merge(P,this.rawUrlTree);return this.scheduleNavigation(V,wi,null,x)}navigate(f,x={skipLocationChange:!1}){return function mo(m){for(let _=0;_<m.length;_++){const f=m[_];if(null==f)throw new w.vHH(4008,false)}}(f),this.navigateByUrl(this.createUrlTree(f,x),x)}serializeUrl(f){return this.urlSerializer.serialize(f)}parseUrl(f){let x;try{x=this.urlSerializer.parse(f)}catch(P){x=this.malformedUriErrorHandler(P,this.urlSerializer,f)}return x}isActive(f,x){let P;if(P=!0===x?{...Oi}:!1===x?{...go}:x,be(f))return Wi(this.currentUrlTree,f,P);const V=this.parseUrl(f);return Wi(this.currentUrlTree,V,P)}removeEmptyProps(f){return Object.keys(f).reduce((x,P)=>{const V=f[P];return null!=V&&(x[P]=V),x},{})}scheduleNavigation(f,x,P,V,K){if(this.disposed)return Promise.resolve(!1);let je,yt,Vt,Jt;return K?(je=K.resolve,yt=K.reject,Vt=K.promise):Vt=new Promise((ti,Ji)=>{je=ti,yt=Ji}),Jt="computed"===this.canceledNavigationResolution?P&&P.\u0275routerPageId?P.\u0275routerPageId:V.replaceUrl||V.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Jt,source:x,restoredState:P,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:f,extras:V,resolve:je,reject:yt,promise:Vt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Vt.catch(ti=>Promise.reject(ti))}setBrowserUrl(f,x){const P=this.urlSerializer.serialize(f),V={...x.extras.state,...this.generateNgRouterState(x.id,x.targetPageId)};this.location.isCurrentPathEqualTo(P)||x.extras.replaceUrl?this.location.replaceState(P,"",V):this.location.go(P,"",V)}restoreHistory(f,x=!1){if("computed"===this.canceledNavigationResolution){const P=this.currentPageId-f.targetPageId;"popstate"!==f.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===P?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===P&&(this.resetState(f),this.browserUrlTree=f.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(P)}else"replace"===this.canceledNavigationResolution&&(x&&this.resetState(f),this.resetUrlToCurrentUrlTree())}resetState(f){this.routerState=f.currentRouterState,this.currentUrlTree=f.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,f.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(f,x){return"computed"===this.canceledNavigationResolution?{navigationId:f,\u0275routerPageId:x}:{navigationId:f}}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=w.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Gs=(()=>{class m{constructor(f,x,P,V,K,je){this.router=f,this.route=x,this.tabIndexAttribute=P,this.renderer=V,this.el=K,this.locationStrategy=je,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new st.x;const yt=K.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===yt||"area"===yt,this.isAnchorElement?this.subscription=f.events.subscribe(Vt=>{Vt instanceof Mr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(f){this._preserveFragment=(0,w.D6c)(f)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(f){this._skipLocationChange=(0,w.D6c)(f)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(f){this._replaceUrl=(0,w.D6c)(f)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(f){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",f)}ngOnChanges(f){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(f){null!=f?(this.commands=Array.isArray(f)?f:[f],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(f,x,P,V,K){return!!(null===this.urlTree||this.isAnchorElement&&(0!==f||x||P||V||K||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const f=null===this.href?null:(0,w.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",f)}applyAttributeValue(f,x){const P=this.renderer,V=this.el.nativeElement;null!==x?P.setAttribute(V,f,x):P.removeAttribute(V,f)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return m.\u0275fac=function(f){return new(f||m)(w.Y36(Qi),w.Y36(Es),w.$8M("tabindex"),w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(Ct.S$))},m.\u0275dir=w.lG2({type:m,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(f,x){1&f&&w.NdJ("click",function(V){return x.onClick(V.button,V.ctrlKey,V.shiftKey,V.altKey,V.metaKey)}),2&f&&w.uIk("target",x.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[w.TTD]}),m})();class la{}let Jr=(()=>{class m{constructor(f,x,P,V,K){this.router=f,this.injector=P,this.preloadingStrategy=V,this.loader=K}setUpPreloading(){this.subscription=this.router.events.pipe((0,at.h)(f=>f instanceof Mr),(0,te.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(f,x){const P=[];for(const V of x){V.providers&&!V._injector&&(V._injector=(0,w.MMx)(V.providers,f,`Route: ${V.path}`));const K=V._injector??f,je=V._loadedInjector??K;V.loadChildren&&!V._loadedRoutes&&void 0===V.canLoad||V.loadComponent&&!V._loadedComponent?P.push(this.preloadConfig(K,V)):(V.children||V._loadedRoutes)&&P.push(this.processRoutes(je,V.children??V._loadedRoutes))}return(0,D.D)(P).pipe((0,Ee.J)())}preloadConfig(f,x){return this.preloadingStrategy.preload(x,()=>{let P;P=x.loadChildren&&void 0===x.canLoad?this.loader.loadChildren(f,x):(0,ue.of)(null);const V=P.pipe((0,xe.z)(K=>null===K?(0,ue.of)(void 0):(x._loadedRoutes=K.routes,x._loadedInjector=K.injector,this.processRoutes(K.injector??f,K.routes))));if(x.loadComponent&&!x._loadedComponent){const K=this.loader.loadComponent(x);return(0,D.D)([V,K]).pipe((0,Ee.J)())}return V})}}return m.\u0275fac=function(f){return new(f||m)(w.LFG(Qi),w.LFG(w.Sil),w.LFG(w.lqb),w.LFG(la),w.LFG(hn))},m.\u0275prov=w.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();const Oa=new w.OlP("");let Ko=(()=>{class m{constructor(f,x,P,V,K={}){this.urlSerializer=f,this.transitions=x,this.viewportScroller=P,this.zone=V,this.options=K,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},K.scrollPositionRestoration=K.scrollPositionRestoration||"disabled",K.anchorScrolling=K.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(f=>{f instanceof Lr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=f.navigationTrigger,this.restoredId=f.restoredState?f.restoredState.navigationId:0):f instanceof Mr&&(this.lastId=f.id,this.scheduleScrollEvent(f,this.urlSerializer.parse(f.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(f=>{f instanceof Ri&&(f.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(f.position):f.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(f.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(f,x){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ri(f,"popstate"===this.lastSource?this.store[this.restoredId]:null,x))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return m.\u0275fac=function(f){w.$Z()},m.\u0275prov=w.Yz7({token:m,factory:m.\u0275fac}),m})();var Hr=(()=>((Hr=Hr||{})[Hr.COMPLETE=0]="COMPLETE",Hr[Hr.FAILED=1]="FAILED",Hr[Hr.REDIRECTING=2]="REDIRECTING",Hr))();const us=!1;function es(m,_){return{\u0275kind:m,\u0275providers:_}}const qs=new w.OlP("",{providedIn:"root",factory:()=>!1});function ru(){const m=(0,w.f3M)(w.zs3);return _=>{const f=m.get(w.z2F);if(_!==f.components[0])return;const x=m.get(Qi),P=m.get(Kl);1===m.get(vi)&&x.initialNavigation(),m.get(Zl,null,w.XFs.Optional)?.setUpPreloading(),m.get(Oa,null,w.XFs.Optional)?.init(),x.resetRootComponentType(f.componentTypes[0]),P.closed||(P.next(),P.unsubscribe())}}const Kl=new w.OlP(us?"bootstrap done indicator":"",{factory:()=>new st.x}),vi=new w.OlP(us?"initial navigation":"",{providedIn:"root",factory:()=>1});function ou(){let m=[];return m=us?[{provide:w.Xts,multi:!0,useFactory:()=>{const _=(0,w.f3M)(Qi);return()=>_.events.subscribe(f=>{console.group?.(`Router Event: ${f.constructor.name}`),console.log(function Ai(m){if(!("type"in m))return`Unknown Router Event: ${m.constructor.name}`;switch(m.type){case 14:return`ActivationEnd(path: '${m.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${m.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${m.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${m.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${m.id}, url: '${m.url}', urlAfterRedirects: '${m.urlAfterRedirects}', state: ${m.state}, shouldActivate: ${m.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${m.id}, url: '${m.url}', urlAfterRedirects: '${m.urlAfterRedirects}', state: ${m.state})`;case 2:return`NavigationCancel(id: ${m.id}, url: '${m.url}')`;case 16:return`NavigationSkipped(id: ${m.id}, url: '${m.url}')`;case 1:return`NavigationEnd(id: ${m.id}, url: '${m.url}', urlAfterRedirects: '${m.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${m.id}, url: '${m.url}', error: ${m.error})`;case 0:return`NavigationStart(id: ${m.id}, url: '${m.url}')`;case 6:return`ResolveEnd(id: ${m.id}, url: '${m.url}', urlAfterRedirects: '${m.urlAfterRedirects}', state: ${m.state})`;case 5:return`ResolveStart(id: ${m.id}, url: '${m.url}', urlAfterRedirects: '${m.urlAfterRedirects}', state: ${m.state})`;case 10:return`RouteConfigLoadEnd(path: ${m.route.path})`;case 9:return`RouteConfigLoadStart(path: ${m.route.path})`;case 4:return`RoutesRecognized(id: ${m.id}, url: '${m.url}', urlAfterRedirects: '${m.urlAfterRedirects}', state: ${m.state})`;case 15:return`Scroll(anchor: '${m.anchor}', position: '${m.position?`${m.position[0]}, ${m.position[1]}`:null}')`}}(f)),console.log(f),console.groupEnd?.()})}}]:[],es(1,m)}const Zl=new w.OlP(us?"router preloader":"");function Ch(m){return es(0,[{provide:Zl,useExisting:Jr},{provide:la,useExisting:m}])}const La=!1,Ei=new w.OlP(La?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),ll=[Ct.Ye,{provide:In,useClass:Ii},Qi,ji,{provide:Es,useFactory:function Po(m){return m.routerState.root},deps:[Qi]},hn,La?{provide:qs,useValue:!0}:[]];function Oo(){return new w.PXZ("Router",Qi)}let au=(()=>{class m{constructor(f){}static forRoot(f,x){return{ngModule:m,providers:[ll,La&&x?.enableTracing?ou().\u0275providers:[],{provide:sn,multi:!0,useValue:f},{provide:Ei,useFactory:Na,deps:[[Qi,new w.FiY,new w.tp0]]},{provide:Ur,useValue:x||{}},x?.useHash?{provide:Ct.S$,useClass:Ct.Do}:{provide:Ct.S$,useClass:Ct.b0},{provide:Oa,useFactory:()=>{const m=(0,w.f3M)(Ct.EM),_=(0,w.f3M)(w.R0b),f=(0,w.f3M)(Ur),x=(0,w.f3M)(Bi),P=(0,w.f3M)(In);return f.scrollOffset&&m.setOffset(f.scrollOffset),new Ko(P,x,m,_,f)}},x?.preloadingStrategy?Ch(x.preloadingStrategy).\u0275providers:[],{provide:w.PXZ,multi:!0,useFactory:Oo},x?.initialNavigation?Gr(x):[],[{provide:ds,useFactory:ru},{provide:w.tb,multi:!0,useExisting:ds}]]}}static forChild(f){return{ngModule:m,providers:[{provide:sn,multi:!0,useValue:f}]}}}return m.\u0275fac=function(f){return new(f||m)(w.LFG(Ei,8))},m.\u0275mod=w.oAB({type:m}),m.\u0275inj=w.cJS({imports:[Xs]}),m})();function Na(m){if(La&&m)throw new w.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Gr(m){return["disabled"===m.initialNavigation?es(3,[{provide:w.ip1,multi:!0,useFactory:()=>{const _=(0,w.f3M)(Qi);return()=>{_.setUpLocationChangeListener()}}},{provide:vi,useValue:2}]).\u0275providers:[],"enabledBlocking"===m.initialNavigation?es(2,[{provide:vi,useValue:0},{provide:w.ip1,multi:!0,deps:[w.zs3],useFactory:_=>{const f=_.get(Ct.V_,Promise.resolve());return()=>f.then(()=>new Promise(x=>{const P=_.get(Qi),V=_.get(Kl);(function iu(m,_){m.events.pipe((0,at.h)(f=>f instanceof Mr||f instanceof ys||f instanceof Si||f instanceof pr),(0,Xe.U)(f=>f instanceof Mr||f instanceof pr?Hr.COMPLETE:f instanceof ys&&(0===f.code||1===f.code)?Hr.REDIRECTING:Hr.FAILED),(0,at.h)(f=>f!==Hr.REDIRECTING),(0,dt.q)(1)).subscribe(()=>{_()})})(P,()=>{x(!0)}),_.get(Bi).afterPreactivation=()=>(x(!0),V.closed?(0,ue.of)(void 0):V),P.initialNavigation()}))}}]).\u0275providers:[]]}const ds=new w.OlP(La?"Router Initializer":"")},4463:(Mt,ke,F)=>{"use strict";F.d(ke,{Zw:()=>bt,aw:()=>Ve,X$:()=>me,sK:()=>Se});var w=F(4650),D=F(9646),ue=F(9751),he=F(576);function ae(De){return!!De&&(De instanceof ue.y||(0,he.m)(De.lift)&&(0,he.m)(De.subscribe))}var ee=F(4128),ve=F(7272),ce=F(9770),Ce=F(5698),Le=F(7579),Pe=F(6063);class Ae extends Le.x{constructor(Ze=1/0,Q=1/0,Ee=Pe.l){super(),this._bufferSize=Ze,this._windowTime=Q,this._timestampProvider=Ee,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Q===1/0,this._bufferSize=Math.max(1,Ze),this._windowTime=Math.max(1,Q)}next(Ze){const{isStopped:Q,_buffer:Ee,_infiniteTimeWindow:Ue,_timestampProvider:Ye,_windowTime:pt}=this;Q||(Ee.push(Ze),!Ue&&Ee.push(Ye.now()+pt)),this._trimBuffer(),super.next(Ze)}_subscribe(Ze){this._throwIfClosed(),this._trimBuffer();const Q=this._innerSubscribe(Ze),{_infiniteTimeWindow:Ee,_buffer:Ue}=this,Ye=Ue.slice();for(let pt=0;pt<Ye.length&&!Ze.closed;pt+=Ee?1:2)Ze.next(Ye[pt]);return this._checkFinalizedStatuses(Ze),Q}_trimBuffer(){const{_bufferSize:Ze,_timestampProvider:Q,_buffer:Ee,_infiniteTimeWindow:Ue}=this,Ye=(Ue?1:2)*Ze;if(Ze<1/0&&Ye<Ee.length&&Ee.splice(0,Ee.length-Ye),!Ue){const pt=Q.now();let zt=0;for(let Kt=1;Kt<Ee.length&&Ee[Kt]<=pt;Kt+=2)zt=Kt;zt&&Ee.splice(0,zt+1)}}}var it=F(3099);function $e(De,Ze,Q){let Ee,Ue=!1;return De&&"object"==typeof De?({bufferSize:Ee=1/0,windowTime:Ze=1/0,refCount:Ue=!1,scheduler:Q}=De):Ee=De??1/0,(0,it.B)({connector:()=>new Ae(Ee,Ze,Q),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ue})}var gt=F(4004),Tt=F(4351),Ke=F(3900);class bt{}let st=(()=>{class De extends bt{getTranslation(Q){return(0,D.of)({})}}return De.\u0275fac=function(){let Ze;return function(Ee){return(Ze||(Ze=w.n5z(De)))(Ee||De)}}(),De.\u0275prov=w.Yz7({token:De,factory:De.\u0275fac}),De})();class Ct{}let Xe=(()=>{class De{handle(Q){return Q.key}}return De.\u0275fac=function(Q){return new(Q||De)},De.\u0275prov=w.Yz7({token:De,factory:De.\u0275fac}),De})();function ne(De,Ze){if(De===Ze)return!0;if(null===De||null===Ze)return!1;if(De!=De&&Ze!=Ze)return!0;let Ue,Ye,pt,Q=typeof De;if(Q==typeof Ze&&"object"==Q){if(!Array.isArray(De)){if(Array.isArray(Ze))return!1;for(Ye in pt=Object.create(null),De){if(!ne(De[Ye],Ze[Ye]))return!1;pt[Ye]=!0}for(Ye in Ze)if(!(Ye in pt)&&typeof Ze[Ye]<"u")return!1;return!0}if(!Array.isArray(Ze))return!1;if((Ue=De.length)==Ze.length){for(Ye=0;Ye<Ue;Ye++)if(!ne(De[Ye],Ze[Ye]))return!1;return!0}}return!1}function dt(De){return typeof De<"u"&&null!==De}function He(De){return De&&"object"==typeof De&&!Array.isArray(De)}function at(De,Ze){let Q=Object.assign({},De);return He(De)&&He(Ze)&&Object.keys(Ze).forEach(Ee=>{He(Ze[Ee])?Ee in De?Q[Ee]=at(De[Ee],Ze[Ee]):Object.assign(Q,{[Ee]:Ze[Ee]}):Object.assign(Q,{[Ee]:Ze[Ee]})}),Q}class xe{}let wt=(()=>{class De extends xe{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(Q,Ee){let Ue;return Ue="string"==typeof Q?this.interpolateString(Q,Ee):"function"==typeof Q?this.interpolateFunction(Q,Ee):Q,Ue}getValue(Q,Ee){let Ue="string"==typeof Ee?Ee.split("."):[Ee];Ee="";do{Ee+=Ue.shift(),!dt(Q)||!dt(Q[Ee])||"object"!=typeof Q[Ee]&&Ue.length?Ue.length?Ee+=".":Q=void 0:(Q=Q[Ee],Ee="")}while(Ue.length);return Q}interpolateFunction(Q,Ee){return Q(Ee)}interpolateString(Q,Ee){return Ee?Q.replace(this.templateMatcher,(Ue,Ye)=>{let pt=this.getValue(Ee,Ye);return dt(pt)?pt:Ue}):Q}}return De.\u0275fac=function(){let Ze;return function(Ee){return(Ze||(Ze=w.n5z(De)))(Ee||De)}}(),De.\u0275prov=w.Yz7({token:De,factory:De.\u0275fac}),De})();class Ot{}let Rt=(()=>{class De extends Ot{compile(Q,Ee){return Q}compileTranslations(Q,Ee){return Q}}return De.\u0275fac=function(){let Ze;return function(Ee){return(Ze||(Ze=w.n5z(De)))(Ee||De)}}(),De.\u0275prov=w.Yz7({token:De,factory:De.\u0275fac}),De})();class en{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new w.vpe,this.onLangChange=new w.vpe,this.onDefaultLangChange=new w.vpe}}const W=new w.OlP("USE_STORE"),te=new w.OlP("USE_DEFAULT_LANG"),Y=new w.OlP("DEFAULT_LANGUAGE"),we=new w.OlP("USE_EXTEND");let Se=(()=>{class De{constructor(Q,Ee,Ue,Ye,pt,zt=!0,Kt=!1,dn=!1,vn){this.store=Q,this.currentLoader=Ee,this.compiler=Ue,this.parser=Ye,this.missingTranslationHandler=pt,this.useDefaultLang=zt,this.isolate=Kt,this.extend=dn,this.pending=!1,this._onTranslationChange=new w.vpe,this._onLangChange=new w.vpe,this._onDefaultLangChange=new w.vpe,this._langs=[],this._translations={},this._translationRequests={},vn&&this.setDefaultLang(vn)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(Q){this.isolate?this._defaultLang=Q:this.store.defaultLang=Q}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(Q){this.isolate?this._currentLang=Q:this.store.currentLang=Q}get langs(){return this.isolate?this._langs:this.store.langs}set langs(Q){this.isolate?this._langs=Q:this.store.langs=Q}get translations(){return this.isolate?this._translations:this.store.translations}set translations(Q){this.isolate?this._translations=Q:this.store.translations=Q}setDefaultLang(Q){if(Q===this.defaultLang)return;let Ee=this.retrieveTranslations(Q);typeof Ee<"u"?(null==this.defaultLang&&(this.defaultLang=Q),Ee.pipe((0,Ce.q)(1)).subscribe(Ue=>{this.changeDefaultLang(Q)})):this.changeDefaultLang(Q)}getDefaultLang(){return this.defaultLang}use(Q){if(Q===this.currentLang)return(0,D.of)(this.translations[Q]);let Ee=this.retrieveTranslations(Q);return typeof Ee<"u"?(this.currentLang||(this.currentLang=Q),Ee.pipe((0,Ce.q)(1)).subscribe(Ue=>{this.changeLang(Q)}),Ee):(this.changeLang(Q),(0,D.of)(this.translations[Q]))}retrieveTranslations(Q){let Ee;return(typeof this.translations[Q]>"u"||this.extend)&&(this._translationRequests[Q]=this._translationRequests[Q]||this.getTranslation(Q),Ee=this._translationRequests[Q]),Ee}getTranslation(Q){this.pending=!0;const Ee=this.currentLoader.getTranslation(Q).pipe($e(1),(0,Ce.q)(1));return this.loadingTranslations=Ee.pipe((0,gt.U)(Ue=>this.compiler.compileTranslations(Ue,Q)),$e(1),(0,Ce.q)(1)),this.loadingTranslations.subscribe({next:Ue=>{this.translations[Q]=this.extend&&this.translations[Q]?{...Ue,...this.translations[Q]}:Ue,this.updateLangs(),this.pending=!1},error:Ue=>{this.pending=!1}}),Ee}setTranslation(Q,Ee,Ue=!1){Ee=this.compiler.compileTranslations(Ee,Q),this.translations[Q]=(Ue||this.extend)&&this.translations[Q]?at(this.translations[Q],Ee):Ee,this.updateLangs(),this.onTranslationChange.emit({lang:Q,translations:this.translations[Q]})}getLangs(){return this.langs}addLangs(Q){Q.forEach(Ee=>{-1===this.langs.indexOf(Ee)&&this.langs.push(Ee)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(Q,Ee,Ue){let Ye;if(Ee instanceof Array){let pt={},zt=!1;for(let Kt of Ee)pt[Kt]=this.getParsedResult(Q,Kt,Ue),ae(pt[Kt])&&(zt=!0);if(zt){const Kt=Ee.map(dn=>ae(pt[dn])?pt[dn]:(0,D.of)(pt[dn]));return(0,ee.D)(Kt).pipe((0,gt.U)(dn=>{let vn={};return dn.forEach(($t,St)=>{vn[Ee[St]]=$t}),vn}))}return pt}if(Q&&(Ye=this.parser.interpolate(this.parser.getValue(Q,Ee),Ue)),typeof Ye>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(Ye=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],Ee),Ue)),typeof Ye>"u"){let pt={key:Ee,translateService:this};typeof Ue<"u"&&(pt.interpolateParams=Ue),Ye=this.missingTranslationHandler.handle(pt)}return typeof Ye<"u"?Ye:Ee}get(Q,Ee){if(!dt(Q)||!Q.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,Tt.b)(Ue=>ae(Ue=this.getParsedResult(Ue,Q,Ee))?Ue:(0,D.of)(Ue)));{let Ue=this.getParsedResult(this.translations[this.currentLang],Q,Ee);return ae(Ue)?Ue:(0,D.of)(Ue)}}getStreamOnTranslationChange(Q,Ee){if(!dt(Q)||!Q.length)throw new Error('Parameter "key" required');return(0,ve.z)((0,ce.P)(()=>this.get(Q,Ee)),this.onTranslationChange.pipe((0,Ke.w)(Ue=>{const Ye=this.getParsedResult(Ue.translations,Q,Ee);return"function"==typeof Ye.subscribe?Ye:(0,D.of)(Ye)})))}stream(Q,Ee){if(!dt(Q)||!Q.length)throw new Error('Parameter "key" required');return(0,ve.z)((0,ce.P)(()=>this.get(Q,Ee)),this.onLangChange.pipe((0,Ke.w)(Ue=>{const Ye=this.getParsedResult(Ue.translations,Q,Ee);return ae(Ye)?Ye:(0,D.of)(Ye)})))}instant(Q,Ee){if(!dt(Q)||!Q.length)throw new Error('Parameter "key" required');let Ue=this.getParsedResult(this.translations[this.currentLang],Q,Ee);if(ae(Ue)){if(Q instanceof Array){let Ye={};return Q.forEach((pt,zt)=>{Ye[Q[zt]]=Q[zt]}),Ye}return Q}return Ue}set(Q,Ee,Ue=this.currentLang){this.translations[Ue][Q]=this.compiler.compile(Ee,Ue),this.updateLangs(),this.onTranslationChange.emit({lang:Ue,translations:this.translations[Ue]})}changeLang(Q){this.currentLang=Q,this.onLangChange.emit({lang:Q,translations:this.translations[Q]}),null==this.defaultLang&&this.changeDefaultLang(Q)}changeDefaultLang(Q){this.defaultLang=Q,this.onDefaultLangChange.emit({lang:Q,translations:this.translations[Q]})}reloadLang(Q){return this.resetLang(Q),this.getTranslation(Q)}resetLang(Q){this._translationRequests[Q]=void 0,this.translations[Q]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let Q=window.navigator.languages?window.navigator.languages[0]:null;return Q=Q||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof Q>"u"?void 0:(-1!==Q.indexOf("-")&&(Q=Q.split("-")[0]),-1!==Q.indexOf("_")&&(Q=Q.split("_")[0]),Q)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let Q=window.navigator.languages?window.navigator.languages[0]:null;return Q=Q||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,Q}}return De.\u0275fac=function(Q){return new(Q||De)(w.LFG(en),w.LFG(bt),w.LFG(Ot),w.LFG(xe),w.LFG(Ct),w.LFG(te),w.LFG(W),w.LFG(we),w.LFG(Y))},De.\u0275prov=w.Yz7({token:De,factory:De.\u0275fac}),De})(),me=(()=>{class De{constructor(Q,Ee){this.translate=Q,this._ref=Ee,this.value="",this.lastKey=null,this.lastParams=[]}updateValue(Q,Ee,Ue){let Ye=pt=>{this.value=void 0!==pt?pt:Q,this.lastKey=Q,this._ref.markForCheck()};if(Ue){let pt=this.translate.getParsedResult(Ue,Q,Ee);ae(pt.subscribe)?pt.subscribe(Ye):Ye(pt)}this.translate.get(Q,Ee).subscribe(Ye)}transform(Q,...Ee){if(!Q||!Q.length)return Q;if(ne(Q,this.lastKey)&&ne(Ee,this.lastParams))return this.value;let Ue;if(dt(Ee[0])&&Ee.length)if("string"==typeof Ee[0]&&Ee[0].length){let Ye=Ee[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{Ue=JSON.parse(Ye)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${Ee[0]}`)}}else"object"==typeof Ee[0]&&!Array.isArray(Ee[0])&&(Ue=Ee[0]);return this.lastKey=Q,this.lastParams=Ee,this.updateValue(Q,Ue),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(Ye=>{this.lastKey&&Ye.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(Q,Ue,Ye.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(Ye=>{this.lastKey&&(this.lastKey=null,this.updateValue(Q,Ue,Ye.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(Q,Ue))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return De.\u0275fac=function(Q){return new(Q||De)(w.Y36(Se,16),w.Y36(w.sBO,16))},De.\u0275pipe=w.Yjl({name:"translate",type:De,pure:!1}),De.\u0275prov=w.Yz7({token:De,factory:De.\u0275fac}),De})(),Ve=(()=>{class De{static forRoot(Q={}){return{ngModule:De,providers:[Q.loader||{provide:bt,useClass:st},Q.compiler||{provide:Ot,useClass:Rt},Q.parser||{provide:xe,useClass:wt},Q.missingTranslationHandler||{provide:Ct,useClass:Xe},en,{provide:W,useValue:Q.isolate},{provide:te,useValue:Q.useDefaultLang},{provide:we,useValue:Q.extend},{provide:Y,useValue:Q.defaultLanguage},Se]}}static forChild(Q={}){return{ngModule:De,providers:[Q.loader||{provide:bt,useClass:st},Q.compiler||{provide:Ot,useClass:Rt},Q.parser||{provide:xe,useClass:wt},Q.missingTranslationHandler||{provide:Ct,useClass:Xe},{provide:W,useValue:Q.isolate},{provide:te,useValue:Q.useDefaultLang},{provide:we,useValue:Q.extend},{provide:Y,useValue:Q.defaultLanguage},Se]}}}return De.\u0275fac=function(Q){return new(Q||De)},De.\u0275mod=w.oAB({type:De}),De.\u0275inj=w.cJS({}),De})()},3184:(Mt,ke,F)=>{"use strict";F.d(ke,{KgH:()=>ba,MxU:()=>Su,deM:()=>pa,jyi:()=>Lo,xEZ:()=>qt,vB5:()=>er,oO3:()=>Fl});var w=(n=>(n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",n))(w||{}),D=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",n))(D||{}),ue=(n=>(n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",n))(ue||{}),he=(n=>(n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",n))(he||{}),ae=(n=>(n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n))(ae||{}),ee=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(ee||{}),ve=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(ve||{}),ce=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(ce||{}),Ce=(n=>(n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",n))(Ce||{}),Le=(n=>(n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",n))(Le||{}),Pe=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(Pe||{}),Ae=(n=>(n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",n))(Ae||{}),it=(n=>(n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",n))(it||{}),$e=(n=>(n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",n))($e||{}),gt=(n=>(n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",n))(gt||{}),Tt=(n=>(n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",n))(Tt||{}),Ke=(n=>(n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",n))(Ke||{}),st=(n=>(n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",n))(st||{}),Ct=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(Ct||{});const ne={ADAPTER:{createCanvas:(n,e)=>{const r=document.createElement("canvas");return r.width=n,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>(new DOMParser).parseFromString(n,"text/xml")},RESOLUTION:1,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,clearBeforeRender:!0,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,hello:!1},CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var dt=/iPhone/i,He=/iPod/i,at=/iPad/i,xe=/\biOS-universal(?:.+)Mac\b/i,wt=/\bAndroid(?:.+)Mobile\b/i,Ot=/Android/i,Rt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,en=/Silk/i,W=/Windows Phone/i,te=/\bWindows(?:.+)ARM\b/i,Y=/BlackBerry/i,we=/BB10/i,Se=/Opera Mini/i,fe=/\b(CriOS|Chrome)(?:.+)Mobile/i,me=/Mobile(?:.+)Firefox\b/i,Ve=function(n){return typeof n<"u"&&"MacIntel"===n.platform&&"number"==typeof n.maxTouchPoints&&n.maxTouchPoints>1&&typeof MSStream>"u"};const Q=function Ze(n){var e={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:"string"==typeof n?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var r=e.userAgent,o=r.split("[FBAN");typeof o[1]<"u"&&(r=o[0]),typeof(o=r.split("Twitter"))[1]<"u"&&(r=o[0]);var l=function De(n){return function(e){return e.test(n)}}(r),u={apple:{phone:l(dt)&&!l(W),ipod:l(He),tablet:!l(dt)&&(l(at)||Ve(e))&&!l(W),universal:l(xe),device:(l(dt)||l(He)||l(at)||l(xe)||Ve(e))&&!l(W)},amazon:{phone:l(Rt),tablet:!l(Rt)&&l(en),device:l(Rt)||l(en)},android:{phone:!l(W)&&l(Rt)||!l(W)&&l(wt),tablet:!l(W)&&!l(Rt)&&!l(wt)&&(l(en)||l(Ot)),device:!l(W)&&(l(Rt)||l(en)||l(wt)||l(Ot))||l(/\bokhttp\b/i)},windows:{phone:l(W),tablet:l(te),device:l(W)||l(te)},other:{blackberry:l(Y),blackberry10:l(we),opera:l(Se),firefox:l(me),chrome:l(fe),device:l(Y)||l(we)||l(Se)||l(me)||l(fe)},any:!1,phone:!1,tablet:!1};return u.any=u.apple.device||u.android.device||u.windows.device||u.other.device,u.phone=u.apple.phone||u.android.phone||u.windows.phone,u.tablet=u.apple.tablet||u.android.tablet||u.windows.tablet,u}(globalThis.navigator);ne.RETINA_PREFIX=/@([0-9\.]+)x/,ne.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Ee=F(2005),Ue=F(5469),Ye=F(8762);const pt={parse:Ye.Qc,format:Ye.WU,resolve:Ye.DB};function zt(n){if("string"!=typeof n)throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Kt(n){return n.split("?")[0].split("#")[0]}const St={toPosix:n=>function vn(n,e,r){return n.replace(new RegExp(function dn(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(e),"g"),r)}(n,"\\","/"),isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl:n=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n),hasProtocol(n){return/^[^/:]+:\//.test(this.toPosix(n))},getProtocol(n){zt(n),n=this.toPosix(n);let e="";const r=/^file:\/\/\//.exec(n),o=/^[^/:]+:\/\//.exec(n),l=/^[^/:]+:\//.exec(n);if(r||o||l){const u=r?.[0]||o?.[0]||l?.[0];e=u,n=n.slice(u.length)}return e},toAbsolute(n,e,r){if(this.isDataUrl(n))return n;const o=Kt(this.toPosix(e??ne.ADAPTER.getBaseUrl())),l=Kt(this.toPosix(r??this.rootname(o)));return zt(n),(n=this.toPosix(n)).startsWith("/")?St.join(l,n.slice(1)):this.isAbsolute(n)?n:this.join(o,n)},normalize(n){if(zt(n=this.toPosix(n)),0===n.length)return".";let e="";const r=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const o=n.endsWith("/");return n=function $t(n,e){let r="",o=0,l=-1,u=0,d=-1;for(let y=0;y<=n.length;++y){if(y<n.length)d=n.charCodeAt(y);else{if(47===d)break;d=47}if(47===d){if(l!==y-1&&1!==u)if(l!==y-1&&2===u){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){const M=r.lastIndexOf("/");if(M!==r.length-1){-1===M?(r="",o=0):(r=r.slice(0,M),o=r.length-1-r.lastIndexOf("/")),l=y,u=0;continue}}else if(2===r.length||1===r.length){r="",o=0,l=y,u=0;continue}e&&(r.length>0?r+="/..":r="..",o=2)}else r.length>0?r+=`/${n.slice(l+1,y)}`:r=n.slice(l+1,y),o=y-l-1;l=y,u=0}else 46===d&&-1!==u?++u:u=-1}return r}(n,!1),n.length>0&&o&&(n+="/"),r?`/${n}`:e+n},isAbsolute(n){return zt(n),n=this.toPosix(n),!!this.hasProtocol(n)||n.startsWith("/")},join(...n){if(0===n.length)return".";let e;for(let r=0;r<n.length;++r){const o=n[r];zt(o),o.length>0&&(void 0===e?e=o:this.extname(n[r-1]??"")?e+=`/../${o}`:e+=`/${o}`)}return void 0===e?".":this.normalize(e)},dirname(n){if(zt(n),0===n.length)return".";let e=(n=this.toPosix(n)).charCodeAt(0);const r=47===e;let o=-1,l=!0;const u=this.getProtocol(n),d=n;for(let y=(n=n.slice(u.length)).length-1;y>=1;--y)if(e=n.charCodeAt(y),47===e){if(!l){o=y;break}}else l=!1;return-1===o?r?"/":this.isUrl(d)?u+n:u:r&&1===o?"//":u+n.slice(0,o)},rootname(n){zt(n);let e="";if(e=(n=this.toPosix(n)).startsWith("/")?"/":this.getProtocol(n),this.isUrl(n)){const r=n.indexOf("/",e.length);e=-1!==r?n.slice(0,r):n,e.endsWith("/")||(e+="/")}return e},basename(n,e){zt(n),e&&zt(e),n=Kt(this.toPosix(n));let u,r=0,o=-1,l=!0;if(void 0!==e&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let d=e.length-1,y=-1;for(u=n.length-1;u>=0;--u){const M=n.charCodeAt(u);if(47===M){if(!l){r=u+1;break}}else-1===y&&(l=!1,y=u+1),d>=0&&(M===e.charCodeAt(d)?-1==--d&&(o=u):(d=-1,o=y))}return r===o?o=y:-1===o&&(o=n.length),n.slice(r,o)}for(u=n.length-1;u>=0;--u)if(47===n.charCodeAt(u)){if(!l){r=u+1;break}}else-1===o&&(l=!1,o=u+1);return-1===o?"":n.slice(r,o)},extname(n){zt(n);let e=-1,r=0,o=-1,l=!0,u=0;for(let d=(n=Kt(this.toPosix(n))).length-1;d>=0;--d){const y=n.charCodeAt(d);if(47!==y)-1===o&&(l=!1,o=d+1),46===y?-1===e?e=d:1!==u&&(u=1):-1!==e&&(u=-1);else if(!l){r=d+1;break}}return-1===e||-1===o||0===u||1===u&&e===o-1&&e===r+1?"":n.slice(e,o)},parse(n){zt(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===n.length)return e;let r=(n=Kt(this.toPosix(n))).charCodeAt(0);const o=this.isAbsolute(n);let l;e.root=this.rootname(n),l=o||this.hasProtocol(n)?1:0;let d=-1,y=0,M=-1,O=!0,B=n.length-1,G=0;for(;B>=l;--B)if(r=n.charCodeAt(B),47!==r)-1===M&&(O=!1,M=B+1),46===r?-1===d?d=B:1!==G&&(G=1):-1!==d&&(G=-1);else if(!O){y=B+1;break}return-1===d||-1===M||0===G||1===G&&d===M-1&&d===y+1?-1!==M&&(e.base=e.name=n.slice(0===y&&o?1:y,M)):(0===y&&o?(e.name=n.slice(1,d),e.base=n.slice(1,M)):(e.name=n.slice(y,d),e.base=n.slice(y,M)),e.ext=n.slice(d,M)),e.dir=this.dirname(n),e},sep:"/",delimiter:":"},Un={};function ln(n,e,r=3){if(Un[e])return;let o=(new Error).stack;typeof o>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${n}`):(o=o.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${n}`),console.warn(o),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${n}`),console.warn(o))),Un[e]=!0}let Wt;var xt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function zn(n,e=[]){return e[0]=(n>>16&255)/255,e[1]=(n>>8&255)/255,e[2]=(255&n)/255,e}function Di(n){let e=n.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`}function $o(n){if("string"==typeof n&&("#"===(n=xt[n.toLowerCase()]||n)[0]&&(n=n.slice(1)),3===n.length)){const[e,r,o]=n;n=e+e+r+r+o+o}return parseInt(n,16)}const as=function Ao(){const n=[],e=[];for(let o=0;o<32;o++)n[o]=o,e[o]=o;n[he.NORMAL_NPM]=he.NORMAL,n[he.ADD_NPM]=he.ADD,n[he.SCREEN_NPM]=he.SCREEN,e[he.NORMAL]=he.NORMAL_NPM,e[he.ADD]=he.ADD_NPM,e[he.SCREEN]=he.SCREEN_NPM;const r=[];return r.push(e),r.push(n),r}();function ur(n,e){return as[e?1:0][n]}function Us(n,e){if(1===e)return(255*e<<24)+n;if(0===e)return 0;let r=n>>16&255,o=n>>8&255,l=255&n;return r=r*e+.5|0,o=o*e+.5|0,l=l*e+.5|0,(255*e<<24)+(r<<16)+(o<<8)+l}function Mo(n,e,r,o){return(r=r||new Float32Array(4))[0]=(n>>16&255)/255,r[1]=(n>>8&255)/255,r[2]=(255&n)/255,(o||void 0===o)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function qi(n){if(4===n.BYTES_PER_ELEMENT)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===n.BYTES_PER_ELEMENT){if(n instanceof Uint16Array)return"Uint16Array"}else if(1===n.BYTES_PER_ELEMENT&&n instanceof Uint8Array)return"Uint8Array";return null}function Pr(n){return n+=0===n?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)}function rr(n){return!(n&n-1||!n)}function Ia(n){let e=(n>65535?1:0)<<4,r=((n>>>=e)>255?1:0)<<3;return e|=r,r=((n>>>=r)>15?1:0)<<2,e|=r,r=((n>>>=r)>3?1:0)<<1,e|=r,e|(n>>>=r)>>1}function Ss(n,e,r){const o=n.length;let l;if(e>=o||0===r)return;const u=o-(r=e+r>o?o-e:r);for(l=e;l<u;++l)n[l]=n[l+r];n.length=u}function cs(n){return 0===n?0:n<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;let uo=0;function Or(){return++uo}const Io=class{constructor(n,e,r,o){this.left=n,this.top=e,this.right=r,this.bottom=o}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let Hs=Io;Hs.EMPTY=new Io(0,0,0,0);const Ks={},Cr=Object.create(null),hr=Object.create(null);class Zs{constructor(e,r,o){this._canvas=ne.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=o||ne.RESOLUTION,this.resize(e,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,r){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function ho(n,e,r){for(let o=0,l=4*r*e;o<e;++o,l+=4)if(0!==n[l+3])return!1;return!0}function U(n,e,r,o,l){const u=4*e;for(let d=o,y=o*u+4*r;d<=l;++d,y+=u)if(0!==n[y+3])return!1;return!0}let H;function _e(n,e=1){const r=ne.RETINA_PREFIX?.exec(n);return r?parseFloat(r[1]):e}var oe=(n=>(n.Renderer="renderer",n.Application="application",n.RendererSystem="renderer-webgl-system",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererSystem="renderer-canvas-system",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n))(oe||{});const tt=n=>{if("function"==typeof n||"object"==typeof n&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={..."object"!=typeof n.extension?{type:n.extension}:n.extension,ref:n}}if("object"!=typeof n)throw new Error("Invalid extension type");return"string"==typeof(n={...n}).type&&(n.type=[n.type]),n},ft=(n,e)=>tt(n).priority??e,ut={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(tt).forEach(e=>{e.type.forEach(r=>this._removeHandlers[r]?.(e))}),this},add(...n){return n.map(tt).forEach(e=>{e.type.forEach(r=>{const o=this._addHandlers,l=this._queue;o[r]?o[r](e):(l[r]=l[r]||[],l[r].push(e))})}),this},handle(n,e,r){const o=this._addHandlers,l=this._removeHandlers;if(o[n]||l[n])throw new Error(`Extension type ${n} already has a handler`);o[n]=e,l[n]=r;const u=this._queue;return u[n]&&(u[n].forEach(d=>e(d)),delete u[n]),this},handleByMap(n,e){return this.handle(n,r=>{e[r.name]=r.ref},r=>{delete e[r.name]})},handleByList(n,e,r=-1){return this.handle(n,o=>{e.includes(o.ref)||(e.push(o.ref),e.sort((l,u)=>ft(u,r)-ft(l,r)))},o=>{const l=e.indexOf(o.ref);-1!==l&&e.splice(l,1)})}};class nn{constructor(e){this.rawBinaryData="number"==typeof e?new ArrayBuffer(e):e instanceof Uint8Array?e.buffer:e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const Xn=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function On(n){let e="";for(let r=0;r<n;++r)r>0&&(e+="\nelse "),r<n-1&&(e+=`if(test == ${r}.0){}`);return e}class j{constructor(){this.data=0,this.blendMode=he.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==he.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new j;return e.depthTest=!1,e.blend=!0,e}}const ge=[];function Je(n,e){if(!n)return null;let r="";if("string"==typeof n){const o=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);o&&(r=o[1].toLowerCase())}for(let o=ge.length-1;o>=0;--o){const l=ge[o];if(l.test&&l.test(n,r))return new l(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class lt{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,o,l,u,d,y,M){if(arguments.length>8)throw new Error("max arguments reached");const{name:O,items:B}=this;this._aliasCount++;for(let G=0,$=B.length;G<$;G++)B[G][O](e,r,o,l,u,d,y,M);return B===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return-1!==r&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(lt.prototype,{dispatch:{value:lt.prototype.emit},run:{value:lt.prototype.emit}});class Yt{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new lt("setRealSize"),this.onUpdate=new lt("update"),this.onError=new lt("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,o){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class Fn extends Yt{constructor(e,r){const{width:o,height:l}=r||{};if(!o||!l)throw new Error("BufferResource width or height invalid");super(o,l),this.data=e}upload(e,r,o){const l=e.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===it.UNPACK);const u=r.realWidth,d=r.realHeight;return o.width===u&&o.height===d?l.texSubImage2D(r.target,0,0,0,u,d,r.format,o.type,this.data):(o.width=u,o.height=d,l.texImage2D(r.target,0,o.internalFormat,u,d,0,r.format,o.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const si={scaleMode:Le.NEAREST,format:ee.RGBA,alphaMode:it.NPM},Wn=class extends Ee{constructor(n=null,e=null){super(),e=Object.assign({},Wn.defaultOptions,e);const{alphaMode:r,mipmap:o,anisotropicLevel:l,scaleMode:u,width:d,height:y,wrapMode:M,format:O,type:B,target:G,resolution:$,resourceOptions:le}=e;n&&!(n instanceof Yt)&&((n=Je(n,le)).internal=!0),this.resolution=$||ne.RESOLUTION,this.width=Math.round((d||0)*this.resolution)/this.resolution,this.height=Math.round((y||0)*this.resolution)/this.resolution,this._mipmap=o,this.anisotropicLevel=l,this._wrapMode=M,this._scaleMode=u,this.format=O,this.type=B,this.target=G,this.alphaMode=r,this.uid=Or(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=d>0&&y>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(n)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(n){this._mipmap!==n&&(this._mipmap=n,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(n){this._scaleMode!==n&&(this._scaleMode=n,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(n){this._wrapMode!==n&&(this._wrapMode=n,this.dirtyStyleId++)}setStyle(n,e){let r;return void 0!==n&&n!==this.scaleMode&&(this.scaleMode=n,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(n,e,r){return this.setRealSize(n*(r=r||this.resolution),e*r,r)}setRealSize(n,e,r){return this.resolution=r||this.resolution,this.width=Math.round(n)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=rr(this.realWidth)&&rr(this.realHeight)}setResolution(n){const e=this.resolution;return e===n||(this.resolution=n,this.valid&&(this.width=Math.round(this.width*e)/n,this.height=Math.round(this.height*e)/n,this.emit("update",this)),this._refreshPOT()),this}setResource(n){if(this.resource===n)return this;if(this.resource)throw new Error("Resource can be set only once");return n.bind(this),this.resource=n,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(n){this.emit("error",this,n)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete hr[this.cacheId],delete Cr[this.cacheId],this.cacheId=null),this.dispose(),Wn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(n,e,r=ne.STRICT_TEXTURE_CACHE){const o="string"==typeof n;let l=null;o?l=n:(n._pixiId||(n._pixiId=`${e?.pixiIdPrefix||"pixiid"}_${Or()}`),l=n._pixiId);let u=hr[l];if(o&&r&&!u)throw new Error(`The cacheId "${l}" does not exist in BaseTextureCache.`);return u||(u=new Wn(n,e),u.cacheId=l,Wn.addToCache(u,l)),u}static fromBuffer(n,e,r,o){n=n||new Float32Array(e*r*4);const l=new Fn(n,{width:e,height:r}),u=n instanceof Float32Array?ce.FLOAT:ce.UNSIGNED_BYTE;return new Wn(l,Object.assign({},si,o||{width:e,height:r,type:u}))}static addToCache(n,e){e&&(n.textureCacheIds.includes(e)||n.textureCacheIds.push(e),hr[e]&&hr[e]!==n&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),hr[e]=n)}static removeFromCache(n){if("string"==typeof n){const e=hr[n];if(e){const r=e.textureCacheIds.indexOf(n);return r>-1&&e.textureCacheIds.splice(r,1),delete hr[n],e}}else if(n?.textureCacheIds){for(let e=0;e<n.textureCacheIds.length;++e)delete hr[n.textureCacheIds[e]];return n.textureCacheIds.length=0,n}return null}};let kt=Wn;kt.defaultOptions={mipmap:Ae.POW2,anisotropicLevel:0,scaleMode:Le.LINEAR,wrapMode:Pe.CLAMP,alphaMode:it.UNPACK,target:ve.TEXTURE_2D,format:ee.RGBA,type:ce.UNSIGNED_BYTE},kt._globalBatch=0;class yi{constructor(){this.texArray=null,this.blend=0,this.type=ae.TRIANGLES,this.start=0,this.size=0,this.data=null}}let di=0;class At{constructor(e,r=!0,o=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=o,this.static=r,this.id=di++,this.disposeRunner=new lt("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Ct.ELEMENT_ARRAY_BUFFER:Ct.ARRAY_BUFFER}get index(){return this.type===Ct.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new At(e)}}class sn{constructor(e,r=0,o=!1,l=ce.FLOAT,u,d,y,M=1){this.buffer=e,this.size=r,this.normalized=o,this.type=l,this.stride=u,this.start=d,this.instance=y,this.divisor=M}destroy(){this.buffer=null}static from(e,r,o,l,u){return new sn(e,r,o,l,u)}}const hn={Float32Array,Uint32Array,Int32Array,Uint8Array},gi={5126:4,5123:2,5121:1};let zi=0;const Bi={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Ui{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=zi++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new lt("disposeGeometry"),this.refCount=0}addAttribute(e,r,o=0,l=!1,u,d,y,M=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof At||(r instanceof Array&&(r=new Float32Array(r)),r=new At(r));const O=e.split("|");if(O.length>1){for(let G=0;G<O.length;G++)this.addAttribute(O[G],r,o,l,u);return this}let B=this.buffers.indexOf(r);return-1===B&&(this.buffers.push(r),B=this.buffers.length-1),this.attributes[e]=new sn(B,o,l,u,d,y,M),this.instanced=this.instanced||M,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof At||(e instanceof Array&&(e=new Uint16Array(e)),e=new At(e)),e.type=Ct.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],r=[],o=new At;let l;for(l in this.attributes){const u=this.attributes[l];e.push(this.buffers[u.buffer].data),r.push(u.size*gi[u.type]/4),u.buffer=0}for(o.data=function Ln(n,e){let r=0,o=0;const l={};for(let M=0;M<n.length;M++)o+=e[M],r+=n[M].length;const u=new ArrayBuffer(4*r);let d=null,y=0;for(let M=0;M<n.length;M++){const O=e[M],B=n[M],G=qi(B);l[G]||(l[G]=new hn[G](u)),d=l[G];for(let $=0;$<B.length;$++)d[($/O|0)*o+y+$%O]=B[$];y+=O}return new Float32Array(u)}(e,r),l=0;l<this.buffers.length;l++)this.buffers[l]!==this.indexBuffer&&this.buffers[l].destroy();return this.buffers=[o],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Ui;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new At(this.buffers[r].data.slice(0));for(const r in this.attributes){const o=this.attributes[r];e.attributes[r]=new sn(o.buffer,o.size,o.normalized,o.type,o.stride,o.start,o.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Ct.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new Ui,o=[],l=[],u=[];let d;for(let y=0;y<e.length;y++){d=e[y];for(let M=0;M<d.buffers.length;M++)l[M]=l[M]||0,l[M]+=d.buffers[M].data.length,u[M]=0}for(let y=0;y<d.buffers.length;y++)o[y]=new(Bi[qi(d.buffers[y].data)])(l[y]),r.buffers[y]=new At(o[y]);for(let y=0;y<e.length;y++){d=e[y];for(let M=0;M<d.buffers.length;M++)o[M].set(d.buffers[M].data,u[M]),u[M]+=d.buffers[M].data.length}if(r.attributes=d.attributes,d.indexBuffer){r.indexBuffer=r.buffers[d.buffers.indexOf(d.indexBuffer)],r.indexBuffer.type=Ct.ELEMENT_ARRAY_BUFFER;let y=0,M=0,O=0,B=0;for(let G=0;G<d.buffers.length;G++)if(d.buffers[G]!==d.indexBuffer){B=G;break}for(const G in d.attributes){const $=d.attributes[G];(0|$.buffer)===B&&(M+=$.size*gi[$.type]/4)}for(let G=0;G<e.length;G++){const $=e[G].indexBuffer.data;for(let le=0;le<$.length;le++)r.indexBuffer.data[le+O]+=y;y+=e[G].buffers[B].data.length/M,O+=$.length}}return r}}class Mi extends Ui{constructor(e=!1){super(),this._buffer=new At(null,e,!1),this._indexBuffer=new At(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ce.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ce.FLOAT).addAttribute("aColor",this._buffer,4,!0,ce.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ce.FLOAT).addIndex(this._indexBuffer)}}const fo=2*Math.PI,Ra=180/Math.PI,_r=Math.PI/180;var oi=(n=>(n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",n))(oi||{});class Rn{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new Rn(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const Ur=[new Rn,new Rn,new Rn,new Rn];class Gn{constructor(e=0,r=0,o=0,l=0){this.x=Number(e),this.y=Number(r),this.width=Number(o),this.height=Number(l),this.type=oi.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Gn(0,0,0,0)}clone(){return new Gn(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r)return!((this.right>e.right?e.right:this.right)<=(this.x<e.x?e.x:this.x))&&(this.bottom>e.bottom?e.bottom:this.bottom)>(this.y<e.y?e.y:this.y);const o=this.left,l=this.right,u=this.top,d=this.bottom;if(l<=o||d<=u)return!1;const y=Ur[0].set(e.left,e.top),M=Ur[1].set(e.left,e.bottom),O=Ur[2].set(e.right,e.top),B=Ur[3].set(e.right,e.bottom);if(O.x<=y.x||M.y<=y.y)return!1;const G=Math.sign(r.a*r.d-r.b*r.c);if(0===G||(r.apply(y,y),r.apply(M,M),r.apply(O,O),r.apply(B,B),Math.max(y.x,M.x,O.x,B.x)<=o||Math.min(y.x,M.x,O.x,B.x)>=l||Math.max(y.y,M.y,O.y,B.y)<=u||Math.min(y.y,M.y,O.y,B.y)>=d))return!1;const $=G*(M.y-y.y),le=G*(y.x-M.x),pe=$*o+le*u,ze=$*l+le*u,qe=$*o+le*d,ot=$*l+le*d;if(Math.max(pe,ze,qe,ot)<=$*y.x+le*y.y||Math.min(pe,ze,qe,ot)>=$*B.x+le*B.y)return!1;const Pt=G*(y.y-O.y),rt=G*(O.x-y.x),Dt=Pt*o+rt*u,xn=Pt*l+rt*u,En=Pt*o+rt*d,Xt=Pt*l+rt*d;return!(Math.max(Dt,xn,En,Xt)<=Pt*y.x+rt*y.y||Math.min(Dt,xn,En,Xt)>=Pt*B.x+rt*B.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=2*e,this.height+=2*r,this}fit(e){const r=Math.max(this.x,e.x),o=Math.min(this.x+this.width,e.x+e.width),l=Math.max(this.y,e.y),u=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(o-r,0),this.y=l,this.height=Math.max(u-l,0),this}ceil(e=1,r=.001){const o=Math.ceil((this.x+this.width-r)*e)/e,l=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=o-this.x,this.height=l-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),o=Math.max(this.x+this.width,e.x+e.width),l=Math.min(this.y,e.y),u=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=o-r,this.y=l,this.height=u-l,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Pa{constructor(e=0,r=0,o=0){this.x=e,this.y=r,this.radius=o,this.type=oi.CIRC}clone(){return new Pa(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;let l=this.x-e,u=this.y-r;return l*=l,u*=u,l+u<=this.radius*this.radius}getBounds(){return new Gn(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Ro{constructor(e=0,r=0,o=0,l=0){this.x=e,this.y=r,this.width=o,this.height=l,this.type=oi.ELIP}clone(){return new Ro(this.x,this.y,this.width,this.height)}contains(e,r){if(this.width<=0||this.height<=0)return!1;let o=(e-this.x)/this.width,l=(r-this.y)/this.height;return o*=o,l*=l,o+l<=1}getBounds(){return new Gn(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class po{constructor(...e){let r=Array.isArray(e[0])?e[0]:e;if("number"!=typeof r[0]){const o=[];for(let l=0,u=r.length;l<u;l++)o.push(r[l].x,r[l].y);r=o}this.points=r,this.type=oi.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),r=new po(e);return r.closeStroke=this.closeStroke,r}contains(e,r){let o=!1;const l=this.points.length/2;for(let u=0,d=l-1;u<l;d=u++){const y=this.points[2*u],M=this.points[2*u+1],B=this.points[2*d+1];M>r!=B>r&&e<(r-M)/(B-M)*(this.points[2*d]-y)+y&&(o=!o)}return o}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,r)=>`${e}, ${r}`,"")}]`}}class ol{constructor(e=0,r=0,o=0,l=0,u=20){this.x=e,this.y=r,this.width=o,this.height=l,this.radius=u,this.type=oi.RREC}clone(){return new ol(this.x,this.y,this.width,this.height,this.radius)}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const o=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+o&&r<=this.y+this.height-o||e>=this.x+o&&e<=this.x+this.width-o)return!0;let l=e-(this.x+o),u=r-(this.y+o);const d=o*o;if(l*l+u*u<=d||(l=e-(this.x+this.width-o),l*l+u*u<=d)||(u=r-(this.y+this.height-o),l*l+u*u<=d)||(l=e-(this.x+o),l*l+u*u<=d))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Oi{constructor(e=1,r=0,o=0,l=1,u=0,d=0){this.array=null,this.a=e,this.b=r,this.c=o,this.d=l,this.tx=u,this.ty=d}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,o,l,u,d){return this.a=e,this.b=r,this.c=o,this.d=l,this.tx=u,this.ty=d,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const o=r||this.array;return e?(o[0]=this.a,o[1]=this.b,o[2]=0,o[3]=this.c,o[4]=this.d,o[5]=0,o[6]=this.tx,o[7]=this.ty,o[8]=1):(o[0]=this.a,o[1]=this.c,o[2]=this.tx,o[3]=this.b,o[4]=this.d,o[5]=this.ty,o[6]=0,o[7]=0,o[8]=1),o}apply(e,r){r=r||new Rn;const o=e.x,l=e.y;return r.x=this.a*o+this.c*l+this.tx,r.y=this.b*o+this.d*l+this.ty,r}applyInverse(e,r){r=r||new Rn;const o=1/(this.a*this.d+this.c*-this.b),l=e.x,u=e.y;return r.x=this.d*o*l+-this.c*o*u+(this.ty*this.c-this.tx*this.d)*o,r.y=this.a*o*u+-this.b*o*l+(-this.ty*this.a+this.tx*this.b)*o,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),o=Math.sin(e),l=this.a,u=this.c,d=this.tx;return this.a=l*r-this.b*o,this.b=l*o+this.b*r,this.c=u*r-this.d*o,this.d=u*o+this.d*r,this.tx=d*r-this.ty*o,this.ty=d*o+this.ty*r,this}append(e){const r=this.a,o=this.b,l=this.c,u=this.d;return this.a=e.a*r+e.b*l,this.b=e.a*o+e.b*u,this.c=e.c*r+e.d*l,this.d=e.c*o+e.d*u,this.tx=e.tx*r+e.ty*l+this.tx,this.ty=e.tx*o+e.ty*u+this.ty,this}setTransform(e,r,o,l,u,d,y,M,O){return this.a=Math.cos(y+O)*u,this.b=Math.sin(y+O)*u,this.c=-Math.sin(y-M)*d,this.d=Math.cos(y-M)*d,this.tx=e-(o*this.a+l*this.c),this.ty=r-(o*this.b+l*this.d),this}prepend(e){const r=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const o=this.a,l=this.c;this.a=o*e.a+this.b*e.c,this.b=o*e.b+this.b*e.d,this.c=l*e.a+this.d*e.c,this.d=l*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,o=this.b,l=this.c,u=this.d,d=e.pivot,y=-Math.atan2(-l,u),M=Math.atan2(o,r),O=Math.abs(y+M);return O<1e-5||Math.abs(fo-O)<1e-5?(e.rotation=M,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=y,e.skew.y=M),e.scale.x=Math.sqrt(r*r+o*o),e.scale.y=Math.sqrt(l*l+u*u),e.position.x=this.tx+(d.x*r+d.y*l),e.position.y=this.ty+(d.x*o+d.y*u),e}invert(){const e=this.a,r=this.b,o=this.c,l=this.d,u=this.tx,d=e*l-r*o;return this.a=l/d,this.b=-r/d,this.c=-o/d,this.d=e/d,this.tx=(o*this.ty-l*u)/d,this.ty=-(e*this.ty-r*u)/d,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Oi;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Oi}static get TEMP_MATRIX(){return new Oi}}const go=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Qi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],mo=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Gs=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Xo=[],_o=[],la=Math.sign;!function nu(){for(let n=0;n<16;n++){const e=[];Xo.push(e);for(let r=0;r<16;r++){const o=la(go[n]*go[r]+mo[n]*Qi[r]),l=la(Qi[n]*go[r]+Gs[n]*Qi[r]),u=la(go[n]*mo[r]+mo[n]*Gs[r]),d=la(Qi[n]*mo[r]+Gs[n]*Gs[r]);for(let y=0;y<16;y++)if(go[y]===o&&Qi[y]===l&&mo[y]===u&&Gs[y]===d){e.push(y);break}}}for(let n=0;n<16;n++){const e=new Oi;e.set(go[n],Qi[n],mo[n],Gs[n],0,0),_o.push(e)}}();const $i={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>go[n],uY:n=>Qi[n],vX:n=>mo[n],vY:n=>Gs[n],inv:n=>8&n?15&n:7&-n,add:(n,e)=>Xo[n][e],sub:(n,e)=>Xo[n][$i.inv(e)],rotate180:n=>4^n,isVertical:n=>2==(3&n),byDirection:(n,e)=>2*Math.abs(n)<=Math.abs(e)?e>=0?$i.S:$i.N:2*Math.abs(e)<=Math.abs(n)?n>0?$i.E:$i.W:e>0?n>0?$i.SE:$i.SW:n>0?$i.NE:$i.NW,matrixAppendRotationInv:(n,e,r=0,o=0)=>{const l=_o[$i.inv(e)];l.tx=r,l.ty=o,n.append(l)}};class Jr{constructor(e,r,o=0,l=0){this._x=o,this._y=l,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new Jr(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}const Oa=class{constructor(){this.worldTransform=new Oi,this.localTransform=new Oi,this.position=new Jr(this.onChange,this,0,0),this.scale=new Jr(this.onChange,this,1,1),this.pivot=new Jr(this.onChange,this,0,0),this.skew=new Jr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(n){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){const r=n.worldTransform,o=this.worldTransform;o.a=e.a*r.a+e.b*r.c,o.b=e.a*r.b+e.b*r.d,o.c=e.c*r.a+e.d*r.c,o.d=e.c*r.b+e.d*r.d,o.tx=e.tx*r.a+e.ty*r.c+r.tx,o.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=n._worldID,this._worldID++}}setFromMatrix(n){n.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}};let Ko=Oa;Ko.IDENTITY=new Oa;const us=[{test:n=>"float"===n.type&&1===n.size&&!n.isArray,code:n=>`\n            if(uv["${n}"] !== ud["${n}"].value)\n            {\n                ud["${n}"].value = uv["${n}"]\n                gl.uniform1f(ud["${n}"].location, uv["${n}"])\n            }\n            `},{test:(n,e)=>!("sampler2D"!==n.type&&"samplerCube"!==n.type&&"sampler2DArray"!==n.type||1!==n.size||n.isArray||null!=e&&void 0===e.castToBaseTexture),code:n=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${n}"], t);\n\n            if(ud["${n}"].value !== t)\n            {\n                ud["${n}"].value = t;\n                gl.uniform1i(ud["${n}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(n,e)=>"mat3"===n.type&&1===n.size&&!n.isArray&&void 0!==e.a,code:n=>`\n            gl.uniformMatrix3fv(ud["${n}"].location, false, uv["${n}"].toArray(true));\n            `,codeUbo:n=>`\n                var ${n}_matrix = uv.${n}.toArray(true);\n\n                data[offset] = ${n}_matrix[0];\n                data[offset+1] = ${n}_matrix[1];\n                data[offset+2] = ${n}_matrix[2];\n        \n                data[offset + 4] = ${n}_matrix[3];\n                data[offset + 5] = ${n}_matrix[4];\n                data[offset + 6] = ${n}_matrix[5];\n        \n                data[offset + 8] = ${n}_matrix[6];\n                data[offset + 9] = ${n}_matrix[7];\n                data[offset + 10] = ${n}_matrix[8];\n            `},{test:(n,e)=>"vec2"===n.type&&1===n.size&&!n.isArray&&void 0!==e.x,code:n=>`\n                cv = ud["${n}"].value;\n                v = uv["${n}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${n}"].location, v.x, v.y);\n                }`,codeUbo:n=>`\n                v = uv.${n};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:n=>"vec2"===n.type&&1===n.size&&!n.isArray,code:n=>`\n                cv = ud["${n}"].value;\n                v = uv["${n}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${n}"].location, v[0], v[1]);\n                }\n            `},{test:(n,e)=>"vec4"===n.type&&1===n.size&&!n.isArray&&void 0!==e.width,code:n=>`\n                cv = ud["${n}"].value;\n                v = uv["${n}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${n}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:n=>`\n                    v = uv.${n};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:n=>"vec4"===n.type&&1===n.size&&!n.isArray,code:n=>`\n                cv = ud["${n}"].value;\n                v = uv["${n}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${n}"].location, v[0], v[1], v[2], v[3])\n                }`}],Yl={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},Po={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},qs={};let yo,ca=qs;const Kl={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function vi(n){return Kl[n]}let al=null;const su={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function ou(n,e){if(!al){const r=Object.keys(su);al={};for(let o=0;o<r.length;++o){const l=r[o];al[n[l]]=su[l]}}return al[e]}function Zl(n,e,r){if("precision"!==n.substring(0,9)){let o=e;return e===Tt.HIGH&&r!==Tt.HIGH&&(o=Tt.MEDIUM),`precision ${o} float;\n${n}`}return r!==Tt.HIGH&&"precision highp"===n.substring(0,15)?n.replace("precision highp","precision mediump"):n}let Ch=0;const ql={},Fa=class{constructor(n,e,r="pixi-shader",o={}){this.extra={},this.id=Ch++,this.vertexSrc=n||Fa.defaultVertexSrc,this.fragmentSrc=e||Fa.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=o,"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),ql[r]?(ql[r]++,r+=`-${ql[r]}`):ql[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}\n${this.fragmentSrc}`,this.vertexSrc=Zl(this.vertexSrc,Fa.defaultVertexPrecision,Tt.HIGH),this.fragmentSrc=Zl(this.fragmentSrc,Fa.defaultFragmentPrecision,function ru(){if(!yo){yo=Tt.MEDIUM;const n=function Xl(){if(ca===qs||ca?.isContextLost()){const n=ne.ADAPTER.createCanvas();let e;ne.PREFER_ENV>=w.WEBGL2&&(e=n.getContext("webgl2",{})),e||(e=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),ca=e}return ca}();n&&n.getShaderPrecisionFormat&&(yo=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?Tt.HIGH:Tt.MEDIUM)}return yo}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(n,e,r){const o=n+e;let l=Ks[o];return l||(Ks[o]=l=new Fa(n,e,r)),l}};let Wr=Fa;Wr.defaultVertexPrecision=Tt.HIGH,Wr.defaultFragmentPrecision=Q.apple.device?Tt.HIGH:Tt.MEDIUM;let La=0;class Qs{constructor(e,r,o){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=La++,this.static=!!r,this.ubo=!!o,e instanceof At?(this.buffer=e,this.buffer.type=Ct.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new At(new Float32Array(1)),this.buffer.type=Ct.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,o){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new Qs(r,o)}static from(e,r,o){return new Qs(e,r,o)}static uboFrom(e,r){return new Qs(e,r??!0,!0)}}class Ei{constructor(e,r){this.uniformBindCount=0,this.program=e,this.uniformGroup=r?r instanceof Qs?r:new Qs(r):new Qs({}),this.disposeRunner=new lt("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const o in r.uniforms){const l=r.uniforms[o];if(l.group&&this.checkUniformExists(e,l))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,o){const l=Wr.from(e,r);return new Ei(l,o)}}class ll{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const o=new Int32Array(e);for(let u=0;u<e;u++)o[u]=u;this.defaultGroupCache[e]=Qs.from({uSamplers:o},!0);let l=this.fragTemplate;l=l.replace(/%count%/gi,`${e}`),l=l.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Wr(this.vertexSrc,l)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new Oi,default:this.defaultGroupCache[e]};return new Ei(this.programCache[e],r)}generateSampleSrc(e){let r="";r+="\n",r+="\n";for(let o=0;o<e;o++)o>0&&(r+="\nelse "),o<e-1&&(r+=`if(vTextureId < ${o}.5)`),r+="\n{",r+=`\n\tcolor = texture2D(uSamplers[${o}], vTextureCoord);`,r+="\n}";return r+="\n",r+="\n",r}}class Oo{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class Vs{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}const Gr=class extends Vs{constructor(n){super(n),this.setShaderGenerator(),this.geometryClass=Mi,this.vertexSize=6,this.state=j.for2d(),this.size=4*Gr.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),n.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??function hs(n){let e=!0;const r=ne.ADAPTER.getNavigator();if(Q.tablet||Q.phone){if(Q.apple.device){const o=r.userAgent.match(/OS (\d+)_(\d+)?/);o&&parseInt(o[1],10)<11&&(e=!1)}if(Q.android.device){const o=r.userAgent.match(/Android\s([0-9.]*)/);o&&parseInt(o[1],10)<7&&(e=!1)}}return e?n:4}(32),this._defaultMaxTextures}static set defaultMaxTextures(n){this._defaultMaxTextures=n}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??function au(){return!Q.apple.device}(),this._canUploadSameBuffer}static set canUploadSameBuffer(n){this._canUploadSameBuffer=n}get MAX_TEXTURES(){return ln("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:n=Gr.defaultVertexSrc,fragment:e=Gr.defaultFragmentTemplate}={}){this.shaderGenerator=new ll(n,e)}contextChange(){const n=this.renderer.gl;ne.PREFER_ENV===w.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),Gr.defaultMaxTextures),this.maxTextures=function wn(n,e){if(0===n)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const o=Xn.replace(/%forloop%/gi,On(n));if(e.shaderSource(r,o),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;n=n/2|0}return n}(this.maxTextures,n)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:n,_textureArrayPool:e}=Gr,r=this.size/4,o=Math.floor(r/this.maxTextures)+1;for(;n.length<r;)n.push(new yi);for(;e.length<o;)e.push(new Oo);for(let l=0;l<this.maxTextures;l++)this._tempBoundTextures[l]=null}onPrerender(){this._flushId=0}render(n){n._texture.valid&&(this._vertexCount+n.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=n.vertexData.length/2,this._indexCount+=n.indices.length,this._bufferedTextures[this._bufferSize]=n._texture.baseTexture,this._bufferedElements[this._bufferSize++]=n)}buildTexturesAndDrawCalls(){const{_bufferedTextures:n,maxTextures:e}=this,r=Gr._textureArrayPool,o=this.renderer.batch,l=this._tempBoundTextures,u=this.renderer.textureGC.count;let d=++kt._globalBatch,y=0,M=r[0],O=0;o.copyBoundTextures(l,e);for(let B=0;B<this._bufferSize;++B){const G=n[B];n[B]=null,G._batchEnabled!==d&&(M.count>=e&&(o.boundArray(M,l,d,e),this.buildDrawCalls(M,O,B),O=B,M=r[++y],++d),G._batchEnabled=d,G.touched=u,M.elements[M.count++]=G)}M.count>0&&(o.boundArray(M,l,d,e),this.buildDrawCalls(M,O,this._bufferSize),++y,++d);for(let B=0;B<l.length;B++)l[B]=null;kt._globalBatch=d}buildDrawCalls(n,e,r){const{_bufferedElements:o,_attributeBuffer:l,_indexBuffer:u,vertexSize:d}=this,y=Gr._drawCallPool;let M=this._dcIndex,O=this._aIndex,B=this._iIndex,G=y[M];G.start=this._iIndex,G.texArray=n;for(let $=e;$<r;++$){const le=o[$],ze=as[le._texture.baseTexture.alphaMode?1:0][le.blendMode];o[$]=null,e<$&&G.blend!==ze&&(G.size=B-G.start,e=$,G=y[++M],G.texArray=n,G.start=B),this.packInterleavedGeometry(le,l,u,O,B),O+=le.vertexData.length/2*d,B+=le.indices.length,G.blend=ze}e<r&&(G.size=B-G.start,++M),this._dcIndex=M,this._aIndex=O,this._iIndex=B}bindAndClearTexArray(n){const e=this.renderer.texture;for(let r=0;r<n.count;r++)e.bind(n.elements[r],n.ids[r]),n.elements[r]=null;n.count=0}updateGeometry(){const{_packedGeometries:n,_attributeBuffer:e,_indexBuffer:r}=this;Gr.canUploadSameBuffer?(n[this._flushId]._buffer.update(e.rawBinaryData),n[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(e.rawBinaryData),n[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const n=this._dcIndex,{gl:e,state:r}=this.renderer,o=Gr._drawCallPool;let l=null;for(let u=0;u<n;u++){const{texArray:d,type:y,size:M,start:O,blend:B}=o[u];l!==d&&(l=d,this.bindAndClearTexArray(d)),this.state.blendMode=B,r.set(this.state),e.drawElements(y,M,e.UNSIGNED_SHORT,2*O)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Gr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]&&this._packedGeometries[n].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(n){const e=Pr(Math.ceil(n/8)),r=Ia(e),o=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let l=this._aBuffers[o];return l||(this._aBuffers[o]=l=new nn(o*this.vertexSize*4)),l}getIndexBuffer(n){const e=Pr(Math.ceil(n/12)),r=Ia(e),o=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let l=this._iBuffers[r];return l||(this._iBuffers[r]=l=new Uint16Array(o)),l}packInterleavedGeometry(n,e,r,o,l){const{uint32View:u,float32View:d}=e,y=o/this.vertexSize,M=n.uvs,O=n.indices,B=n.vertexData,G=n._texture.baseTexture._batchLocation,$=Math.min(n.worldAlpha,1),le=$<1&&n._texture.baseTexture.alphaMode?Us(n._tintRGB,$):n._tintRGB+(255*$<<24);for(let pe=0;pe<B.length;pe+=2)d[o++]=B[pe],d[o++]=B[pe+1],d[o++]=M[pe],d[o++]=M[pe+1],u[o++]=le,d[o++]=G;for(let pe=0;pe<O.length;pe++)r[l++]=y+O[pe]}};let ds=Gr;ds.defaultBatchSize=4096,ds.extension={name:"batch",type:oe.RendererPlugin},ds._drawCallPool=[],ds._textureArrayPool=[],ut.add(ds);const m=class extends Ei{constructor(n,e,r){super(Wr.from(n||m.defaultVertexSrc,e||m.defaultFragmentSrc),r),this.padding=0,this.resolution=m.defaultResolution,this.multisample=m.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new j}apply(n,e,r,o,l){n.applyFilter(this,e,r,o)}get blendMode(){return this.state.blendMode}set blendMode(n){this.state.blendMode=n}get resolution(){return this._resolution}set resolution(n){this._resolution=n}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};let _=m;_.defaultResolution=1,_.defaultMultisample=st.NONE;class f{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender,e.color&&(this.color="string"==typeof e.color?$o(e.color):e.color),this.alpha=e.alpha}get color(){return this._backgroundColor}set color(e){this._backgroundColor=e,this._backgroundColorString=Di(e),zn(e,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(e){this._backgroundColorRgba[3]=e}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}f.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"background"},ut.add(f);class x{constructor(e){this.renderer=e,this.emptyRenderer=new Vs(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:o}=this.renderer.texture;for(let l=r-1;l>=0;--l)e[l]=o[l]||null,e[l]&&(e[l]._batchLocation=l)}boundArray(e,r,o,l){const{elements:u,ids:d,count:y}=e;let M=0;for(let O=0;O<y;O++){const B=u[O],G=B._batchLocation;if(G>=0&&G<l&&r[G]===B)d[O]=G;else for(;M<l;){const $=r[M];if(!$||$._batchEnabled!==o||$._batchLocation!==M){d[O]=M,B._batchLocation=M,r[M]=B;break}M++}}}destroy(){this.renderer=null}}x.extension={type:oe.RendererSystem,name:"batch"},ut.add(x);let P=0;class V{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=P++}init(e){if(e.context)this.initFromContext(e.context);else{const r=this.renderer.background.alpha<1,o=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:o,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=P++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;void 0!==r.addEventListener&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let o;if(ne.PREFER_ENV>=w.WEBGL2&&(o=e.getContext("webgl2",r)),o)this.webGLVersion=2;else if(this.webGLVersion=1,o=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!o)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=o,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),o="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;o&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const l=o||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=l,l||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}V.extension={type:oe.RendererSystem,name:"context"},ut.add(V);class K extends Fn{upload(e,r,o){const l=e.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===it.UNPACK);const u=r.realWidth,d=r.realHeight;return o.width===u&&o.height===d?l.texSubImage2D(r.target,0,0,0,u,d,r.format,o.type,this.data):(o.width=u,o.height=d,l.texImage2D(r.target,0,o.internalFormat,u,d,0,r.format,o.type,this.data)),!0}}class je{constructor(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new lt("disposeFramebuffer"),this.multisample=st.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new kt(null,{scaleMode:Le.NEAREST,resolution:1,mipmap:Ae.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new kt(new K(null,{width:this.width,height:this.height}),{scaleMode:Le.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ae.OFF,format:ee.DEPTH_COMPONENT,type:ce.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),e!==this.width||r!==this.height){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let o=0;o<this.colorTextures.length;o++){const l=this.colorTextures[o],u=l.resolution;l.setSize(e/u,r/u)}if(this.depthTexture){const o=this.depthTexture.resolution;this.depthTexture.setSize(e/o,r/o)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class yt extends kt{constructor(e={}){"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=st.NONE),super(null,e),this.mipmap=Ae.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new je(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Vt extends Yt{constructor(e){super(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,o){void 0!==o||r.startsWith("data:")?!1!==o&&(e.crossOrigin="string"==typeof o?o:"anonymous"):e.crossOrigin=function J(n,e=globalThis.location){if(n.startsWith("data:"))return"";e=e||globalThis.location,H||(H=document.createElement("a")),H.href=n;const r=pt.parse(H.href);return r.hostname!==e.hostname||(r.port||""!==e.port)&&r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}(r)}upload(e,r,o,l){const u=e.gl,d=r.realWidth,y=r.realHeight;if(l=l||this.source,typeof HTMLImageElement<"u"&&l instanceof HTMLImageElement){if(!l.complete||0===l.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&l instanceof HTMLVideoElement&&l.readyState<=1&&0===l.buffered.length)return!1;return u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===it.UNPACK),this.noSubImage||r.target!==u.TEXTURE_2D||o.width!==d||o.height!==y?(o.width=d,o.height=y,u.texImage2D(r.target,0,o.internalFormat,r.format,o.type,l)):u.texSubImage2D(u.TEXTURE_2D,0,0,0,r.format,o.type,l),!0}update(){if(this.destroyed)return;const e=this.source;this.resize(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),super.update()}dispose(){this.source=null}}class Jt extends Vt{constructor(e,r){if(r=r||{},"string"==typeof e){const o=new Image;Vt.crossOrigin(o,e,r.crossorigin),o.src=e,e=o}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??ne.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof r.alphaMode?r.alphaMode:null,this.bitmap=null,this._load=null,!1!==r.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((r,o)=>{const l=this.source;this.url=l.src;const u=()=>{this.destroyed||(l.onload=null,l.onerror=null,this.resize(l.width,l.height),this._load=null,r(this.createBitmap?this.process():this))};l.complete&&l.src?u():(l.onload=u,l.onerror=d=>{o(d),this.onError.emit(d)})})),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap;return this._process=fetch(e.src,{mode:e.crossOrigin&&"anonymous"!==e.crossOrigin?"no-cors":"cors"}).then(l=>l.blob()).then(l=>r(l,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===it.UNPACK?"premultiply":"none"})).then(l=>this.destroyed?Promise.reject():(this.bitmap=l,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,o){if("number"==typeof this.alphaMode&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,o);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,o,this.bitmap),!this.preserveBitmap){let l=!0;const u=r._glTextures;for(const d in u){const y=u[d];if(y!==o&&y.dirtyId!==r.dirtyId){l=!1;break}}l&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&("string"==typeof e||e instanceof HTMLImageElement)}}class ti{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,o){const l=r.width,u=r.height;if(o){const d=e.width/2/l,y=e.height/2/u,M=e.x/l+d,O=e.y/u+y;o=$i.add(o,$i.NW),this.x0=M+d*$i.uX(o),this.y0=O+y*$i.uY(o),o=$i.add(o,2),this.x1=M+d*$i.uX(o),this.y1=O+y*$i.uY(o),o=$i.add(o,2),this.x2=M+d*$i.uX(o),this.y2=O+y*$i.uY(o),o=$i.add(o,2),this.x3=M+d*$i.uX(o),this.y3=O+y*$i.uY(o)}else this.x0=e.x/l,this.y0=e.y/u,this.x1=(e.x+e.width)/l,this.y1=e.y/u,this.x2=(e.x+e.width)/l,this.y2=(e.y+e.height)/u,this.x3=e.x/l,this.y3=(e.y+e.height)/u;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Ji=new ti;function Yr(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}class qt extends Ee{constructor(e,r,o,l,u,d){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new Gn(0,0,1,1)),e instanceof qt&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=l,this.valid=!1,this._uvs=Ji,this.uvMatrix=null,this.orig=o||r,this._rotate=Number(u||0),!0===u)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=d?new Rn(d.x,d.y):new Rn(0,0),this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;r?.url&&Cr[r.url]&&qt.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,qt.removeFromCache(this),this.textureCacheIds=null}clone(){const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),o=new qt(this.baseTexture,!this.noFrame&&e,r,this.trim?.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(o._frame=e),o}updateUvs(){this._uvs===Ji&&(this._uvs=new ti),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},o=ne.STRICT_TEXTURE_CACHE){const l="string"==typeof e;let u=null;l?u=e:e instanceof kt?(e.cacheId||(e.cacheId=`${r?.pixiIdPrefix||"pixiid"}-${Or()}`,kt.addToCache(e,e.cacheId)),u=e.cacheId):(e._pixiId||(e._pixiId=`${r?.pixiIdPrefix||"pixiid"}_${Or()}`),u=e._pixiId);let d=Cr[u];if(l&&o&&!d)throw new Error(`The cacheId "${u}" does not exist in TextureCache.`);return d||e instanceof kt?!d&&e instanceof kt&&(d=new qt(e),qt.addToCache(d,u)):(r.resolution||(r.resolution=_e(e)),d=new qt(new kt(e,r)),d.baseTexture.cacheId=u,kt.addToCache(d.baseTexture,u),qt.addToCache(d,u)),d}static fromURL(e,r){const o=Object.assign({autoLoad:!1},r?.resourceOptions),l=qt.from(e,Object.assign({resourceOptions:o},r),!1),u=l.baseTexture.resource;return l.baseTexture.valid?Promise.resolve(l):u.load().then(()=>Promise.resolve(l))}static fromBuffer(e,r,o,l){return new qt(kt.fromBuffer(e,r,o,l))}static fromLoader(e,r,o,l){const u=new kt(e,Object.assign({scaleMode:kt.defaultOptions.scaleMode,resolution:_e(r)},l)),{resource:d}=u;d instanceof Jt&&(d.url=r);const y=new qt(u);return o||(o=r),kt.addToCache(y.baseTexture,o),qt.addToCache(y,o),o!==r&&(kt.addToCache(y.baseTexture,r),qt.addToCache(y,r)),y.baseTexture.valid?Promise.resolve(y):new Promise(M=>{y.baseTexture.once("loaded",()=>M(y))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Cr[r]&&Cr[r]!==e&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),Cr[r]=e)}static removeFromCache(e){if("string"==typeof e){const r=Cr[e];if(r){const o=r.textureCacheIds.indexOf(e);return o>-1&&r.textureCacheIds.splice(o,1),delete Cr[e],r}}else if(e?.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)Cr[e.textureCacheIds[r]]===e&&delete Cr[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:o,width:l,height:u}=e,d=r+l>this.baseTexture.width,y=o+u>this.baseTexture.height;if(d||y)throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: X: ${r} + ${l} = ${r+l} > ${this.baseTexture.width} ${d&&y?"and":"or"} Y: ${o} + ${u} = ${o+u} > ${this.baseTexture.height}`);this.valid=l&&u&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return qt._EMPTY||(qt._EMPTY=new qt(new kt),Yr(qt._EMPTY),Yr(qt._EMPTY.baseTexture)),qt._EMPTY}static get WHITE(){if(!qt._WHITE){const e=ne.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),qt._WHITE=new qt(kt.from(e)),Yr(qt._WHITE),Yr(qt._WHITE.baseTexture)}return qt._WHITE}}class yr extends qt{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,o=!0){const l=this.baseTexture.resolution,u=Math.round(e*l)/l,d=Math.round(r*l)/l;this.valid=u>0&&d>0,this._frame.width=this.orig.width=u,this._frame.height=this.orig.height=d,o&&this.baseTexture.resize(u,d),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new yr(new yt(e))}}let fs=(()=>{class n{constructor(r){this.texturePool={},this.textureOptions=r||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(r,o,l=st.NONE){const u=new yt(Object.assign({width:r,height:o,resolution:1,multisample:l},this.textureOptions));return new yr(u)}getOptimalTexture(r,o,l=1,u=st.NONE){let d;r=Math.ceil(r*l-1e-6),o=Math.ceil(o*l-1e-6),this.enableFullScreen&&r===this._pixelsWidth&&o===this._pixelsHeight?d=u>1?-u:-1:(d=((65535&(r=Pr(r)))<<16|65535&(o=Pr(o)))>>>0,u>1&&(d+=4294967296*u)),this.texturePool[d]||(this.texturePool[d]=[]);let y=this.texturePool[d].pop();return y||(y=this.createTexture(r,o,u)),y.filterPoolKey=d,y.setResolution(l),y}getFilterTexture(r,o,l){const u=this.getOptimalTexture(r.width,r.height,o||r.resolution,l||st.NONE);return u.filterFrame=r.filterFrame,u}returnTexture(r){const o=r.filterPoolKey;r.filterFrame=null,this.texturePool[o].push(r)}returnFilterTexture(r){this.returnTexture(r)}clear(r){if(r=!1!==r)for(const o in this.texturePool){const l=this.texturePool[o];if(l)for(let u=0;u<l.length;u++)l[u].destroy(!0)}this.texturePool={}}setScreenSize(r){if(r.width!==this._pixelsWidth||r.height!==this._pixelsHeight){this.enableFullScreen=r.width>0&&r.height>0;for(const o in this.texturePool){if(!(Number(o)<0))continue;const l=this.texturePool[o];if(l)for(let u=0;u<l.length;u++)l[u].destroy(!0);this.texturePool[o]=[]}this._pixelsWidth=r.width,this._pixelsHeight=r.height}}}return n.SCREEN_KEY=-1,n})();class ka extends Ui{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Ba extends Ui{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new At(this.vertices),this.uvBuffer=new At(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let o=0,l=0;return this.uvs[0]=o,this.uvs[1]=l,this.uvs[2]=o+r.width/e.width,this.uvs[3]=l,this.uvs[4]=o+r.width/e.width,this.uvs[5]=l+r.height/e.height,this.uvs[6]=o,this.uvs[7]=l+r.height/e.height,o=r.x,l=r.y,this.vertices[0]=o,this.vertices[1]=l,this.vertices[2]=o+r.width,this.vertices[3]=l,this.vertices[4]=o+r.width,this.vertices[5]=l+r.height,this.vertices[6]=o,this.vertices[7]=l+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class Jl{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=st.NONE,this.sourceFrame=new Gn,this.destinationFrame=new Gn,this.bindingSourceFrame=new Gn,this.bindingDestinationFrame=new Gn,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Zo=[new Rn,new Rn,new Rn,new Rn],Ua=new Oi;class lu{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new fs,this.statePool=[],this.quad=new ka,this.quadUv=new Ba,this.tempRect=new Gn,this.activeState={},this.globalUniforms=new Qs({outputFrame:new Gn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){const o=this.renderer,l=this.defaultFilterStack,u=this.statePool.pop()||new Jl,d=this.renderer.renderTexture;let y=r[0].resolution,M=r[0].multisample,O=r[0].padding,B=r[0].autoFit,G=r[0].legacy??!0;for(let pe=1;pe<r.length;pe++){const ze=r[pe];y=Math.min(y,ze.resolution),M=Math.min(M,ze.multisample),O=this.useMaxPadding?Math.max(O,ze.padding):O+ze.padding,B=B&&ze.autoFit,G=G||(ze.legacy??!0)}1===l.length&&(this.defaultFilterStack[0].renderTexture=d.current),l.push(u),u.resolution=y,u.multisample=M,u.legacy=G,u.target=e,u.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),u.sourceFrame.pad(O);const $=this.tempRect.copyFrom(d.sourceFrame);o.projection.transform&&this.transformAABB(Ua.copyFrom(o.projection.transform).invert(),$),B?(u.sourceFrame.fit($),(u.sourceFrame.width<=0||u.sourceFrame.height<=0)&&(u.sourceFrame.width=0,u.sourceFrame.height=0)):u.sourceFrame.intersects($)||(u.sourceFrame.width=0,u.sourceFrame.height=0),this.roundFrame(u.sourceFrame,d.current?d.current.resolution:o.resolution,d.sourceFrame,d.destinationFrame,o.projection.transform),u.renderTexture=this.getOptimalFilterTexture(u.sourceFrame.width,u.sourceFrame.height,y,M),u.filters=r,u.destinationFrame.width=u.renderTexture.width,u.destinationFrame.height=u.renderTexture.height;const le=this.tempRect;le.x=0,le.y=0,le.width=u.sourceFrame.width,le.height=u.sourceFrame.height,u.renderTexture.filterFrame=u.sourceFrame,u.bindingSourceFrame.copyFrom(d.sourceFrame),u.bindingDestinationFrame.copyFrom(d.destinationFrame),u.transform=o.projection.transform,o.projection.transform=null,d.bind(u.renderTexture,u.sourceFrame,le),o.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),o=r.filters;this.activeState=r;const l=this.globalUniforms.uniforms;l.outputFrame=r.sourceFrame,l.resolution=r.resolution;const u=l.inputSize,d=l.inputPixel,y=l.inputClamp;if(u[0]=r.destinationFrame.width,u[1]=r.destinationFrame.height,u[2]=1/u[0],u[3]=1/u[1],d[0]=Math.round(u[0]*r.resolution),d[1]=Math.round(u[1]*r.resolution),d[2]=1/d[0],d[3]=1/d[1],y[0]=.5*d[2],y[1]=.5*d[3],y[2]=r.sourceFrame.width*u[2]-.5*d[2],y[3]=r.sourceFrame.height*u[3]-.5*d[3],r.legacy){const O=l.filterArea;O[0]=r.destinationFrame.width,O[1]=r.destinationFrame.height,O[2]=r.sourceFrame.x,O[3]=r.sourceFrame.y,l.filterClamp=l.inputClamp}this.globalUniforms.update();const M=e[e.length-1];if(this.renderer.framebuffer.blit(),1===o.length)o[0].apply(this,r.renderTexture,M.renderTexture,$e.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let O=r.renderTexture,B=this.getOptimalFilterTexture(O.width,O.height,r.resolution);B.filterFrame=O.filterFrame;let G=0;for(G=0;G<o.length-1;++G){1===G&&r.multisample>1&&(B=this.getOptimalFilterTexture(O.width,O.height,r.resolution),B.filterFrame=O.filterFrame),o[G].apply(this,O,B,$e.CLEAR,r);const $=O;O=B,B=$}o[G].apply(this,O,M.renderTexture,$e.BLEND,r),G>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(O),this.returnFilterTexture(B)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=$e.CLEAR){const{renderTexture:o,state:l}=this.renderer;if(this.renderer.projection.transform=e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.activeState.transform:null,e?.filterFrame){const d=this.tempRect;d.x=0,d.y=0,d.width=e.filterFrame.width,d.height=e.filterFrame.height,o.bind(e,e.filterFrame,d)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?o.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);(r===$e.CLEAR||r===$e.BLIT&&(1&l.stateId||this.forceClear))&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,o,l){const u=this.renderer;u.state.set(e.state),this.bindAndClear(o,l),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,u.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),u.geometry.bind(this.quadUv),u.geometry.draw(ae.TRIANGLES)):(u.geometry.bind(this.quad),u.geometry.draw(ae.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:o,destinationFrame:l}=this.activeState,{orig:u}=r._texture,d=e.set(l.width,0,0,l.height,o.x,o.y),y=r.worldTransform.copyTo(Oi.TEMP_MATRIX);return y.invert(),d.prepend(y),d.scale(1/u.width,1/u.height),d.translate(r.anchor.x,r.anchor.y),d}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,o=1,l=st.NONE){return this.texturePool.getOptimalTexture(e,r,o,l)}getFilterTexture(e,r,o){if("number"==typeof e){const u=e;e=r,r=u}const l=this.texturePool.getOptimalTexture((e=e||this.activeState.renderTexture).width,e.height,r||e.resolution,o||st.NONE);return l.filterFrame=e.filterFrame,l}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const o=Zo[0],l=Zo[1],u=Zo[2],d=Zo[3];o.set(r.left,r.top),l.set(r.left,r.bottom),u.set(r.right,r.top),d.set(r.right,r.bottom),e.apply(o,o),e.apply(l,l),e.apply(u,u),e.apply(d,d);const y=Math.min(o.x,l.x,u.x,d.x),M=Math.min(o.y,l.y,u.y,d.y),O=Math.max(o.x,l.x,u.x,d.x),B=Math.max(o.y,l.y,u.y,d.y);r.x=y,r.y=M,r.width=O-y,r.height=B-M}roundFrame(e,r,o,l,u){if(!(e.width<=0||e.height<=0||o.width<=0||o.height<=0)){if(u){const{a:d,b:y,c:M,d:O}=u;if((Math.abs(y)>1e-4||Math.abs(M)>1e-4)&&(Math.abs(d)>1e-4||Math.abs(O)>1e-4))return}(u=u?Ua.copyFrom(u):Ua.identity()).translate(-o.x,-o.y).scale(l.width/o.width,l.height/o.height).translate(l.x,l.y),this.transformAABB(u,e),e.ceil(r),this.transformAABB(u.invert(),e)}}}lu.extension={type:oe.RendererSystem,name:"filter"},ut.add(lu);class Df{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=st.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const Cf=new Gn;class ua{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new je(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Gn,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let r=this.renderer.context.extensions.drawBuffers,o=this.renderer.context.extensions.depthTexture;ne.PREFER_ENV===w.WEBGL_LEGACY&&(r=null,o=null),r?e.drawBuffers=l=>r.drawBuffersWEBGL(l):(this.hasMRT=!1,e.drawBuffers=()=>{}),o||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,o=0){const{gl:l}=this;if(e){const u=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,l.bindFramebuffer(l.FRAMEBUFFER,u.framebuffer)),u.mipLevel!==o&&(e.dirtyId++,e.dirtyFormat++,u.mipLevel=o),u.dirtyId!==e.dirtyId&&(u.dirtyId=e.dirtyId,u.dirtyFormat!==e.dirtyFormat?(u.dirtyFormat=e.dirtyFormat,u.dirtySize=e.dirtySize,this.updateFramebuffer(e,o)):u.dirtySize!==e.dirtySize&&(u.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let d=0;d<e.colorTextures.length;d++){const y=e.colorTextures[d];this.renderer.texture.unbind(y.parentTextureArray||y)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const d=r.width>>o,M=d/r.width;this.setViewport(r.x*M,r.y*M,d,r.height>>o)}else this.setViewport(0,0,e.width>>o,e.height>>o)}else this.current&&(this.current=null,l.bindFramebuffer(l.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,o,l){const u=this.viewport;e=Math.round(e),r=Math.round(r),o=Math.round(o),l=Math.round(l),(u.width!==o||u.height!==l||u.x!==e||u.y!==r)&&(u.x=e,u.y=r,u.width=o,u.height=l,this.gl.viewport(e,r,o,l))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,o,l,u=ue.COLOR|ue.DEPTH){const{gl:d}=this;d.clearColor(e,r,o,l),d.clear(u)}initFramebuffer(e){const{gl:r}=this,o=new Df(r.createFramebuffer());return o.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=o,this.managedFramebuffers.push(e),e.disposeRunner.add(this),o}resizeFramebuffer(e){const{gl:r}=this,o=e.glFramebuffers[this.CONTEXT_UID];o.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,o.stencil),o.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,o.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));const l=e.colorTextures;let u=l.length;r.drawBuffers||(u=Math.min(u,1));for(let d=0;d<u;d++){const y=l[d],M=y.parentTextureArray||y;this.renderer.texture.bind(M,0),0===d&&o.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,o.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,o.multisample,M._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:o}=this,l=e.glFramebuffers[this.CONTEXT_UID],u=e.colorTextures;let d=u.length;o.drawBuffers||(d=Math.min(d,1)),l.multisample>1&&this.canMultisampleFramebuffer(e)?l.msaaBuffer=l.msaaBuffer||o.createRenderbuffer():l.msaaBuffer&&(o.deleteRenderbuffer(l.msaaBuffer),l.msaaBuffer=null,l.blitFramebuffer&&(l.blitFramebuffer.dispose(),l.blitFramebuffer=null));const y=[];for(let M=0;M<d;M++){const O=u[M],B=O.parentTextureArray||O;this.renderer.texture.bind(B,0),0===M&&l.msaaBuffer?(o.bindRenderbuffer(o.RENDERBUFFER,l.msaaBuffer),o.renderbufferStorageMultisample(o.RENDERBUFFER,l.multisample,B._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.RENDERBUFFER,l.msaaBuffer)):(o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+M,O.target,B._glTextures[this.CONTEXT_UID].texture,r),y.push(o.COLOR_ATTACHMENT0+M))}if(y.length>1&&o.drawBuffers(y),e.depthTexture&&this.writeDepthTexture){const O=e.depthTexture;this.renderer.texture.bind(O,0),o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,O._glTextures[this.CONTEXT_UID].texture,r)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?l.stencil&&(o.deleteRenderbuffer(l.stencil),l.stencil=null):(l.stencil=l.stencil||o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,l.stencil),l.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,l.multisample,o.DEPTH24_STENCIL8,e.width,e.height):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,e.width,e.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,l.stencil))}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let o=st.NONE;if(e<=1||null===r)return o;for(let l=0;l<r.length;l++)if(r[l]<=e){o=r[l];break}return 1===o&&(o=st.NONE),o}blit(e,r,o){const{current:l,renderer:u,gl:d,CONTEXT_UID:y}=this;if(2!==u.context.webGLVersion||!l)return;const M=l.glFramebuffers[y];if(!M)return;if(!e){if(!M.msaaBuffer)return;const B=l.colorTextures[0];if(!B)return;M.blitFramebuffer||(M.blitFramebuffer=new je(l.width,l.height),M.blitFramebuffer.addColorTexture(0,B)),(e=M.blitFramebuffer).colorTextures[0]!==B&&(e.colorTextures[0]=B,e.dirtyId++,e.dirtyFormat++),(e.width!==l.width||e.height!==l.height)&&(e.width=l.width,e.height=l.height,e.dirtyId++,e.dirtySize++)}r||((r=Cf).width=l.width,r.height=l.height),o||(o=r);const O=r.width===o.width&&r.height===o.height;this.bind(e),d.bindFramebuffer(d.READ_FRAMEBUFFER,M.framebuffer),d.blitFramebuffer(r.left,r.top,r.right,r.bottom,o.left,o.top,o.right,o.bottom,d.COLOR_BUFFER_BIT,O?d.NEAREST:d.LINEAR)}disposeFramebuffer(e,r){const o=e.glFramebuffers[this.CONTEXT_UID],l=this.gl;if(!o)return;delete e.glFramebuffers[this.CONTEXT_UID];const u=this.managedFramebuffers.indexOf(e);u>=0&&this.managedFramebuffers.splice(u,1),e.disposeRunner.remove(this),r||(l.deleteFramebuffer(o.framebuffer),o.msaaBuffer&&l.deleteRenderbuffer(o.msaaBuffer),o.stencil&&l.deleteRenderbuffer(o.stencil)),o.blitFramebuffer&&o.blitFramebuffer.dispose()}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let o=0;o<r.length;o++)this.disposeFramebuffer(r[o],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil)return;e.stencil=!0;const o=e.width,l=e.height,u=this.gl,d=u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,d),r.msaaBuffer?u.renderbufferStorageMultisample(u.RENDERBUFFER,r.multisample,u.DEPTH24_STENCIL8,o,l):u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_STENCIL,o,l),r.stencil=d,u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,d)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Gn}destroy(){this.renderer=null}}ua.extension={type:oe.RendererSystem,name:"framebuffer"},ut.add(ua);const ha={5126:4,5123:2,5121:1};class Sh{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion){let o=this.renderer.context.extensions.vertexArrayObject;ne.PREFER_ENV===w.WEBGL_LEGACY&&(o=null),o?(e.createVertexArray=()=>o.createVertexArrayOES(),e.bindVertexArray=l=>o.bindVertexArrayOES(l),e.deleteVertexArray=l=>o.deleteVertexArrayOES(l)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==r.webGLVersion){const o=e.getExtension("ANGLE_instanced_arrays");o?(e.vertexAttribDivisor=(l,u)=>o.vertexAttribDivisorANGLE(l,u),e.drawElementsInstanced=(l,u,d,y,M)=>o.drawElementsInstancedANGLE(l,u,d,y,M),e.drawArraysInstanced=(l,u,d,y)=>o.drawArraysInstancedANGLE(l,u,d,y)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:o}=this;let l=e.glVertexArrayObjects[this.CONTEXT_UID],u=!1;l||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=l={},u=!0);const d=l[r.program.id]||this.initGeometryVao(e,r,u);this._activeGeometry=e,this._activeVao!==d&&(this._activeVao=d,this.hasVao?o.bindVertexArray(d):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let o=0;o<e.buffers.length;o++)r.update(e.buffers[o])}checkCompatibility(e,r){const o=e.attributes,l=r.attributeData;for(const u in l)if(!o[u])throw new Error(`shader and geometry incompatible, geometry missing the "${u}" attribute`)}getSignature(e,r){const o=e.attributes,l=r.attributeData,u=["g",e.id];for(const d in o)l[d]&&u.push(d,l[d].location);return u.join("-")}initGeometryVao(e,r,o=!0){const l=this.gl,u=this.CONTEXT_UID,d=this.renderer.buffer,y=r.program;y.glPrograms[u]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,y);const M=this.getSignature(e,y),O=e.glVertexArrayObjects[this.CONTEXT_UID];let B=O[M];if(B)return O[y.id]=B,B;const G=e.buffers,$=e.attributes,le={},pe={};for(const ze in G)le[ze]=0,pe[ze]=0;for(const ze in $)!$[ze].size&&y.attributeData[ze]?$[ze].size=y.attributeData[ze].size:$[ze].size||console.warn(`PIXI Geometry attribute '${ze}' size cannot be determined (likely the bound shader does not have the attribute)`),le[$[ze].buffer]+=$[ze].size*ha[$[ze].type];for(const ze in $){const qe=$[ze],ot=qe.size;void 0===qe.stride&&(qe.stride=le[qe.buffer]===ot*ha[qe.type]?0:le[qe.buffer]),void 0===qe.start&&(qe.start=pe[qe.buffer],pe[qe.buffer]+=ot*ha[qe.type])}B=l.createVertexArray(),l.bindVertexArray(B);for(let ze=0;ze<G.length;ze++){const qe=G[ze];d.bind(qe),o&&qe._glBuffers[u].refCount++}return this.activateVao(e,y),O[y.id]=B,O[M]=B,l.bindVertexArray(null),d.unbind(Ct.ARRAY_BUFFER),B}disposeGeometry(e,r){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const o=e.glVertexArrayObjects[this.CONTEXT_UID],l=this.gl,u=e.buffers,d=this.renderer?.buffer;if(e.disposeRunner.remove(this),o){if(d)for(let y=0;y<u.length;y++){const M=u[y]._glBuffers[this.CONTEXT_UID];M&&(M.refCount--,0===M.refCount&&!r&&d.dispose(u[y],r))}if(!r)for(const y in o)if("g"===y[0]){const M=o[y];this._activeVao===M&&this.unbind(),l.deleteVertexArray(M)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let o=0;o<r.length;o++)this.disposeGeometry(this.managedGeometries[r[o]],e)}activateVao(e,r){const o=this.gl,l=this.CONTEXT_UID,u=this.renderer.buffer,d=e.buffers,y=e.attributes;e.indexBuffer&&u.bind(e.indexBuffer);let M=null;for(const O in y){const B=y[O],G=d[B.buffer],$=G._glBuffers[l];if(r.attributeData[O]){M!==$&&(u.bind(G),M=$);const le=r.attributeData[O].location;if(o.enableVertexAttribArray(le),o.vertexAttribPointer(le,B.size,B.type||o.FLOAT,B.normalized,B.stride,B.start),B.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");o.vertexAttribDivisor(le,B.divisor)}}}}draw(e,r,o,l){const{gl:u}=this,d=this._activeGeometry;if(d.indexBuffer){const y=d.indexBuffer.data.BYTES_PER_ELEMENT,M=2===y?u.UNSIGNED_SHORT:u.UNSIGNED_INT;2===y||4===y&&this.canUseUInt32ElementIndex?d.instanced?u.drawElementsInstanced(e,r||d.indexBuffer.data.length,M,(o||0)*y,l||1):u.drawElements(e,r||d.indexBuffer.data.length,M,(o||0)*y):console.warn("unsupported index buffer type: uint32")}else d.instanced?u.drawArraysInstanced(e,o,r||d.getSize(),l||1):u.drawArrays(e,o,r||d.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Sh.extension={type:oe.RendererSystem,name:"geometry"},ut.add(Sh);const xf=new Oi;class ec{constructor(e,r){this._texture=e,this.mapCoord=new Oi,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){void 0===r&&(r=e);const o=this.mapCoord;for(let l=0;l<e.length;l+=2){const u=e[l],d=e[l+1];r[l]=u*o.a+d*o.c+o.tx,r[l+1]=u*o.b+d*o.d+o.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const o=r._uvs;this.mapCoord.set(o.x1-o.x0,o.y1-o.y0,o.x3-o.x0,o.y3-o.y0,o.x0,o.y0);const l=r.orig,u=r.trim;u&&(xf.set(l.width/u.width,0,0,l.height/u.height,-u.x/u.width,-u.y/u.height),this.mapCoord.append(xf));const d=r.baseTexture,y=this.uClampFrame,M=this.clampMargin/d.resolution,O=this.clampOffset;return y[0]=(r._frame.x+M+O)/d.width,y[1]=(r._frame.y+M+O)/d.height,y[2]=(r._frame.x+r._frame.width-M+O)/d.width,y[3]=(r._frame.y+r._frame.height-M+O)/d.height,this.uClampOffset[0]=O/d.realWidth,this.uClampOffset[1]=O/d.realHeight,this.isSimple=r._frame.width===d.width&&r._frame.height===d.height&&0===r.rotate,!0}}class Sf extends _{constructor(e,r,o){let l=null;"string"!=typeof e&&void 0===r&&void 0===o&&(l=e,e=void 0,r=void 0,o=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",r||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",o),this.maskSprite=l,this.maskMatrix=new Oi}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,o,l){const u=this._maskSprite,d=u._texture;d.valid&&(d.uvMatrix||(d.uvMatrix=new ec(d,0)),d.uvMatrix.update(),this.uniforms.npmAlpha=d.baseTexture.alphaMode?0:1,this.uniforms.mask=d,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,u).prepend(d.uvMatrix.mapCoord),this.uniforms.alpha=u.worldAlpha,this.uniforms.maskClamp=d.uvMatrix.uClampFrame,e.applyFilter(this,r,o,l))}}class Af{constructor(e=null){this.type=Ke.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=_.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Ke.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Ah{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let o=r;if(!o.isMaskData){const u=this.maskDataPool.pop()||new Af;u.pooled=!0,u.maskObject=r,o=u}const l=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(o.copyCountersOrReset(l),o._colorMask=l?l._colorMask:15,o.autoDetect&&this.detect(o),o._target=e,o.type!==Ke.SPRITE&&this.maskStack.push(o),o.enabled)switch(o.type){case Ke.SCISSOR:this.renderer.scissor.push(o);break;case Ke.STENCIL:this.renderer.stencil.push(o);break;case Ke.SPRITE:o.copyCountersOrReset(null),this.pushSpriteMask(o);break;case Ke.COLOR:this.pushColorMask(o)}o.type===Ke.SPRITE&&this.maskStack.push(o)}pop(e){const r=this.maskStack.pop();if(r&&r._target===e){if(r.enabled)switch(r.type){case Ke.SCISSOR:this.renderer.scissor.pop(r);break;case Ke.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Ke.SPRITE:this.popSpriteMask(r);break;case Ke.COLOR:this.popColorMask(r)}if(r.reset(),r.pooled&&this.maskDataPool.push(r),0!==this.maskStack.length){const o=this.maskStack[this.maskStack.length-1];o.type===Ke.SPRITE&&o._filters&&(o._filters[0].maskSprite=o.maskObject)}}}detect(e){const r=e.maskObject;e.type=r?r.isSprite?Ke.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?Ke.SCISSOR:Ke.STENCIL:Ke.COLOR}pushSpriteMask(e){const{maskObject:r}=e,o=e._target;let l=e._filters;l||(l=this.alphaMaskPool[this.alphaMaskIndex],l||(l=this.alphaMaskPool[this.alphaMaskIndex]=[new Sf]));const u=this.renderer,d=u.renderTexture;let y,M;if(d.current){const B=d.current;y=e.resolution||B.resolution,M=e.multisample??B.multisample}else y=e.resolution||u.resolution,M=e.multisample??u.multisample;l[0].resolution=y,l[0].multisample=M,l[0].maskSprite=r;const O=o.filterArea;o.filterArea=r.getBounds(!0),u.filter.push(o,l),o.filterArea=O,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,o=e._colorMask=r&e.colorMask;o!==r&&this.renderer.gl.colorMask(0!=(1&o),0!=(2&o),0!=(4&o),0!=(8&o))}popColorMask(e){const o=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;o!==e._colorMask&&this.renderer.gl.colorMask(0!=(1&o),0!=(2&o),0!=(4&o),0!=(8&o))}destroy(){this.renderer=null}}Ah.extension={type:oe.RendererSystem,name:"mask"},ut.add(Ah);class cl{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,o=this.getStackLength();this.maskStack=e;const l=this.getStackLength();l!==o&&(0===l?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const cu=new Oi,Mh=[],ul=class extends cl{constructor(n){super(n),this.glConst=ne.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const n=this.maskStack[this.maskStack.length-1];return n?n._scissorCounter:0}calcScissorRect(n){if(n._scissorRectLocal)return;const e=n._scissorRect,{maskObject:r}=n,{renderer:o}=this,l=o.renderTexture,u=r.getBounds(!0,Mh.pop()??new Gn);this.roundFrameToPixels(u,l.current?l.current.resolution:o.resolution,l.sourceFrame,l.destinationFrame,o.projection.transform),e&&u.fit(e),n._scissorRectLocal=u}static isMatrixRotated(n){if(!n)return!1;const{a:e,b:r,c:o,d:l}=n;return(Math.abs(r)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(l)>1e-4)}testScissor(n){const{maskObject:e}=n;if(!e.isFastRect||!e.isFastRect()||ul.isMatrixRotated(e.worldTransform)||ul.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(n);const r=n._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(n,e,r,o,l){ul.isMatrixRotated(l)||((l=l?cu.copyFrom(l):cu.identity()).translate(-r.x,-r.y).scale(o.width/r.width,o.height/r.height).translate(o.x,o.y),this.renderer.filter.transformAABB(l,n),n.fit(o),n.x=Math.round(n.x*e),n.y=Math.round(n.y*e),n.width=Math.round(n.width*e),n.height=Math.round(n.height*e))}push(n){n._scissorRectLocal||this.calcScissorRect(n);const{gl:e}=this.renderer;n._scissorRect||e.enable(e.SCISSOR_TEST),n._scissorCounter++,n._scissorRect=n._scissorRectLocal,this._useCurrent()}pop(n){const{gl:e}=this.renderer;n&&Mh.push(n._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const n=this.maskStack[this.maskStack.length-1]._scissorRect;let e;e=this.renderer.renderTexture.current?n.y:this.renderer.height-n.height-n.y,this.renderer.gl.scissor(n.x,e,n.width,n.height)}};let Mf=ul;Mf.extension={type:oe.RendererSystem,name:"scissor"},ut.add(Mf);class uu extends cl{constructor(e){super(e),this.glConst=ne.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:o}=this.renderer,l=e._stencilCounter;0===l&&(this.renderer.framebuffer.forceStencil(),o.clearStencil(0),o.clear(o.STENCIL_BUFFER_BIT),o.enable(o.STENCIL_TEST)),e._stencilCounter++;const u=e._colorMask;0!==u&&(e._colorMask=0,o.colorMask(!1,!1,!1,!1)),o.stencilFunc(o.EQUAL,l,4294967295),o.stencilOp(o.KEEP,o.KEEP,o.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,0!==u&&(e._colorMask=u,o.colorMask(0!=(1&u),0!=(2&u),0!=(4&u),0!=(8&u))),this._useCurrent()}pop(e){const r=this.renderer.gl;if(0===this.getStackLength())r.disable(r.STENCIL_TEST);else{const o=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,l=o?o._colorMask:15;0!==l&&(o._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==l&&(o._colorMask=l,r.colorMask(0!=(1&l),0!=(2&l),0!=(4&l),0!=(8&l))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}uu.extension={type:oe.RendererSystem,name:"stencil"},ut.add(uu);class If{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(ln("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(ln("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(ln("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(e){for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}If.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"_plugin"},ut.add(If);class Ih{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Oi,this.transform=null}update(e,r,o,l){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,o,l),this.transform&&this.projectionMatrix.append(this.transform);const u=this.renderer;u.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,u.globalUniforms.update(),u.shader.shader&&u.shader.syncUniformGroup(u.shader.shader.uniforms.globals)}calculateProjection(e,r,o,l){const u=this.projectionMatrix,d=l?-1:1;u.identity(),u.a=1/r.width*2,u.d=d*(1/r.height*2),u.tx=-1-r.x*u.a,u.ty=-d-r.y*u.d}setTransform(e){}destroy(){this.renderer=null}}Ih.extension={type:oe.RendererSystem,name:"projection"},ut.add(Ih);const Rf=new Ko;class tc{constructor(e){this.renderer=e,this._tempMatrix=new Oi}generateTexture(e,r){const{region:o,...l}=r||{},u=o||e.getLocalBounds(null,!0);0===u.width&&(u.width=1),0===u.height&&(u.height=1);const d=yr.create({width:u.width,height:u.height,...l});this._tempMatrix.tx=-u.x,this._tempMatrix.ty=-u.y;const y=e.transform;return e.transform=Rf,this.renderer.render(e,{renderTexture:d,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=y,d}destroy(){}}tc.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"textureGenerator"},ut.add(tc);const Ha=new Gn,nc=new Gn;class ic{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Gn,this.destinationFrame=new Gn,this.viewportFrame=new Gn}bind(e=null,r,o){const l=this.renderer;let u,d,y;this.current=e,e?(u=e.baseTexture,y=u.resolution,r||(Ha.width=e.frame.width,Ha.height=e.frame.height,r=Ha),o||(nc.x=e.frame.x,nc.y=e.frame.y,nc.width=r.width,nc.height=r.height,o=nc),d=u.framebuffer):(y=l.resolution,r||(Ha.width=l._view.screen.width,Ha.height=l._view.screen.height,r=Ha),o||((o=Ha).width=r.width,o.height=r.height));const M=this.viewportFrame;M.x=o.x*y,M.y=o.y*y,M.width=o.width*y,M.height=o.height*y,e||(M.y=l.view.height-(M.y+M.height)),M.ceil(),this.renderer.framebuffer.bind(d,M),this.renderer.projection.update(o,r,y,!d),this.renderer.mask.setMaskStack(e?u.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(o)}clear(e,r){e=this.current?e||this.current.baseTexture.clearColor:e||this.renderer.background.colorRgba;const o=this.destinationFrame,l=this.current?this.current.baseTexture:this.renderer._view.screen,u=o.width!==l.width||o.height!==l.height;if(u){let{x:d,y,width:M,height:O}=this.viewportFrame;d=Math.round(d),y=Math.round(y),M=Math.round(M),O=Math.round(O),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(d,y,M,O)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],r),u&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}ic.extension={type:oe.RendererSystem,name:"renderTexture"},ut.add(ic);class nm{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function Pf(n,e,r){const o=n.createShader(e);return n.shaderSource(o,r),n.compileShader(o),o}function Rh(n){const e=new Array(n);for(let r=0;r<e.length;r++)e[r]=!1;return e}function Of(n,e){switch(n){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Rh(2*e);case"bvec3":return Rh(3*e);case"bvec4":return Rh(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function rc(n,e){const r=n.getShaderSource(e).split("\n").map((O,B)=>`${B}: ${O}`),o=n.getShaderInfoLog(e),l=o.split("\n"),u={},d=l.map(O=>parseFloat(O.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(O=>!(!O||u[O]||(u[O]=!0,0))),y=[""];d.forEach(O=>{r[O-1]=`%c${r[O-1]}%c`,y.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const M=r.join("\n");y[0]=M,console.error(o),console.groupCollapsed("click to view full shader code"),console.warn(...y),console.groupEnd()}function Lh(n,e,r,o,l){r.buffer.update(l)}const vo={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Nh={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};let da,Bf=0;const sc={textureCount:0,uboCount:0};class hu{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Bf++}systemCheck(){if(!function kf(){if("boolean"==typeof da)return da;try{da=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch{da=!1}return da}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const o=e.program,l=o.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==o&&(this.program=o,this.gl.useProgram(l.program)),r||(sc.textureCount=0,sc.uboCount=0,this.syncUniformGroup(e.uniformGroup,sc)),l}setUniforms(e){const r=this.shader.program;r.syncUniforms(r.glPrograms[this.renderer.CONTEXT_UID].uniformData,e,this.renderer)}syncUniformGroup(e,r){const o=this.getGlProgram();(!e.static||e.dirtyId!==o.uniformDirtyGroups[e.id])&&(o.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,o,r))}syncUniforms(e,r,o){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,o)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=function es(n,e){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const o in n.uniforms){const l=e[o];if(!l){n.uniforms[o]?.group&&r.push(n.uniforms[o].ubo?`\n                        renderer.shader.syncUniformBufferGroup(uv.${o}, '${o}');\n                    `:`\n                        renderer.shader.syncUniformGroup(uv.${o}, syncData);\n                    `);continue}const u=n.uniforms[o];let d=!1;for(let y=0;y<us.length;y++)if(us[y].test(l,u)){r.push(us[y].code(o,u)),d=!0;break}if(!d){const M=(1!==l.size||l.isArray?Po:Yl)[l.type].replace("location",`ud["${o}"].location`);r.push(`\n            cu = ud["${o}"];\n            cv = cu.value;\n            v = uv["${o}"];\n            ${M};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const o=this.getGlProgram();if(!e.static||0!==e.dirtyId||!o.uniformGroups[e.id]){e.dirtyId=0;const l=o.uniformGroups[e.id]||this.createSyncBufferGroup(e,o,r);e.buffer.update(),l(o.uniformData,e.uniforms,this.renderer,sc,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,o.uniformBufferBindings[r])}createSyncBufferGroup(e,r,o){const{gl:l}=this.renderer;this.renderer.buffer.bind(e.buffer);const u=this.gl.getUniformBlockIndex(r.program,o);r.uniformBufferBindings[o]=this.shader.uniformBindCount,l.uniformBlockBinding(r.program,u,this.shader.uniformBindCount),this.shader.uniformBindCount++;const d=this.getSignature(e,this.shader.program.uniformData,"ubo");let y=this._uboCache[d];if(y||(y=this._uboCache[d]=function kh(n,e){if(!n.autoManage)return{size:0,syncFunc:Lh};const r=function Nf(n,e){const r=[];for(const o in n)e[o]&&r.push(e[o]);return r.sort((o,l)=>o.index-l.index),r}(n.uniforms,e),{uboElements:o,size:l}=function Lf(n){const e=n.map(u=>({data:u,offset:0,dataLen:0,dirty:0}));let r=0,o=0,l=0;for(let u=0;u<e.length;u++){const d=e[u];if(r=Nh[d.data.type],d.data.size>1&&(r=Math.max(r,16)*d.data.size),d.dataLen=r,o%r!=0&&o<16){const y=o%r%16;o+=y,l+=y}o+r>16?(l=16*Math.ceil(l/16),d.offset=l,l+=r,o=r):(d.offset=l,o+=r,l+=r)}return l=16*Math.ceil(l/16),{uboElements:e,size:l}}(r),u=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let d=0;d<o.length;d++){const y=o[d],M=n.uniforms[y.data.name],O=y.data.name;let B=!1;for(let G=0;G<us.length;G++){const $=us[G];if($.codeUbo&&$.test(y.data,M)){u.push(`offset = ${y.offset/4};`,us[G].codeUbo(y.data.name,M)),B=!0;break}}if(!B)if(y.data.size>1){const G=vi(y.data.type),$=Math.max(Nh[y.data.type]/16,1),le=G/$;u.push(`\n                cv = ud.${O}.value;\n                v = uv.${O};\n                offset = ${y.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${y.data.size*$}; i++)\n                {\n                    for(var j = 0; j < ${le}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${(4-le%4)%4};\n                }\n\n                `)}else u.push(`\n                cv = ud.${O}.value;\n                v = uv.${O};\n                offset = ${y.offset/4};\n                ${vo[y.data.type]};\n                `)}return u.push("\n       renderer.buffer.update(buffer);\n    "),{size:l,syncFunc:new Function("ud","uv","renderer","syncData","buffer",u.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){const M=new Float32Array(y.size/4);e.buffer.update(M)}return r.uniformGroups[e.id]=y.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,o){const l=e.uniforms,u=[`${o}-`];for(const d in l)u.push(d),r[d]&&u.push(r[d].type);return u.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const o=e.program,l=function Fh(n,e){const r=Pf(n,n.VERTEX_SHADER,e.vertexSrc),o=Pf(n,n.FRAGMENT_SHADER,e.fragmentSrc),l=n.createProgram();n.attachShader(l,r),n.attachShader(l,o);const u=e.extra?.transformFeedbackVaryings;if(u&&("function"!=typeof n.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(l,u.names,"separate"===u.bufferMode?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(l),n.getProgramParameter(l,n.LINK_STATUS)||function Oh(n,e,r,o){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(r,n.COMPILE_STATUS)||rc(n,r),n.getShaderParameter(o,n.COMPILE_STATUS)||rc(n,o),console.error("PixiJS Error: Could not initialize shader."),""!==n.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(e)))}(n,l,r,o),e.attributeData=function Ff(n,e){const r={},o=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES);for(let l=0;l<o;l++){const u=e.getActiveAttrib(n,l);if(u.name.startsWith("gl_"))continue;const d=ou(e,u.type),y={type:d,name:u.name,size:vi(d),location:e.getAttribLocation(n,u.name)};r[u.name]=y}return r}(l,n),e.uniformData=function Ph(n,e){const r={},o=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let l=0;l<o;l++){const u=e.getActiveUniform(n,l),d=u.name.replace(/\[.*?\]$/,""),y=!!u.name.match(/\[.*?\]$/),M=ou(e,u.type);r[d]={name:d,index:l,type:M,size:u.size,isArray:y,value:Of(M,u.size)}}return r}(l,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const M=Object.keys(e.attributeData);M.sort((O,B)=>O>B?1:-1);for(let O=0;O<M.length;O++)e.attributeData[M[O]].location=O,n.bindAttribLocation(l,O,M[O]);n.linkProgram(l)}n.deleteShader(r),n.deleteShader(o);const d={};for(const M in e.uniformData){const O=e.uniformData[M];d[M]={location:n.getUniformLocation(l,M),value:Of(O.type,O.size)}}return new nm(l,d)}(this.gl,o);return o.glPrograms[this.renderer.CONTEXT_UID]=l,l}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}hu.extension={type:oe.RendererSystem,name:"shader"},ut.add(hu);class Bh{constructor(e){this.renderer=e}run(e){const r=this.renderer;r.emitWithCustomOptions(r.runners.init,e),e.hello&&console.log(`PixiJS 7.1.4 - ${r.rendererLogId} - https://pixijs.com`),r.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}Bh.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"startup"},ut.add(Bh);const oc=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=he.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new j,this.defaultState.blend=!0}contextChange(n){this.gl=n,this.blendModes=function Uf(n,e=[]){return e[he.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.ADD]=[n.ONE,n.ONE],e[he.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.NONE]=[0,0],e[he.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e[he.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[he.SRC_IN]=[n.DST_ALPHA,n.ZERO],e[he.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],e[he.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[he.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],e[he.DST_IN]=[n.ZERO,n.SRC_ALPHA],e[he.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],e[he.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],e[he.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[he.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],e}(n),this.set(this.defaultState),this.reset()}set(n){if(this.stateId!==(n=n||this.defaultState).data){let e=this.stateId^n.data,r=0;for(;e;)1&e&&this.map[r].call(this,!!(n.data&1<<r)),e>>=1,r++;this.stateId=n.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,n)}forceState(n){n=n||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(n.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,n);this.stateId=n.data}setBlend(n){this.updateCheck(oc.checkBlendMode,n),this.gl[n?"enable":"disable"](this.gl.BLEND)}setOffset(n){this.updateCheck(oc.checkPolygonOffset,n),this.gl[n?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(n){this.gl[n?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(n){this.gl.depthMask(n)}setCullFace(n){this.gl[n?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(n){this.gl.frontFace(this.gl[n?"CW":"CCW"])}setBlendMode(n){if(n===this.blendMode)return;this.blendMode=n;const e=this.blendModes[n],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(n,e){this.gl.polygonOffset(n,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(n,e){const r=this.checks.indexOf(n);e&&-1===r?this.checks.push(n):!e&&-1!==r&&this.checks.splice(r,1)}static checkBlendMode(n,e){n.setBlendMode(e.blendMode)}static checkPolygonOffset(n,e){n.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let pu=oc;pu.extension={type:oe.RendererSystem,name:"state"},ut.add(pu);class Hf extends Ee{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const r=(e.priority??[]).filter(l=>e.systems[l]),o=[...r,...Object.keys(e.systems).filter(l=>!r.includes(l))];for(const l of o)this.addSystem(e.systems[l],l)}addRunners(...e){e.forEach(r=>{this.runners[r]=new lt(r)})}addSystem(e,r){const o=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=o,this._systemsHash[r]=o;for(const l in this.runners)this.runners[l].add(o);return this}emitWithCustomOptions(e,r){const o=Object.keys(this._systemsHash);e.items.forEach(l=>{const u=o.find(d=>this._systemsHash[d]===l);l[e.name](r[u])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const dl=class{constructor(n){this.renderer=n,this.count=0,this.checkCount=0,this.maxIdle=dl.defaultMaxIdle,this.checkCountMax=dl.defaultCheckCountMax,this.mode=dl.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==gt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const n=this.renderer.texture,e=n.managedTextures;let r=!1;for(let o=0;o<e.length;o++){const l=e[o];!l.framebuffer&&this.count-l.touched>this.maxIdle&&(n.destroyTexture(l,!0),e[o]=null,r=!0)}if(r){let o=0;for(let l=0;l<e.length;l++)null!==e[l]&&(e[o++]=e[l]);e.length=o}}unload(n){const r=n._texture;r&&!r.framebuffer&&this.renderer.texture.destroyTexture(r);for(let o=n.children.length-1;o>=0;o--)this.unload(n.children[o])}destroy(){this.renderer=null}};let Js=dl;Js.defaultMode=gt.AUTO,Js.defaultMaxIdle=3600,Js.defaultCheckCountMax=600,Js.extension={type:oe.RendererSystem,name:"textureGC"},ut.add(Js);class ac{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ce.UNSIGNED_BYTE,this.internalFormat=ee.RGBA,this.samplerType=0}}class gu{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new kt,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function Gf(n){let e;return e="WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?{[ce.UNSIGNED_BYTE]:{[ee.RGBA]:n.RGBA8,[ee.RGB]:n.RGB8,[ee.RG]:n.RG8,[ee.RED]:n.R8,[ee.RGBA_INTEGER]:n.RGBA8UI,[ee.RGB_INTEGER]:n.RGB8UI,[ee.RG_INTEGER]:n.RG8UI,[ee.RED_INTEGER]:n.R8UI,[ee.ALPHA]:n.ALPHA,[ee.LUMINANCE]:n.LUMINANCE,[ee.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[ce.BYTE]:{[ee.RGBA]:n.RGBA8_SNORM,[ee.RGB]:n.RGB8_SNORM,[ee.RG]:n.RG8_SNORM,[ee.RED]:n.R8_SNORM,[ee.RGBA_INTEGER]:n.RGBA8I,[ee.RGB_INTEGER]:n.RGB8I,[ee.RG_INTEGER]:n.RG8I,[ee.RED_INTEGER]:n.R8I},[ce.UNSIGNED_SHORT]:{[ee.RGBA_INTEGER]:n.RGBA16UI,[ee.RGB_INTEGER]:n.RGB16UI,[ee.RG_INTEGER]:n.RG16UI,[ee.RED_INTEGER]:n.R16UI,[ee.DEPTH_COMPONENT]:n.DEPTH_COMPONENT16},[ce.SHORT]:{[ee.RGBA_INTEGER]:n.RGBA16I,[ee.RGB_INTEGER]:n.RGB16I,[ee.RG_INTEGER]:n.RG16I,[ee.RED_INTEGER]:n.R16I},[ce.UNSIGNED_INT]:{[ee.RGBA_INTEGER]:n.RGBA32UI,[ee.RGB_INTEGER]:n.RGB32UI,[ee.RG_INTEGER]:n.RG32UI,[ee.RED_INTEGER]:n.R32UI,[ee.DEPTH_COMPONENT]:n.DEPTH_COMPONENT24},[ce.INT]:{[ee.RGBA_INTEGER]:n.RGBA32I,[ee.RGB_INTEGER]:n.RGB32I,[ee.RG_INTEGER]:n.RG32I,[ee.RED_INTEGER]:n.R32I},[ce.FLOAT]:{[ee.RGBA]:n.RGBA32F,[ee.RGB]:n.RGB32F,[ee.RG]:n.RG32F,[ee.RED]:n.R32F,[ee.DEPTH_COMPONENT]:n.DEPTH_COMPONENT32F},[ce.HALF_FLOAT]:{[ee.RGBA]:n.RGBA16F,[ee.RGB]:n.RGB16F,[ee.RG]:n.RG16F,[ee.RED]:n.R16F},[ce.UNSIGNED_SHORT_5_6_5]:{[ee.RGB]:n.RGB565},[ce.UNSIGNED_SHORT_4_4_4_4]:{[ee.RGBA]:n.RGBA4},[ce.UNSIGNED_SHORT_5_5_5_1]:{[ee.RGBA]:n.RGB5_A1},[ce.UNSIGNED_INT_2_10_10_10_REV]:{[ee.RGBA]:n.RGB10_A2,[ee.RGBA_INTEGER]:n.RGB10_A2UI},[ce.UNSIGNED_INT_10F_11F_11F_REV]:{[ee.RGB]:n.R11F_G11F_B10F},[ce.UNSIGNED_INT_5_9_9_9_REV]:{[ee.RGB]:n.RGB9_E5},[ce.UNSIGNED_INT_24_8]:{[ee.DEPTH_STENCIL]:n.DEPTH24_STENCIL8},[ce.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ee.DEPTH_STENCIL]:n.DEPTH32F_STENCIL8}}:{[ce.UNSIGNED_BYTE]:{[ee.RGBA]:n.RGBA,[ee.RGB]:n.RGB,[ee.ALPHA]:n.ALPHA,[ee.LUMINANCE]:n.LUMINANCE,[ee.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[ce.UNSIGNED_SHORT_5_6_5]:{[ee.RGB]:n.RGB},[ce.UNSIGNED_SHORT_4_4_4_4]:{[ee.RGBA]:n.RGBA},[ce.UNSIGNED_SHORT_5_5_5_1]:{[ee.RGBA]:n.RGBA}},e}(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let l=0;l<r;l++)this.boundTextures[l]=null;this.emptyTextures={};const o=new ac(e.createTexture());e.bindTexture(e.TEXTURE_2D,o.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=o,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new ac(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let l=0;l<6;l++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let l=0;l<this.boundTextures.length;l++)this.bind(null,l)}bind(e,r=0){const{gl:o}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const l=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,o.activeTexture(o.TEXTURE0+r)),o.bindTexture(e.target,l.texture)),l.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,o.activeTexture(o.TEXTURE0+r)),this.updateTexture(e)):l.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,o.activeTexture(o.TEXTURE0+r)),o.bindTexture(o.TEXTURE_2D,this.emptyTextures[o.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:o}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let l=0;l<o.length;l++)o[l]===this.unknownTexture&&this.bind(null,l)}for(let l=0;l<o.length;l++)o[l]===e&&(this.currentLocation!==l&&(r.activeTexture(r.TEXTURE0+l),this.currentLocation=l),r.bindTexture(e.target,this.emptyTextures[e.target].texture),o[l]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:o,CONTEXT_UID:l}=this;if(o)for(let u=e-1;u>=0;--u){const d=r[u];d&&d._glTextures[l].samplerType!==Ce.FLOAT&&this.renderer.texture.unbind(d)}}initTexture(e){const r=new ac(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){r.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,r.type=2===this.webGLVersion&&e.type===ce.HALF_FLOAT?this.gl.HALF_FLOAT:e.type}updateTexture(e){const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const o=this.renderer;if(this.initTextureType(e,r),e.resource?.upload(o,e,r))r.samplerType!==Ce.FLOAT&&(this.hasIntegerTextures=!0);else{const l=e.realWidth,u=e.realHeight,d=o.gl;(r.width!==l||r.height!==u||r.dirtyId<0)&&(r.width=l,r.height=u,d.texImage2D(e.target,0,r.internalFormat,l,u,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:o}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),o.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const l=this.managedTextures.indexOf(e);-1!==l&&Ss(this.managedTextures,l,1)}}updateTextureStyle(e){const r=e._glTextures[this.CONTEXT_UID];r&&(r.mipmap=!!(e.mipmap!==Ae.POW2&&2===this.webGLVersion||e.isPowerOfTwo)&&e.mipmap>=1,r.wrapMode=2===this.webGLVersion||e.isPowerOfTwo?e.wrapMode:Pe.CLAMP,e.resource?.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const o=this.gl;if(r.mipmap&&e.mipmap!==Ae.ON_MANUAL&&o.generateMipmap(e.target),o.texParameteri(e.target,o.TEXTURE_WRAP_S,r.wrapMode),o.texParameteri(e.target,o.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){o.texParameteri(e.target,o.TEXTURE_MIN_FILTER,e.scaleMode===Le.LINEAR?o.LINEAR_MIPMAP_LINEAR:o.NEAREST_MIPMAP_NEAREST);const l=this.renderer.context.extensions.anisotropicFiltering;if(l&&e.anisotropicLevel>0&&e.scaleMode===Le.LINEAR){const u=Math.min(e.anisotropicLevel,o.getParameter(l.MAX_TEXTURE_MAX_ANISOTROPY_EXT));o.texParameterf(e.target,l.TEXTURE_MAX_ANISOTROPY_EXT,u)}}else o.texParameteri(e.target,o.TEXTURE_MIN_FILTER,e.scaleMode===Le.LINEAR?o.LINEAR:o.NEAREST);o.texParameteri(e.target,o.TEXTURE_MAG_FILTER,e.scaleMode===Le.LINEAR?o.LINEAR:o.NEAREST)}destroy(){this.renderer=null}}gu.extension={type:oe.RendererSystem,name:"texture"},ut.add(gu);class Hh{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:o}=this,l=e._glTransformFeedbacks[o]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,l)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:o,renderer:l}=this;r&&l.shader.bind(r),o.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:o,CONTEXT_UID:l}=this,u=r.createTransformFeedback();e._glTransformFeedbacks[l]=u,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,u);for(let d=0;d<e.buffers.length;d++){const y=e.buffers[d];y&&(o.buffer.update(y),y._glBuffers[l].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,d,y._glBuffers[l].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),u}disposeTransformFeedback(e,r){const o=e._glTransformFeedbacks[this.CONTEXT_UID],l=this.gl;e.disposeRunner.remove(this);const u=this.renderer.buffer;if(u)for(let d=0;d<e.buffers.length;d++){const y=e.buffers[d];if(!y)continue;const M=y._glBuffers[this.CONTEXT_UID];M&&(M.refCount--,0===M.refCount&&!r&&u.dispose(y,r))}o&&(r||l.deleteTransformFeedback(o),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Hh.extension={type:oe.RendererSystem,name:"transformFeedback"},ut.add(Hh);class Gh{constructor(e){this.renderer=e}init(e){this.screen=new Gn(0,0,e.width,e.height),this.element=e.view||ne.ADAPTER.createCanvas(),this.resolution=e.resolution||ne.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const o=this.element.width/this.resolution,l=this.element.height/this.resolution;this.screen.width=o,this.screen.height=l,this.autoDensity&&(this.element.style.width=`${o}px`,this.element.style.height=`${l}px`),this.renderer.emit("resize",o,l),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Gh.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"_view"},ut.add(Gh),ne.PREFER_ENV=w.WEBGL2,ne.STRICT_TEXTURE_CACHE=!1,Object.defineProperties(ne,{WRAP_MODE:{get:()=>kt.defaultOptions.wrapMode,set(n){ln("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),kt.defaultOptions.wrapMode=n}},SCALE_MODE:{get:()=>kt.defaultOptions.scaleMode,set(n){ln("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),kt.defaultOptions.scaleMode=n}},MIPMAP_TEXTURES:{get:()=>kt.defaultOptions.mipmap,set(n){ln("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),kt.defaultOptions.mipmap=n}},ANISOTROPIC_LEVEL:{get:()=>kt.defaultOptions.anisotropicLevel,set(n){ln("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),kt.defaultOptions.anisotropicLevel=n}},FILTER_RESOLUTION:{get:()=>(ln("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),_.defaultResolution),set(n){_.defaultResolution=n}},FILTER_MULTISAMPLE:{get:()=>(ln("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),_.defaultMultisample),set(n){_.defaultMultisample=n}},SPRITE_MAX_TEXTURES:{get:()=>ds.defaultMaxTextures,set(n){ln("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ds.defaultMaxTextures=n}},SPRITE_BATCH_SIZE:{get:()=>ds.defaultBatchSize,set(n){ln("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ds.defaultBatchSize=n}},CAN_UPLOAD_SAME_BUFFER:{get:()=>ds.canUploadSameBuffer,set(n){ln("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ds.canUploadSameBuffer=n}},GC_MODE:{get:()=>Js.defaultMode,set(n){ln("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Js.defaultMode=n}},GC_MAX_IDLE:{get:()=>Js.defaultMaxIdle,set(n){ln("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Js.defaultMaxIdle=n}},GC_MAX_CHECK_COUNT:{get:()=>Js.defaultCheckCountMax,set(n){ln("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Js.defaultCheckCountMax=n}},PRECISION_VERTEX:{get:()=>Wr.defaultVertexPrecision,set(n){ln("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Wr.defaultVertexPrecision=n}},PRECISION_FRAGMENT:{get:()=>Wr.defaultFragmentPrecision,set(n){ln("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Wr.defaultFragmentPrecision=n}}});var Fo=(n=>(n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Fo||{});class fl{constructor(e,r=null,o=0,l=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=o,this.once=l}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const As=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new fl(null,null,1/0),this.deltaMS=1/As.targetFPMS,this.elapsedMS=1/As.targetFPMS,this._tick=n=>{this._requestId=null,this.started&&(this.update(n),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(n,e,r=Fo.NORMAL){return this._addListener(new fl(n,e,r))}addOnce(n,e,r=Fo.NORMAL){return this._addListener(new fl(n,e,r,!0))}_addListener(n){let e=this._head.next,r=this._head;if(e){for(;e;){if(n.priority>e.priority){n.connect(r);break}r=e,e=e.next}n.previous||n.connect(r)}else n.connect(r);return this._startIfPossible(),this}remove(n,e){let r=this._head.next;for(;r;)r=r.match(n,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let n=0,e=this._head;for(;e=e.next;)n++;return n}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let n=this._head.next;for(;n;)n=n.destroy(!0);this._head.destroy(),this._head=null}}update(n=performance.now()){let e;if(n>this.lastTime){if(e=this.elapsedMS=n-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const l=n-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=n-l%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*As.targetFPMS;const r=this._head;let o=r.next;for(;o;)o=o.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=n}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(n){const e=Math.min(this.maxFPS,n),r=Math.min(Math.max(0,e)/1e3,As.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(n){if(0===n)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,n);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!As._shared){const n=As._shared=new As;n.autoStart=!0,n._protected=!0}return As._shared}static get system(){if(!As._system){const n=As._system=new As;n.autoStart=!0,n._protected=!0}return As._system}};let er=As;er.targetFPMS=.06,Object.defineProperties(ne,{TARGET_FPMS:{get:()=>er.targetFPMS,set(n){ln("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),er.targetFPMS=n}}});class Vh{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Fo.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?er.shared:new er,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Vh.extension=oe.Application,ut.add(Vh);const jh=[];ut.handleByList(oe.Renderer,jh);const lc="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";class yu{constructor(e){this.renderer=e}contextChange(e){let r;if(1===this.renderer.context.webGLVersion){const o=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,o)}else{const o=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,o)}this.multisample=r>=st.HIGH?st.HIGH:r>=st.MEDIUM?st.MEDIUM:r>=st.LOW?st.LOW:st.NONE}destroy(){}}yu.extension={type:oe.RendererSystem,name:"_multisample"},ut.add(yu);class Vf{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class cc{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:o}=this,l=e._glBuffers[o]||this.createGLBuffer(e);r.bindBuffer(e.type,l.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:o,CONTEXT_UID:l}=this;if(this.boundBufferBases[r]!==e){const u=e._glBuffers[l]||this.createGLBuffer(e);this.boundBufferBases[r]=e,o.bindBufferBase(o.UNIFORM_BUFFER,r,u.buffer)}}bindBufferRange(e,r,o){const{gl:l,CONTEXT_UID:u}=this;o=o||0;const d=e._glBuffers[u]||this.createGLBuffer(e);l.bindBufferRange(l.UNIFORM_BUFFER,r||0,d.buffer,256*o,256)}update(e){const{gl:r,CONTEXT_UID:o}=this,l=e._glBuffers[o]||this.createGLBuffer(e);if(e._updateID!==l.updateID)if(l.updateID=e._updateID,r.bindBuffer(e.type,l.buffer),l.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const u=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;l.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,u)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const o=e._glBuffers[this.CONTEXT_UID],l=this.gl;e.disposeRunner.remove(this),o&&(r||l.deleteBuffer(o.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let o=0;o<r.length;o++)this.dispose(this.managedBuffers[r[o]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:o}=this;return e._glBuffers[r]=new Vf(o.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}cc.extension={type:oe.RendererSystem,name:"buffer"},ut.add(cc);class $h{constructor(e){this.renderer=e}render(e,r){const o=this.renderer;let l,u,d,y;if(r&&(l=r.renderTexture,u=r.clear,d=r.transform,y=r.skipUpdateTransform),this.renderingToScreen=!l,o.runners.prerender.emit(),o.emit("prerender"),o.projection.transform=d,!o.context.isLost){if(l||(this.lastObjectRendered=e),!y){const M=e.enableTempParent();e.updateTransform(),e.disableTempParent(M)}o.renderTexture.bind(l),o.batch.currentRenderer.start(),(u??o.background.clearBeforeRender)&&o.renderTexture.clear(),e.render(o),o.batch.currentRenderer.flush(),l&&(r.blit&&o.framebuffer.blit(),l.baseTexture.update()),o.runners.postrender.emit(),o.projection.transform=null,o.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}$h.extension={type:oe.RendererSystem,name:"objectRenderer"},ut.add($h);const vu=class extends Hf{constructor(n){super(),this.type=D.WEBGL,n=Object.assign({},ne.RENDER_OPTIONS,n),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Qs({projectionMatrix:new Oi},!0),this.setup({runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:vu.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]}),"useContextAlpha"in n&&(ln("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),n.premultipliedAlpha=n.useContextAlpha&&"notMultiplied"!==n.useContextAlpha,n.backgroundAlpha=!1===n.useContextAlpha?1:n.backgroundAlpha);const r={hello:n.hello,_plugin:vu.__plugins,background:{alpha:n.backgroundAlpha,color:n.background??n.backgroundColor,clearBeforeRender:n.clearBeforeRender},_view:{height:n.height,width:n.width,autoDensity:n.autoDensity,resolution:n.resolution,view:n.view},context:{antialias:n.antialias,context:n.context,powerPreference:n.powerPreference,premultipliedAlpha:n.premultipliedAlpha,preserveDrawingBuffer:n.preserveDrawingBuffer}};this.options=n,this.startup.run(r)}static test(n){return!n?.forceCanvas&&function Xi(){return typeof Wt>"u"&&(Wt=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:ne.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ne.ADAPTER.getWebGLRenderingContext())return!1;const r=ne.ADAPTER.createCanvas();let o=r.getContext("webgl",e)||r.getContext("experimental-webgl",e);const l=!!o?.getContextAttributes()?.stencil;if(o){const u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,l}catch{return!1}}()),Wt}()}render(n,e){this.objectRenderer.render(n,e)}resize(n,e){this._view.resizeView(n,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(n=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:n}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(n){this._view.resolution=n,this.runners.resolutionChange.emit(n)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return ln("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return ln("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return ln("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return ln("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(n){ln("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=n}get backgroundAlpha(){return ln("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(n){ln("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=n}get powerPreference(){return ln("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(n,e){return this.textureGenerator.generateTexture(n,e)}};let Va=vu;Va.extension={type:oe.Renderer,priority:1},Va.__plugins={},Va.__systems={},ut.handleByMap(oe.RendererPlugin,Va.__plugins),ut.handleByMap(oe.RendererSystem,Va.__systems),ut.add(Va);class Wh extends Yt{constructor(e,r){const{width:o,height:l}=r||{};super(o,l),this.items=[],this.itemDirtyIds=[];for(let u=0;u<e;u++){const d=new kt;this.items.push(d),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let o=0;o<this.length;o++)e[o]&&(e[o].castToBaseTexture?this.addBaseTextureAt(e[o].castToBaseTexture(),o):this.addResourceAt(e[o]instanceof Yt?e[o]:Je(e[o],r),o))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const r=this.items.map(o=>o.resource).filter(o=>o).map(o=>o.load());return this._load=Promise.all(r).then(()=>{const{realWidth:o,realHeight:l}=this.items[0];return this.resize(o,l),Promise.resolve(this)}),this._load}}const ja=class extends Wh{constructor(n,e){const{width:r,height:o,autoLoad:l,linkBaseTexture:u}=e||{};if(n&&n.length!==ja.SIDES)throw new Error(`Invalid length. Got ${n.length}, expected 6`);super(6,{width:r,height:o});for(let d=0;d<ja.SIDES;d++)this.items[d].target=ve.TEXTURE_CUBE_MAP_POSITIVE_X+d;this.linkBaseTexture=!1!==u,n&&this.initFromArray(n,e),!1!==l&&this.load()}bind(n){super.bind(n),n.target=ve.TEXTURE_CUBE_MAP}addBaseTextureAt(n,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||n.parentTextureArray||Object.keys(n._glTextures).length>0){if(!n.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(n.resource,e)}else n.target=ve.TEXTURE_CUBE_MAP_POSITIVE_X+e,n.parentTextureArray=this.baseTexture,this.items[e]=n;return n.valid&&!this.valid&&this.resize(n.realWidth,n.realHeight),this.items[e]=n,this}upload(n,e,r){const o=this.itemDirtyIds;for(let l=0;l<ja.SIDES;l++){const u=this.items[l];(o[l]<u.dirtyId||r.dirtyId<e.dirtyId)&&(u.valid&&u.resource?(u.resource.upload(n,u,r),o[l]=u.dirtyId):o[l]<-1&&(n.gl.texImage2D(u.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),o[l]=-1))}return!0}static test(n){return Array.isArray(n)&&n.length===ja.SIDES}};let uc=ja;uc.SIDES=6;var Nn=F(5861);class qo extends Vt{constructor(e,r){let o,l;r=r||{},"string"==typeof e?(o=qo.EMPTY,l=e):(o=e,l=null),super(o),this.url=l,this.crossOrigin=r.crossOrigin??!0,this.alphaMode="number"==typeof r.alphaMode?r.alphaMode:null,this._load=null,!1!==r.autoLoad&&this.load()}load(){var e=this;return this._load||(this._load=new Promise(function(){var r=(0,Nn.Z)(function*(o,l){if(null!==e.url)try{const u=yield ne.ADAPTER.fetch(e.url,{mode:e.crossOrigin?"cors":"no-cors"});if(e.destroyed)return;const d=yield u.blob();if(e.destroyed)return;const y=yield createImageBitmap(d,{premultiplyAlpha:null===e.alphaMode||e.alphaMode===it.UNPACK?"premultiply":"none"});if(e.destroyed)return;e.source=y,e.update(),o(e)}catch(u){if(e.destroyed)return;l(u),e.onError.emit(u)}else o(e)});return function(o,l){return r.apply(this,arguments)}}())),this._load}upload(e,r,o){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(r.alphaMode=this.alphaMode),super.upload(e,r,o)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){return qo._EMPTY=qo._EMPTY??ne.ADAPTER.createCanvas(0,0),qo._EMPTY}}const hc=class extends Vt{constructor(n,e){e=e||{},super(ne.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=n,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(n=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),n(this)},hc.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){const n=new Image;Vt.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=e=>{this._resolve&&(n.onerror=null,this.onError.emit(e))},n.onload=()=>{if(!this._resolve)return;const e=n.width,r=n.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let o=e*this.scale,l=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(o=this._overrideWidth||this._overrideHeight/r*e,l=this._overrideHeight||this._overrideWidth/e*r),o=Math.round(o),l=Math.round(l);const u=this.source;u.width=o,u.height=l,u._pixiId=`canvas_${Or()}`,u.getContext("2d").drawImage(n,0,0,e,r,0,0,o,l),this._resolve(),this._resolve=null}}static getSize(n){const e=hc.SVG_SIZE.exec(n),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(n,e){return"svg"===e||"string"==typeof n&&n.startsWith("data:image/svg+xml")||"string"==typeof n&&hc.SVG_XML.test(n)}};let pl=hc;pl.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,pl.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const dc=class extends Vt{constructor(n,e){if(e=e||{},!(n instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]),Vt.crossOrigin(r,n[0].src||n[0],e.crossorigin);for(let l=0;l<n.length;++l){const u=document.createElement("source");let{src:d,mime:y}=n[l];d=d||n[l];const M=d.split("?").shift().toLowerCase(),O=M.slice(M.lastIndexOf(".")+1);y=y||dc.MIME_TYPES[O]||`video/${O}`,u.src=d,u.type=y,r.appendChild(u)}n=r}super(n),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}update(n=0){this.destroyed||(this._msToNextUpdate=Math.floor(this._msToNextUpdate-er.shared.elapsedMS*this.source.playbackRate),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))}load(){if(this._load)return this._load;const n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,n.load())}),this._load}_onError(n){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(n)}_isSourcePlaying(){const n=this.source;return!n.paused&&!n.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(er.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(er.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const n=this.source;n.removeEventListener("canplay",this._onCanPlay),n.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(n.videoWidth,n.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&n.play()}dispose(){this._isConnectedToTicker&&(er.shared.remove(this.update,this),this._isConnectedToTicker=!1);const n=this.source;n&&(n.removeEventListener("error",this._onError,!0),n.pause(),n.src="",n.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(n){n!==this._autoUpdate&&(this._autoUpdate=n,!this._autoUpdate&&this._isConnectedToTicker?(er.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(er.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(n){n!==this._updateFPS&&(this._updateFPS=n)}static test(n,e){return globalThis.HTMLVideoElement&&n instanceof HTMLVideoElement||dc.TYPES.includes(e)}};let fc=dc;fc.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],fc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},ge.push(qo,Jt,class zf extends Vt{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return!!(r&&e instanceof r)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}},fc,pl,Fn,uc,class jf extends Wh{constructor(e,r){const{width:o,height:l}=r||{};let u,d;Array.isArray(e)?(u=e,d=e.length):d=e,super(d,{width:o,height:l}),u&&this.initFromArray(u,r)}addBaseTextureAt(e,r){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,r),this}bind(e){super.bind(e),e.target=ve.TEXTURE_2D_ARRAY}upload(e,r,o){const{length:l,itemDirtyIds:u,items:d}=this,{gl:y}=e;o.dirtyId<0&&y.texImage3D(y.TEXTURE_2D_ARRAY,0,o.internalFormat,this._width,this._height,l,0,r.format,o.type,null);for(let M=0;M<l;M++){const O=d[M];u[M]<O.dirtyId&&(u[M]=O.dirtyId,O.valid&&y.texSubImage3D(y.TEXTURE_2D_ARRAY,0,0,0,M,O.resource.width,O.resource.height,1,r.format,o.type,O.resource.source))}return!0}});class gl{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Gn.EMPTY:((e=e||new Gn(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:o,b:l,c:u,d,tx:y,ty:M}=e,O=o*r.x+u*r.y+y,B=l*r.x+d*r.y+M;this.minX=Math.min(this.minX,O),this.maxX=Math.max(this.maxX,O),this.minY=Math.min(this.minY,B),this.maxY=Math.max(this.maxY,B)}addQuad(e){let r=this.minX,o=this.minY,l=this.maxX,u=this.maxY,d=e[0],y=e[1];r=d<r?d:r,o=y<o?y:o,l=d>l?d:l,u=y>u?y:u,d=e[2],y=e[3],r=d<r?d:r,o=y<o?y:o,l=d>l?d:l,u=y>u?y:u,d=e[4],y=e[5],r=d<r?d:r,o=y<o?y:o,l=d>l?d:l,u=y>u?y:u,d=e[6],y=e[7],r=d<r?d:r,o=y<o?y:o,l=d>l?d:l,u=y>u?y:u,this.minX=r,this.minY=o,this.maxX=l,this.maxY=u}addFrame(e,r,o,l,u){this.addFrameMatrix(e.worldTransform,r,o,l,u)}addFrameMatrix(e,r,o,l,u){const d=e.a,y=e.b,M=e.c,O=e.d,B=e.tx,G=e.ty;let $=this.minX,le=this.minY,pe=this.maxX,ze=this.maxY,qe=d*r+M*o+B,ot=y*r+O*o+G;$=qe<$?qe:$,le=ot<le?ot:le,pe=qe>pe?qe:pe,ze=ot>ze?ot:ze,qe=d*l+M*o+B,ot=y*l+O*o+G,$=qe<$?qe:$,le=ot<le?ot:le,pe=qe>pe?qe:pe,ze=ot>ze?ot:ze,qe=d*r+M*u+B,ot=y*r+O*u+G,$=qe<$?qe:$,le=ot<le?ot:le,pe=qe>pe?qe:pe,ze=ot>ze?ot:ze,qe=d*l+M*u+B,ot=y*l+O*u+G,$=qe<$?qe:$,le=ot<le?ot:le,pe=qe>pe?qe:pe,ze=ot>ze?ot:ze,this.minX=$,this.minY=le,this.maxX=pe,this.maxY=ze}addVertexData(e,r,o){let l=this.minX,u=this.minY,d=this.maxX,y=this.maxY;for(let M=r;M<o;M+=2){const O=e[M],B=e[M+1];l=O<l?O:l,u=B<u?B:u,d=O>d?O:d,y=B>y?B:y}this.minX=l,this.minY=u,this.maxX=d,this.maxY=y}addVertices(e,r,o,l){this.addVerticesMatrix(e.worldTransform,r,o,l)}addVerticesMatrix(e,r,o,l,u=0,d=u){const y=e.a,M=e.b,O=e.c,B=e.d,G=e.tx,$=e.ty;let le=this.minX,pe=this.minY,ze=this.maxX,qe=this.maxY;for(let ot=o;ot<l;ot+=2){const Pt=r[ot],rt=r[ot+1],Dt=y*Pt+O*rt+G,xn=B*rt+M*Pt+$;le=Math.min(le,Dt-u),ze=Math.max(ze,Dt+u),pe=Math.min(pe,xn-d),qe=Math.max(qe,xn+d)}this.minX=le,this.minY=pe,this.maxX=ze,this.maxY=qe}addBounds(e){const r=this.minX,o=this.minY,l=this.maxX,u=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<o?e.minY:o,this.maxX=e.maxX>l?e.maxX:l,this.maxY=e.maxY>u?e.maxY:u}addBoundsMask(e,r){const o=e.minX>r.minX?e.minX:r.minX,l=e.minY>r.minY?e.minY:r.minY,u=e.maxX<r.maxX?e.maxX:r.maxX,d=e.maxY<r.maxY?e.maxY:r.maxY;if(o<=u&&l<=d){const y=this.minX,M=this.minY,O=this.maxX,B=this.maxY;this.minX=o<y?o:y,this.minY=l<M?l:M,this.maxX=u>O?u:O,this.maxY=d>B?d:B}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const o=e.minX>r.x?e.minX:r.x,l=e.minY>r.y?e.minY:r.y,u=e.maxX<r.x+r.width?e.maxX:r.x+r.width,d=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(o<=u&&l<=d){const y=this.minX,M=this.minY,O=this.maxX,B=this.maxY;this.minX=o<y?o:y,this.minY=l<M?l:M,this.maxX=u>O?u:O,this.maxY=d>B?d:B}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,o,l,u,d){r-=d,o+=u,l+=d,this.minX=this.minX<(e-=u)?this.minX:e,this.maxX=this.maxX>o?this.maxX:o,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>l?this.maxY:l}}class tr extends Ee{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Ko,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new gl,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let o=0;o<r.length;++o){const l=r[o];Object.defineProperty(tr.prototype,l,Object.getOwnPropertyDescriptor(e,l))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Gn),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Gn),e=this._localBoundsRect),this._localBounds||(this._localBounds=new gl);const r=this.transform,o=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const l=this._bounds,u=this._boundsID;this._bounds=this._localBounds;const d=this.getBounds(!1,e);return this.parent=o,this.transform=r,this._bounds=l,this._bounds.updateID+=this._boundsID-u,d}toGlobal(e,r,o=!1){return o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,o,l){return r&&(e=r.toGlobal(e,o,l)),l||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,o)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,r=0,o=1,l=1,u=0,d=0,y=0,M=0,O=0){return this.position.x=e,this.position.y=r,this.scale.x=o||1,this.scale.y=l||1,this.rotation=u,this.skew.x=d,this.skew.y=y,this.pivot.x=M,this.pivot.y=O,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new im),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*Ra}set angle(e){this.transform.rotation=e*_r}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,0===r._maskRefCount&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(0===r._maskRefCount&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class im extends tr{constructor(){super(...arguments),this.sortDirty=null}}tr.prototype.displayObjectUpdateTransform=tr.prototype.updateTransform;const pc=new Oi;function Wf(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}const gc=class extends tr{constructor(){super(),this.children=[],this.sortableChildren=gc.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(n){}addChild(...n){if(n.length>1)for(let e=0;e<n.length;e++)this.addChild(n[e]);else{const e=n[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return n[0]}addChildAt(n,e){if(e<0||e>this.children.length)throw new Error(`${n}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.splice(e,0,n),this._boundsID++,this.onChildrenChange(e),n.emit("added",this),this.emit("childAdded",n,this,e),n}swapChildren(n,e){if(n===e)return;const r=this.getChildIndex(n),o=this.getChildIndex(e);this.children[r]=e,this.children[o]=n,this.onChildrenChange(r<o?r:o)}getChildIndex(n){const e=this.children.indexOf(n);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(n,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(n);Ss(this.children,r,1),this.children.splice(e,0,n),this.onChildrenChange(e)}getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]}removeChild(...n){if(n.length>1)for(let e=0;e<n.length;e++)this.removeChild(n[e]);else{const e=n[0],r=this.children.indexOf(e);if(-1===r)return null;e.parent=null,e.transform._parentID=-1,Ss(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return n[0]}removeChildAt(n){const e=this.getChildAt(n);return e.parent=null,e.transform._parentID=-1,Ss(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this),this.emit("childRemoved",e,this,n),e}removeChildren(n=0,e=this.children.length){const l=e-n;let u;if(l>0&&l<=e){u=this.children.splice(n,l);for(let d=0;d<u.length;++d)u[d].parent=null,u[d].transform&&(u[d].transform._parentID=-1);this._boundsID++,this.onChildrenChange(n);for(let d=0;d<u.length;++d)u[d].emit("removed",this),this.emit("childRemoved",u[d],this,d);return u}if(0===l&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let n=!1;for(let e=0,r=this.children.length;e<r;++e){const o=this.children[e];o._lastSortedIndex=e,!n&&0!==o.zIndex&&(n=!0)}n&&this.children.length>1&&this.children.sort(Wf),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let n=0,e=this.children.length;n<e;++n){const r=this.children[n];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let n=0;n<this.children.length;n++){const e=this.children[n];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(e._bounds,r._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(n,e=!1){const r=super.getLocalBounds(n);if(!e)for(let o=0,l=this.children.length;o<l;++o){const u=this.children[o];u.visible&&u.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(n){const e=n.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let r,o;this.cullArea?(r=this.cullArea,o=this.worldTransform):this._render!==gc.prototype._render&&(r=this.getBounds(!0));const l=n.projection.transform;if(l&&(o?(o=pc.copyFrom(o),o.prepend(l)):o=l),r&&e.intersects(r,o))this._render(n);else if(this.cullArea)return;for(let u=0,d=this.children.length;u<d;++u){const y=this.children[u],M=y.cullable;y.cullable=M||!this.cullArea,y.render(n),y.cullable=M}}render(n){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(n);else if(this.cullable)this._renderWithCulling(n);else{this._render(n);for(let e=0,r=this.children.length;e<r;++e)this.children[e].render(n)}}renderAdvanced(n){const e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<e.length;l++)e[l].enabled&&this._enabledFilters.push(e[l])}const o=e&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Ke.NONE));if(o&&n.batch.flush(),e&&this._enabledFilters?.length&&n.filter.push(this,this._enabledFilters),r&&n.mask.push(this,this._mask),this.cullable)this._renderWithCulling(n);else{this._render(n);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(n)}o&&n.batch.flush(),r&&n.mask.pop(this),e&&this._enabledFilters?.length&&n.filter.pop()}_render(n){}destroy(n){super.destroy(),this.sortDirty=!1;const e="boolean"==typeof n?n:n?.children,r=this.removeChildren(0,this.children.length);if(e)for(let o=0;o<r.length;++o)r[o].destroy(n)}get width(){return this.scale.x*this.getLocalBounds().width}set width(n){const e=this.getLocalBounds().width;this.scale.x=0!==e?n/e:1,this._width=n}get height(){return this.scale.y*this.getLocalBounds().height}set height(n){const e=this.getLocalBounds().height;this.scale.y=0!==e?n/e:1,this._height=n}};let Ms=gc;Ms.defaultSortableChildren=!1,Ms.prototype.containerUpdateTransform=Ms.prototype.updateTransform,Object.defineProperties(ne,{SORTABLE_CHILDREN:{get:()=>Ms.defaultSortableChildren,set(n){ln("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Ms.defaultSortableChildren=n}}});const $a=new Rn,Eu=new Uint16Array([0,1,2,0,2,3]);class Lo extends Ms{constructor(e){super(),this._anchor=new Jr(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=he.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||qt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=Eu,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ne.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=cs(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=cs(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,o=r.a,l=r.b,u=r.c,d=r.d,y=r.tx,M=r.ty,O=this.vertexData,B=e.trim,G=e.orig,$=this._anchor;let le=0,pe=0,ze=0,qe=0;if(B?(pe=B.x-$._x*G.width,le=pe+B.width,qe=B.y-$._y*G.height,ze=qe+B.height):(pe=-$._x*G.width,le=pe+G.width,qe=-$._y*G.height,ze=qe+G.height),O[0]=o*pe+u*qe+y,O[1]=d*qe+l*pe+M,O[2]=o*le+u*qe+y,O[3]=d*qe+l*le+M,O[4]=o*le+u*ze+y,O[5]=d*ze+l*le+M,O[6]=o*pe+u*ze+y,O[7]=d*ze+l*pe+M,this._roundPixels){const ot=ne.RESOLUTION;for(let Pt=0;Pt<O.length;++Pt)O[Pt]=Math.round(O[Pt]*ot)/ot}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const r=this.vertexTrimmedData,o=this._texture.orig,l=this._anchor,u=this.transform.worldTransform,d=u.a,y=u.b,M=u.c,O=u.d,B=u.tx,G=u.ty,$=-l._x*o.width,le=$+o.width,pe=-l._y*o.height,ze=pe+o.height;r[0]=d*$+M*pe+B,r[1]=O*pe+y*$+G,r[2]=d*le+M*pe+B,r[3]=O*pe+y*le+G,r[4]=d*le+M*ze+B,r[5]=O*ze+y*le+G,r[6]=d*$+M*ze+B,r[7]=O*ze+y*$+G}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new gl),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Gn),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,$a);const r=this._texture.orig.width,o=this._texture.orig.height,l=-r*this.anchor.x;let u=0;return $a.x>=l&&$a.x<l+r&&(u=-o*this.anchor.y,$a.y>=u&&$a.y<u+o)}destroy(e){super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof e?e:e?.texture)&&this._texture.destroy(!!("boolean"==typeof e?e:e?.baseTexture)),this._texture=null}static from(e,r){const o=e instanceof qt?e:qt.from(e,r);return new Lo(o)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=cs(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=cs(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tint}set tint(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||qt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const ml=new Oi;tr.prototype._cacheAsBitmap=!1,tr.prototype._cacheData=null,tr.prototype._cacheAsBitmapResolution=null,tr.prototype._cacheAsBitmapMultisample=null;class mc{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(tr.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(n){if(this._cacheAsBitmap===n)return;let e;this._cacheAsBitmap=n,n?(this._cacheData||(this._cacheData=new mc),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}),tr.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},tr.prototype._initCachedDisplayObject=function(e){if(this._cacheData?.sprite)return;const r=this.alpha;this.alpha=1,e.batch.flush();const o=this.getLocalBounds(null,!0).clone();this.filters?.length&&o.pad(this.filters[0].padding),o.ceil(ne.RESOLUTION);const l=e.renderTexture.current,u=e.renderTexture.sourceFrame.clone(),d=e.renderTexture.destinationFrame.clone(),y=e.projection.transform,M=yr.create({width:o.width,height:o.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),O=`cacheAsBitmap_${Or()}`;this._cacheData.textureCacheId=O,kt.addToCache(M.baseTexture,O),qt.addToCache(M,O);const B=this.transform.localTransform.copyTo(ml).invert().translate(-o.x,-o.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:M,clear:!0,transform:B,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=y,e.renderTexture.bind(l,u,d),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const G=new Lo(M);G.transform.worldTransform=this.transform.worldTransform,G.anchor.x=-o.x/o.width,G.anchor.y=-o.y/o.height,G.alpha=r,G._bounds=this._bounds,this._cacheData.sprite=G,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=G.containsPoint.bind(G)},tr.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},tr.prototype._initCachedDisplayObjectCanvas=function(e){if(this._cacheData?.sprite)return;const r=this.getLocalBounds(null,!0),o=this.alpha;this.alpha=1;const l=e.canvasContext.activeContext,u=e._projTransform;r.ceil(ne.RESOLUTION);const d=yr.create({width:r.width,height:r.height}),y=`cacheAsBitmap_${Or()}`;this._cacheData.textureCacheId=y,kt.addToCache(d.baseTexture,y),qt.addToCache(d,y);const M=ml;this.transform.localTransform.copyTo(M),M.invert(),M.tx-=r.x,M.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:d,clear:!0,transform:M,skipUpdateTransform:!1}),e.canvasContext.activeContext=l,e._projTransform=u,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=o;const O=new Lo(d);O.transform.worldTransform=this.transform.worldTransform,O.anchor.x=-r.x/r.width,O.anchor.y=-r.y/r.height,O.alpha=o,O._bounds=this._bounds,this._cacheData.sprite=O,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=O.containsPoint.bind(O)},tr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},tr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},tr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,kt.removeFromCache(this._cacheData.textureCacheId),qt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},tr.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},tr.prototype.name=null,Ms.prototype.getChildByName=function(e,r){for(let o=0,l=this.children.length;o<l;o++)if(this.children[o].name===e)return this.children[o];if(r)for(let o=0,l=this.children.length;o<l;o++){const u=this.children[o];if(!u.getChildByName)continue;const d=u.getChildByName(e,!0);if(d)return d}return null},tr.prototype.getGlobalPosition=function(e=new Rn,r=!1){return this.parent?this.parent.toGlobal(this.position,e,r):(e.x=this.position.x,e.y=this.position.y),e};const wu={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Du=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class Cu extends _{constructor(e,r=8,o=4,l=_.defaultResolution,u=5){const d=function Xh(n,e){const r=Math.ceil(n/2);let u,o="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",l="";u=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let d=0;d<n;d++){let y=u.replace("%index%",d.toString());y=y.replace("%sampleIndex%",d-(r-1)+".0"),l+=y,l+="\n"}return o=o.replace("%blur%",l),o=o.replace("%size%",n.toString()),o}(u,e),y=function _l(n){const e=wu[n],r=e.length;let d,o=Du,l="";for(let y=0;y<n;y++){let M="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",y.toString());d=y,y>=r&&(d=n-y-1),M=M.replace("%value%",e[d].toString()),l+=M,l+="\n"}return o=o.replace("%blur%",l),o=o.replace("%size%",n.toString()),o}(u);super(d,y),this.horizontal=e,this.resolution=l,this._quality=0,this.quality=o,this.blur=r}apply(e,r,o,l){if(this.uniforms.strength=o?this.horizontal?1/o.width*(o.width/r.width):1/o.height*(o.height/r.height):this.horizontal?1/e.renderer.width*(e.renderer.width/r.width):1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,r,o,l);else{const u=e.getFilterTexture(),d=e.renderer;let y=r,M=u;this.state.blend=!1,e.applyFilter(this,y,M,$e.CLEAR);for(let O=1;O<this.passes-1;O++){e.bindAndClear(y,$e.BLIT),this.uniforms.uSampler=M;const B=M;M=y,y=B,d.shader.bind(this),d.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,M,o,l),e.returnFilterTexture(u)}}get blur(){return this.strength}set blur(e){this.padding=1+2*Math.abs(e),this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class _c extends _{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(lc,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e),this.alpha=1}_loadMatrix(e,r=!1){let o=e;r&&(this._multiply(o,this.uniforms.m,e),o=this._colorMatrix(o)),this.uniforms.m=o}_multiply(e,r,o){return e[0]=r[0]*o[0]+r[1]*o[5]+r[2]*o[10]+r[3]*o[15],e[1]=r[0]*o[1]+r[1]*o[6]+r[2]*o[11]+r[3]*o[16],e[2]=r[0]*o[2]+r[1]*o[7]+r[2]*o[12]+r[3]*o[17],e[3]=r[0]*o[3]+r[1]*o[8]+r[2]*o[13]+r[3]*o[18],e[4]=r[0]*o[4]+r[1]*o[9]+r[2]*o[14]+r[3]*o[19]+r[4],e[5]=r[5]*o[0]+r[6]*o[5]+r[7]*o[10]+r[8]*o[15],e[6]=r[5]*o[1]+r[6]*o[6]+r[7]*o[11]+r[8]*o[16],e[7]=r[5]*o[2]+r[6]*o[7]+r[7]*o[12]+r[8]*o[17],e[8]=r[5]*o[3]+r[6]*o[8]+r[7]*o[13]+r[8]*o[18],e[9]=r[5]*o[4]+r[6]*o[9]+r[7]*o[14]+r[8]*o[19]+r[9],e[10]=r[10]*o[0]+r[11]*o[5]+r[12]*o[10]+r[13]*o[15],e[11]=r[10]*o[1]+r[11]*o[6]+r[12]*o[11]+r[13]*o[16],e[12]=r[10]*o[2]+r[11]*o[7]+r[12]*o[12]+r[13]*o[17],e[13]=r[10]*o[3]+r[11]*o[8]+r[12]*o[13]+r[13]*o[18],e[14]=r[10]*o[4]+r[11]*o[9]+r[12]*o[14]+r[13]*o[19]+r[14],e[15]=r[15]*o[0]+r[16]*o[5]+r[17]*o[10]+r[18]*o[15],e[16]=r[15]*o[1]+r[16]*o[6]+r[17]*o[11]+r[18]*o[16],e[17]=r[15]*o[2]+r[16]*o[7]+r[17]*o[12]+r[18]*o[17],e[18]=r[15]*o[3]+r[16]*o[8]+r[17]*o[13]+r[18]*o[18],e[19]=r[15]*o[4]+r[16]*o[9]+r[17]*o[14]+r[18]*o[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){this._loadMatrix([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],r)}tint(e,r){this._loadMatrix([(e>>16&255)/255,0,0,0,0,0,(e>>8&255)/255,0,0,0,0,0,(255&e)/255,0,0,0,0,0,1,0],r)}greyscale(e,r){this._loadMatrix([e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0],r)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,r){e=(e||0)/180*Math.PI;const o=Math.cos(e),l=Math.sin(e),d=1/3,y=(0,Math.sqrt)(d);this._loadMatrix([o+(1-o)*d,d*(1-o)-y*l,d*(1-o)+y*l,0,0,d*(1-o)+y*l,o+d*(1-o),d*(1-o)-y*l,0,0,d*(1-o)-y*l,d*(1-o)+y*l,o+d*(1-o),0,0,0,0,0,1,0],r)}contrast(e,r){const o=(e||0)+1,l=-.5*(o-1);this._loadMatrix([o,0,0,0,l,0,o,0,0,l,0,0,o,0,l,0,0,0,1,0],r)}saturate(e=0,r){const o=2*e/3+1,l=-.5*(o-1);this._loadMatrix([o,l,l,0,0,l,o,l,0,0,l,l,o,0,0,0,0,0,1,0],r)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,r,o,l,u){const d=((o=o||16770432)>>16&255)/255,y=(o>>8&255)/255,M=(255&o)/255,O=((l=l||3375104)>>16&255)/255,B=(l>>8&255)/255,G=(255&l)/255;this._loadMatrix([.3,.59,.11,0,0,d,y,M,e=e||.2,0,O,B,G,r=r||.15,0,d-O,y-B,M-G,0,0],u)}night(e,r){this._loadMatrix([-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0],r)}predator(e,r){this._loadMatrix([11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0],r)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}_c.prototype.grayscale=_c.prototype.greyscale;const vc={AlphaFilter:class bu extends _{constructor(e=1){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}},BlurFilter:class Xf extends _{constructor(e=8,r=4,o=_.defaultResolution,l=5){super(),this.blurXFilter=new Cu(!0,e,r,o,l),this.blurYFilter=new Cu(!1,e,r,o,l),this.resolution=o,this.quality=r,this.blur=e,this.repeatEdgePixels=!1}apply(e,r,o,l){const u=Math.abs(this.blurXFilter.strength),d=Math.abs(this.blurYFilter.strength);if(u&&d){const y=e.getFilterTexture();this.blurXFilter.apply(e,r,y,$e.CLEAR),this.blurYFilter.apply(e,y,o,l),e.returnFilterTexture(y)}else d?this.blurYFilter.apply(e,r,o,l):this.blurXFilter.apply(e,r,o,l)}updatePadding(){this.padding=this._repeatEdgePixels?0:2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}},BlurFilterPass:Cu,ColorMatrixFilter:_c,DisplacementFilter:class xu extends _{constructor(e,r){const o=new Oi;e.renderable=!1,super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=o,null==r&&(r=20),this.scale=new Rn(r,r)}apply(e,r,o,l){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const u=this.maskSprite.worldTransform,d=Math.sqrt(u.a*u.a+u.b*u.b),y=Math.sqrt(u.c*u.c+u.d*u.d);0!==d&&0!==y&&(this.uniforms.rotation[0]=u.a/d,this.uniforms.rotation[1]=u.b/d,this.uniforms.rotation[2]=u.c/y,this.uniforms.rotation[3]=u.d/y),e.applyFilter(this,r,o,l)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}},FXAAFilter:class qf extends _{constructor(){super("\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}},NoiseFilter:class Qf extends _{constructor(e=.5,r=Math.random()){super(lc,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=e,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}};Object.entries(vc).forEach(([n,e])=>{Object.defineProperty(vc,n,{get:()=>(ln("7.1.0",`filters.${n} has moved to ${n}`),e)})});class yl{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=yl.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Rn,this.page=new Rn,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,o){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,o,l,u){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class vl extends yl{constructor(){super(...arguments),this.client=new Rn,this.movement=new Rn,this.offset=new Rn,this.global=new Rn,this.screen=new Rn}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,o,l,u,d,y,M,O,B,G,$,le,pe,ze){throw new Error("Method not implemented.")}}class gs extends vl{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}let El=(()=>{class n extends vl{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}return n.DOM_DELTA_PIXEL=0,n.DOM_DELTA_LINE=1,n.DOM_DELTA_PAGE=2,n})();const qh=new Rn,Ec=new Rn;class fa{constructor(e){this.dispatch=new Ee,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((o,l)=>o.priority-l.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let o=0,l=r.length;o<l;o++)r[o].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){const o=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,qh.set(e,r),this.hitTestFn,this.hitPruneFn);return o&&o[0]}propagate(e,r){if(!e.target)return;const o=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let l=0,u=o.length-1;l<u;l++)if(e.currentTarget=o[l],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let l=o.length-2;l>=0;l--)if(e.currentTarget=o[l],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,o=this.rootTarget){e.eventPhase=e.BUBBLING_PHASE;const l=o.children;if(l)for(let u=0;u<l.length;u++)this.all(e,r,l[u]);e.currentTarget=o,this.notifyTarget(e,r)}propagationPath(e){const r=[e];for(let o=0;o<2048&&e!==this.rootTarget;o++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestRecursive(e,r,o,l,u){if(!e||!e.visible||u(e,o))return null;if(e.interactiveChildren&&e.children){const d=e.children;for(let y=d.length-1;y>=0;y--){const M=d[y],O=this.hitTestRecursive(M,r||M.interactive,o,l,u);if(O){if(O.length>0&&!O[O.length-1].parent)continue;return(O.length>0||e.interactive)&&O.push(e),O}}}return r&&l(e,o)?e.interactive?[e]:[]:null}hitPruneFn(e,r){if(e.hitArea&&(e.worldTransform.applyInverse(r,Ec),!e.hitArea.contains(Ec.x,Ec.y)))return!0;if(e._mask){const o=e._mask.isMaskData?e._mask.maskObject:e._mask;if(o&&!o.containsPoint?.(r))return!0}return!1}hitTestFn(e,r){return!!e.hitArea||!!e.containsPoint&&e.containsPoint(r)}notifyTarget(e,r){e.currentTarget[`on${r=r??e.type}`]?.(e),this.notifyListeners(e,e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof gs))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const r=this.createPointerEvent(e);this.dispatchEvent(r,"pointerdown"),"touch"===r.pointerType?this.dispatchEvent(r,"touchstart"):"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.dispatchEvent(r,2===r.button?"rightdown":"mousedown"),this.trackingData(e.pointerId).pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){if(!(e instanceof gs))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const r=this.createPointerEvent(e),o="mouse"===r.pointerType||"pen"===r.pointerType,l=this.trackingData(e.pointerId),u=this.findMountedTarget(l.overTargets);if(l.overTargets?.length>0&&u!==r.target){const M=this.createPointerEvent(e,"mousemove"===e.type?"mouseout":"pointerout",u);if(this.dispatchEvent(M,"pointerout"),o&&this.dispatchEvent(M,"mouseout"),!r.composedPath().includes(u)){const O=this.createPointerEvent(e,"pointerleave",u);for(O.eventPhase=O.AT_TARGET;O.target&&!r.composedPath().includes(O.target);)O.currentTarget=O.target,this.notifyTarget(O),o&&this.notifyTarget(O,"mouseleave"),O.target=O.target.parent;this.freeEvent(O)}this.freeEvent(M)}if(u!==r.target){const M=this.clonePointerEvent(r,"mousemove"===e.type?"mouseover":"pointerover");this.dispatchEvent(M,"pointerover"),o&&this.dispatchEvent(M,"mouseover");let O=u?.parent;for(;O&&O!==this.rootTarget.parent&&O!==r.target;)O=O.parent;if(!O||O===this.rootTarget.parent){const G=this.clonePointerEvent(r,"pointerenter");for(G.eventPhase=G.AT_TARGET;G.target&&G.target!==u&&G.target!==this.rootTarget.parent;)G.currentTarget=G.target,this.notifyTarget(G),o&&this.notifyTarget(G,"mouseenter"),G.target=G.target.parent;this.freeEvent(G)}this.freeEvent(M)}const d=this.moveOnAll?"all":"dispatchEvent";this[d](r,"pointermove"),this.all(r,"globalpointermove"),"touch"===r.pointerType&&(this[d](r,"touchmove"),this.all(r,"globaltouchmove")),o&&(this[d](r,"mousemove"),this.all(r,"globalmousemove"),this.cursor=r.target?.cursor),l.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){if(!(e instanceof gs))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const r=this.trackingData(e.pointerId),o=this.createPointerEvent(e),l="mouse"===o.pointerType||"pen"===o.pointerType;this.dispatchEvent(o,"pointerover"),l&&this.dispatchEvent(o,"mouseover"),"mouse"===o.pointerType&&(this.cursor=o.target?.cursor);const u=this.clonePointerEvent(o,"pointerenter");for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==this.rootTarget.parent;)u.currentTarget=u.target,this.notifyTarget(u),l&&this.notifyTarget(u,"mouseenter"),u.target=u.target.parent;r.overTargets=o.composedPath(),this.freeEvent(o),this.freeEvent(u)}mapPointerOut(e){if(!(e instanceof gs))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const r=this.trackingData(e.pointerId);if(r.overTargets){const o="mouse"===e.pointerType||"pen"===e.pointerType,l=this.findMountedTarget(r.overTargets),u=this.createPointerEvent(e,"pointerout",l);this.dispatchEvent(u),o&&this.dispatchEvent(u,"mouseout");const d=this.createPointerEvent(e,"pointerleave",l);for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==this.rootTarget.parent;)d.currentTarget=d.target,this.notifyTarget(d),o&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;r.overTargets=null,this.freeEvent(u),this.freeEvent(d)}this.cursor=null}mapPointerUp(e){if(!(e instanceof gs))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const r=performance.now(),o=this.createPointerEvent(e);this.dispatchEvent(o,"pointerup"),"touch"===o.pointerType?this.dispatchEvent(o,"touchend"):"mouse"!==o.pointerType&&"pen"!==o.pointerType||this.dispatchEvent(o,2===o.button?"rightup":"mouseup");const l=this.trackingData(e.pointerId),u=this.findMountedTarget(l.pressTargetsByButton[e.button]);let d=u;if(u&&!o.composedPath().includes(u)){let y=u;for(;y&&!o.composedPath().includes(y);)o.currentTarget=y,this.notifyTarget(o,"pointerupoutside"),"touch"===o.pointerType?this.notifyTarget(o,"touchendoutside"):"mouse"!==o.pointerType&&"pen"!==o.pointerType||this.notifyTarget(o,2===o.button?"rightupoutside":"mouseupoutside"),y=y.parent;delete l.pressTargetsByButton[e.button],d=y}if(d){const y=this.clonePointerEvent(o,"click");y.target=d,y.path=null,l.clicksByButton[e.button]||(l.clicksByButton[e.button]={clickCount:0,target:y.target,timeStamp:r});const M=l.clicksByButton[e.button];M.target===y.target&&r-M.timeStamp<200?++M.clickCount:M.clickCount=1,M.target=y.target,M.timeStamp=r,y.detail=M.clickCount,"mouse"===y.pointerType?this.dispatchEvent(y,2===y.button?"rightclick":"click"):"touch"===y.pointerType&&this.dispatchEvent(y,"tap"),this.dispatchEvent(y,"pointertap"),this.freeEvent(y)}this.freeEvent(o)}mapPointerUpOutside(e){if(!(e instanceof gs))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const r=this.trackingData(e.pointerId),o=this.findMountedTarget(r.pressTargetsByButton[e.button]),l=this.createPointerEvent(e);if(o){let u=o;for(;u;)l.currentTarget=u,this.notifyTarget(l,"pointerupoutside"),"touch"===l.pointerType?this.notifyTarget(l,"touchendoutside"):("mouse"===l.pointerType||"pen"===l.pointerType)&&this.notifyTarget(l,2===l.button?"rightupoutside":"mouseupoutside"),u=u.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(l)}mapWheel(e){if(!(e instanceof El))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let o=1;o<e.length&&e[o].parent===r;o++)r=e[o];return r}createPointerEvent(e,r,o){const l=this.allocateEvent(gs);return this.copyPointerData(e,l),this.copyMouseData(e,l),this.copyData(e,l),l.nativeEvent=e.nativeEvent,l.originalEvent=e,l.target=o??this.hitTest(l.global.x,l.global.y),"string"==typeof r&&(l.type=r),l}createWheelEvent(e){const r=this.allocateEvent(El);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const o=this.allocateEvent(gs);return o.nativeEvent=e.nativeEvent,o.originalEvent=e.originalEvent,this.copyPointerData(e,o),this.copyMouseData(e,o),this.copyData(e,o),o.target=e.target,o.path=e.composedPath().slice(),o.type=r??o.type,o}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof gs&&r instanceof gs&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof vl&&r instanceof vl&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}notifyListeners(e,r){const o=e.currentTarget._events[r];if(o)if("fn"in o)o.once&&e.currentTarget.removeListener(r,o.fn,void 0,!0),o.fn.call(o.context,e);else for(let l=0,u=o.length;l<u&&!e.propagationImmediatelyStopped;l++)o[l].once&&e.currentTarget.removeListener(r,o[l].fn,void 0,!0),o[l].fn.call(o[l].context,e)}}const ep={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class Qh{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new fa(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new gs(null),this.rootWheelEvent=new El(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:e,resolution:r}=this.renderer;this.setTargetElement(e),this.resolution=r}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let r=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(r=!1),this.currentCursor===e)return;this.currentCursor=e;const o=this.cursorStyles[e];if(o)switch(typeof o){case"string":r&&(this.domElement.style.cursor=o);break;case"function":o(e);break;case"object":r&&Object.assign(this.domElement.style,o)}else r&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}onPointerDown(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const r=this.normalizeToPointerData(e);this.autoPreventDefault&&r[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let o=0,l=r.length;o<l;o++){const d=this.bootstrapEvent(this.rootPointerEvent,r[o]);this.rootBoundary.mapEvent(d)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const r=this.normalizeToPointerData(e);for(let o=0,l=r.length;o<l;o++){const u=this.bootstrapEvent(this.rootPointerEvent,r[o]);this.rootBoundary.mapEvent(u)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;let r=e.target;e.composedPath&&e.composedPath().length>0&&(r=e.composedPath()[0]);const o=r!==this.domElement?"outside":"",l=this.normalizeToPointerData(e);for(let u=0,d=l.length;u<d;u++){const y=this.bootstrapEvent(this.rootPointerEvent,l[u]);y.type+=o,this.rootBoundary.mapEvent(y)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const r=this.normalizeToPointerData(e);for(let o=0,l=r.length;o<l;o++){const u=this.bootstrapEvent(this.rootPointerEvent,r[o]);this.rootBoundary.mapEvent(u)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){const r=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(r)}setTargetElement(e){this.removeEvents(),this.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,r,o){let l;l=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const u=1/this.resolution;e.x=this.domElement.width/l.width*(r-l.left)*u,e.y=this.domElement.height/l.height*(o-l.top)*u}normalizeToPointerData(e){const r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let o=0,l=e.changedTouches.length;o<l;o++){const u=e.changedTouches[o];typeof u.button>"u"&&(u.button=0),typeof u.buttons>"u"&&(u.buttons=1),typeof u.isPrimary>"u"&&(u.isPrimary=1===e.touches.length&&"touchstart"===e.type),typeof u.width>"u"&&(u.width=u.radiusX||1),typeof u.height>"u"&&(u.height=u.radiusY||1),typeof u.tiltX>"u"&&(u.tiltX=0),typeof u.tiltY>"u"&&(u.tiltY=0),typeof u.pointerType>"u"&&(u.pointerType="touch"),typeof u.pointerId>"u"&&(u.pointerId=u.identifier||0),typeof u.pressure>"u"&&(u.pressure=u.force||.5),typeof u.twist>"u"&&(u.twist=0),typeof u.tangentialPressure>"u"&&(u.tangentialPressure=0),typeof u.layerX>"u"&&(u.layerX=u.offsetX=u.clientX),typeof u.layerY>"u"&&(u.layerY=u.offsetY=u.clientY),u.isNormalized=!0,u.type=e.type,r.push(u)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)){const o=e;typeof o.isPrimary>"u"&&(o.isPrimary=!0),typeof o.width>"u"&&(o.width=1),typeof o.height>"u"&&(o.height=1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="mouse"),typeof o.pointerId>"u"&&(o.pointerId=1),typeof o.pressure>"u"&&(o.pressure=.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),o.isNormalized=!0,r.push(o)}else r.push(e);return r}normalizeWheelEvent(e){const r=this.rootWheelEvent;return this.transferMouseData(r,e),r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ,r.deltaMode=e.deltaMode,this.mapPositionToPoint(r.screen,e.clientX,e.clientY),r.global.copyFrom(r.screen),r.offset.copyFrom(r.screen),r.nativeEvent=e,r.type=e.type,r}bootstrapEvent(e,r){return e.originalEvent=null,e.nativeEvent=r,e.pointerId=r.pointerId,e.width=r.width,e.height=r.height,e.isPrimary=r.isPrimary,e.pointerType=r.pointerType,e.pressure=r.pressure,e.tangentialPressure=r.tangentialPressure,e.tiltX=r.tiltX,e.tiltY=r.tiltY,e.twist=r.twist,this.transferMouseData(e,r),this.mapPositionToPoint(e.screen,r.clientX,r.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=r.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=ep[e.type]||e.type),e}transferMouseData(e,r){e.isTrusted=r.isTrusted,e.srcElement=r.srcElement,e.timeStamp=performance.now(),e.type=r.type,e.altKey=r.altKey,e.button=r.button,e.buttons=r.buttons,e.client.x=r.clientX,e.client.y=r.clientY,e.ctrlKey=r.ctrlKey,e.metaKey=r.metaKey,e.movement.x=r.movementX,e.movement.y=r.movementY,e.page.x=r.pageX,e.page.y=r.pageY,e.relatedTarget=null,e.shiftKey=r.shiftKey}}Qh.extension={name:"events",type:[oe.RendererSystem,oe.CanvasRendererSystem]},ut.add(Qh);const tp={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(n,e,r){const l="function"==typeof e?void 0:e;this.on(n="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${n}capture`:n,e="function"==typeof e?e:e.handleEvent,l)},removeEventListener(n,e,r){const l="function"==typeof e?void 0:e;this.off(n="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${n}capture`:n,e="function"==typeof e?e:e.handleEvent,l)},dispatchEvent(n){if(!(n instanceof yl))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};tr.mixin(tp),tr.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});class nd{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Q.tablet||Q.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width="100px",r.style.height="100px",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.zIndex=2..toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const r=e.children;if(r)for(let o=0;o<r.length;o++)this.updateAccessibleObjects(r[o])}update(){const e=performance.now();if(Q.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:o,width:l,height:u}=this.renderer.view.getBoundingClientRect(),{width:d,height:y,resolution:M}=this.renderer,O=l/d*M,B=u/y*M;let G=this.div;G.style.left=`${r}px`,G.style.top=`${o}px`,G.style.width=`${d}px`,G.style.height=`${y}px`;for(let $=0;$<this.children.length;$++){const le=this.children[$];if(le.renderId!==this.renderId)le._accessibleActive=!1,Ss(this.children,$,1),this.div.removeChild(le._accessibleDiv),this.pool.push(le._accessibleDiv),le._accessibleDiv=null,$--;else{G=le._accessibleDiv;let pe=le.hitArea;const ze=le.worldTransform;le.hitArea?(G.style.left=(ze.tx+pe.x*ze.a)*O+"px",G.style.top=(ze.ty+pe.y*ze.d)*B+"px",G.style.width=pe.width*ze.a*O+"px",G.style.height=pe.height*ze.d*B+"px"):(pe=le.getBounds(),this.capHitArea(pe),G.style.left=pe.x*O+"px",G.style.top=pe.y*B+"px",G.style.width=pe.width*O+"px",G.style.height=pe.height*B+"px",G.title!==le.accessibleTitle&&null!==le.accessibleTitle&&(G.title=le.accessibleTitle),G.getAttribute("aria-label")!==le.accessibleHint&&null!==le.accessibleHint&&G.setAttribute("aria-label",le.accessibleHint)),(le.accessibleTitle!==G.title||le.tabIndex!==G.tabIndex)&&(G.title=le.accessibleTitle,G.tabIndex=le.tabIndex,this.debug&&this.updateDebugHTML(G))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:o}=this.renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>o&&(e.height=o-e.y)}addChild(e){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width="100px",r.style.height="100px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=2..toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?r.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(r.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&null!==e.accessibleHint&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,r){const{displayObject:o}=e.target,l=this.renderer.events.rootBoundary,u=Object.assign(new yl(l),{target:o});l.rootTarget=this.renderer.lastObjectRendered,r.forEach(d=>l.dispatchEvent(u,d))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this.activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}nd.extension={name:"accessibility",type:[oe.RendererPlugin,oe.CanvasRendererPlugin]},ut.add(nd);const Tu=class{constructor(n){this.stage=new Ms,n=Object.assign({forceCanvas:!1},n),this.renderer=function mu(n){for(const e of jh)if(e.test(n))return new e(n);throw new Error("Unable to auto-detect a suitable renderer.")}(n),Tu._plugins.forEach(e=>{e.init.call(this,n)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(n,e){const r=Tu._plugins.slice(0);r.reverse(),r.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(n),this.renderer=null}};let Su=Tu;Su._plugins=[],ut.handleByList(oe.Application,Su._plugins);class id{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let r,o;if(this.cancelResize(),this._resizeTo===globalThis.window)r=globalThis.innerWidth,o=globalThis.innerHeight;else{const{clientWidth:l,clientHeight:u}=this._resizeTo;r=l,o=u}this.renderer.resize(r,o),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}id.extension=oe.Application,ut.add(id);const bl={loader:oe.LoadParser,resolver:oe.ResolveParser,cache:oe.CacheParser,detection:oe.DetectionParser};ut.handle(oe.Asset,n=>{const e=n.ref;Object.entries(bl).filter(([r])=>!!e[r]).forEach(([r,o])=>ut.add(Object.assign(e[r],{extension:e[r].extension??o})))},n=>{const e=n.ref;Object.keys(bl).filter(r=>!!e[r]).forEach(r=>ut.remove(e[r]))});class Bo{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){var e=this;return(0,Nn.Z)(function*(){if(e._assetList.length&&e._isActive){e._isLoading=!0;const r=[],o=Math.min(e._assetList.length,e._maxConcurrent);for(let l=0;l<o;l++)r.push(e._assetList.pop());yield e._loader.load(r),e._isLoading=!1,e._next()}})()}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Qo(n,e){const r=n.split("?")[0],o=St.extname(r).toLowerCase();return Array.isArray(e)?e.includes(o):o===e}const Eo=(n,e)=>(Array.isArray(n)||(n=[n]),e?n.map(r=>"string"==typeof r?e(r):r):n),Ya=new class rd{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const o=Eo(e);let l;for(let y=0;y<this.parsers.length;y++){const M=this.parsers[y];if(M.test(r)){l=M.getCacheableAssets(o,r);break}}l||(l={},o.forEach(y=>{l[y]=r}));const u=Object.keys(l),d={cacheKeys:u,keys:o};if(o.forEach(y=>{this._cacheMap.set(y,d)}),u.forEach(y=>{this._cache.has(y)&&this._cache.get(y)!==r&&console.warn("[Cache] already has key:",y),this._cache.set(y,l[y])}),r instanceof qt){const y=r;o.forEach(M=>{y.baseTexture!==qt.EMPTY.baseTexture&&kt.addToCache(y.baseTexture,M),qt.addToCache(y,M)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e))return void console.warn(`[Assets] Asset id ${e} was not found in the Cache`);const r=this._cacheMap.get(e);r.cacheKeys.forEach(l=>{this._cache.delete(l)}),r.keys.forEach(l=>{this._cacheMap.delete(l)})}get parsers(){return this._parsers}},Au=n=>!Array.isArray(n);class sm{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(e,r){var o=this;const l={promise:null,parser:null};return l.promise=(0,Nn.Z)(function*(){let u=null;for(let d=0;d<o.parsers.length;d++){const y=o.parsers[d];if(y.load&&y.test?.(e,r,o)){u=yield y.load(e,r,o),l.parser=y;break}}if(!l.parser)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let d=0;d<o.parsers.length;d++){const y=o.parsers[d];y.parse&&y.parse&&(yield y.testParse?.(u,r,o))&&(u=(yield y.parse(u,r,o))||u,l.parser=y)}return u})(),l}load(e,r){var o=this;return(0,Nn.Z)(function*(){let l=0;const u={},d=Au(e),y=Eo(e,B=>({src:B})),M=y.length,O=y.map(function(){var B=(0,Nn.Z)(function*(G){const $=St.toAbsolute(G.src);if(!u[G.src])try{o.promiseCache[$]||(o.promiseCache[$]=o._getLoadPromiseAndParser($,G)),u[G.src]=yield o.promiseCache[$].promise,r&&r(++l/M)}catch(le){throw delete o.promiseCache[$],delete u[G.src],new Error(`[Loader.load] Failed to load ${$}.\n${le}`)}});return function(G){return B.apply(this,arguments)}}());return yield Promise.all(O),d?u[y[0].src]:u})()}unload(e){var r=this;return(0,Nn.Z)(function*(){const l=Eo(e,u=>({src:u})).map(function(){var u=(0,Nn.Z)(function*(d){const y=St.toAbsolute(d.src),M=r.promiseCache[y];if(M){const O=yield M.promise;M.parser?.unload?.(O,d,r),delete r.promiseCache[y]}});return function(d){return u.apply(this,arguments)}}());yield Promise.all(l)})()}get parsers(){return this._parsers}}var Uo=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Uo||{});const Mu={extension:{type:oe.LoadParser,priority:Uo.Low},test:n=>".json"===St.extname(n).toLowerCase(),load:n=>(0,Nn.Z)(function*(){return yield(yield ne.ADAPTER.fetch(n)).json()})()};ut.add(Mu);const Iu={extension:{type:oe.LoadParser,priority:Uo.Low},test:n=>".txt"===St.extname(n).toLowerCase(),load:n=>(0,Nn.Z)(function*(){return yield(yield ne.ADAPTER.fetch(n)).text()})()};function ap(n,e){if(Array.isArray(e)){for(const r of e)if(n.startsWith(`data:${r}`))return!0;return!1}return n.startsWith(`data:${e}`)}ut.add(Iu);const om=["normal","bold","100","200","300","400","500","600","700","800","900"],sd=[".ttf",".otf",".woff",".woff2"],lp=["font/ttf","font/otf","font/woff","font/woff2"],up={extension:{type:oe.LoadParser,priority:Uo.Low},test:n=>ap(n,lp)||Qo(n,sd),load:(n,e)=>(0,Nn.Z)(function*(){const r=ne.ADAPTER.getFontFaceSet();if(r){const o=[],l=e.data?.family??function cp(n){const e=St.extname(n);return St.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ")}(n),u=e.data?.weights?.filter(y=>om.includes(y))??["normal"],d=e.data??{};for(let y=0;y<u.length;y++){const M=u[y],O=new FontFace(l,`url(${encodeURI(n)})`,{...d,weight:M});yield O.load(),r.add(O),o.push(O)}return 1===o.length?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})(),unload(n){(Array.isArray(n)?n:[n]).forEach(e=>ne.ADAPTER.getFontFaceSet().delete(e))}};ut.add(up);let bc,od=0;const ad_code="\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ",Pu_code="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };";let Ou;const ld=new class dr{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(e=>{const r=URL.createObjectURL(new Blob([ad_code],{type:"application/javascript"})),o=new Worker(r);o.addEventListener("message",l=>{o.terminate(),URL.revokeObjectURL(r),e(l.data)})})),this._isImageBitmapSupported}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}_initWorkers(){var e=this;return(0,Nn.Z)(function*(){e._initialized||(e._initialized=!0)})()}getWorker(){void 0===bc&&(bc=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<bc&&(Ou||(Ou=URL.createObjectURL(new Blob([Pu_code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(Ou),e.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}_run(e,r){var o=this;return(0,Nn.Z)(function*(){yield o._initWorkers();const l=new Promise((u,d)=>{o.queue.push({id:e,arguments:r,resolve:u,reject:d})});return o.next(),l})()}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const r=this.queue.pop(),o=r.id;this.resolveHash[od]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:od++,id:o})}};function wc(n,e,r){const o=new qt(n);return o.baseTexture.on("dispose",()=>{delete e.promiseCache[r]}),o}const cd=[".jpeg",".jpg",".png",".webp",".avif"],ud=["image/jpeg","image/png","image/webp","image/avif"];function Fu(){return(Fu=(0,Nn.Z)(function*(n){const e=yield ne.ADAPTER.fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const r=yield e.blob();return yield createImageBitmap(r)})).apply(this,arguments)}const wl={extension:{type:oe.LoadParser,priority:Uo.High},config:{preferWorkers:!0},test:n=>ap(n,ud)||Qo(n,cd),load(n,e,r){var o=this;return(0,Nn.Z)(function*(){let l=null;l=globalThis.createImageBitmap?o.config.preferWorkers&&(yield ld.isImageBitmapSupported())?yield ld.loadImageBitmap(n):yield function hp(n){return Fu.apply(this,arguments)}(n):yield new Promise(d=>{l=new Image,l.crossOrigin="anonymous",l.src=n,l.complete?d(l):l.onload=()=>{d(l)}});const u=new kt(l,{resolution:_e(n),...e.data});return u.resource.src=n,wc(u,r,n)})()},unload(n){n.destroy(!0)}};ut.add(wl);const dp={extension:{type:oe.LoadParser,priority:Uo.High},test:n=>".svg"===St.extname(n).toLowerCase(),testParse:n=>(0,Nn.Z)(function*(){return pl.test(n)})(),parse:(n,e,r)=>(0,Nn.Z)(function*(){const o=new pl(n,e?.data?.resourceOptions),l=new kt(o,{resolution:_e(n),...e?.data});l.resource.src=n;const u=wc(l,r,n);return e?.data?.resourceOptions?.autoLoad||(yield o.load()),u})(),load:(n,e)=>(0,Nn.Z)(function*(){return(yield ne.ADAPTER.fetch(n)).text()})(),unload:wl.unload};function Lu(n,e,r,o,l){const u=e[r];for(let d=0;d<u.length;d++){const y=u[d];r<e.length-1?Lu(n.replace(o[r],y),e,r+1,o,l):l.push(n.replace(o[r],y))}}function am(n){const r=n.match(/\{(.*?)\}/g),o=[];if(r){const l=[];r.forEach(u=>{const d=u.substring(1,u.length-1).split(",");l.push(d)}),Lu(n,l,0,r,o)}else o.push(n);return o}ut.add(dp);class lm{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if("string"==typeof e)this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(o=>`${encodeURIComponent(o)}=${encodeURIComponent(r[o])}`).join("&")}}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const o=[];Array.isArray(r)?r.forEach(l=>{if("string"==typeof l.name){const u=this._createBundleAssetId(e,l.name);o.push(u),this.add([l.name,u],l.srcs,l.data)}else{const u=l.name.map(d=>this._createBundleAssetId(e,d));u.forEach(d=>{o.push(d)}),this.add([...l.name,...u],l.srcs)}}):Object.keys(r).forEach(l=>{o.push(this._createBundleAssetId(e,l)),this.add([l,this._createBundleAssetId(e,l)],r[l])}),this._bundles[e]=o}add(e,r,o){const l=Eo(e);l.forEach(d=>{this.hasKey(d)&&console.warn(`[Resolver] already has key: ${d} overwriting`)}),Array.isArray(r)||(r="string"==typeof r?am(r):[r]);const u=r.map(d=>{let y=d;if("string"==typeof d){let M=!1;for(let O=0;O<this._parsers.length;O++){const B=this._parsers[O];if(B.test(d)){y=B.parse(d),M=!0;break}}M||(y={src:d})}return y.format||(y.format=y.src.split(".").pop()),y.alias||(y.alias=l),(this._basePath||this._rootPath)&&(y.src=St.toAbsolute(y.src,this._basePath,this._rootPath)),y.src=this._appendDefaultSearchParams(y.src),y.data=y.data??o,y});l.forEach(d=>{this._assetMap[d]=u})}resolveBundle(e){const r=Au(e);e=Eo(e);const o={};return e.forEach(l=>{const u=this._bundles[l];if(u){const d=this.resolve(u),y={};for(const M in d){const O=d[M];y[this._extractAssetIdFromBundle(l,M)]=O}o[l]=y}}),r?o[e[0]]:o}resolveUrl(e){const r=this.resolve(e);if("string"!=typeof e){const o={};for(const l in r)o[l]=r[l].src;return o}return r.src}resolve(e){const r=Au(e);e=Eo(e);const o={};return e.forEach(l=>{if(!this._resolverHash[l])if(this._assetMap[l]){let u=this._assetMap[l];const d=this._getPreferredOrder(u),y=u[0];d?.priority.forEach(M=>{d.params[M].forEach(O=>{const B=u.filter(G=>!!G[M]&&G[M]===O);B.length&&(u=B)})}),this._resolverHash[l]=u[0]??y}else{let u=l;(this._basePath||this._rootPath)&&(u=St.toAbsolute(u,this._basePath,this._rootPath)),u=this._appendDefaultSearchParams(u),this._resolverHash[l]={src:u}}o[l]=this._resolverHash[l]}),r?o[e[0]]:o}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const o=e[0],l=this._preferredOrder.find(u=>u.params.format.includes(o.format));if(l)return l}return this._preferredOrder[0]}_appendDefaultSearchParams(e){return this._defaultSearchParams?`${e}${/\?/.test(e)?"&":"?"}${this._defaultSearchParams}`:e}}const pa=new class Dl{constructor(){this._detections=[],this._initialized=!1,this.resolver=new lm,this.loader=new sm,this.cache=Ya,this._backgroundLoader=new Bo(this.loader),this._backgroundLoader.active=!0,this.reset()}init(e={}){var r=this;return(0,Nn.Z)(function*(){if(r._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(r._initialized=!0,e.defaultSearchParams&&r.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(r.resolver.basePath=e.basePath),e.bundleIdentifier&&r.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let d=e.manifest;"string"==typeof d&&(d=yield r.load(d)),r.resolver.addManifest(d)}const o=e.texturePreference?.resolution??1,l="number"==typeof o?[o]:o;let u=[];if(e.texturePreference?.format){const d=e.texturePreference?.format;u="string"==typeof d?[d]:d;for(const y of r._detections)(yield y.test())||(u=yield y.remove(u))}else for(const d of r._detections)(yield d.test())&&(u=yield d.add(u));r.resolver.prefer({params:{format:u,resolution:l}})})()}add(e,r,o){this.resolver.add(e,r,o)}load(e,r){var o=this;return(0,Nn.Z)(function*(){o._initialized||(yield o.init());const l=Au(e),u=Eo(e).map(M=>"string"!=typeof M?(o.resolver.add(M.src,M),M.src):(o.resolver.hasKey(M)||o.resolver.add(M,M),M)),d=o.resolver.resolve(u),y=yield o._mapLoadToResolve(d,r);return l?y[u[0]]:y})()}addBundle(e,r){this.resolver.addBundle(e,r)}loadBundle(e,r){var o=this;return(0,Nn.Z)(function*(){o._initialized||(yield o.init());let l=!1;"string"==typeof e&&(l=!0,e=[e]);const u=o.resolver.resolveBundle(e),d={},y=Object.keys(u);let M=0,O=0;const B=()=>{r?.(++M/O)},G=y.map($=>{const le=u[$];return O+=Object.keys(le).length,o._mapLoadToResolve(le,B).then(pe=>{d[$]=pe})});return yield Promise.all(G),l?d[e[0]]:d})()}backgroundLoad(e){var r=this;return(0,Nn.Z)(function*(){r._initialized||(yield r.init()),"string"==typeof e&&(e=[e]);const o=r.resolver.resolve(e);r._backgroundLoader.add(Object.values(o))})()}backgroundLoadBundle(e){var r=this;return(0,Nn.Z)(function*(){r._initialized||(yield r.init()),"string"==typeof e&&(e=[e]);const o=r.resolver.resolveBundle(e);Object.values(o).forEach(l=>{r._backgroundLoader.add(Object.values(l))})})()}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return Ya.get(e);const r={};for(let o=0;o<e.length;o++)r[o]=Ya.get(e[o]);return r}_mapLoadToResolve(e,r){var o=this;return(0,Nn.Z)(function*(){const l=Object.values(e),u=Object.keys(e);o._backgroundLoader.active=!1;const d=yield o.loader.load(l,r);o._backgroundLoader.active=!0;const y={};return l.forEach((M,O)=>{const B=d[M.src],G=[M.src];M.alias&&G.push(...M.alias),y[u[O]]=B,Ya.set(G,B)}),y})()}unload(e){var r=this;return(0,Nn.Z)(function*(){r._initialized||(yield r.init());const o=Eo(e).map(u=>"string"!=typeof u?u.src:u),l=r.resolver.resolve(o);yield r._unloadFromResolved(l)})()}unloadBundle(e){var r=this;return(0,Nn.Z)(function*(){r._initialized||(yield r.init()),e=Eo(e);const o=r.resolver.resolveBundle(e),l=Object.keys(o).map(u=>r._unloadFromResolved(o[u]));yield Promise.all(l)})()}_unloadFromResolved(e){var r=this;return(0,Nn.Z)(function*(){const o=Object.values(e);o.forEach(l=>{Ya.remove(l.src)}),yield r.loader.unload(o)})()}get detections(){return this._detections}get preferWorkers(){return wl.config.preferWorkers}set preferWorkers(e){wl.config.preferWorkers=e}};ut.handleByList(oe.LoadParser,pa.loader.parsers).handleByList(oe.ResolveParser,pa.resolver.parsers).handleByList(oe.CacheParser,pa.cache.parsers).handleByList(oe.DetectionParser,pa.detections);const hd={extension:oe.CacheParser,test:n=>Array.isArray(n)&&n.every(e=>e instanceof qt),getCacheableAssets:(n,e)=>{const r={};return n.forEach(o=>{e.forEach((l,u)=>{r[o+(0===u?"":u+1)]=l})}),r}};ut.add(hd);const dd={extension:{type:oe.DetectionParser,priority:1},test:(n=(0,Nn.Z)(function*(){if(!globalThis.createImageBitmap)return!1;const r=yield ne.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then(o=>o.blob());return createImageBitmap(r).then(()=>!0,()=>!1)}),function(){return n.apply(this,arguments)}),add:function(){var n=(0,Nn.Z)(function*(e){return[...e,"avif"]});return function(r){return n.apply(this,arguments)}}(),remove:function(){var n=(0,Nn.Z)(function*(e){return e.filter(r=>"avif"!==r)});return function(r){return n.apply(this,arguments)}}()};var n;ut.add(dd);const fd={extension:{type:oe.DetectionParser,priority:0},test:function(){var n=(0,Nn.Z)(function*(){if(!globalThis.createImageBitmap)return!1;const r=yield ne.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then(o=>o.blob());return createImageBitmap(r).then(()=>!0,()=>!1)});return function(){return n.apply(this,arguments)}}(),add:function(){var n=(0,Nn.Z)(function*(e){return[...e,"webp"]});return function(r){return n.apply(this,arguments)}}(),remove:function(){var n=(0,Nn.Z)(function*(e){return e.filter(r=>"webp"!==r)});return function(r){return n.apply(this,arguments)}}()};ut.add(fd);const pd=["png","jpg","jpeg"],fp={extension:{type:oe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:function(){var n=(0,Nn.Z)(function*(e){return[...e,...pd]});return function(r){return n.apply(this,arguments)}}(),remove:function(){var n=(0,Nn.Z)(function*(e){return e.filter(r=>!pd.includes(r))});return function(r){return n.apply(this,arguments)}}()};ut.add(fp);const gd={extension:oe.ResolveParser,test:wl.test,parse:n=>({resolution:parseFloat(ne.RETINA_PREFIX.exec(n)?.[1]??"1"),format:n.split(".").pop(),src:n})};ut.add(gd);const Dc=(n,e)=>{const r=e.split("?")[1];return r&&(n+=`?${r}`),n};var ts=(n=>(n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n))(ts||{});const Nu={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let eo,Xa;function Cc(){Xa={s3tc:eo.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:eo.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:eo.getExtension("WEBGL_compressed_texture_etc"),etc1:eo.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:eo.getExtension("WEBGL_compressed_texture_pvrtc")||eo.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:eo.getExtension("WEBGL_compressed_texture_atc"),astc:eo.getExtension("WEBGL_compressed_texture_astc")}}const md={extension:{type:oe.DetectionParser,priority:2},test:function(){var n=(0,Nn.Z)(function*(){const r=ne.ADAPTER.createCanvas().getContext("webgl");return r?(eo=r,!0):(console.warn("WebGL not available for compressed textures."),!1)});return function(){return n.apply(this,arguments)}}(),add:function(){var n=(0,Nn.Z)(function*(e){Xa||Cc();const r=[];for(const o in Xa)Xa[o]&&r.push(o);return[...r,...e]});return function(r){return n.apply(this,arguments)}}(),remove:function(){var n=(0,Nn.Z)(function*(e){return Xa||Cc(),e.filter(r=>!(r in Xa))});return function(r){return n.apply(this,arguments)}}()};ut.add(md);class _d extends Fn{constructor(e,r={width:1,height:1,autoLoad:!0}){let o,l;"string"==typeof e?(o=e,l=new Uint8Array):(o=null,l=e),super(l,r),this.origin=o,this.buffer=l?new nn(l):null,this.origin&&!1!==r.autoLoad&&this.load(),l?.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){var e=this;return(0,Nn.Z)(function*(){const l=yield(yield(yield fetch(e.origin)).blob()).arrayBuffer();return e.data=new Uint32Array(l),e.buffer=new nn(l),e.loaded=!0,e.onBlobLoaded(l),e.update(),e})()}}class Is extends _d{constructor(e,r){super(e,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=Is._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||Is._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,r,o){const l=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let d=0,y=this.levels;d<y;d++){const{levelID:M,levelWidth:O,levelHeight:B,levelBuffer:G}=this._levelBuffers[d];l.compressedTexImage2D(l.TEXTURE_2D,M,this.format,O,B,0,G)}return!0}onBlobLoaded(){this._levelBuffers=Is._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,r,o,l,u,d,y){const M=new Array(o);let O=e.byteOffset,B=d,G=y,$=B+l-1&~(l-1),le=G+u-1&~(u-1),pe=$*le*Nu[r];for(let ze=0;ze<o;ze++)M[ze]={levelID:ze,levelWidth:o>1?B:$,levelHeight:o>1?G:le,levelBuffer:new Uint8Array(e.buffer,O,pe)},O+=pe,B=B>>1||1,G=G>>1||1,$=B+l-1&~(l-1),le=G+u-1&~(u-1),pe=$*le*Nu[r];return M}}const ga_HEIGHT=3,ga_WIDTH=4,ga_MIPMAP_COUNT=7,ga_PIXEL_FORMAT=19,ma_FOURCC=2,Cl_DXGI_FORMAT=0,Cl_RESOURCE_DIMENSION=1,Cl_MISC_FLAG=2,Cl_ARRAY_SIZE=3,cm={827611204:ts.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:ts.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:ts.COMPRESSED_RGBA_S3TC_DXT5_EXT},bp={70:ts.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:ts.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:ts.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:ts.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:ts.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:ts.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:ts.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:ts.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:ts.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT},wd=[171,75,84,88,32,49,49,187,13,10,26,10],qa=67305985,ns={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Gu=64,Vu={[ce.UNSIGNED_BYTE]:1,[ce.UNSIGNED_SHORT]:2,[ce.INT]:4,[ce.UNSIGNED_INT]:4,[ce.FLOAT]:4,[ce.HALF_FLOAT]:8},wp={[ee.RGBA]:4,[ee.RGB]:3,[ee.RG]:2,[ee.RED]:1,[ee.LUMINANCE]:1,[ee.LUMINANCE_ALPHA]:2,[ee.ALPHA]:1},Dp={[ce.UNSIGNED_SHORT_4_4_4_4]:2,[ce.UNSIGNED_SHORT_5_5_5_1]:2,[ce.UNSIGNED_SHORT_5_6_5]:2};function xp(n){switch(n){case ee.RGBA:return ee.RGBA_INTEGER;case ee.RGB:return ee.RGB_INTEGER;case ee.RG:return ee.RG_INTEGER;case ee.RED:return ee.RED_INTEGER;default:return n}}const zu={extension:{type:oe.LoadParser,priority:Uo.High},test:n=>Qo(n,".dds"),load:(n,e,r)=>(0,Nn.Z)(function*(){const d=function xl(n){const e=new Uint32Array(n);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");const o=new Uint32Array(n,0,124/Uint32Array.BYTES_PER_ELEMENT),l=o[ga_HEIGHT],u=o[ga_WIDTH],d=o[ga_MIPMAP_COUNT],y=new Uint32Array(n,ga_PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),M=y[1];if(4&M){const O=y[ma_FOURCC];if(808540228!==O){const rt=cm[O],xn=new Uint8Array(n,128);return[new Is(xn,{format:rt,width:u,height:l,levels:d})]}const G=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),$=G[Cl_DXGI_FORMAT],le=G[Cl_RESOURCE_DIMENSION],pe=G[Cl_MISC_FLAG],ze=G[Cl_ARRAY_SIZE],qe=bp[$];if(void 0===qe)throw new Error(`DDSParser cannot parse texture data with DXGI format ${$}`);if(4===pe)throw new Error("DDSParser does not support cubemap textures");if(6===le)throw new Error("DDSParser does not supported 3D texture data");const ot=new Array,Pt=148;if(1===ze)ot.push(new Uint8Array(n,Pt));else{const rt=Nu[qe];let Dt=0,xn=u,En=l;for(let Zt=0;Zt<d;Zt++)Dt+=Math.max(1,xn+3&-4)*Math.max(1,En+3&-4)*rt,xn>>>=1,En>>>=1;let Xt=Pt;for(let Zt=0;Zt<ze;Zt++)ot.push(new Uint8Array(n,Xt,Dt)),Xt+=Dt}return ot.map(rt=>new Is(rt,{format:qe,width:u,height:l,levels:d}))}throw 64&M?new Error("DDSParser does not support uncompressed texture data."):512&M?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&M?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&M?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}(yield(yield ne.ADAPTER.fetch(n)).arrayBuffer()).map(y=>wc(new kt(y,{mipmap:Ae.OFF,alphaMode:it.NO_PREMULTIPLIED_ALPHA,resolution:_e(n),...e.data}),r,n));return 1===d.length?d[0]:d})(),unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};ut.add(zu);const Tp={extension:{type:oe.LoadParser,priority:Uo.High},test:n=>Qo(n,".ktx"),load:(n,e,r)=>(0,Nn.Z)(function*(){const l=yield(yield ne.ADAPTER.fetch(n)).arrayBuffer(),{compressed:u,uncompressed:d,kvData:y}=function Cp(n,e,r=!1){const o=new DataView(e);if(!function Dd(n,e){for(let r=0;r<wd.length;r++)if(e.getUint8(r)!==wd[r])return console.error(`${n} is not a valid *.ktx file!`),!1;return!0}(n,o))return null;const l=o.getUint32(ns.ENDIANNESS,!0)===qa,u=o.getUint32(ns.GL_TYPE,l),d=o.getUint32(ns.GL_FORMAT,l),y=o.getUint32(ns.GL_INTERNAL_FORMAT,l),M=o.getUint32(ns.PIXEL_WIDTH,l),O=o.getUint32(ns.PIXEL_HEIGHT,l)||1,B=o.getUint32(ns.PIXEL_DEPTH,l)||1,G=o.getUint32(ns.NUMBER_OF_ARRAY_ELEMENTS,l)||1,$=o.getUint32(ns.NUMBER_OF_FACES,l),le=o.getUint32(ns.NUMBER_OF_MIPMAP_LEVELS,l),pe=o.getUint32(ns.BYTES_OF_KEY_VALUE_DATA,l);if(0===O||1!==B)throw new Error("Only 2D textures are supported");if(1!==$)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==G)throw new Error("WebGL does not support array textures");const ot=M+3&-4,Pt=O+3&-4,rt=new Array(G);let xn,Dt=M*O;if(0===u&&(Dt=ot*Pt),xn=0!==u?Vu[u]?Vu[u]*wp[d]:Dp[u]:Nu[y],void 0===xn)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const En=r?function ju(n,e,r){const o=new Map;let l=0;for(;l<e;){const u=n.getUint32(Gu+l,r),d=Gu+l+4,y=3-(u+3)%4;if(0===u||u>e-l){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let M=0;for(;M<u&&0!==n.getUint8(d+M);M++);if(-1===M){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const O=(new TextDecoder).decode(new Uint8Array(n.buffer,d,M)),B=new DataView(n.buffer,d+M+1,u-M-1);o.set(O,B),l+=4+u+y}return o}(o,pe,l):null;let Zt=Dt*xn,Vn=M,jt=O,cn=ot,ni=Pt,Bt=Gu+pe;for(let Ht=0;Ht<le;Ht++){const Fi=o.getUint32(Bt,l);let jn=Bt+4;for(let Kn=0;Kn<G;Kn++){let Hi=rt[Kn];Hi||(Hi=rt[Kn]=new Array(le)),Hi[Ht]={levelID:Ht,levelWidth:le>1||0!==u?Vn:cn,levelHeight:le>1||0!==u?jt:ni,levelBuffer:new Uint8Array(e,jn,Zt)},jn+=Zt}Bt+=Fi+4,Bt=Bt%4!=0?Bt+4-Bt%4:Bt,Vn=Vn>>1||1,jt=jt>>1||1,cn=Vn+4-1&-4,ni=jt+4-1&-4,Zt=cn*ni*xn}return 0!==u?{uncompressed:rt.map(Ht=>{let Fi=Ht[0].levelBuffer,jn=!1;return u===ce.FLOAT?Fi=new Float32Array(Ht[0].levelBuffer.buffer,Ht[0].levelBuffer.byteOffset,Ht[0].levelBuffer.byteLength/4):u===ce.UNSIGNED_INT?(jn=!0,Fi=new Uint32Array(Ht[0].levelBuffer.buffer,Ht[0].levelBuffer.byteOffset,Ht[0].levelBuffer.byteLength/4)):u===ce.INT&&(jn=!0,Fi=new Int32Array(Ht[0].levelBuffer.buffer,Ht[0].levelBuffer.byteOffset,Ht[0].levelBuffer.byteLength/4)),{resource:new Fn(Fi,{width:Ht[0].levelWidth,height:Ht[0].levelHeight}),type:u,format:jn?xp(d):d}}),kvData:En}:{compressed:rt.map(Ht=>new Is(null,{format:y,width:M,height:O,levels:le,levelBuffers:Ht})),kvData:En}}(n,l),M=u??d,O={mipmap:Ae.OFF,alphaMode:it.NO_PREMULTIPLIED_ALPHA,resolution:_e(n),...e.data},B=M.map(G=>{M===d&&Object.assign(O,{type:G.type,format:G.format});const $=new kt(G,O);return $.ktxKeyValueData=y,wc($,r,n)});return 1===B.length?B[0]:B})(),unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};ut.add(Tp);const $u={extension:oe.ResolveParser,test:n=>{const r=n.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(r)},parse:n=>{if("ktx"===n.split("?")[0].split(".").pop()){const o=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(o.some(l=>n.endsWith(l)))return{resolution:parseFloat(ne.RETINA_PREFIX.exec(n)?.[1]??"1"),format:o.find(l=>n.endsWith(l)),src:n}}return{resolution:parseFloat(ne.RETINA_PREFIX.exec(n)?.[1]??"1"),format:n.split(".").pop(),src:n}}};ut.add($u);const Tl=new Gn,Wu=class{constructor(n){this.renderer=n}image(n,e,r){var o=this;return(0,Nn.Z)(function*(){const l=new Image;return l.src=yield o.base64(n,e,r),l})()}base64(n,e,r){var o=this;return(0,Nn.Z)(function*(){const l=o.canvas(n);if(void 0!==l.toDataURL)return l.toDataURL(e,r);if(void 0!==l.convertToBlob){const u=yield l.convertToBlob({type:e,quality:r});return yield new Promise(d=>{const y=new FileReader;y.onload=()=>d(y.result),y.readAsDataURL(u)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")})()}canvas(n,e){const{pixels:r,width:o,height:l,flipY:u}=this._rawPixels(n,e);let d=new Zs(o,l,1);const y=d.context.getImageData(0,0,o,l);if(Wu.arrayPostDivide(r,y.data),d.context.putImageData(y,0,0),u){const M=new Zs(d.width,d.height,1);M.context.scale(1,-1),M.context.drawImage(d.canvas,0,-l),d.destroy(),d=M}return d.canvas}pixels(n,e){const{pixels:r}=this._rawPixels(n,e);return Wu.arrayPostDivide(r,r),r}_rawPixels(n,e){const r=this.renderer;let o,u,l=!1,d=!1;if(n)if(n instanceof yr)u=n;else{const G=r.context.webGLVersion>=2?r.multisample:st.NONE;if(u=this.renderer.generateTexture(n,{multisample:G}),G!==st.NONE){const $=yr.create({width:u.width,height:u.height});r.framebuffer.bind(u.framebuffer),r.framebuffer.blit($.framebuffer),r.framebuffer.bind(null),u.destroy(!0),u=$}d=!0}u?(o=u.baseTexture.resolution,e=e??u.frame,l=!1,r.renderTexture.bind(u)):(o=r.resolution,e||((e=Tl).width=r.width,e.height=r.height),l=!0,r.renderTexture.bind(null));const y=Math.round(e.width*o),M=Math.round(e.height*o),O=new Uint8Array(4*y*M),B=r.gl;return B.readPixels(Math.round(e.x*o),Math.round(e.y*o),y,M,B.RGBA,B.UNSIGNED_BYTE,O),d&&u.destroy(!0),{pixels:O,width:y,height:M,flipY:l}}destroy(){this.renderer=null}static arrayPostDivide(n,e){for(let r=0;r<n.length;r+=4){const o=e[r+3]=n[r+3];0!==o?(e[r]=Math.round(Math.min(255*n[r]/o,255)),e[r+1]=Math.round(Math.min(255*n[r+1]/o,255)),e[r+2]=Math.round(Math.min(255*n[r+2]/o,255))):(e[r]=n[r],e[r+1]=n[r+1],e[r+2]=n[r+2])}}};let Cd=Wu;Cd.extension={name:"extract",type:oe.RendererSystem},ut.add(Cd);const Sl={build(n){const e=n.points;let r,o,l,u,d,y;if(n.type===oi.CIRC){const pe=n.shape;r=pe.x,o=pe.y,d=y=pe.radius,l=u=0}else if(n.type===oi.ELIP){const pe=n.shape;r=pe.x,o=pe.y,d=pe.width,y=pe.height,l=u=0}else{const pe=n.shape,ze=pe.width/2,qe=pe.height/2;r=pe.x+ze,o=pe.y+qe,d=y=Math.max(0,Math.min(pe.radius,Math.min(ze,qe))),l=ze-d,u=qe-y}if(!(d>=0&&y>=0&&l>=0&&u>=0))return void(e.length=0);const M=Math.ceil(2.3*Math.sqrt(d+y)),O=8*M+(l?4:0)+(u?4:0);if(e.length=O,0===O)return;if(0===M)return e.length=8,e[0]=e[6]=r+l,e[1]=e[3]=o+u,e[2]=e[4]=r-l,void(e[5]=e[7]=o-u);let B=0,G=4*M+(l?2:0)+2,$=G,le=O;{const pe=l+d,ze=u,qe=r+pe,ot=r-pe,Pt=o+ze;if(e[B++]=qe,e[B++]=Pt,e[--G]=Pt,e[--G]=ot,u){const rt=o-ze;e[$++]=ot,e[$++]=rt,e[--le]=rt,e[--le]=qe}}for(let pe=1;pe<M;pe++){const ze=Math.PI/2*(pe/M),qe=l+Math.cos(ze)*d,ot=u+Math.sin(ze)*y,Pt=r+qe,rt=r-qe,Dt=o+ot,xn=o-ot;e[B++]=Pt,e[B++]=Dt,e[--G]=Dt,e[--G]=rt,e[$++]=rt,e[$++]=xn,e[--le]=xn,e[--le]=Pt}{const ze=u+y,qe=r+l,ot=r-l,Pt=o+ze,rt=o-ze;e[B++]=qe,e[B++]=Pt,e[--le]=rt,e[--le]=qe,l&&(e[B++]=ot,e[B++]=Pt,e[--le]=rt,e[--le]=ot)}},triangulate(n,e){const r=n.points,o=e.points,l=e.indices;if(0===r.length)return;let u=o.length/2;const d=u;let y,M;if(n.type!==oi.RREC){const B=n.shape;y=B.x,M=B.y}else{const B=n.shape;y=B.x+B.width/2,M=B.y+B.height/2}const O=n.matrix;o.push(n.matrix?O.a*y+O.c*M+O.tx:y,n.matrix?O.b*y+O.d*M+O.ty:M),u++,o.push(r[0],r[1]);for(let B=2;B<r.length;B+=2)o.push(r[B],r[B+1]),l.push(u++,d,u);l.push(d+1,d,u)}};function xd(n,e=!1){const r=n.length;if(r<6)return;let o=0;for(let l=0,u=n[r-2],d=n[r-1];l<r;l+=2){const y=n[l],M=n[l+1];o+=(y-u)*(M+d),u=y,d=M}if(!e&&o>0||e&&o<=0){const l=r/2;for(let u=l+l%2;u<r;u+=2){const d=r-u-2,y=r-u-1,M=u,O=u+1;[n[d],n[M]]=[n[M],n[d]],[n[y],n[O]]=[n[O],n[y]]}}}const Tc={build(n){n.points=n.shape.points.slice()},triangulate(n,e){let r=n.points;const o=n.holes,l=e.points,u=e.indices;if(r.length>=6){xd(r,!1);const d=[];for(let O=0;O<o.length;O++){const B=o[O];xd(B.points,!0),d.push(r.length/2),r=r.concat(B.points)}const y=Ue(r,d,2);if(!y)return;const M=l.length/2;for(let O=0;O<y.length;O+=3)u.push(y[O]+M),u.push(y[O+1]+M),u.push(y[O+2]+M);for(let O=0;O<r.length;O++)l.push(r[O])}}},Td={build(n){const e=n.shape,r=e.x,o=e.y,l=e.width,u=e.height,d=n.points;d.length=0,l>=0&&u>=0&&d.push(r,o,r+l,o,r+l,o+u,r,o+u)},triangulate(n,e){const r=n.points,o=e.points;if(0===r.length)return;const l=o.length/2;o.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(l,l+1,l+2,l+1,l+2,l+3)}},_a={build(n){Sl.build(n)},triangulate(n,e){Sl.triangulate(n,e)}};var xr=(n=>(n.MITER="miter",n.BEVEL="bevel",n.ROUND="round",n))(xr||{}),ya=(n=>(n.BUTT="butt",n.ROUND="round",n.SQUARE="square",n))(ya||{});const Qa={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(n,e=20){if(!this.adaptive||!n||isNaN(n))return e;let r=Math.ceil(n/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class Sd{static curveTo(e,r,o,l,u,d){const O=d[d.length-1]-r,B=d[d.length-2]-e,G=l-r,$=o-e,le=Math.abs(O*$-B*G);if(le<1e-8||0===u)return(d[d.length-2]!==e||d[d.length-1]!==r)&&d.push(e,r),null;const pe=O*O+B*B,ze=G*G+$*$,qe=O*G+B*$,ot=u*Math.sqrt(pe)/le,Pt=u*Math.sqrt(ze)/le,rt=ot*qe/pe,Dt=Pt*qe/ze,xn=ot*$+Pt*B,En=ot*G+Pt*O,Vn=$*(ot+Dt),jt=G*(ot+Dt);return{cx:xn+e,cy:En+r,radius:u,startAngle:Math.atan2(O*(Pt+rt)-En,B*(Pt+rt)-xn),endAngle:Math.atan2(jt-En,Vn-xn),anticlockwise:B*G>$*O}}static arc(e,r,o,l,u,d,y,M,O){const B=y-d,G=Qa._segmentsCount(Math.abs(B)*u,40*Math.ceil(Math.abs(B)/fo)),$=B/(2*G),le=2*$,pe=Math.cos($),ze=Math.sin($),qe=G-1,ot=qe%1/qe;for(let Pt=0;Pt<=qe;++Pt){const Dt=$+d+le*(Pt+ot*Pt),xn=Math.cos(Dt),En=-Math.sin(Dt);O.push((pe*xn+ze*En)*u+o,(pe*-En+ze*xn)*u+l)}}}class Al{static curveLength(e,r,o,l,u,d,y,M){let B=0,G=0,$=0,le=0,pe=0,ze=0,qe=0,ot=0,Pt=0,rt=0,Dt=0,xn=e,En=r;for(let Xt=1;Xt<=10;++Xt)G=Xt/10,$=G*G,le=$*G,pe=1-G,ze=pe*pe,qe=ze*pe,ot=qe*e+3*ze*G*o+3*pe*$*u+le*y,Pt=qe*r+3*ze*G*l+3*pe*$*d+le*M,rt=xn-ot,Dt=En-Pt,xn=ot,En=Pt,B+=Math.sqrt(rt*rt+Dt*Dt);return B}static curveTo(e,r,o,l,u,d,y){const M=y[y.length-2],O=y[y.length-1];y.length-=2;const B=Qa._segmentsCount(Al.curveLength(M,O,e,r,o,l,u,d));let G=0,$=0,le=0,pe=0,ze=0;y.push(M,O);for(let qe=1,ot=0;qe<=B;++qe)ot=qe/B,G=1-ot,$=G*G,le=$*G,pe=ot*ot,ze=pe*ot,y.push(le*M+3*$*ot*e+3*G*pe*o+ze*u,le*O+3*$*ot*r+3*G*pe*l+ze*d)}}function Ap(n,e,r,o,l,u,d,y){let $,le;return d?($=o,le=-r):($=-o,le=r),y.push(n-r*l+$,e-o*l+le,n+r*u+$,e+o*u+le),2}function Jo(n,e,r,o,l,u,d,y){const M=r-n,O=o-e;let B=Math.atan2(M,O),G=Math.atan2(l-n,u-e);y&&B<G?B+=2*Math.PI:!y&&B>G&&(G+=2*Math.PI);let $=B;const le=G-B,pe=Math.abs(le),ze=Math.sqrt(M*M+O*O),qe=1+(15*pe*Math.sqrt(ze)/Math.PI>>0),ot=le/qe;if($+=ot,y){d.push(n,e,r,o);for(let Pt=1,rt=$;Pt<qe;Pt++,rt+=ot)d.push(n,e,n+Math.sin(rt)*ze,e+Math.cos(rt)*ze);d.push(n,e,l,u)}else{d.push(r,o,n,e);for(let Pt=1,rt=$;Pt<qe;Pt++,rt+=ot)d.push(n+Math.sin(rt)*ze,e+Math.cos(rt)*ze,n,e);d.push(l,u,n,e)}return 2*qe}function Sc(n,e){n.lineStyle.native?function Mp(n,e){let r=0;const o=n.shape,l=n.points||o.points,u=o.type!==oi.POLY||o.closeStroke;if(0===l.length)return;const d=e.points,y=e.indices,M=l.length/2,O=d.length/2;let B=O;for(d.push(l[0],l[1]),r=1;r<M;r++)d.push(l[2*r],l[2*r+1]),y.push(B,B+1),B++;u&&y.push(B,O)}(n,e):function Ad(n,e){const r=n.shape;let o=n.points||r.points.slice();const l=e.closePointEps;if(0===o.length)return;const u=n.lineStyle,d=new Rn(o[0],o[1]),y=new Rn(o[o.length-2],o[o.length-1]),M=r.type!==oi.POLY||r.closeStroke,O=Math.abs(d.x-y.x)<l&&Math.abs(d.y-y.y)<l;if(M){o=o.slice(),O&&(o.pop(),o.pop(),y.set(o[o.length-2],o[o.length-1]));const Kn=.5*(d.x+y.x),Hi=.5*(y.y+d.y);o.unshift(Kn,Hi),o.push(Kn,Hi)}const B=e.points,G=o.length/2;let $=o.length;const le=B.length/2,pe=u.width/2,ze=pe*pe,qe=u.miterLimit*u.miterLimit;let ot=o[0],Pt=o[1],rt=o[2],Dt=o[3],xn=0,En=0,Xt=-(Pt-Dt),Zt=ot-rt,Vn=0,jt=0,cn=Math.sqrt(Xt*Xt+Zt*Zt);Xt/=cn,Zt/=cn,Xt*=pe,Zt*=pe;const ni=u.alignment,Bt=2*(1-ni),Ht=2*ni;M||(u.cap===ya.ROUND?$+=Jo(ot-Xt*(Bt-Ht)*.5,Pt-Zt*(Bt-Ht)*.5,ot-Xt*Bt,Pt-Zt*Bt,ot+Xt*Ht,Pt+Zt*Ht,B,!0)+2:u.cap===ya.SQUARE&&($+=Ap(ot,Pt,Xt,Zt,Bt,Ht,!0,B))),B.push(ot-Xt*Bt,Pt-Zt*Bt,ot+Xt*Ht,Pt+Zt*Ht);for(let Kn=1;Kn<G-1;++Kn){ot=o[2*(Kn-1)],Pt=o[2*(Kn-1)+1],rt=o[2*Kn],Dt=o[2*Kn+1],xn=o[2*(Kn+1)],En=o[2*(Kn+1)+1],Xt=-(Pt-Dt),Zt=ot-rt,cn=Math.sqrt(Xt*Xt+Zt*Zt),Xt/=cn,Zt/=cn,Xt*=pe,Zt*=pe,Vn=-(Dt-En),jt=rt-xn,cn=Math.sqrt(Vn*Vn+jt*jt),Vn/=cn,jt/=cn,Vn*=pe,jt*=pe;const Hi=rt-ot,fi=Pt-Dt,Ul=rt-xn,Hl=En-Dt,Zd=Hi*Ul+fi*Hl,Bc=fi*Ul-Hl*Hi,Gl=Bc<0;if(Math.abs(Bc)<.001*Math.abs(Zd)){B.push(rt-Xt*Bt,Dt-Zt*Bt,rt+Xt*Ht,Dt+Zt*Ht),Zd>=0&&($+=u.join===xr.ROUND?Jo(rt,Dt,rt-Xt*Bt,Dt-Zt*Bt,rt-Vn*Bt,Dt-jt*Bt,B,!1)+4:2,B.push(rt-Vn*Ht,Dt-jt*Ht,rt+Vn*Bt,Dt+jt*Bt));continue}const qd=(-Xt+ot)*(-Zt+Dt)-(-Xt+rt)*(-Zt+Pt),dh=(-Vn+xn)*(-jt+Dt)-(-Vn+rt)*(-jt+En),il=(Hi*dh-Ul*qd)/Bc,Uc=(Hl*qd-fi*dh)/Bc,Hc=(il-rt)*(il-rt)+(Uc-Dt)*(Uc-Dt),wa=rt+(il-rt)*Bt,Da=Dt+(Uc-Dt)*Bt,Ca=rt-(il-rt)*Ht,xa=Dt-(Uc-Dt)*Ht,qp=Math.min(Hi*Hi+fi*fi,Ul*Ul+Hl*Hl),Qd=Gl?Bt:Ht;let Vl=u.join;if(Vl===xr.MITER&&Hc/ze>qe&&(Vl=xr.BEVEL),Hc<=qp+Qd*Qd*ze)switch(Vl){case xr.MITER:B.push(wa,Da,Ca,xa);break;case xr.BEVEL:Gl?B.push(wa,Da,rt+Xt*Ht,Dt+Zt*Ht,wa,Da,rt+Vn*Ht,Dt+jt*Ht):B.push(rt-Xt*Bt,Dt-Zt*Bt,Ca,xa,rt-Vn*Bt,Dt-jt*Bt,Ca,xa),$+=2;break;case xr.ROUND:Gl?(B.push(wa,Da,rt+Xt*Ht,Dt+Zt*Ht),$+=Jo(rt,Dt,rt+Xt*Ht,Dt+Zt*Ht,rt+Vn*Ht,Dt+jt*Ht,B,!0)+4,B.push(wa,Da,rt+Vn*Ht,Dt+jt*Ht)):(B.push(rt-Xt*Bt,Dt-Zt*Bt,Ca,xa),$+=Jo(rt,Dt,rt-Xt*Bt,Dt-Zt*Bt,rt-Vn*Bt,Dt-jt*Bt,B,!1)+4,B.push(rt-Vn*Bt,Dt-jt*Bt,Ca,xa))}else{switch(B.push(rt-Xt*Bt,Dt-Zt*Bt,rt+Xt*Ht,Dt+Zt*Ht),Vl){case xr.MITER:Gl?B.push(Ca,xa,Ca,xa):B.push(wa,Da,wa,Da),$+=2;break;case xr.ROUND:$+=Gl?Jo(rt,Dt,rt+Xt*Ht,Dt+Zt*Ht,rt+Vn*Ht,Dt+jt*Ht,B,!0)+2:Jo(rt,Dt,rt-Xt*Bt,Dt-Zt*Bt,rt-Vn*Bt,Dt-jt*Bt,B,!1)+2}B.push(rt-Vn*Bt,Dt-jt*Bt,rt+Vn*Ht,Dt+jt*Ht),$+=2}}ot=o[2*(G-2)],Pt=o[2*(G-2)+1],rt=o[2*(G-1)],Dt=o[2*(G-1)+1],Xt=-(Pt-Dt),Zt=ot-rt,cn=Math.sqrt(Xt*Xt+Zt*Zt),Xt/=cn,Zt/=cn,Xt*=pe,Zt*=pe,B.push(rt-Xt*Bt,Dt-Zt*Bt,rt+Xt*Ht,Dt+Zt*Ht),M||(u.cap===ya.ROUND?$+=Jo(rt-Xt*(Bt-Ht)*.5,Dt-Zt*(Bt-Ht)*.5,rt-Xt*Bt,Dt-Zt*Bt,rt+Xt*Ht,Dt+Zt*Ht,B,!1)+2:u.cap===ya.SQUARE&&($+=Ap(rt,Dt,Xt,Zt,Bt,Ht,!1,B)));const Fi=e.indices,jn=Qa.epsilon*Qa.epsilon;for(let Kn=le;Kn<$+le-2;++Kn)ot=B[2*Kn],Pt=B[2*Kn+1],rt=B[2*(Kn+1)],Dt=B[2*(Kn+1)+1],xn=B[2*(Kn+2)],En=B[2*(Kn+2)+1],!(Math.abs(ot*(Dt-En)+rt*(En-Pt)+xn*(Pt-Dt))<jn)&&Fi.push(Kn,Kn+1,Kn+2)}(n,e)}class Ac{static curveLength(e,r,o,l,u,d){const y=e-2*o+u,M=r-2*l+d,O=2*o-2*e,B=2*l-2*r,G=4*(y*y+M*M),$=4*(y*O+M*B),le=O*O+B*B,pe=2*Math.sqrt(G+$+le),ze=Math.sqrt(G),qe=2*G*ze,ot=2*Math.sqrt(le),Pt=$/ze;return(qe*pe+ze*$*(pe-ot)+(4*le*G-$*$)*Math.log((2*ze+Pt+pe)/(Pt+ot)))/(4*qe)}static curveTo(e,r,o,l,u){const d=u[u.length-2],y=u[u.length-1],M=Qa._segmentsCount(Ac.curveLength(d,y,e,r,o,l));let O=0,B=0;for(let G=1;G<=M;++G){const $=G/M;O=d+(e-d)*$,B=y+(r-y)*$,u.push(O+(e+(o-e)*$-O)*$,B+(r+(l-r)*$-B)*$)}}}const Mc={[oi.POLY]:Tc,[oi.CIRC]:Sl,[oi.ELIP]:Sl,[oi.RECT]:Td,[oi.RREC]:_a},Rs=[],Ml=[];class Il{constructor(e,r=null,o=null,l=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=o,this.fillStyle=r,this.matrix=l,this.type=e.type}clone(){return new Il(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class Md{constructor(){this.reset()}begin(e,r,o){this.reset(),this.style=e,this.start=r,this.attribStart=o}end(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const Ja=new Rn,Id=class extends Mi{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new gl,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),Ml.push(this.drawCalls[n]);this.drawCalls.length=0;for(let n=0;n<this.batches.length;n++){const e=this.batches[n];e.reset(),Rs.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(n,e=null,r=null,o=null){const l=new Il(n,e,r,o);return this.graphicsData.push(l),this.dirty++,this}drawHole(n,e=null){if(!this.graphicsData.length)return null;const r=new Il(n,null,null,e),o=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=o.lineStyle,o.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(n){const e=this.graphicsData;for(let r=0;r<e.length;++r){const o=e[r];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(n,Ja):Ja.copyFrom(n),o.shape.contains(Ja.x,Ja.y))){let l=!1;if(o.holes)for(let u=0;u<o.holes.length;u++)if(o.holes[u].shape.contains(Ja.x,Ja.y)){l=!0;break}if(!l)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const n=this.uvs,e=this.graphicsData;let r=null,o=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],o=r.style);for(let y=this.shapeIndex;y<e.length;y++){this.shapeIndex++;const M=e[y],O=M.fillStyle,B=M.lineStyle;Mc[M.type].build(M),M.matrix&&this.transformPoints(M.points,M.matrix),(O.visible||B.visible)&&this.processHoles(M.holes);for(let $=0;$<2;$++){const le=0===$?O:B;if(!le.visible)continue;const ze=this.indices.length,qe=this.points.length/2;le.texture.baseTexture.wrapMode=Pe.REPEAT,0===$?this.processFill(M):this.processLine(M);const ot=this.points.length/2-qe;0!==ot&&(r&&!this._compareStyles(o,le)&&(r.end(ze,qe),r=null),r||(r=Rs.pop()||new Md,r.begin(le,ze,qe),this.batches.push(r),o=le),this.addUvs(this.points,n,le.texture,qe,ot,le.matrix))}}const u=this.points.length/2;if(r&&r.end(this.indices.length,u),0===this.batches.length)return void(this.batchable=!0);const d=u>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&d===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=d?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(n,e){return!(!n||!e||n.texture.baseTexture!==e.texture.baseTexture||n.color+n.alpha!==e.color+e.alpha||!!n.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let n=0,e=this.graphicsData.length;n<e;n++){const r=this.graphicsData[n],o=r.fillStyle,l=r.lineStyle;if(o&&!o.texture.baseTexture.valid||l&&!l.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const n=this.batches;for(let e=0,r=n.length;e<r;e++){const o=n[e];for(let l=0;l<o.size;l++){const u=o.start+l;this.indicesUint16[u]=this.indicesUint16[u]-o.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const n=this.batches;for(let e=0;e<n.length;e++)if(n[e].style.native)return!1;return this.points.length<2*Id.BATCHABLE_SIZE}buildDrawCalls(){let n=++kt._globalBatch;for(let B=0;B<this.drawCalls.length;B++)this.drawCalls[B].texArray.clear(),Ml.push(this.drawCalls[B]);this.drawCalls.length=0;const e=this.colors,r=this.textureIds;let o=Ml.pop();o||(o=new yi,o.texArray=new Oo),o.texArray.count=0,o.start=0,o.size=0,o.type=ae.TRIANGLES;let l=0,u=null,d=0,y=!1,M=ae.TRIANGLES,O=0;this.drawCalls.push(o);for(let B=0;B<this.batches.length;B++){const G=this.batches[B],$=8,le=G.style,pe=le.texture.baseTexture;y!==!!le.native&&(y=!!le.native,M=y?ae.LINES:ae.TRIANGLES,u=null,l=$,n++),u!==pe&&(u=pe,pe._batchEnabled!==n&&(l===$&&(n++,l=0,o.size>0&&(o=Ml.pop(),o||(o=new yi,o.texArray=new Oo),this.drawCalls.push(o)),o.start=O,o.size=0,o.texArray.count=0,o.type=M),pe.touched=1,pe._batchEnabled=n,pe._batchLocation=l,pe.wrapMode=Pe.REPEAT,o.texArray.elements[o.texArray.count++]=pe,l++)),o.size+=G.size,O+=G.size,d=pe._batchLocation,this.addColors(e,le.color,le.alpha,G.attribSize,G.attribStart),this.addTextureIds(r,d,G.attribSize,G.attribStart)}kt._globalBatch=n,this.packAttributes()}packAttributes(){const n=this.points,e=this.uvs,r=this.colors,o=this.textureIds,l=new ArrayBuffer(3*n.length*4),u=new Float32Array(l),d=new Uint32Array(l);let y=0;for(let M=0;M<n.length/2;M++)u[y++]=n[2*M],u[y++]=n[2*M+1],u[y++]=e[2*M],u[y++]=e[2*M+1],d[y++]=r[M],u[y++]=o[M];this._buffer.update(l),this._indexBuffer.update(this.indicesUint16)}processFill(n){n.holes.length?Tc.triangulate(n,this):Mc[n.type].triangulate(n,this)}processLine(n){Sc(n,this);for(let e=0;e<n.holes.length;e++)Sc(n.holes[e],this)}processHoles(n){for(let e=0;e<n.length;e++){const r=n[e];Mc[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const n=this._bounds;n.clear(),n.addVertexData(this.points,0,this.points.length),n.pad(this.boundsPadding,this.boundsPadding)}transformPoints(n,e){for(let r=0;r<n.length/2;r++){const o=n[2*r],l=n[2*r+1];n[2*r]=e.a*o+e.c*l+e.tx,n[2*r+1]=e.b*o+e.d*l+e.ty}}addColors(n,e,r,o,l=0){const d=Us((e>>16)+(65280&e)+((255&e)<<16),r);n.length=Math.max(n.length,l+o);for(let y=0;y<o;y++)n[l+y]=d}addTextureIds(n,e,r,o=0){n.length=Math.max(n.length,o+r);for(let l=0;l<r;l++)n[o+l]=e}addUvs(n,e,r,o,l,u=null){let d=0;const y=e.length,M=r.frame;for(;d<l;){let B=n[2*(o+d)],G=n[2*(o+d)+1];if(u){const $=u.a*B+u.c*G+u.tx;G=u.b*B+u.d*G+u.ty,B=$}d++,e.push(B/M.width,G/M.height)}const O=r.baseTexture;(M.width<O.width||M.height<O.height)&&this.adjustUvs(e,r,y,l)}adjustUvs(n,e,r,o){const l=e.baseTexture,u=1e-6,d=r+2*o,y=e.frame,M=y.width/l.width,O=y.height/l.height;let B=y.x/y.width,G=y.y/y.height,$=Math.floor(n[r]+u),le=Math.floor(n[r+1]+u);for(let pe=r+2;pe<d;pe+=2)$=Math.min($,Math.floor(n[pe]+u)),le=Math.min(le,Math.floor(n[pe+1]+u));B-=$,G-=le;for(let pe=r;pe<d;pe+=2)n[pe]=(n[pe]+B)*M,n[pe+1]=(n[pe+1]+G)*O}};let Rd=Id;Rd.BATCHABLE_SIZE=100;class Rl{constructor(){this.color=16777215,this.alpha=1,this.texture=qt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Rl;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=qt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Yu extends Rl{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=ya.BUTT,this.join=xr.MITER,this.miterLimit=10}clone(){const e=new Yu;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Ip=new Float32Array(3),Xu={},kn=class extends Ms{constructor(n=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Rl,this._lineStyle=new Yu,this._matrix=null,this._holeMode=!1,this.state=j.for2d(),this._geometry=n||new Rd,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=he.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new kn(this._geometry)}set blendMode(n){this.state.blendMode=n}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(n){this._tint=n}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(n=null,e=0,r=1,o=.5,l=!1){return"number"==typeof n&&(n={width:n,color:e,alpha:r,alignment:o,native:l}),this.lineTextureStyle(n)}lineTextureStyle(n){n=Object.assign({width:0,texture:qt.WHITE,color:n?.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ya.BUTT,join:xr.MITER,miterLimit:10},n),this.currentPath&&this.startPoly();const e=n.width>0&&n.alpha>0;return e?(n.matrix&&(n.matrix=n.matrix.clone(),n.matrix.invert()),Object.assign(this._lineStyle,{visible:e},n)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const n=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new po,this.currentPath.closeStroke=!1,this.currentPath.points.push(n[e-2],n[e-1]))}else this.currentPath=new po,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(n,e){return this.startPoly(),this.currentPath.points[0]=n,this.currentPath.points[1]=e,this}lineTo(n,e){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points;return(r[r.length-2]!==n||r[r.length-1]!==e)&&r.push(n,e),this}_initCurve(n=0,e=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[n,e]):this.moveTo(n,e)}quadraticCurveTo(n,e,r,o){this._initCurve();const l=this.currentPath.points;return 0===l.length&&this.moveTo(0,0),Ac.curveTo(n,e,r,o,l),this}bezierCurveTo(n,e,r,o,l,u){return this._initCurve(),Al.curveTo(n,e,r,o,l,u,this.currentPath.points),this}arcTo(n,e,r,o,l){this._initCurve(n,e);const d=Sd.curveTo(n,e,r,o,l,this.currentPath.points);if(d){const{cx:y,cy:M,radius:O,startAngle:B,endAngle:G,anticlockwise:$}=d;this.arc(y,M,O,B,G,$)}return this}arc(n,e,r,o,l,u=!1){if(o===l)return this;if(!u&&l<=o?l+=fo:u&&o<=l&&(o+=fo),l-o==0)return this;const y=n+Math.cos(o)*r,M=e+Math.sin(o)*r,O=this._geometry.closePointEps;let B=this.currentPath?this.currentPath.points:null;if(B){const G=Math.abs(B[B.length-2]-y),$=Math.abs(B[B.length-1]-M);G<O&&$<O||B.push(y,M)}else this.moveTo(y,M),B=this.currentPath.points;return Sd.arc(y,M,n,e,r,o,l,u,B),this}beginFill(n=0,e=1){return this.beginTextureFill({texture:qt.WHITE,color:n,alpha:e})}beginTextureFill(n){n=Object.assign({texture:qt.WHITE,color:16777215,alpha:1,matrix:null},n),this.currentPath&&this.startPoly();const e=n.alpha>0;return e?(n.matrix&&(n.matrix=n.matrix.clone(),n.matrix.invert()),Object.assign(this._fillStyle,{visible:e},n)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(n,e,r,o){return this.drawShape(new Gn(n,e,r,o))}drawRoundedRect(n,e,r,o,l){return this.drawShape(new ol(n,e,r,o,l))}drawCircle(n,e,r){return this.drawShape(new Pa(n,e,r))}drawEllipse(n,e,r,o){return this.drawShape(new Ro(n,e,r,o))}drawPolygon(...n){let e,r=!0;const o=n[0];o.points?(r=o.closeStroke,e=o.points):e=Array.isArray(n[0])?n[0]:n;const l=new po(e);return l.closeStroke=r,this.drawShape(l),this}drawShape(n){return this._holeMode?this._geometry.drawHole(n,this._matrix):this._geometry.drawShape(n,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const n=this._geometry.graphicsData;return!(1!==n.length||n[0].shape.type!==oi.RECT||n[0].matrix||n[0].holes.length||n[0].lineStyle.visible&&n[0].lineStyle.width)}_render(n){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(n)):(n.batch.flush(),this._renderDirect(n))}_populateBatches(){const n=this._geometry,e=this.blendMode,r=n.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=n.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(n.points);for(let o=0;o<r;o++){const l=n.batches[o],u=l.style.color,d=new Float32Array(this.vertexData.buffer,4*l.attribStart*2,2*l.attribSize),y=new Float32Array(n.uvsFloat32.buffer,4*l.attribStart*2,2*l.attribSize),O={vertexData:d,blendMode:e,indices:new Uint16Array(n.indicesUint16.buffer,2*l.start,l.size),uvs:y,_batchRGB:zn(u),_tintRGB:u,_texture:l.style.texture,alpha:l.style.alpha,worldAlpha:1};this.batches[o]=O}}_renderBatched(n){if(this.batches.length){n.batch.setObjectRenderer(n.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,r=this.batches.length;e<r;e++){const o=this.batches[e];o.worldAlpha=this.worldAlpha*o.alpha,n.plugins[this.pluginName].render(o)}}}_renderDirect(n){const e=this._resolveDirectShader(n),r=this._geometry,o=this.tint,l=this.worldAlpha,u=e.uniforms,d=r.drawCalls;u.translationMatrix=this.transform.worldTransform,u.tint[0]=(o>>16&255)/255*l,u.tint[1]=(o>>8&255)/255*l,u.tint[2]=(255&o)/255*l,u.tint[3]=l,n.shader.bind(e),n.geometry.bind(r,e),n.state.set(this.state);for(let y=0,M=d.length;y<M;y++)this._renderDrawCallDirect(n,r.drawCalls[y])}_renderDrawCallDirect(n,e){const{texArray:r,type:o,size:l,start:u}=e,d=r.count;for(let y=0;y<d;y++)n.texture.bind(r.elements[y],y);n.geometry.draw(o,l,u)}_resolveDirectShader(n){let e=this.shader;const r=this.pluginName;if(!e){if(!Xu[r]){const{maxTextures:o}=n.plugins[r],l=new Int32Array(o);for(let y=0;y<o;y++)l[y]=y;const u={tint:new Float32Array([1,1,1,1]),translationMatrix:new Oi,default:Qs.from({uSamplers:l},!0)};Xu[r]=new Ei(n.plugins[r]._shader.program,u)}e=Xu[r]}return e}_calculateBounds(){this.finishPoly();const n=this._geometry;if(!n.graphicsData.length)return;const{minX:e,minY:r,maxX:o,maxY:l}=n.bounds;this._bounds.addFrame(this.transform,e,r,o,l)}containsPoint(n){return this.worldTransform.applyInverse(n,kn._TEMP_POINT),this._geometry.containsPoint(kn._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const n=zn(this.tint,Ip);for(let e=0;e<this.batches.length;e++){const r=this.batches[e],o=r._batchRGB,y=(n[0]*o[0]*255<<16)+(n[1]*o[1]*255<<8)+(0|n[2]*o[2]*255);r._tintRGB=(y>>16)+(65280&y)+((255&y)<<16)}}}calculateVertices(){const n=this.transform._worldID;if(this._transformID===n)return;this._transformID=n;const e=this.transform.worldTransform,r=e.a,o=e.b,l=e.c,u=e.d,d=e.tx,y=e.ty,M=this._geometry.points,O=this.vertexData;let B=0;for(let G=0;G<M.length;G+=2){const $=M[G],le=M[G+1];O[B++]=r*$+l*le+d,O[B++]=u*le+o*$+y}}closePath(){const n=this.currentPath;return n&&(n.closeStroke=!0,this.finishPoly()),this}setMatrix(n){return this._matrix=n,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(n){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(n)}};let Pl=kn;Pl.curves=Qa,Pl._TEMP_POINT=new Rn;class Pd{constructor(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const Ku=new Rn,Od=new po,Zu=class extends Ms{constructor(n,e,r,o=ae.TRIANGLES){super(),this.geometry=n,this.shader=e,this.state=r||j.for2d(),this.drawMode=o,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ne.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(n){this._geometry!==n&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=n,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(n){this.shader=n}get material(){return this.shader}set blendMode(n){this.state.blendMode=n}get blendMode(){return this.state.blendMode}set roundPixels(n){this._roundPixels!==n&&(this._transformID=-1),this._roundPixels=n}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(n){this.shader.tint=n}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(n){this.shader.texture=n}_render(n){this.shader.batchable&&this.drawMode===ae.TRIANGLES&&this.geometry.buffers[0].data.length<2*Zu.BATCHABLE_SIZE?this._renderToBatch(n):this._renderDefault(n)}_renderDefault(n){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),n.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),n.shader.bind(e),n.state.set(this.state),n.geometry.bind(this.geometry,e),n.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(n){const e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const o=this.material.pluginName;n.batch.setObjectRenderer(n.plugins[o]),n.plugins[o].render(this)}calculateVertices(){const e=this.geometry.buffers[0],r=e.data,o=e._updateID;if(o===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const l=this.transform.worldTransform,u=l.a,d=l.b,y=l.c,M=l.d,O=l.tx,B=l.ty,G=this.vertexData;for(let $=0;$<G.length/2;$++){const le=r[2*$],pe=r[2*$+1];G[2*$]=u*le+y*pe+O,G[2*$+1]=d*le+M*pe+B}if(this._roundPixels){const $=ne.RESOLUTION;for(let le=0;le<G.length;++le)G[le]=Math.round(G[le]*$)/$}this.vertexDirty=o}calculateUvs(){const n=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=n.data:(this.batchUvs||(this.batchUvs=new Pd(n,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(n){if(!this.getBounds().contains(n.x,n.y))return!1;this.worldTransform.applyInverse(n,Ku);const e=this.geometry.getBuffer("aVertexPosition").data,r=Od.points,o=this.geometry.getIndex().data,l=o.length,u=4===this.drawMode?3:1;for(let d=0;d+2<l;d+=u){const y=2*o[d],M=2*o[d+1],O=2*o[d+2];if(r[0]=e[y],r[1]=e[y+1],r[2]=e[M],r[3]=e[M+1],r[4]=e[O],r[5]=e[O+1],Od.contains(Ku.x,Ku.y))return!0}return!1}destroy(n){super.destroy(n),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let qu=Zu;qu.BATCHABLE_SIZE=100;class Fd extends Ui{constructor(e,r,o){super();const l=new At(e),u=new At(r,!0),d=new At(o,!0,!0);this.addAttribute("aVertexPosition",l,2,!1,ce.FLOAT).addAttribute("aTextureCoord",u,2,!1,ce.FLOAT).addIndex(d),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class Fp extends Ei{constructor(e,r){const o={uSampler:e,alpha:1,uTextureMatrix:Oi.IDENTITY,uColor:new Float32Array([1,1,1,1])};(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(o,r.uniforms),super(r.program||Wr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),o),this._colorDirty=!1,this.uvMatrix=new ec(e),this.batchable=void 0===r.program,this.pluginName=r.pluginName,this.tint=r.tint,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){this._colorDirty&&(this._colorDirty=!1,Mo(this._tint,this._alpha,this.uniforms.uColor,this.texture.baseTexture.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class kp{constructor(e,r,o){this.geometry=new Ui,this.indexBuffer=null,this.size=o,this.dynamicProperties=[],this.staticProperties=[];for(let l=0;l<e.length;++l){let u=e[l];u={attributeName:u.attributeName,size:u.size,uploadFunction:u.uploadFunction,type:u.type||ce.FLOAT,offset:u.offset},r[l]?this.dynamicProperties.push(u):this.staticProperties.push(u)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let r=0;this.indexBuffer=new At(function oa(n,e=null){const r=6*n;if((e=e||new Uint16Array(r)).length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let o=0,l=0;o<r;o+=6,l+=4)e[o+0]=l+0,e[o+1]=l+1,e[o+2]=l+2,e[o+3]=l+0,e[o+4]=l+2,e[o+5]=l+3;return e}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let d=0;d<this.dynamicProperties.length;++d){const y=this.dynamicProperties[d];y.offset=r,r+=y.size,this.dynamicStride+=y.size}const o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new At(this.dynamicData,!1,!1);let l=0;this.staticStride=0;for(let d=0;d<this.staticProperties.length;++d){const y=this.staticProperties[d];y.offset=l,l+=y.size,this.staticStride+=y.size}const u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=new At(this.staticData,!0,!1);for(let d=0;d<this.dynamicProperties.length;++d){const y=this.dynamicProperties[d];e.addAttribute(y.attributeName,this.dynamicBuffer,0,y.type===ce.UNSIGNED_BYTE,y.type,4*this.dynamicStride,4*y.offset)}for(let d=0;d<this.staticProperties.length;++d){const y=this.staticProperties[d];e.addAttribute(y.attributeName,this.staticBuffer,0,y.type===ce.UNSIGNED_BYTE,y.type,4*this.staticStride,4*y.offset)}}uploadDynamic(e,r,o){for(let l=0;l<this.dynamicProperties.length;l++){const u=this.dynamicProperties[l];u.uploadFunction(e,r,o,u.type===ce.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,u.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,r,o){for(let l=0;l<this.staticProperties.length;l++){const u=this.staticProperties[l];u.uploadFunction(e,r,o,u.type===ce.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,u.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class Qu extends Vs{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Oi,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ce.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Ei.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=j.for2d()}render(e){const r=e.children,o=e._maxSize,l=e._batchSize,u=this.renderer;let d=r.length;if(0===d)return;d>o&&!e.autoResize&&(d=o);let y=e._buffers;y||(y=e._buffers=this.generateBuffers(e));const M=r[0]._texture.baseTexture,O=M.alphaMode>0;this.state.blendMode=ur(e.blendMode,O),u.state.set(this.state);const B=u.gl,G=e.worldTransform.copyTo(this.tempMatrix);G.prepend(u.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=G.toArray(!0),this.shader.uniforms.uColor=function Wo(n,e,r,o){return r=r||new Float32Array(4),o||void 0===o?(r[0]=n[0]*e,r[1]=n[1]*e,r[2]=n[2]*e):(r[0]=n[0],r[1]=n[1],r[2]=n[2]),r[3]=e,r}(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,O),this.shader.uniforms.uSampler=M,this.renderer.shader.bind(this.shader);let $=!1;for(let le=0,pe=0;le<d;le+=l,pe+=1){let ze=d-le;ze>l&&(ze=l),pe>=y.length&&y.push(this._generateOneMoreBuffer(e));const qe=y[pe];qe.uploadDynamic(r,le,ze),$=$||qe._updateID<(e._bufferUpdateIDs[pe]||0),$&&(qe._updateID=e._updateID,qe.uploadStatic(r,le,ze)),u.geometry.bind(qe.geometry),B.drawElements(B.TRIANGLES,6*ze,B.UNSIGNED_SHORT,0)}}generateBuffers(e){const r=[],o=e._maxSize,l=e._batchSize,u=e._properties;for(let d=0;d<o;d+=l)r.push(new kp(this.properties,u,l));return r}_generateOneMoreBuffer(e){return new kp(this.properties,e._properties,e._batchSize)}uploadVertices(e,r,o,l,u,d){let y=0,M=0,O=0,B=0;for(let G=0;G<o;++G){const $=e[r+G],le=$._texture,pe=$.scale.x,ze=$.scale.y,qe=le.trim,ot=le.orig;qe?(M=qe.x-$.anchor.x*ot.width,y=M+qe.width,B=qe.y-$.anchor.y*ot.height,O=B+qe.height):(y=ot.width*(1-$.anchor.x),M=ot.width*-$.anchor.x,O=ot.height*(1-$.anchor.y),B=ot.height*-$.anchor.y),l[d]=M*pe,l[d+1]=B*ze,l[d+u]=y*pe,l[d+u+1]=B*ze,l[d+2*u]=y*pe,l[d+2*u+1]=O*ze,l[d+3*u]=M*pe,l[d+3*u+1]=O*ze,d+=4*u}}uploadPosition(e,r,o,l,u,d){for(let y=0;y<o;y++){const M=e[r+y].position;l[d]=M.x,l[d+1]=M.y,l[d+u]=M.x,l[d+u+1]=M.y,l[d+2*u]=M.x,l[d+2*u+1]=M.y,l[d+3*u]=M.x,l[d+3*u+1]=M.y,d+=4*u}}uploadRotation(e,r,o,l,u,d){for(let y=0;y<o;y++){const M=e[r+y].rotation;l[d]=M,l[d+u]=M,l[d+2*u]=M,l[d+3*u]=M,d+=4*u}}uploadUvs(e,r,o,l,u,d){for(let y=0;y<o;++y){const M=e[r+y]._texture._uvs;M?(l[d]=M.x0,l[d+1]=M.y0,l[d+u]=M.x1,l[d+u+1]=M.y1,l[d+2*u]=M.x2,l[d+2*u+1]=M.y2,l[d+3*u]=M.x3,l[d+3*u+1]=M.y3,d+=4*u):(l[d]=0,l[d+1]=0,l[d+u]=0,l[d+u+1]=0,l[d+2*u]=0,l[d+2*u+1]=0,l[d+3*u]=0,l[d+3*u+1]=0,d+=4*u)}}uploadTint(e,r,o,l,u,d){for(let y=0;y<o;++y){const M=e[r+y],B=M.alpha,G=B<1&&M._texture.baseTexture.alphaMode>0?Us(M._tintRGB,B):M._tintRGB+(255*B<<24);l[d]=G,l[d+u]=G,l[d+2*u]=G,l[d+3*u]=G,d+=4*u}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Qu.extension={name:"particle",type:oe.RendererPlugin},ut.add(Qu);var Ju=(n=>(n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",n))(Ju||{});const Rc={willReadFrequently:!0},fn=class{static get experimentalLetterSpacingSupported(){let n=fn._experimentalLetterSpacingSupported;if(void 0!==n){const e=ne.ADAPTER.getCanvasRenderingContext2D().prototype;n=fn._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return n}constructor(n,e,r,o,l,u,d,y,M){this.text=n,this.style=e,this.width=r,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=d,this.maxLineWidth=y,this.fontProperties=M}static measureText(n,e,r,o=fn._canvas){r=r??e.wordWrap;const l=e.toFontString(),u=fn.measureFont(l);0===u.fontSize&&(u.fontSize=e.fontSize,u.ascent=e.fontSize);const d=o.getContext("2d",Rc);d.font=l;const M=(r?fn.wordWrap(n,e,o):n).split(/(?:\r\n|\r|\n)/),O=new Array(M.length);let B=0;for(let pe=0;pe<M.length;pe++){const ze=fn._measureText(M[pe],e.letterSpacing,d);O[pe]=ze,B=Math.max(B,ze)}let G=B+e.strokeThickness;e.dropShadow&&(G+=e.dropShadowDistance);const $=e.lineHeight||u.fontSize+e.strokeThickness;let le=Math.max($,u.fontSize+2*e.strokeThickness)+(M.length-1)*($+e.leading);return e.dropShadow&&(le+=e.dropShadowDistance),new fn(n,e,G,le,M,O,$+e.leading,B,u)}static _measureText(n,e,r){let o=!1;fn.experimentalLetterSpacingSupported&&(fn.experimentalLetterSpacing?(r.letterSpacing=`${e}px`,r.textLetterSpacing=`${e}px`,o=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let l=r.measureText(n).width;return l>0&&(o?l-=e:l+=(fn.graphemeSegmenter(n).length-1)*e),l}static wordWrap(n,e,r=fn._canvas){const o=r.getContext("2d",Rc);let l=0,u="",d="";const y=Object.create(null),{letterSpacing:M,whiteSpace:O}=e,B=fn.collapseSpaces(O),G=fn.collapseNewlines(O);let $=!B;const le=e.wordWrapWidth+M,pe=fn.tokenize(n);for(let ze=0;ze<pe.length;ze++){let qe=pe[ze];if(fn.isNewline(qe)){if(!G){d+=fn.addLine(u),$=!B,u="",l=0;continue}qe=" "}if(B){const Pt=fn.isBreakingSpace(qe),rt=fn.isBreakingSpace(u[u.length-1]);if(Pt&&rt)continue}const ot=fn.getFromCache(qe,M,y,o);if(ot>le)if(""!==u&&(d+=fn.addLine(u),u="",l=0),fn.canBreakWords(qe,e.breakWords)){const Pt=fn.wordWrapSplit(qe);for(let rt=0;rt<Pt.length;rt++){let Dt=Pt[rt],xn=Dt,En=1;for(;Pt[rt+En];){const Zt=Pt[rt+En];if(fn.canBreakChars(xn,Zt,qe,rt,e.breakWords))break;Dt+=Zt,xn=Zt,En++}rt+=En-1;const Xt=fn.getFromCache(Dt,M,y,o);Xt+l>le&&(d+=fn.addLine(u),$=!1,u="",l=0),u+=Dt,l+=Xt}}else u.length>0&&(d+=fn.addLine(u),u="",l=0),d+=fn.addLine(qe,!(ze===pe.length-1)),$=!1,u="",l=0;else ot+l>le&&($=!1,d+=fn.addLine(u),u="",l=0),(u.length>0||!fn.isBreakingSpace(qe)||$)&&(u+=qe,l+=ot)}return d+=fn.addLine(u,!1),d}static addLine(n,e=!0){return n=fn.trimRight(n),e?`${n}\n`:n}static getFromCache(n,e,r,o){let l=r[n];return"number"!=typeof l&&(l=fn._measureText(n,e,o)+e,r[n]=l),l}static collapseSpaces(n){return"normal"===n||"pre-line"===n}static collapseNewlines(n){return"normal"===n}static trimRight(n){if("string"!=typeof n)return"";for(let e=n.length-1;e>=0&&fn.isBreakingSpace(n[e]);e--)n=n.slice(0,-1);return n}static isNewline(n){return"string"==typeof n&&fn._newlines.includes(n.charCodeAt(0))}static isBreakingSpace(n,e){return"string"==typeof n&&fn._breakingSpaces.includes(n.charCodeAt(0))}static tokenize(n){const e=[];let r="";if("string"!=typeof n)return e;for(let o=0;o<n.length;o++){const l=n[o];fn.isBreakingSpace(l,n[o+1])||fn.isNewline(l)?(""!==r&&(e.push(r),r=""),e.push(l)):r+=l}return""!==r&&e.push(r),e}static canBreakWords(n,e){return e}static canBreakChars(n,e,r,o,l){return!0}static wordWrapSplit(n){return fn.graphemeSegmenter(n)}static measureFont(n){if(fn._fonts[n])return fn._fonts[n];const e={ascent:0,descent:0,fontSize:0},r=fn._canvas,o=fn._context;o.font=n;const l=fn.METRICS_STRING+fn.BASELINE_SYMBOL,u=Math.ceil(o.measureText(l).width);let d=Math.ceil(o.measureText(fn.BASELINE_SYMBOL).width);const y=Math.ceil(fn.HEIGHT_MULTIPLIER*d);if(d=d*fn.BASELINE_MULTIPLIER|0,0===u||0===y)return fn._fonts[n]=e,e;r.width=u,r.height=y,o.fillStyle="#f00",o.fillRect(0,0,u,y),o.font=n,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(l,0,d);const M=o.getImageData(0,0,u,y).data,O=M.length,B=4*u;let G=0,$=0,le=!1;for(G=0;G<d;++G){for(let pe=0;pe<B;pe+=4)if(255!==M[$+pe]){le=!0;break}if(le)break;$+=B}for(e.ascent=d-G,$=O-B,le=!1,G=y;G>d;--G){for(let pe=0;pe<B;pe+=4)if(255!==M[$+pe]){le=!0;break}if(le)break;$-=B}return e.descent=G-d,e.fontSize=e.ascent+e.descent,fn._fonts[n]=e,e}static clearMetrics(n=""){n?delete fn._fonts[n]:fn._fonts={}}static get _canvas(){if(!fn.__canvas){let n;try{const e=new OffscreenCanvas(0,0);if(e.getContext("2d",Rc)?.measureText)return fn.__canvas=e,e;n=ne.ADAPTER.createCanvas()}catch{n=ne.ADAPTER.createCanvas()}n.width=n.height=10,fn.__canvas=n}return fn.__canvas}static get _context(){return fn.__context||(fn.__context=fn._canvas.getContext("2d",Rc)),fn.__context}};let Vr=fn;Vr.METRICS_STRING="|\xc9q\xc5",Vr.BASELINE_SYMBOL="M",Vr.BASELINE_MULTIPLIER=1.4,Vr.HEIGHT_MULTIPLIER=2,Vr.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const n=new Intl.Segmenter;return e=>[...n.segment(e)].map(r=>r.segment)}return n=>[...n]})(),Vr.experimentalLetterSpacing=!1,Vr._fonts={},Vr._newlines=[10,13],Vr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const kd=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ea=class{constructor(n){this.styleID=0,this.reset(),nh(this,n,n)}clone(){const n={};return nh(n,this,ea.defaultStyle),new ea(n)}reset(){nh(this,ea.defaultStyle,ea.defaultStyle)}get align(){return this._align}set align(n){this._align!==n&&(this._align=n,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(n){this._breakWords!==n&&(this._breakWords=n,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(n){this._dropShadow!==n&&(this._dropShadow=n,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(n){this._dropShadowAlpha!==n&&(this._dropShadowAlpha=n,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(n){this._dropShadowAngle!==n&&(this._dropShadowAngle=n,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(n){this._dropShadowBlur!==n&&(this._dropShadowBlur=n,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(n){const e=th(n);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(n){this._dropShadowDistance!==n&&(this._dropShadowDistance=n,this.styleID++)}get fill(){return this._fill}set fill(n){const e=th(n);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(n){this._fillGradientType!==n&&(this._fillGradientType=n,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(n){(function Up(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0})(this._fillGradientStops,n)||(this._fillGradientStops=n,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(n){this.fontFamily!==n&&(this._fontFamily=n,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(n){this._fontSize!==n&&(this._fontSize=n,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(n){this._fontStyle!==n&&(this._fontStyle=n,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(n){this._fontVariant!==n&&(this._fontVariant=n,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(n){this._fontWeight!==n&&(this._fontWeight=n,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(n){this._letterSpacing!==n&&(this._letterSpacing=n,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(n){this._lineHeight!==n&&(this._lineHeight=n,this.styleID++)}get leading(){return this._leading}set leading(n){this._leading!==n&&(this._leading=n,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(n){this._lineJoin!==n&&(this._lineJoin=n,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(n){this._miterLimit!==n&&(this._miterLimit=n,this.styleID++)}get padding(){return this._padding}set padding(n){this._padding!==n&&(this._padding=n,this.styleID++)}get stroke(){return this._stroke}set stroke(n){const e=th(n);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(n){this._strokeThickness!==n&&(this._strokeThickness=n,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(n){this._textBaseline!==n&&(this._textBaseline=n,this.styleID++)}get trim(){return this._trim}set trim(n){this._trim!==n&&(this._trim=n,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(n){this._whiteSpace!==n&&(this._whiteSpace=n,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(n){this._wordWrap!==n&&(this._wordWrap=n,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(n){this._wordWrapWidth!==n&&(this._wordWrapWidth=n,this.styleID++)}toFontString(){const n="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let r=e.length-1;r>=0;r--){let o=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!kd.includes(o)&&(o=`"${o}"`),e[r]=o}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${n} ${e.join(",")}`}};let va=ea;function eh(n){return"number"==typeof n?Di(n):("string"==typeof n&&n.startsWith("0x")&&(n=n.replace("0x","#")),n)}function th(n){if(Array.isArray(n)){for(let e=0;e<n.length;++e)n[e]=eh(n[e]);return n}return eh(n)}function nh(n,e,r){for(const o in r)n[o]=Array.isArray(e[o])?e[o].slice():e[o]}va.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ju.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};const Hp={texture:!0,children:!1,baseTexture:!0},ih=class extends Lo{constructor(n,e,r){let o=!1;r||(r=ne.ADAPTER.createCanvas(),o=!0),r.width=3,r.height=3;const l=qt.from(r);l.orig=new Gn,l.trim=new Gn,super(l),this._ownCanvas=o,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=ih.defaultResolution??ne.RESOLUTION,this._autoResolution=ih.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=n,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return Vr.experimentalLetterSpacing}static set experimentalLetterSpacing(n){ln("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Vr.experimentalLetterSpacing=n}updateText(n){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&n)return;this._font=this._style.toFontString();const r=this.context,o=Vr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),u=o.height,d=o.lines,y=o.lineHeight,M=o.lineWidths,O=o.maxLineWidth,B=o.fontProperties;let G,$;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o.width)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,u)+2*e.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;const le=e.dropShadow?2:1;for(let pe=0;pe<le;++pe){const ze=e.dropShadow&&0===pe,qe=ze?Math.ceil(Math.max(1,u)+2*e.padding):0,ot=qe*this._resolution;if(ze){r.fillStyle="black",r.strokeStyle="black";const rt=e.dropShadowColor,Dt=zn("number"==typeof rt?rt:$o(rt)),xn=e.dropShadowBlur*this._resolution,En=e.dropShadowDistance*this._resolution;r.shadowColor=`rgba(${255*Dt[0]},${255*Dt[1]},${255*Dt[2]},${e.dropShadowAlpha})`,r.shadowBlur=xn,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*En,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*En+ot}else r.fillStyle=this._generateFillStyle(e,d,o),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let Pt=(y-B.fontSize)/2;y-B.fontSize<0&&(Pt=0);for(let rt=0;rt<d.length;rt++)G=e.strokeThickness/2,$=e.strokeThickness/2+rt*y+B.ascent+Pt,"right"===e.align?G+=O-M[rt]:"center"===e.align&&(G+=(O-M[rt])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(d[rt],G+e.padding,$+e.padding-qe,!0),e.fill&&this.drawLetterSpacing(d[rt],G+e.padding,$+e.padding-qe)}this.updateTexture()}drawLetterSpacing(n,e,r,o=!1){const u=this._style.letterSpacing;let d=!1;if(Vr.experimentalLetterSpacingSupported&&(Vr.experimentalLetterSpacing?(this.context.letterSpacing=`${u}px`,this.context.textLetterSpacing=`${u}px`,d=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===u||d)return void(o?this.context.strokeText(n,e,r):this.context.fillText(n,e,r));let y=e;const M=Vr.graphemeSegmenter(n);let O=this.context.measureText(n).width,B=0;for(let G=0;G<M.length;++G){const $=M[G];o?this.context.strokeText($,y,r):this.context.fillText($,y,r);let le="";for(let pe=G+1;pe<M.length;++pe)le+=M[pe];B=this.context.measureText(le).width,y+=O-B+u,O=B}}updateTexture(){const n=this.canvas;if(this._style.trim){const u=function v(n){const e=function g(n){const{width:e,height:r}=n,o=n.getContext("2d",{willReadFrequently:!0});if(null===o)throw new TypeError("Failed to get canvas 2D context");const u=o.getImageData(0,0,e,r).data;let d=0,y=0,M=e-1,O=r-1;for(;y<r&&ho(u,e,y);)++y;if(y===r)return Hs.EMPTY;for(;ho(u,e,O);)--O;for(;U(u,e,d,y,O);)++d;for(;U(u,e,M,y,O);)--M;return++M,++O,new Hs(d,y,M,O)}(n),{width:r,height:o}=e;let l=null;if(!e.isEmpty()){const u=n.getContext("2d");if(null===u)throw new TypeError("Failed to get canvas 2D context");l=u.getImageData(e.left,e.top,r,o)}return{width:r,height:o,data:l}}(n);u.data&&(n.width=u.width,n.height=u.height,this.context.putImageData(u.data,0,0))}const e=this._texture,r=this._style,o=r.trim?0:r.padding,l=e.baseTexture;e.trim.width=e._frame.width=n.width/this._resolution,e.trim.height=e._frame.height=n.height/this._resolution,e.trim.x=-o,e.trim.y=-o,e.orig.width=e._frame.width-2*o,e.orig.height=e._frame.height-2*o,this._onTextureUpdate(),l.setRealSize(n.width,n.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(n){this._autoResolution&&this._resolution!==n.resolution&&(this._resolution=n.resolution,this.dirty=!0),this.updateText(!0),super._render(n)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(n,e){return this.updateText(!0),-1===this._textureID&&(n=!1),super.getBounds(n,e)}getLocalBounds(n){return this.updateText(!0),super.getLocalBounds.call(this,n)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(n,e,r){const o=n.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];let l;const u=n.dropShadow?n.dropShadowDistance:0,d=n.padding||0,y=this.canvas.width/this._resolution-u-2*d,M=this.canvas.height/this._resolution-u-2*d,O=o.slice(),B=n.fillGradientStops.slice();if(!B.length){const G=O.length+1;for(let $=1;$<G;++$)B.push($/G)}if(O.unshift(o[0]),B.unshift(0),O.push(o[o.length-1]),B.push(1),n.fillGradientType===Ju.LINEAR_VERTICAL){l=this.context.createLinearGradient(y/2,d,y/2,M+d);const G=r.fontProperties.fontSize+n.strokeThickness;for(let $=0;$<e.length;$++){const le=r.lineHeight*($-1)+G,pe=r.lineHeight*$;let ze=pe;$>0&&le>pe&&(ze=(pe+le)/2);const qe=pe+G,ot=r.lineHeight*($+1);let Pt=qe;$+1<e.length&&ot<qe&&(Pt=(qe+ot)/2);const rt=(Pt-ze)/M;for(let Dt=0;Dt<O.length;Dt++){let xn=0;xn="number"==typeof B[Dt]?B[Dt]:Dt/O.length;let En=Math.min(1,Math.max(0,ze/M+xn*rt));En=Number(En.toFixed(5)),l.addColorStop(En,O[Dt])}}}else{l=this.context.createLinearGradient(d,M/2,y+d,M/2);const G=O.length+1;let $=1;for(let le=0;le<O.length;le++){let pe;pe="number"==typeof B[le]?B[le]:$/G,l.addColorStop(pe,O[le]),$++}}return l}destroy(n){"boolean"==typeof n&&(n={children:n}),n=Object.assign({},Hp,n),super.destroy(n),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(n){this.updateText(!0);const e=cs(this.scale.x)||1;this.scale.x=e*n/this._texture.orig.width,this._width=n}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(n){this.updateText(!0);const e=cs(this.scale.y)||1;this.scale.y=e*n/this._texture.orig.height,this._height=n}get style(){return this._style}set style(n){this._style=(n=n||{})instanceof va?n:new va(n),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(n){n=String(n??""),this._text!==n&&(this._text=n,this.dirty=!0)}get resolution(){return this._resolution}set resolution(n){this._autoResolution=!1,this._resolution!==n&&(this._resolution=n,this.dirty=!0)}};let Pc=ih;Pc.defaultAutoResolution=!0;class Gp{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function Bd(n,e){let r=!1;if(n?._textures?.length)for(let o=0;o<n._textures.length;o++)if(n._textures[o]instanceof qt){const l=n._textures[o].baseTexture;e.includes(l)||(e.push(l),r=!0)}return r}function Ud(n,e){if(n.baseTexture instanceof kt){const r=n.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function rh(n,e){if(n._texture&&n._texture instanceof qt){const r=n._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function dm(n,e){return e instanceof Pc&&(e.updateText(!0),!0)}function sh(n,e){if(e instanceof va){const r=e.toFontString();return Vr.measureFont(r),!0}return!1}function Vp(n,e){if(n instanceof Pc){e.includes(n.style)||e.push(n.style),e.includes(n)||e.push(n);const r=n._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function fm(n,e){return n instanceof va&&(e.includes(n)||e.push(n),!0)}const Ea=class{constructor(n){this.limiter=new Gp(Ea.uploadsPerFrame),this.renderer=n,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Vp),this.registerFindHook(fm),this.registerFindHook(Bd),this.registerFindHook(Ud),this.registerFindHook(rh),this.registerUploadHook(dm),this.registerUploadHook(sh)}upload(n){return new Promise(e=>{n&&this.add(n),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,er.system.addOnce(this.tick,this,Fo.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const n=this.queue[0];let e=!1;if(n&&!n._destroyed)for(let r=0,o=this.uploadHooks.length;r<o;r++)if(this.uploadHooks[r](this.uploadHookHelper,n)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)er.system.addOnce(this.tick,this,Fo.UTILITY);else{this.ticking=!1;const n=this.completes.slice(0);this.completes.length=0;for(let e=0,r=n.length;e<r;e++)n[e]()}}registerFindHook(n){return n&&this.addHooks.push(n),this}registerUploadHook(n){return n&&this.uploadHooks.push(n),this}add(n){for(let e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](n,this.queue);e++);if(n instanceof Ms)for(let e=n.children.length-1;e>=0;e--)this.add(n.children[e]);return this}destroy(){this.ticking&&er.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Ol=Ea;function Hd(n,e){return e instanceof kt&&(e._glTextures[n.CONTEXT_UID]||n.texture.bind(e),!0)}function Gd(n,e){if(!(e instanceof Pl))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:o}=r;for(let l=0;l<o.length;l++){const{texture:u}=o[l].style;u&&Hd(n,u.baseTexture)}return r.batchable||n.geometry.bind(r,e._resolveDirectShader(n)),!0}function jp(n,e){return n instanceof Pl&&(e.push(n),!0)}Ol.uploadsPerFrame=4,Object.defineProperties(ne,{UPLOADS_PER_FRAME:{get:()=>Ol.uploadsPerFrame,set(n){ln("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Ol.uploadsPerFrame=n}}});class Vd extends Ol{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(jp),this.registerUploadHook(Hd),this.registerUploadHook(Gd)}}Vd.extension={name:"prepare",type:oe.RendererSystem},ut.add(Vd);class ba extends Lo{constructor(e,r=!0){super(e[0]instanceof qt?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=r,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(er.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(er.shared.add(this.update,this,Fo.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const r=this.animationSpeed*e,o=this.currentFrame;if(null!==this._durations){let l=this._currentTime%1*this._durations[this.currentFrame];for(l+=r/60*1e3;l<0;)this._currentTime--,l+=this._durations[this.currentFrame];const u=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);l>=this._durations[this.currentFrame];)l-=this._durations[this.currentFrame]*u,this._currentTime+=u;this._currentTime+=l/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):o!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<o||this.animationSpeed<0&&this.currentFrame>o)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const r=[];for(let o=0;o<e.length;++o)r.push(qt.from(e[o]));return new ba(r)}static fromImages(e){const r=[];for(let o=0;o<e.length;++o)r.push(qt.from(e[o]));return new ba(r)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof qt)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let r=0;r<e.length;r++)this._textures.push(e[r].texture),this._durations.push(e[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const r=this.currentFrame;this._currentTime=e,r!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(er.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(er.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const bo=new Rn;class Fl extends Lo{constructor(e,r=100,o=100){super(e),this.tileTransform=new Ko,this._width=r,this._height=o,this.uvMatrix=this.texture.uvMatrix||new ec(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){this._bounds.addFrame(this.transform,this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))}getLocalBounds(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Gn),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,bo);const r=this._width,o=this._height,l=-r*this.anchor._x;if(bo.x>=l&&bo.x<l+r){const u=-o*this.anchor._y;if(bo.y>=u&&bo.y<u+o)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,r){const o=e instanceof qt?e:qt.from(e,r);return new Fl(o,r.width,r.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var ah="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const tl=new Oi;class Fc extends Vs{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Ba,this.state=j.for2d()}contextChange(){const e=this.renderer,r={globals:e.globalUniforms};this.simpleShader=Ei.from(ah,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",r),this.shader=e.context.webGLVersion>1?Ei.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",r):Ei.from(ah,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",r)}render(e){const r=this.renderer,o=this.quad;let l=o.vertices;l[0]=l[6]=e._width*-e.anchor.x,l[1]=l[3]=e._height*-e.anchor.y,l[2]=l[4]=e._width*(1-e.anchor.x),l[5]=l[7]=e._height*(1-e.anchor.y);const u=e.uvRespectAnchor?e.anchor.x:0,d=e.uvRespectAnchor?e.anchor.y:0;l=o.uvs,l[0]=l[6]=-u,l[1]=l[3]=-d,l[2]=l[4]=1-u,l[5]=l[7]=1-d,o.invalidate();const y=e._texture,M=y.baseTexture,O=M.alphaMode>0,B=e.tileTransform.localTransform,G=e.uvMatrix;let $=M.isPowerOfTwo&&y.frame.width===M.width&&y.frame.height===M.height;$&&(M._glTextures[r.CONTEXT_UID]?$=M.wrapMode!==Pe.CLAMP:M.wrapMode===Pe.CLAMP&&(M.wrapMode=Pe.REPEAT));const le=$?this.simpleShader:this.shader,pe=y.width,ze=y.height,qe=e._width,ot=e._height;tl.set(B.a*pe/qe,B.b*pe/ot,B.c*ze/qe,B.d*ze/ot,B.tx/qe,B.ty/ot),tl.invert(),$?tl.prepend(G.mapCoord):(le.uniforms.uMapCoord=G.mapCoord.toArray(!0),le.uniforms.uClampFrame=G.uClampFrame,le.uniforms.uClampOffset=G.uClampOffset),le.uniforms.uTransform=tl.toArray(!0),le.uniforms.uColor=Mo(e.tint,e.worldAlpha,le.uniforms.uColor,O),le.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),le.uniforms.uSampler=y,r.shader.bind(le),r.geometry.bind(o),this.state.blendMode=ur(e.blendMode,O),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Fc.extension={name:"tilingSprite",type:oe.RendererPlugin},ut.add(Fc);const nl=class{constructor(n,e,r=null){this.linkedSheets=[],this._texture=n instanceof qt?n:null,this.baseTexture=n instanceof kt?n:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const o=this.baseTexture.resource;this.resolution=this._updateResolution(r||(o?o.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(n=null){const{scale:e}=this.data.meta;let r=_e(n,null);return null===r&&(r=parseFloat(e??"1")),1!==r&&this.baseTexture.setResolution(r),r}parse(){return new Promise(n=>{this._callback=n,this._batchIndex=0,this._frameKeys.length<=nl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(n){let e=n;const r=nl.BATCH_SIZE;for(;e-n<r&&e<this._frameKeys.length;){const o=this._frameKeys[e],l=this._frames[o],u=l.frame;if(u){let d=null,y=null;const M=!1!==l.trimmed&&l.sourceSize?l.sourceSize:l.frame,O=new Gn(0,0,Math.floor(M.w)/this.resolution,Math.floor(M.h)/this.resolution);d=l.rotated?new Gn(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):new Gn(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),!1!==l.trimmed&&l.spriteSourceSize&&(y=new Gn(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new qt(this.baseTexture,d,O,y,l.rotated?2:0,l.anchor),qt.addToCache(this.textures[o],o)}e++}}_processAnimations(){const n=this.data.animations||{};for(const e in n){this.animations[e]=[];for(let r=0;r<n[e].length;r++)this.animations[e].push(this.textures[n[e][r]])}}_parseComplete(){const n=this._callback;this._callback=null,this._batchIndex=0,n.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*nl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*nl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(n=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,n&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Nl=nl;Nl.BATCH_SIZE=1e3;const zp=["jpg","png","jpeg","avif","webp"];function jd(n,e,r){const o={};if(n.forEach(l=>{o[l]=e}),Object.keys(e.textures).forEach(l=>{o[l]=e.textures[l]}),!r){const l=St.dirname(n[0]);e.linkedSheets.forEach((u,d)=>{const y=jd([`${l}/${e.data.meta.related_multi_packs[d]}`],u,!0);Object.assign(o,y)})}return o}const zd={extension:oe.Asset,cache:{test:n=>n instanceof Nl,getCacheableAssets:(n,e)=>jd(n,e,!1)},resolver:{test:n=>{const r=n.split("?")[0].split("."),o=r.pop(),l=r.pop();return"json"===o&&zp.includes(l)},parse:n=>{const e=n.split(".");return{resolution:parseFloat(ne.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e[e.length-2],src:n}}},loader:{extension:{type:oe.LoadParser,priority:Uo.Normal},testParse:(n,e)=>(0,Nn.Z)(function*(){return".json"===St.extname(e.src).toLowerCase()&&!!n.frames})(),parse:(n,e,r)=>(0,Nn.Z)(function*(){let o=St.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let l=o+n.meta.image;l=Dc(l,e.src);const d=(yield r.load([l]))[l],y=new Nl(d.baseTexture,n,e.src);yield y.parse();const M=n?.meta?.related_multi_packs;if(Array.isArray(M)){const O=[];for(const G of M){if("string"!=typeof G)continue;let $=o+G;e.data?.ignoreMultiPack||($=Dc($,e.src),O.push(r.load({src:$,data:{ignoreMultiPack:!0}})))}const B=yield Promise.all(O);y.linkedSheets=B,B.forEach(G=>{G.linkedSheets=[y].concat(y.linkedSheets.filter($=>$!==G))})}return y})(),unload(n){n.destroy(!0)}}};ut.add(zd);class Lc{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class kl{static test(e){return"string"==typeof e&&e.startsWith("info face=")}static parse(e){const r=e.match(/^[a-z]+\s+.+$/gm),o={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const u in r){const d=r[u].match(/^[a-z]+/gm)[0],y=r[u].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),M={};for(const O in y){const B=y[O].split("="),G=B[0],$=B[1].replace(/"/gm,""),le=parseFloat($),pe=isNaN(le)?$:le;M[G]=pe}o[d].push(M)}const l=new Lc;return o.info.forEach(u=>l.info.push({face:u.face,size:parseInt(u.size,10)})),o.common.forEach(u=>l.common.push({lineHeight:parseInt(u.lineHeight,10)})),o.page.forEach(u=>l.page.push({id:parseInt(u.id,10),file:u.file})),o.char.forEach(u=>l.char.push({id:parseInt(u.id,10),page:parseInt(u.page,10),x:parseInt(u.x,10),y:parseInt(u.y,10),width:parseInt(u.width,10),height:parseInt(u.height,10),xoffset:parseInt(u.xoffset,10),yoffset:parseInt(u.yoffset,10),xadvance:parseInt(u.xadvance,10)})),o.kerning.forEach(u=>l.kerning.push({first:parseInt(u.first,10),second:parseInt(u.second,10),amount:parseInt(u.amount,10)})),o.distanceField.forEach(u=>l.distanceField.push({distanceRange:parseInt(u.distanceRange,10),fieldType:u.fieldType})),l}}class Nc{static test(e){const r=e;return"getElementsByTagName"in r&&r.getElementsByTagName("page").length&&null!==r.getElementsByTagName("info")[0].getAttribute("face")}static parse(e){const r=new Lc,o=e.getElementsByTagName("info"),l=e.getElementsByTagName("common"),u=e.getElementsByTagName("page"),d=e.getElementsByTagName("char"),y=e.getElementsByTagName("kerning"),M=e.getElementsByTagName("distanceField");for(let O=0;O<o.length;O++)r.info.push({face:o[O].getAttribute("face"),size:parseInt(o[O].getAttribute("size"),10)});for(let O=0;O<l.length;O++)r.common.push({lineHeight:parseInt(l[O].getAttribute("lineHeight"),10)});for(let O=0;O<u.length;O++)r.page.push({id:parseInt(u[O].getAttribute("id"),10)||0,file:u[O].getAttribute("file")});for(let O=0;O<d.length;O++){const B=d[O];r.char.push({id:parseInt(B.getAttribute("id"),10),page:parseInt(B.getAttribute("page"),10)||0,x:parseInt(B.getAttribute("x"),10),y:parseInt(B.getAttribute("y"),10),width:parseInt(B.getAttribute("width"),10),height:parseInt(B.getAttribute("height"),10),xoffset:parseInt(B.getAttribute("xoffset"),10),yoffset:parseInt(B.getAttribute("yoffset"),10),xadvance:parseInt(B.getAttribute("xadvance"),10)})}for(let O=0;O<y.length;O++)r.kerning.push({first:parseInt(y[O].getAttribute("first"),10),second:parseInt(y[O].getAttribute("second"),10),amount:parseInt(y[O].getAttribute("amount"),10)});for(let O=0;O<M.length;O++)r.distanceField.push({fieldType:M[O].getAttribute("fieldType"),distanceRange:parseInt(M[O].getAttribute("distanceRange"),10)});return r}}class ch{static test(e){return!("string"!=typeof e||!e.includes("<font>"))&&Nc.test(ne.ADAPTER.parseXML(e))}static parse(e){return Nc.parse(ne.ADAPTER.parseXML(e))}}const uh=[kl,Nc,ch];function $p(n,e,r,o,l,u,d){const y=r.text,M=r.fontProperties;e.translate(o,l),e.scale(u,u);const O=d.strokeThickness/2,B=-d.strokeThickness/2;if(e.font=d.toFontString(),e.lineWidth=d.strokeThickness,e.textBaseline=d.textBaseline,e.lineJoin=d.lineJoin,e.miterLimit=d.miterLimit,e.fillStyle=function $d(n,e,r,o,l,u){const d=r.fill;if(!Array.isArray(d))return d;if(1===d.length)return d[0];let y;const M=r.dropShadow?r.dropShadowDistance:0,O=r.padding||0,B=n.width/o-M-2*O,G=n.height/o-M-2*O,$=d.slice(),le=r.fillGradientStops.slice();if(!le.length){const pe=$.length+1;for(let ze=1;ze<pe;++ze)le.push(ze/pe)}if($.unshift(d[0]),le.unshift(0),$.push(d[d.length-1]),le.push(1),r.fillGradientType===Ju.LINEAR_VERTICAL){y=e.createLinearGradient(B/2,O,B/2,G+O);let pe=0;const qe=(u.fontProperties.fontSize+r.strokeThickness)/G;for(let ot=0;ot<l.length;ot++){const Pt=u.lineHeight*ot;for(let rt=0;rt<$.length;rt++){let Dt=0;Dt="number"==typeof le[rt]?le[rt]:rt/$.length;let En=Math.max(pe,Pt/G+Dt*qe);En=Math.min(En,1),y.addColorStop(En,$[rt]),pe=En}}}else{y=e.createLinearGradient(O,G/2,B+O,G/2);const pe=$.length+1;let ze=1;for(let qe=0;qe<$.length;qe++){let ot;ot="number"==typeof le[qe]?le[qe]:ze/pe,y.addColorStop(ot,$[qe]),ze++}}return y}(n,e,d,u,[y],r),e.strokeStyle=d.stroke,d.dropShadow){const G=d.dropShadowColor,$=zn("number"==typeof G?G:$o(G)),le=d.dropShadowBlur*u,pe=d.dropShadowDistance*u;e.shadowColor=`rgba(${255*$[0]},${255*$[1]},${255*$[2]},${d.dropShadowAlpha})`,e.shadowBlur=le,e.shadowOffsetX=Math.cos(d.dropShadowAngle)*pe,e.shadowOffsetY=Math.sin(d.dropShadowAngle)*pe}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;d.stroke&&d.strokeThickness&&e.strokeText(y,O,B+r.lineHeight-M.descent),d.fill&&e.fillText(y,O,B+r.lineHeight-M.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Wp(n){return Array.from?Array.from(n):n.split("")}function Bl(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}const to=class{constructor(n,e,r){const[o]=n.info,[l]=n.common,[u]=n.page,[d]=n.distanceField,y=_e(u.file),M={};this._ownsTextures=r,this.font=o.face,this.size=o.size,this.lineHeight=l.lineHeight/y,this.chars={},this.pageTextures=M;for(let O=0;O<n.page.length;O++){const{id:B,file:G}=n.page[O];M[B]=e instanceof Array?e[O]:e[G],d?.fieldType&&"none"!==d.fieldType&&(M[B].baseTexture.alphaMode=it.NO_PREMULTIPLIED_ALPHA,M[B].baseTexture.mipmap=Ae.OFF)}for(let O=0;O<n.char.length;O++){const{id:B,page:G}=n.char[O];let{x:$,y:le,width:pe,height:ze,xoffset:qe,yoffset:ot,xadvance:Pt}=n.char[O];$/=y,le/=y,pe/=y,ze/=y,qe/=y,ot/=y,Pt/=y;const rt=new Gn($+M[G].frame.x/y,le+M[G].frame.y/y,pe,ze);this.chars[B]={xOffset:qe,yOffset:ot,xAdvance:Pt,kerning:{},texture:new qt(M[G].baseTexture,rt),page:G}}for(let O=0;O<n.kerning.length;O++){let{first:B,second:G,amount:$}=n.kerning[O];B/=y,G/=y,$/=y,this.chars[G]&&(this.chars[G].kerning[B]=$)}this.distanceFieldRange=d?.distanceRange,this.distanceFieldType=d?.fieldType?.toLowerCase()??"none"}destroy(){for(const n in this.chars)this.chars[n].texture.destroy(),this.chars[n].texture=null;for(const n in this.pageTextures)this._ownsTextures&&this.pageTextures[n].destroy(!0),this.pageTextures[n]=null;this.chars=null,this.pageTextures=null}static install(n,e,r){let o;if(n instanceof Lc)o=n;else{const u=function Ps(n){for(let e=0;e<uh.length;e++)if(uh[e].test(n))return uh[e];return null}(n);if(!u)throw new Error("Unrecognized data format for font.");o=u.parse(n)}e instanceof qt&&(e=[e]);const l=new to(o,e,r);return to.available[l.font]=l,l}static uninstall(n){const e=to.available[n];if(!e)throw new Error(`No font found named '${n}'`);e.destroy(),delete to.available[n]}static from(n,e,r){if(!n)throw new Error("[BitmapFont] Property `name` is required.");const{chars:o,padding:l,resolution:u,textureWidth:d,textureHeight:y,...M}=Object.assign({},to.defaultOptions,r),O=function hh(n){"string"==typeof n&&(n=[n]);const e=[];for(let r=0,o=n.length;r<o;r++){const l=n[r];if(Array.isArray(l)){if(2!==l.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${l.length}.`);const u=l[0].charCodeAt(0),d=l[1].charCodeAt(0);if(d<u)throw new Error("[BitmapFont]: Invalid character range.");for(let y=u,M=d;y<=M;y++)e.push(String.fromCharCode(y))}else e.push(...Wp(l))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(o),B=e instanceof va?e:new va(e),G=d,$=new Lc;$.info[0]={face:B.fontFamily,size:B.fontSize},$.common[0]={lineHeight:B.fontSize};let ze,qe,ot,le=0,pe=0,Pt=0;const rt=[],Dt=[];for(let En=0;En<O.length;En++){ze||(ze=ne.ADAPTER.createCanvas(),ze.width=d,ze.height=y,qe=ze.getContext("2d"),ot=new kt(ze,{resolution:u,...M}),rt.push(ot),Dt.push(new qt(ot)),$.page.push({id:Dt.length-1,file:""}));const Xt=O[En],Zt=Vr.measureText(Xt,B,!1,ze),Vn=Zt.width,jt=Math.ceil(Zt.height),cn=Math.ceil(("italic"===B.fontStyle?2:1)*Vn);if(pe>=y-jt*u){if(0===pe)throw new Error(`[BitmapFont] textureHeight ${y}px is too small (fontFamily: '${B.fontFamily}', fontSize: ${B.fontSize}px, char: '${Xt}')`);--En,ze=null,qe=null,ot=null,pe=0,le=0,Pt=0;continue}if(Pt=Math.max(jt+Zt.fontProperties.descent,Pt),cn*u+le>=G){if(0===le)throw new Error(`[BitmapFont] textureWidth ${d}px is too small (fontFamily: '${B.fontFamily}', fontSize: ${B.fontSize}px, char: '${Xt}')`);--En,pe+=Pt*u,pe=Math.ceil(pe),le=0,Pt=0;continue}$p(ze,qe,Zt,le,pe,u,B);const ni=Bl(Zt.text);$.char.push({id:ni,page:Dt.length-1,x:le/u,y:pe/u,width:cn,height:jt,xoffset:0,yoffset:0,xadvance:Vn-(B.dropShadow?B.dropShadowDistance:0)-(B.stroke?B.strokeThickness:0)}),le+=(cn+2*l)*u,le=Math.ceil(le)}for(let En=0,Xt=O.length;En<Xt;En++){const Zt=O[En];for(let Vn=0;Vn<Xt;Vn++){const jt=O[Vn],cn=qe.measureText(Zt).width,ni=qe.measureText(jt).width,Ht=qe.measureText(Zt+jt).width-(cn+ni);Ht&&$.kerning.push({first:Bl(Zt),second:Bl(jt),amount:Ht})}}const xn=new to($,Dt,!0);return void 0!==to.available[n]&&to.uninstall(n),to.available[n]=xn,xn}};let ms=to;ms.ALPHA=[["a","z"],["A","Z"]," "],ms.NUMERIC=[["0","9"]],ms.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ms.ASCII=[[" ","~"]],ms.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:to.ALPHANUMERIC},ms.available={};const Yd=[],Xd=[],kc=[],Kd=class extends Ms{constructor(n,e={}){super(),this._tint=16777215;const{align:r,tint:o,maxWidth:l,letterSpacing:u,fontName:d,fontSize:y}=Object.assign({},Kd.styleDefaults,e);if(!ms.available[d])throw new Error(`Missing BitmapFont "${d}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tint=o,this._font=void 0,this._fontName=d,this._fontSize=y,this.text=n,this._maxWidth=l,this._maxLineHeight=0,this._letterSpacing=u,this._anchor=new Jr(()=>{this.dirty=!0},this,0,0),this._roundPixels=ne.ROUND_PIXELS,this.dirty=!0,this._resolution=ne.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const n=ms.available[this._fontName],e=this.fontSize,r=e/n.size,o=new Rn,l=[],u=[],d=[],M=Wp(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),O=this._maxWidth*n.size/e,B="none"===n.distanceFieldType?Yd:Xd;let G=null,$=0,le=0,pe=0,ze=-1,qe=0,ot=0,Pt=0,rt=0;for(let jt=0;jt<M.length;jt++){const cn=M[jt],ni=Bl(cn);if(/(?:\s)/.test(cn)&&(ze=jt,qe=$,rt++),"\r"===cn||"\n"===cn){u.push($),d.push(-1),le=Math.max(le,$),++pe,++ot,o.x=0,o.y+=n.lineHeight,G=null,rt=0;continue}const Bt=n.chars[ni];if(!Bt)continue;G&&Bt.kerning[G]&&(o.x+=Bt.kerning[G]);const Ht=kc.pop()||{texture:qt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Rn};Ht.texture=Bt.texture,Ht.line=pe,Ht.charCode=ni,Ht.position.x=Math.round(o.x+Bt.xOffset+this._letterSpacing/2),Ht.position.y=Math.round(o.y+Bt.yOffset),Ht.prevSpaces=rt,l.push(Ht),$=Ht.position.x+Math.max(Bt.xAdvance-Bt.xOffset,Bt.texture.orig.width),o.x+=Bt.xAdvance+this._letterSpacing,Pt=Math.max(Pt,Bt.yOffset+Bt.texture.height),G=ni,-1!==ze&&O>0&&o.x>O&&(++ot,Ss(l,1+ze-ot,1+jt-ze),jt=ze,ze=-1,u.push(qe),d.push(l.length>0?l[l.length-1].prevSpaces:0),le=Math.max(le,qe),pe++,o.x=0,o.y+=n.lineHeight,G=null,rt=0)}const Dt=M[M.length-1];"\r"!==Dt&&"\n"!==Dt&&(/(?:\s)/.test(Dt)&&($=qe),u.push($),le=Math.max(le,$),d.push(-1));const xn=[];for(let jt=0;jt<=pe;jt++){let cn=0;"right"===this._align?cn=le-u[jt]:"center"===this._align?cn=(le-u[jt])/2:"justify"===this._align&&(cn=d[jt]<0?0:(le-u[jt])/d[jt]),xn.push(cn)}const En=l.length,Xt={},Zt=[],Vn=this._activePagesMeshData;B.push(...Vn);for(let jt=0;jt<En;jt++){const cn=l[jt].texture,ni=cn.baseTexture.uid;if(!Xt[ni]){let Bt=B.pop();if(!Bt){const Fi=new Fd;let jn,Kn;"none"===n.distanceFieldType?(jn=new Fp(qt.EMPTY),Kn=he.NORMAL):(jn=new Fp(qt.EMPTY,{program:Wr.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),Kn=he.NORMAL_NPM);const Hi=new qu(Fi,jn);Hi.blendMode=Kn,Bt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Hi,vertices:null,uvs:null,indices:null}}Bt.index=0,Bt.indexCount=0,Bt.vertexCount=0,Bt.uvsCount=0,Bt.total=0;const{_textureCache:Ht}=this;Ht[ni]=Ht[ni]||new qt(cn.baseTexture),Bt.mesh.texture=Ht[ni],Bt.mesh.tint=this._tint,Zt.push(Bt),Xt[ni]=Bt}Xt[ni].total++}for(let jt=0;jt<Vn.length;jt++)Zt.includes(Vn[jt])||this.removeChild(Vn[jt].mesh);for(let jt=0;jt<Zt.length;jt++)Zt[jt].mesh.parent!==this&&this.addChild(Zt[jt].mesh);this._activePagesMeshData=Zt;for(const jt in Xt){const cn=Xt[jt],ni=cn.total;if(!(cn.indices?.length>6*ni)||cn.vertices.length<2*qu.BATCHABLE_SIZE)cn.vertices=new Float32Array(8*ni),cn.uvs=new Float32Array(8*ni),cn.indices=new Uint16Array(6*ni);else{const Ht=cn.vertices;for(let Fi=4*cn.total*2;Fi<Ht.length;Fi++)Ht[Fi]=0}cn.mesh.size=6*ni}for(let jt=0;jt<En;jt++){const cn=l[jt];let ni=cn.position.x+xn[cn.line]*("justify"===this._align?cn.prevSpaces:1);this._roundPixels&&(ni=Math.round(ni));const Bt=ni*r,Ht=cn.position.y*r,Fi=cn.texture,jn=Xt[Fi.baseTexture.uid],Kn=Fi.frame,Hi=Fi._uvs,fi=jn.index++;jn.indices[6*fi+0]=0+4*fi,jn.indices[6*fi+1]=1+4*fi,jn.indices[6*fi+2]=2+4*fi,jn.indices[6*fi+3]=0+4*fi,jn.indices[6*fi+4]=2+4*fi,jn.indices[6*fi+5]=3+4*fi,jn.vertices[8*fi+0]=Bt,jn.vertices[8*fi+1]=Ht,jn.vertices[8*fi+2]=Bt+Kn.width*r,jn.vertices[8*fi+3]=Ht,jn.vertices[8*fi+4]=Bt+Kn.width*r,jn.vertices[8*fi+5]=Ht+Kn.height*r,jn.vertices[8*fi+6]=Bt,jn.vertices[8*fi+7]=Ht+Kn.height*r,jn.uvs[8*fi+0]=Hi.x0,jn.uvs[8*fi+1]=Hi.y0,jn.uvs[8*fi+2]=Hi.x1,jn.uvs[8*fi+3]=Hi.y1,jn.uvs[8*fi+4]=Hi.x2,jn.uvs[8*fi+5]=Hi.y2,jn.uvs[8*fi+6]=Hi.x3,jn.uvs[8*fi+7]=Hi.y3}this._textWidth=le*r,this._textHeight=(o.y+n.lineHeight)*r;for(const jt in Xt){const cn=Xt[jt];if(0!==this.anchor.x||0!==this.anchor.y){let Fi=0;const jn=this._textWidth*this.anchor.x,Kn=this._textHeight*this.anchor.y;for(let Hi=0;Hi<cn.total;Hi++)cn.vertices[Fi++]-=jn,cn.vertices[Fi++]-=Kn,cn.vertices[Fi++]-=jn,cn.vertices[Fi++]-=Kn,cn.vertices[Fi++]-=jn,cn.vertices[Fi++]-=Kn,cn.vertices[Fi++]-=jn,cn.vertices[Fi++]-=Kn}this._maxLineHeight=Pt*r;const ni=cn.mesh.geometry.getBuffer("aVertexPosition"),Bt=cn.mesh.geometry.getBuffer("aTextureCoord"),Ht=cn.mesh.geometry.getIndex();ni.data=cn.vertices,Bt.data=cn.uvs,Ht.data=cn.indices,ni.update(),Bt.update(),Ht.update()}for(let jt=0;jt<l.length;jt++)kc.push(l[jt]);this._font=n,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(n){this._autoResolution&&this._resolution!==n.resolution&&(this._resolution=n.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:r,size:o}=ms.available[this._fontName];if("none"!==r){const{a:l,b:u,c:d,d:y}=this.worldTransform,M=Math.sqrt(l*l+u*u),O=Math.sqrt(d*d+y*y),B=(Math.abs(M)+Math.abs(O))/2,G=this.fontSize/o,$=n._view.resolution;for(const le of this._activePagesMeshData)le.mesh.shader.uniforms.uFWidth=B*e*G*$}super._render(n)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const n=ms.available[this._fontName];if(!n)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==n&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(n){if(this._tint!==n){this._tint=n;for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=n}}get align(){return this._align}set align(n){this._align!==n&&(this._align=n,this.dirty=!0)}get fontName(){return this._fontName}set fontName(n){if(!ms.available[n])throw new Error(`Missing BitmapFont "${n}"`);this._fontName!==n&&(this._fontName=n,this.dirty=!0)}get fontSize(){return this._fontSize??ms.available[this._fontName].size}set fontSize(n){this._fontSize!==n&&(this._fontSize=n,this.dirty=!0)}get anchor(){return this._anchor}set anchor(n){"number"==typeof n?this._anchor.set(n):this._anchor.copyFrom(n)}get text(){return this._text}set text(n){n=String(n??""),this._text!==n&&(this._text=n,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(n){this._maxWidth!==n&&(this._maxWidth=n,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(n){this._letterSpacing!==n&&(this._letterSpacing=n,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(n){n!==this._roundPixels&&(this._roundPixels=n,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(n){this._autoResolution=!1,this._resolution!==n&&(this._resolution=n,this.dirty=!0)}destroy(n){const{_textureCache:e}=this,o="none"===ms.available[this._fontName].distanceFieldType?Yd:Xd;o.push(...this._activePagesMeshData);for(const l of this._activePagesMeshData)this.removeChild(l.mesh);this._activePagesMeshData=[],o.filter(l=>e[l.mesh.texture.baseTexture.uid]).forEach(l=>{l.mesh.texture=qt.EMPTY});for(const l in e)e[l].destroy(),delete e[l];this._font=null,this._textureCache=null,super.destroy(n)}};Kd.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const Kp=[".xml",".fnt"],Zp={extension:{type:oe.LoadParser,priority:Uo.Normal},test:n=>Kp.includes(St.extname(n).toLowerCase()),testParse:n=>(0,Nn.Z)(function*(){return kl.test(n)||ch.test(n)})(),parse:(n,e,r)=>(0,Nn.Z)(function*(){const o=kl.test(n)?kl.parse(n):ch.parse(n),{src:l}=e,{page:u}=o,d=[];for(let O=0;O<u.length;++O){const B=u[O].file;let G=St.join(St.dirname(l),B);G=Dc(G,l),d.push(G)}const y=yield r.load(d),M=d.map(O=>y[O]);return ms.install(o,M,!0)})(),load:(n,e)=>(0,Nn.Z)(function*(){return(yield ne.ADAPTER.fetch(n)).text()})(),unload(n){n.destroy()}};ut.add(Zp)},5861:(Mt,ke,F)=>{"use strict";function w(ue,he,ae,ee,ve,ce,Ce){try{var Le=ue[ce](Ce),Pe=Le.value}catch(Ae){return void ae(Ae)}Le.done?he(Pe):Promise.resolve(Pe).then(ee,ve)}function D(ue){return function(){var he=this,ae=arguments;return new Promise(function(ee,ve){var ce=ue.apply(he,ae);function Ce(Pe){w(ce,ee,ve,Ce,Le,"next",Pe)}function Le(Pe){w(ce,ee,ve,Ce,Le,"throw",Pe)}Ce(void 0)})}}F.d(ke,{Z:()=>D})}},Mt=>{Mt(Mt.s=2676)}]);